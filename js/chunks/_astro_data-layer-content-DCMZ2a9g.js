const _astro_dataLayerContent = [["Map",1,2,9,10,668,669,672,673],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.16.11","content-config-digest","8453e8fb4bb0f57f","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://diesel.rs\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"where\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"static\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":false,\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[null,null,null],\"rehypePlugins\":[[null,{\"target\":\"_blank\",\"rel\":[\"nofollow\",\"noopener\",\"noreferrer\"]}],[null,{\"experimentalHeadingIdCompat\":false}],null,[null,{\"themes\":[{\"name\":\"Night Owl No Italics\",\"type\":\"dark\",\"colors\":{\"focusBorder\":\"#122d42\",\"foreground\":\"#d6deeb\",\"disabledForeground\":\"#cccccc80\",\"descriptionForeground\":\"#d6deebb3\",\"errorForeground\":\"#ef5350\",\"icon.foreground\":\"#c5c5c5\",\"contrastActiveBorder\":null,\"contrastBorder\":\"#122d42\",\"textBlockQuote.background\":\"#7f7f7f1a\",\"textBlockQuote.border\":\"#007acc80\",\"textCodeBlock.background\":\"#4f4f4f\",\"textLink.activeForeground\":\"#3794ff\",\"textLink.foreground\":\"#3794ff\",\"textPreformat.foreground\":\"#d7ba7d\",\"textSeparator.foreground\":\"#ffffff2e\",\"editor.background\":\"#23262f\",\"editor.foreground\":\"#d6deeb\",\"editorLineNumber.foreground\":\"#4b6479\",\"editorLineNumber.activeForeground\":\"#c5e4fd\",\"editorActiveLineNumber.foreground\":\"#c6c6c6\",\"editor.selectionBackground\":\"#1d3b53\",\"editor.inactiveSelectionBackground\":\"#7e57c25a\",\"editor.selectionHighlightBackground\":\"#5f7e9779\",\"editorError.foreground\":\"#ef5350\",\"editorWarning.foreground\":\"#b39554\",\"editorInfo.foreground\":\"#3794ff\",\"editorHint.foreground\":\"#eeeeeeb2\",\"problemsErrorIcon.foreground\":\"#ef5350\",\"problemsWarningIcon.foreground\":\"#b39554\",\"problemsInfoIcon.foreground\":\"#3794ff\",\"editor.findMatchBackground\":\"#5f7e9779\",\"editor.findMatchHighlightBackground\":\"#1085bb5d\",\"editor.findRangeHighlightBackground\":\"#3a3d4166\",\"editorLink.activeForeground\":\"#4e94ce\",\"editorLightBulb.foreground\":\"#ffcc00\",\"editorLightBulbAutoFix.foreground\":\"#75beff\",\"diffEditor.insertedTextBackground\":\"#99b76d23\",\"diffEditor.insertedTextBorder\":\"#c5e47833\",\"diffEditor.removedTextBackground\":\"#ef535033\",\"diffEditor.removedTextBorder\":\"#ef53504d\",\"diffEditor.insertedLineBackground\":\"#9bb95533\",\"diffEditor.removedLineBackground\":\"#ff000033\",\"editorStickyScroll.background\":\"#011627\",\"editorStickyScrollHover.background\":\"#2a2d2e\",\"editorInlayHint.background\":\"#5f7e97cc\",\"editorInlayHint.foreground\":\"#ffffff\",\"editorInlayHint.typeBackground\":\"#5f7e97cc\",\"editorInlayHint.typeForeground\":\"#ffffff\",\"editorInlayHint.parameterBackground\":\"#5f7e97cc\",\"editorInlayHint.parameterForeground\":\"#ffffff\",\"editorPane.background\":\"#011627\",\"editorGroup.emptyBackground\":\"#011627\",\"editorGroup.focusedEmptyBorder\":null,\"editorGroupHeader.tabsBackground\":\"var(--sl-color-black)\",\"editorGroupHeader.tabsBorder\":\"color-mix(in srgb, var(--sl-color-gray-5), transparent 25%)\",\"editorGroupHeader.noTabsBackground\":\"#011627\",\"editorGroupHeader.border\":null,\"editorGroup.border\":\"#011627\",\"editorGroup.dropBackground\":\"#7e57c273\",\"editorGroup.dropIntoPromptForeground\":\"#d6deeb\",\"editorGroup.dropIntoPromptBackground\":\"#021320\",\"editorGroup.dropIntoPromptBorder\":null,\"sideBySideEditor.horizontalBorder\":\"#011627\",\"sideBySideEditor.verticalBorder\":\"#011627\",\"scrollbar.shadow\":\"#010b14\",\"scrollbarSlider.background\":\"#ffffff17\",\"scrollbarSlider.hoverBackground\":\"#ffffff40\",\"scrollbarSlider.activeBackground\":\"#084d8180\",\"panel.background\":\"#011627\",\"panel.border\":\"#5f7e97\",\"panelTitle.activeBorder\":\"#5f7e97\",\"panelTitle.activeForeground\":\"#ffffffcc\",\"panelTitle.inactiveForeground\":\"#d6deeb80\",\"panelSectionHeader.background\":\"#80808051\",\"terminal.background\":\"#011627\",\"widget.shadow\":\"#011627\",\"editorWidget.background\":\"#021320\",\"editorWidget.foreground\":\"#d6deeb\",\"editorWidget.border\":\"#5f7e97\",\"quickInput.background\":\"#021320\",\"quickInput.foreground\":\"#d6deeb\",\"quickInputTitle.background\":\"#ffffff1a\",\"pickerGroup.foreground\":\"#d1aaff\",\"pickerGroup.border\":\"#011627\",\"editor.hoverHighlightBackground\":\"#7e57c25a\",\"editorHoverWidget.background\":\"#011627\",\"editorHoverWidget.foreground\":\"#d6deeb\",\"editorHoverWidget.border\":\"#5f7e97\",\"editorHoverWidget.statusBarBackground\":\"#011a2f\",\"titleBar.activeBackground\":\"var(--sl-color-black)\",\"titleBar.activeForeground\":\"var(--sl-color-text)\",\"titleBar.inactiveBackground\":\"#010e1a\",\"titleBar.inactiveForeground\":\"#eeefff99\",\"titleBar.border\":\"color-mix(in srgb, var(--sl-color-gray-5), transparent 25%)\",\"toolbar.hoverBackground\":\"#5a5d5e50\",\"toolbar.activeBackground\":\"#63666750\",\"tab.activeBackground\":\"#0b2942\",\"tab.unfocusedActiveBackground\":\"#0b2942\",\"tab.inactiveBackground\":\"#01111d\",\"tab.unfocusedInactiveBackground\":\"#01111d\",\"tab.activeForeground\":\"var(--sl-color-text)\",\"tab.inactiveForeground\":\"#5f7e97\",\"tab.unfocusedActiveForeground\":\"#5f7e97\",\"tab.unfocusedInactiveForeground\":\"#5f7e97\",\"tab.hoverBackground\":null,\"tab.unfocusedHoverBackground\":null,\"tab.hoverForeground\":null,\"tab.unfocusedHoverForeground\":null,\"tab.border\":\"#272b3b\",\"tab.lastPinnedBorder\":\"#585858\",\"tab.activeBorder\":\"transparent\",\"tab.unfocusedActiveBorder\":\"#262a39\",\"tab.activeBorderTop\":\"var(--sl-color-accent-high)\",\"tab.unfocusedActiveBorderTop\":null,\"tab.hoverBorder\":null,\"tab.unfocusedHoverBorder\":null,\"tab.activeModifiedBorder\":\"#3399cc\",\"tab.inactiveModifiedBorder\":\"#3399cc80\",\"tab.unfocusedActiveModifiedBorder\":\"#3399cc80\",\"tab.unfocusedInactiveModifiedBorder\":\"#3399cc40\",\"badge.background\":\"#5f7e97\",\"badge.foreground\":\"#ffffff\",\"button.background\":\"#7e57c2cc\",\"button.foreground\":\"#ffffffcc\",\"button.border\":\"#122d42\",\"button.separator\":\"#ffffff52\",\"button.hoverBackground\":\"#7e57c2\",\"button.secondaryBackground\":\"#3a3d41\",\"button.secondaryForeground\":\"#ffffff\",\"button.secondaryHoverBackground\":\"#46494e\",\"dropdown.background\":\"#011627\",\"dropdown.foreground\":\"#ffffffcc\",\"dropdown.border\":\"#5f7e97\",\"list.activeSelectionBackground\":\"#234d708c\",\"list.activeSelectionForeground\":\"#ffffff\",\"tree.indentGuidesStroke\":\"#585858\",\"input.background\":\"#0b253a\",\"input.foreground\":\"#ffffffcc\",\"input.placeholderForeground\":\"#5f7e97\",\"inputOption.activeBorder\":\"#ffffffcc\",\"inputOption.hoverBackground\":\"#5a5d5e80\",\"inputOption.activeBackground\":\"#122d4266\",\"inputOption.activeForeground\":\"#ffffff\",\"inputValidation.infoBackground\":\"#00589ef2\",\"inputValidation.infoBorder\":\"#64b5f6\",\"inputValidation.warningBackground\":\"#675700f2\",\"inputValidation.warningBorder\":\"#ffca28\",\"inputValidation.errorBackground\":\"#ab0300f2\",\"inputValidation.errorBorder\":\"#ef5350\",\"keybindingLabel.background\":\"#8080802b\",\"keybindingLabel.foreground\":\"#cccccc\",\"keybindingLabel.border\":\"#33333399\",\"keybindingLabel.bottomBorder\":\"#44444499\",\"menu.foreground\":\"#ffffffcc\",\"menu.background\":\"#011627\",\"menu.selectionForeground\":\"#ffffff\",\"menu.selectionBackground\":\"#234d708c\",\"menu.separatorBackground\":\"#606060\",\"editor.snippetTabstopHighlightBackground\":\"#7c7c74c\",\"editor.snippetFinalTabstopHighlightBorder\":\"#525252\",\"terminal.ansiBlack\":\"#011627\",\"terminal.ansiRed\":\"#ef5350\",\"terminal.ansiGreen\":\"#22da6e\",\"terminal.ansiYellow\":\"#c5e478\",\"terminal.ansiBlue\":\"#82aaff\",\"terminal.ansiMagenta\":\"#c792ea\",\"terminal.ansiCyan\":\"#21c7a8\",\"terminal.ansiWhite\":\"#ffffff\",\"terminal.ansiBrightBlack\":\"#575656\",\"terminal.ansiBrightRed\":\"#ef5350\",\"terminal.ansiBrightGreen\":\"#22da6e\",\"terminal.ansiBrightYellow\":\"#ffeb95\",\"terminal.ansiBrightBlue\":\"#82aaff\",\"terminal.ansiBrightMagenta\":\"#c792ea\",\"terminal.ansiBrightCyan\":\"#7fdbca\",\"terminal.ansiBrightWhite\":\"#ffffff\",\"selection.background\":\"#4373c2\",\"input.border\":\"#5f7e97\",\"punctuation.definition.generic.begin.html\":\"#ef5350f2\",\"progress.background\":\"#7e57c2\",\"breadcrumb.foreground\":\"#a599e9\",\"breadcrumb.focusForeground\":\"#ffffff\",\"breadcrumb.activeSelectionForeground\":\"#ffffff\",\"breadcrumbPicker.background\":\"#001122\",\"list.invalidItemForeground\":\"#975f94\",\"list.dropBackground\":\"#011627\",\"list.focusBackground\":\"#010d18\",\"list.focusForeground\":\"#ffffff\",\"list.highlightForeground\":\"#ffffff\",\"list.hoverBackground\":\"#011627\",\"list.hoverForeground\":\"#ffffff\",\"list.inactiveSelectionBackground\":\"#0e293f\",\"list.inactiveSelectionForeground\":\"#5f7e97\",\"activityBar.background\":\"#011627\",\"activityBar.dropBackground\":\"#5f7e97\",\"activityBar.foreground\":\"#5f7e97\",\"activityBar.border\":\"#011627\",\"activityBarBadge.background\":\"#44596b\",\"activityBarBadge.foreground\":\"#ffffff\",\"sideBar.background\":\"#011627\",\"sideBar.foreground\":\"#89a4bb\",\"sideBar.border\":\"#011627\",\"sideBarTitle.foreground\":\"#5f7e97\",\"sideBarSectionHeader.background\":\"#011627\",\"sideBarSectionHeader.foreground\":\"#5f7e97\",\"editorCursor.foreground\":\"#80a4c2\",\"editor.wordHighlightBackground\":\"#f6bbe533\",\"editor.wordHighlightStrongBackground\":\"#e2a2f433\",\"editor.lineHighlightBackground\":\"#0003\",\"editor.rangeHighlightBackground\":\"#7e57c25a\",\"editorIndentGuide.background\":\"#5e81ce52\",\"editorIndentGuide.activeBackground\":\"#7e97ac\",\"editorRuler.foreground\":\"#5e81ce52\",\"editorCodeLens.foreground\":\"#5e82ceb4\",\"editorBracketMatch.background\":\"#5f7e974d\",\"editorOverviewRuler.currentContentForeground\":\"#7e57c2\",\"editorOverviewRuler.incomingContentForeground\":\"#7e57c2\",\"editorOverviewRuler.commonContentForeground\":\"#7e57c2\",\"editorGutter.background\":\"#011627\",\"editorGutter.modifiedBackground\":\"#e2b93d\",\"editorGutter.addedBackground\":\"#9ccc65\",\"editorGutter.deletedBackground\":\"#ef5350\",\"editorSuggestWidget.background\":\"#2c3043\",\"editorSuggestWidget.border\":\"#2b2f40\",\"editorSuggestWidget.foreground\":\"#d6deeb\",\"editorSuggestWidget.highlightForeground\":\"#ffffff\",\"editorSuggestWidget.selectedBackground\":\"#5f7e97\",\"debugExceptionWidget.background\":\"#011627\",\"debugExceptionWidget.border\":\"#5f7e97\",\"editorMarkerNavigation.background\":\"#0b2942\",\"editorMarkerNavigationError.background\":\"#ef5350\",\"editorMarkerNavigationWarning.background\":\"#ffca28\",\"peekView.border\":\"#5f7e97\",\"peekViewEditor.background\":\"#011627\",\"peekViewEditor.matchHighlightBackground\":\"#7e57c25a\",\"peekViewResult.background\":\"#011627\",\"peekViewResult.fileForeground\":\"#5f7e97\",\"peekViewResult.lineForeground\":\"#5f7e97\",\"peekViewResult.matchHighlightBackground\":\"#ffffffcc\",\"peekViewResult.selectionBackground\":\"#2e3250\",\"peekViewResult.selectionForeground\":\"#5f7e97\",\"peekViewTitle.background\":\"#011627\",\"peekViewTitleDescription.foreground\":\"#697098\",\"peekViewTitleLabel.foreground\":\"#5f7e97\",\"merge.currentHeaderBackground\":\"#5f7e97\",\"merge.incomingHeaderBackground\":\"#7e57c25a\",\"statusBar.background\":\"#011627\",\"statusBar.foreground\":\"#5f7e97\",\"statusBar.border\":\"#262a39\",\"statusBar.debuggingBackground\":\"#202431\",\"statusBar.debuggingBorder\":\"#1f2330\",\"statusBar.noFolderBackground\":\"#011627\",\"statusBar.noFolderBorder\":\"#25293a\",\"statusBarItem.activeBackground\":\"#202431\",\"statusBarItem.hoverBackground\":\"#202431\",\"statusBarItem.prominentBackground\":\"#202431\",\"statusBarItem.prominentHoverBackground\":\"#202431\",\"notifications.background\":\"#01111d\",\"notifications.border\":\"#262a39\",\"notificationCenter.border\":\"#262a39\",\"notificationToast.border\":\"#262a39\",\"notifications.foreground\":\"#ffffffcc\",\"notificationLink.foreground\":\"#80cbc4\",\"extensionButton.prominentForeground\":\"#ffffffcc\",\"extensionButton.prominentBackground\":\"#7e57c2cc\",\"extensionButton.prominentHoverBackground\":\"#7e57c2\",\"terminal.selectionBackground\":\"#1b90dd4d\",\"terminalCursor.background\":\"#234d70\",\"debugToolBar.background\":\"#011627\",\"welcomePage.buttonBackground\":\"#011627\",\"welcomePage.buttonHoverBackground\":\"#011627\",\"walkThrough.embeddedEditorBackground\":\"#011627\",\"gitDecoration.modifiedResourceForeground\":\"#a2bffc\",\"gitDecoration.deletedResourceForeground\":\"#ef535090\",\"gitDecoration.untrackedResourceForeground\":\"#c5e478ff\",\"gitDecoration.ignoredResourceForeground\":\"#395a75\",\"gitDecoration.conflictingResourceForeground\":\"#ffeb95cc\",\"source.elm\":\"#5f7e97\",\"string.quoted.single.js\":\"#ffffff\",\"meta.objectliteral.js\":\"#82aaff\"},\"fg\":\"#d6deeb\",\"bg\":\"#23262f\",\"semanticHighlighting\":false,\"settings\":[{\"name\":\"Changed\",\"scope\":[\"markup.changed\",\"meta.diff.header.git\",\"meta.diff.header.from-file\",\"meta.diff.header.to-file\"],\"settings\":{\"foreground\":\"#a2bffc\"}},{\"name\":\"Deleted\",\"scope\":[\"markup.deleted.diff\"],\"settings\":{\"foreground\":\"#f27775fe\"}},{\"name\":\"Inserted\",\"scope\":[\"markup.inserted.diff\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Global settings\",\"settings\":{\"background\":\"#011627\",\"foreground\":\"#d6deeb\"}},{\"name\":\"Comment\",\"scope\":[\"comment\"],\"settings\":{\"foreground\":\"#919f9f\",\"fontStyle\":\"\"}},{\"name\":\"String\",\"scope\":[\"string\"],\"settings\":{\"foreground\":\"#ecc48d\"}},{\"name\":\"String Quoted\",\"scope\":[\"string.quoted\",\"variable.other.readwrite.js\"],\"settings\":{\"foreground\":\"#ecc48d\"}},{\"name\":\"Support Constant Math\",\"scope\":[\"support.constant.math\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Number\",\"scope\":[\"constant.numeric\",\"constant.character.numeric\"],\"settings\":{\"foreground\":\"#f78c6c\",\"fontStyle\":\"\"}},{\"name\":\"Built-in constant\",\"scope\":[\"constant.language\",\"punctuation.definition.constant\",\"variable.other.constant\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"User-defined constant\",\"scope\":[\"constant.character\",\"constant.other\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Constant Character Escape\",\"scope\":[\"constant.character.escape\"],\"settings\":{\"foreground\":\"#f78c6c\"}},{\"name\":\"RegExp String\",\"scope\":[\"string.regexp\",\"string.regexp keyword.other\"],\"settings\":{\"foreground\":\"#5ca7e4\"}},{\"name\":\"Comma in functions\",\"scope\":[\"meta.function punctuation.separator.comma\"],\"settings\":{\"foreground\":\"#889fb2\"}},{\"name\":\"Variable\",\"scope\":[\"variable\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Keyword\",\"scope\":[\"punctuation.accessor\",\"keyword\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Storage\",\"scope\":[\"storage\",\"meta.var.expr\",\"meta.class meta.method.declaration meta.var.expr storage.type.js\",\"storage.type.property.js\",\"storage.type.property.ts\",\"storage.type.property.tsx\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Storage type\",\"scope\":[\"storage.type\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Storage type\",\"scope\":[\"storage.type.function.arrow.js\"],\"settings\":{\"fontStyle\":\"\"}},{\"name\":\"Class name\",\"scope\":[\"entity.name.class\",\"meta.class entity.name.type.class\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"Inherited class\",\"scope\":[\"entity.other.inherited-class\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Function name\",\"scope\":[\"entity.name.function\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Meta Tag\",\"scope\":[\"punctuation.definition.tag\",\"meta.tag\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"HTML Tag names\",\"scope\":[\"entity.name.tag\",\"meta.tag.other.html\",\"meta.tag.other.js\",\"meta.tag.other.tsx\",\"entity.name.tag.tsx\",\"entity.name.tag.js\",\"entity.name.tag\",\"meta.tag.js\",\"meta.tag.tsx\",\"meta.tag.html\"],\"settings\":{\"foreground\":\"#caece6\",\"fontStyle\":\"\"}},{\"name\":\"Tag attribute\",\"scope\":[\"entity.other.attribute-name\"],\"settings\":{\"fontStyle\":\"\",\"foreground\":\"#c5e478\"}},{\"name\":\"Entity Name Tag Custom\",\"scope\":[\"entity.name.tag.custom\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Library (function & constant)\",\"scope\":[\"support.function\",\"support.constant\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Support Constant Property Value meta\",\"scope\":[\"support.constant.meta.property-value\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Library class/type\",\"scope\":[\"support.type\",\"support.class\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Support Variable DOM\",\"scope\":[\"support.variable.dom\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Invalid\",\"scope\":[\"invalid\"],\"settings\":{\"background\":\"#ff2c83\",\"foreground\":\"#ffffff\"}},{\"name\":\"Invalid deprecated\",\"scope\":[\"invalid.deprecated\"],\"settings\":{\"foreground\":\"#ffffff\",\"background\":\"#d3423e\"}},{\"name\":\"Keyword Operator\",\"scope\":[\"keyword.operator\"],\"settings\":{\"foreground\":\"#7fdbca\",\"fontStyle\":\"\"}},{\"name\":\"Keyword Operator Relational\",\"scope\":[\"keyword.operator.relational\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Keyword Operator Assignment\",\"scope\":[\"keyword.operator.assignment\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Keyword Operator Arithmetic\",\"scope\":[\"keyword.operator.arithmetic\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Keyword Operator Bitwise\",\"scope\":[\"keyword.operator.bitwise\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Keyword Operator Increment\",\"scope\":[\"keyword.operator.increment\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Keyword Operator Ternary\",\"scope\":[\"keyword.operator.ternary\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Double-Slashed Comment\",\"scope\":[\"comment.line.double-slash\"],\"settings\":{\"foreground\":\"#919f9f\"}},{\"name\":\"Object\",\"scope\":[\"object\"],\"settings\":{\"foreground\":\"#cdebf7\"}},{\"name\":\"Null\",\"scope\":[\"constant.language.null\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"Meta Brace\",\"scope\":[\"meta.brace\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"Meta Delimiter Period\",\"scope\":[\"meta.delimiter.period\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Punctuation Definition String\",\"scope\":[\"punctuation.definition.string\"],\"settings\":{\"foreground\":\"#d9f5dd\"}},{\"name\":\"Punctuation Definition String Markdown\",\"scope\":[\"punctuation.definition.string.begin.markdown\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"Boolean\",\"scope\":[\"constant.language.boolean\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"Object Comma\",\"scope\":[\"object.comma\"],\"settings\":{\"foreground\":\"#ffffff\"}},{\"name\":\"Variable Parameter Function\",\"scope\":[\"variable.parameter.function\"],\"settings\":{\"foreground\":\"#7fdbca\",\"fontStyle\":\"\"}},{\"name\":\"Support Type Property Name & entity name tags\",\"scope\":[\"support.type.vendor.property-name\",\"support.constant.vendor.property-value\",\"support.type.property-name\",\"meta.property-list entity.name.tag\"],\"settings\":{\"foreground\":\"#80cbc4\",\"fontStyle\":\"\"}},{\"name\":\"Entity Name tag reference in stylesheets\",\"scope\":[\"meta.property-list entity.name.tag.reference\"],\"settings\":{\"foreground\":\"#57eaf1\"}},{\"name\":\"Constant Other Color RGB Value Punctuation Definition Constant\",\"scope\":[\"constant.other.color.rgb-value punctuation.definition.constant\"],\"settings\":{\"foreground\":\"#f78c6c\"}},{\"name\":\"Constant Other Color\",\"scope\":[\"constant.other.color\"],\"settings\":{\"foreground\":\"#ffeb95\"}},{\"name\":\"Keyword Other Unit\",\"scope\":[\"keyword.other.unit\"],\"settings\":{\"foreground\":\"#ffeb95\"}},{\"name\":\"Meta Selector\",\"scope\":[\"meta.selector\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Entity Other Attribute Name Id\",\"scope\":[\"entity.other.attribute-name.id\"],\"settings\":{\"foreground\":\"#fad430\"}},{\"name\":\"Meta Property Name\",\"scope\":[\"meta.property-name\"],\"settings\":{\"foreground\":\"#80cbc4\"}},{\"name\":\"Doctypes\",\"scope\":[\"entity.name.tag.doctype\",\"meta.tag.sgml.doctype\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Punctuation Definition Parameters\",\"scope\":[\"punctuation.definition.parameters\"],\"settings\":{\"foreground\":\"#d9f5dd\"}},{\"name\":\"Keyword Control Operator\",\"scope\":[\"keyword.control.operator\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Keyword Operator Logical\",\"scope\":[\"keyword.operator.logical\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Variable Instances\",\"scope\":[\"variable.instance\",\"variable.other.instance\",\"variable.readwrite.instance\",\"variable.other.readwrite.instance\",\"variable.other.property\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Variable Property Other object property\",\"scope\":[\"variable.other.object.property\"],\"settings\":{\"foreground\":\"#faf39f\",\"fontStyle\":\"\"}},{\"name\":\"Variable Property Other object\",\"scope\":[\"variable.other.object.js\"],\"settings\":{\"fontStyle\":\"\"}},{\"name\":\"Entity Name Function\",\"scope\":[\"entity.name.function\"],\"settings\":{\"foreground\":\"#82aaff\",\"fontStyle\":\"\"}},{\"name\":\"Keyword Operator Comparison, returns, imports, and Keyword Operator Ruby\",\"scope\":[\"keyword.control.conditional.js\",\"keyword.operator.comparison\",\"keyword.control.flow.js\",\"keyword.control.flow.ts\",\"keyword.control.flow.tsx\",\"keyword.control.ruby\",\"keyword.control.def.ruby\",\"keyword.control.loop.js\",\"keyword.control.loop.ts\",\"keyword.control.import.js\",\"keyword.control.import.ts\",\"keyword.control.import.tsx\",\"keyword.control.from.js\",\"keyword.control.from.ts\",\"keyword.control.from.tsx\",\"keyword.control.conditional.js\",\"keyword.control.conditional.ts\",\"keyword.control.switch.js\",\"keyword.control.switch.ts\",\"keyword.operator.instanceof.js\",\"keyword.operator.expression.instanceof.ts\",\"keyword.operator.expression.instanceof.tsx\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Support Constant, `new` keyword, Special Method Keyword, `debugger`, other keywords\",\"scope\":[\"support.constant\",\"keyword.other.special-method\",\"keyword.other.new\",\"keyword.other.debugger\",\"keyword.control\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Support Function\",\"scope\":[\"support.function\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Invalid Broken\",\"scope\":[\"invalid.broken\"],\"settings\":{\"foreground\":\"#989da0\",\"background\":\"#F78C6C\"}},{\"name\":\"Invalid Unimplemented\",\"scope\":[\"invalid.unimplemented\"],\"settings\":{\"background\":\"#8BD649\",\"foreground\":\"#ffffff\"}},{\"name\":\"Invalid Illegal\",\"scope\":[\"invalid.illegal\"],\"settings\":{\"foreground\":\"#ffffff\",\"background\":\"#ec5f67\"}},{\"name\":\"Language Variable\",\"scope\":[\"variable.language\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Support Variable Property\",\"scope\":[\"support.variable.property\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Variable Function\",\"scope\":[\"variable.function\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Variable Interpolation\",\"scope\":[\"variable.interpolation\"],\"settings\":{\"foreground\":\"#ef787f\"}},{\"name\":\"Meta Function Call\",\"scope\":[\"meta.function-call\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Punctuation Section Embedded\",\"scope\":[\"punctuation.section.embedded\"],\"settings\":{\"foreground\":\"#e2817f\"}},{\"name\":\"Punctuation Tweaks\",\"scope\":[\"punctuation.terminator.expression\",\"punctuation.definition.arguments\",\"punctuation.definition.array\",\"punctuation.section.array\",\"meta.array\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"More Punctuation Tweaks\",\"scope\":[\"punctuation.definition.list.begin\",\"punctuation.definition.list.end\",\"punctuation.separator.arguments\",\"punctuation.definition.list\"],\"settings\":{\"foreground\":\"#d9f5dd\"}},{\"name\":\"Template Strings\",\"scope\":[\"string.template meta.template.expression\"],\"settings\":{\"foreground\":\"#e2817f\"}},{\"name\":\"Backticks(``) in Template Strings\",\"scope\":[\"string.template punctuation.definition.string\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"Italics\",\"scope\":[\"italic\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"italic\"}},{\"name\":\"Bold\",\"scope\":[\"bold\"],\"settings\":{\"foreground\":\"#c5e478\",\"fontStyle\":\"bold\"}},{\"name\":\"Quote\",\"scope\":[\"quote\"],\"settings\":{\"foreground\":\"#969bb7\",\"fontStyle\":\"\"}},{\"name\":\"Raw Code\",\"scope\":[\"raw\"],\"settings\":{\"foreground\":\"#80cbc4\"}},{\"name\":\"CoffeeScript Variable Assignment\",\"scope\":[\"variable.assignment.coffee\"],\"settings\":{\"foreground\":\"#31e1eb\"}},{\"name\":\"CoffeeScript Parameter Function\",\"scope\":[\"variable.parameter.function.coffee\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"CoffeeScript Assignments\",\"scope\":[\"variable.assignment.coffee\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"C# Readwrite Variables\",\"scope\":[\"variable.other.readwrite.cs\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"C# Classes & Storage types\",\"scope\":[\"entity.name.type.class.cs\",\"storage.type.cs\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"C# Namespaces\",\"scope\":[\"entity.name.type.namespace.cs\"],\"settings\":{\"foreground\":\"#b2ccd6\"}},{\"name\":\"C# Unquoted String Zone\",\"scope\":[\"string.unquoted.preprocessor.message.cs\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"C# Region\",\"scope\":[\"punctuation.separator.hash.cs\",\"keyword.preprocessor.region.cs\",\"keyword.preprocessor.endregion.cs\"],\"settings\":{\"foreground\":\"#ffcb8b\",\"fontStyle\":\"bold\"}},{\"name\":\"C# Other Variables\",\"scope\":[\"variable.other.object.cs\"],\"settings\":{\"foreground\":\"#b2ccd6\"}},{\"name\":\"C# Enum\",\"scope\":[\"entity.name.type.enum.cs\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Dart String\",\"scope\":[\"string.interpolated.single.dart\",\"string.interpolated.double.dart\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"Dart Class\",\"scope\":[\"support.class.dart\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"Tag names in Stylesheets\",\"scope\":[\"entity.name.tag.css\",\"entity.name.tag.less\",\"entity.name.tag.custom.css\",\"support.constant.property-value.css\"],\"settings\":{\"foreground\":\"#ff6d6d\",\"fontStyle\":\"\"}},{\"name\":\"Wildcard(*) selector in Stylesheets\",\"scope\":[\"entity.name.tag.wildcard.css\",\"entity.name.tag.wildcard.less\",\"entity.name.tag.wildcard.scss\",\"entity.name.tag.wildcard.sass\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"CSS Keyword Other Unit\",\"scope\":[\"keyword.other.unit.css\"],\"settings\":{\"foreground\":\"#ffeb95\"}},{\"name\":\"Attribute Name for CSS\",\"scope\":[\"meta.attribute-selector.css entity.other.attribute-name.attribute\",\"variable.other.readwrite.js\"],\"settings\":{\"foreground\":\"#f78c6c\"}},{\"name\":\"Elixir Classes\",\"scope\":[\"source.elixir support.type.elixir\",\"source.elixir meta.module.elixir entity.name.class.elixir\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Elixir Functions\",\"scope\":[\"source.elixir entity.name.function\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Elixir Constants\",\"scope\":[\"source.elixir constant.other.symbol.elixir\",\"source.elixir constant.other.keywords.elixir\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Elixir String Punctuations\",\"scope\":[\"source.elixir punctuation.definition.string\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Elixir\",\"scope\":[\"source.elixir variable.other.readwrite.module.elixir\",\"source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Elixir Binary Punctuations\",\"scope\":[\"source.elixir .punctuation.binary.elixir\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"Closure Constant Keyword\",\"scope\":[\"constant.keyword.clojure\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Go Function Calls\",\"scope\":[\"source.go meta.function-call.go\"],\"settings\":{\"foreground\":\"#dddddd\"}},{\"name\":\"Go Keywords\",\"scope\":[\"source.go keyword.package.go\",\"source.go keyword.import.go\",\"source.go keyword.function.go\",\"source.go keyword.type.go\",\"source.go keyword.struct.go\",\"source.go keyword.interface.go\",\"source.go keyword.const.go\",\"source.go keyword.var.go\",\"source.go keyword.map.go\",\"source.go keyword.channel.go\",\"source.go keyword.control.go\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"Go Constants e.g. nil, string format (%s, %d, etc.)\",\"scope\":[\"source.go constant.language.go\",\"source.go constant.other.placeholder.go\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"C++ Functions\",\"scope\":[\"entity.name.function.preprocessor.cpp\",\"entity.scope.name.cpp\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"C++ Meta Namespace\",\"scope\":[\"meta.namespace-block.cpp\"],\"settings\":{\"foreground\":\"#e0dec6\"}},{\"name\":\"C++ Language Primitive Storage\",\"scope\":[\"storage.type.language.primitive.cpp\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"C++ Preprocessor Macro\",\"scope\":[\"meta.preprocessor.macro.cpp\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"C++ Variable Parameter\",\"scope\":[\"variable.parameter\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"Powershell Variables\",\"scope\":[\"variable.other.readwrite.powershell\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Powershell Function\",\"scope\":[\"support.function.powershell\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"ID Attribute Name in HTML\",\"scope\":[\"entity.other.attribute-name.id.html\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"HTML Punctuation Definition Tag\",\"scope\":[\"punctuation.definition.tag.html\"],\"settings\":{\"foreground\":\"#6ae9f0\"}},{\"name\":\"HTML Doctype\",\"scope\":[\"meta.tag.sgml.doctype.html\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"\"}},{\"name\":\"JavaScript Classes\",\"scope\":[\"meta.class entity.name.type.class.js\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"JavaScript Method Declaration e.g. `constructor`\",\"scope\":[\"meta.method.declaration storage.type.js\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"JavaScript Terminator\",\"scope\":[\"terminator.js\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"JavaScript Meta Punctuation Definition\",\"scope\":[\"meta.js punctuation.definition.js\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"Entity Names in Code Documentations\",\"scope\":[\"entity.name.type.instance.jsdoc\",\"entity.name.type.instance.phpdoc\"],\"settings\":{\"foreground\":\"#889fb2\"}},{\"name\":\"Other Variables in Code Documentations\",\"scope\":[\"variable.other.jsdoc\",\"variable.other.phpdoc\"],\"settings\":{\"foreground\":\"#78ccf0\"}},{\"name\":\"JavaScript module imports and exports\",\"scope\":[\"variable.other.meta.import.js\",\"meta.import.js variable.other\",\"variable.other.meta.export.js\",\"meta.export.js variable.other\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"JavaScript Variable Parameter Function\",\"scope\":[\"variable.parameter.function.js\"],\"settings\":{\"foreground\":\"#8b96ea\"}},{\"name\":\"JavaScript[React] Variable Other Object\",\"scope\":[\"variable.other.object.js\",\"variable.other.object.jsx\",\"variable.object.property.js\",\"variable.object.property.jsx\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"JavaScript Variables\",\"scope\":[\"variable.js\",\"variable.other.js\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"JavaScript Entity Name Type\",\"scope\":[\"entity.name.type.js\",\"entity.name.type.module.js\"],\"settings\":{\"foreground\":\"#ffcb8b\",\"fontStyle\":\"\"}},{\"name\":\"JavaScript Support Classes\",\"scope\":[\"support.class.js\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"JSON Property Names\",\"scope\":[\"support.type.property-name.json\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"JSON Support Constants\",\"scope\":[\"support.constant.json\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"JSON Property values (string)\",\"scope\":[\"meta.structure.dictionary.value.json string.quoted.double\"],\"settings\":{\"foreground\":\"#c789d6\"}},{\"name\":\"Strings in JSON values\",\"scope\":[\"string.quoted.double.json punctuation.definition.string.json\"],\"settings\":{\"foreground\":\"#80cbc4\"}},{\"name\":\"Specific JSON Property values like null\",\"scope\":[\"meta.structure.dictionary.json meta.structure.dictionary.value constant.language\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"JavaScript Other Variable\",\"scope\":[\"variable.other.object.js\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Ruby Variables\",\"scope\":[\"variable.other.ruby\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"Ruby Class\",\"scope\":[\"entity.name.type.class.ruby\"],\"settings\":{\"foreground\":\"#ecc48d\"}},{\"name\":\"Ruby Hashkeys\",\"scope\":[\"constant.language.symbol.hashkey.ruby\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"LESS Tag names\",\"scope\":[\"entity.name.tag.less\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"LESS Keyword Other Unit\",\"scope\":[\"keyword.other.unit.css\"],\"settings\":{\"foreground\":\"#ffeb95\"}},{\"name\":\"Attribute Name for LESS\",\"scope\":[\"meta.attribute-selector.less entity.other.attribute-name.attribute\"],\"settings\":{\"foreground\":\"#f78c6c\"}},{\"name\":\"Markdown Headings\",\"scope\":[\"markup.heading.markdown\",\"markup.heading.setext.1.markdown\",\"markup.heading.setext.2.markdown\"],\"settings\":{\"foreground\":\"#82b1ff\"}},{\"name\":\"Markdown Italics\",\"scope\":[\"markup.italic.markdown\"],\"settings\":{\"foreground\":\"#c792ea\",\"fontStyle\":\"italic\"}},{\"name\":\"Markdown Bold\",\"scope\":[\"markup.bold.markdown\"],\"settings\":{\"foreground\":\"#c5e478\",\"fontStyle\":\"bold\"}},{\"name\":\"Markdown Quote + others\",\"scope\":[\"markup.quote.markdown\"],\"settings\":{\"foreground\":\"#969bb7\",\"fontStyle\":\"\"}},{\"name\":\"Markdown Raw Code + others\",\"scope\":[\"markup.inline.raw.markdown\"],\"settings\":{\"foreground\":\"#80cbc4\"}},{\"name\":\"Markdown Links\",\"scope\":[\"markup.underline.link.markdown\",\"markup.underline.link.image.markdown\"],\"settings\":{\"foreground\":\"#ff869a\",\"fontStyle\":\"underline\"}},{\"name\":\"Markdown Link Title and Description\",\"scope\":[\"string.other.link.title.markdown\",\"string.other.link.description.markdown\"],\"settings\":{\"foreground\":\"#d6deeb\",\"fontStyle\":\"underline\"}},{\"name\":\"Markdown Punctuation\",\"scope\":[\"punctuation.definition.string.markdown\",\"punctuation.definition.string.begin.markdown\",\"punctuation.definition.string.end.markdown\",\"meta.link.inline.markdown punctuation.definition.string\"],\"settings\":{\"foreground\":\"#82b1ff\"}},{\"name\":\"Markdown MetaData Punctuation\",\"scope\":[\"punctuation.definition.metadata.markdown\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"Markdown List Punctuation\",\"scope\":[\"beginning.punctuation.definition.list.markdown\"],\"settings\":{\"foreground\":\"#82b1ff\"}},{\"name\":\"Markdown Inline Raw String\",\"scope\":[\"markup.inline.raw.string.markdown\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"PHP Variables\",\"scope\":[\"variable.other.php\"],\"settings\":{\"foreground\":\"#bec5d4\"}},{\"name\":\"Support Classes in PHP\",\"scope\":[\"support.class.php\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"Punctuations in PHP function calls\",\"scope\":[\"meta.function-call.php punctuation\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"PHP Global Variables\",\"scope\":[\"variable.other.global.php\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Declaration Punctuation in PHP Global Variables\",\"scope\":[\"variable.other.global.php punctuation.definition.variable\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Language Constants in Python\",\"scope\":[\"constant.language.python\"],\"settings\":{\"foreground\":\"#ff6a83\"}},{\"name\":\"Python Function Parameter and Arguments\",\"scope\":[\"variable.parameter.function.python\",\"meta.function-call.arguments.python\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Python Function Call\",\"scope\":[\"meta.function-call.python\",\"meta.function-call.generic.python\"],\"settings\":{\"foreground\":\"#b2ccd6\"}},{\"name\":\"Punctuations in Python\",\"scope\":[\"punctuation.python\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"Decorator Functions in Python\",\"scope\":[\"entity.name.function.decorator.python\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Python Language Variable\",\"scope\":[\"source.python variable.language.special\"],\"settings\":{\"foreground\":\"#8eace3\"}},{\"name\":\"Python import control keyword\",\"scope\":[\"keyword.control\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"SCSS Variable\",\"scope\":[\"variable.scss\",\"variable.sass\",\"variable.parameter.url.scss\",\"variable.parameter.url.sass\"],\"settings\":{\"foreground\":\"#c5e478\"}},{\"name\":\"Variables in SASS At-Rules\",\"scope\":[\"source.css.scss meta.at-rule variable\",\"source.css.sass meta.at-rule variable\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"Variables in SASS At-Rules\",\"scope\":[\"source.css.scss meta.at-rule variable\",\"source.css.sass meta.at-rule variable\"],\"settings\":{\"foreground\":\"#bec5d4\"}},{\"name\":\"Attribute Name for SASS\",\"scope\":[\"meta.attribute-selector.scss entity.other.attribute-name.attribute\",\"meta.attribute-selector.sass entity.other.attribute-name.attribute\"],\"settings\":{\"foreground\":\"#f78c6c\"}},{\"name\":\"Tag names in SASS\",\"scope\":[\"entity.name.tag.scss\",\"entity.name.tag.sass\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"SASS Keyword Other Unit\",\"scope\":[\"keyword.other.unit.scss\",\"keyword.other.unit.sass\"],\"settings\":{\"foreground\":\"#ffeb95\"}},{\"name\":\"TypeScript[React] Variables and Object Properties\",\"scope\":[\"variable.other.readwrite.alias.ts\",\"variable.other.readwrite.alias.tsx\",\"variable.other.readwrite.ts\",\"variable.other.readwrite.tsx\",\"variable.other.object.ts\",\"variable.other.object.tsx\",\"variable.object.property.ts\",\"variable.object.property.tsx\",\"variable.other.ts\",\"variable.other.tsx\",\"variable.tsx\",\"variable.ts\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"TypeScript[React] Entity Name Types\",\"scope\":[\"entity.name.type.ts\",\"entity.name.type.tsx\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"TypeScript[React] Node Classes\",\"scope\":[\"support.class.node.ts\",\"support.class.node.tsx\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"TypeScript[React] Entity Name Types as Parameters\",\"scope\":[\"meta.type.parameters.ts entity.name.type\",\"meta.type.parameters.tsx entity.name.type\"],\"settings\":{\"foreground\":\"#889fb2\"}},{\"name\":\"TypeScript[React] Import/Export Punctuations\",\"scope\":[\"meta.import.ts punctuation.definition.block\",\"meta.import.tsx punctuation.definition.block\",\"meta.export.ts punctuation.definition.block\",\"meta.export.tsx punctuation.definition.block\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"TypeScript[React] Punctuation Decorators\",\"scope\":[\"meta.decorator punctuation.decorator.ts\",\"meta.decorator punctuation.decorator.tsx\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"TypeScript[React] Punctuation Decorators\",\"scope\":[\"meta.tag.js meta.jsx.children.tsx\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"YAML Entity Name Tags\",\"scope\":[\"entity.name.tag.yaml\"],\"settings\":{\"foreground\":\"#7fdbca\"}},{\"name\":\"JavaScript Variable Other ReadWrite\",\"scope\":[\"variable.other.readwrite.js\",\"variable.parameter\"],\"settings\":{\"foreground\":\"#d7dbe0\"}},{\"name\":\"Support Class Component\",\"scope\":[\"support.class.component.js\",\"support.class.component.tsx\"],\"settings\":{\"foreground\":\"#f78c6c\",\"fontStyle\":\"\"}},{\"name\":\"Text nested in React tags\",\"scope\":[\"meta.jsx.children\",\"meta.jsx.children.js\",\"meta.jsx.children.tsx\"],\"settings\":{\"foreground\":\"#d6deeb\"}},{\"name\":\"TypeScript Classes\",\"scope\":[\"meta.class entity.name.type.class.tsx\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"TypeScript Entity Name Type\",\"scope\":[\"entity.name.type.tsx\",\"entity.name.type.module.tsx\"],\"settings\":{\"foreground\":\"#ffcb8b\"}},{\"name\":\"TypeScript Class Variable Keyword\",\"scope\":[\"meta.class.ts meta.var.expr.ts storage.type.ts\",\"meta.class.tsx meta.var.expr.tsx storage.type.tsx\"],\"settings\":{\"foreground\":\"#c792ea\"}},{\"name\":\"TypeScript Method Declaration e.g. `constructor`\",\"scope\":[\"meta.method.declaration storage.type.ts\",\"meta.method.declaration storage.type.tsx\"],\"settings\":{\"foreground\":\"#82aaff\"}},{\"name\":\"normalize font style of certain components\",\"scope\":[\"meta.property-list.css meta.property-value.css variable.other.less\",\"meta.property-list.scss variable.scss\",\"meta.property-list.sass variable.sass\",\"meta.brace\",\"keyword.operator.operator\",\"keyword.operator.or.regexp\",\"keyword.operator.expression.in\",\"keyword.operator.relational\",\"keyword.operator.assignment\",\"keyword.operator.comparison\",\"keyword.operator.type\",\"keyword.operator\",\"keyword\",\"punctuation.definition.string\",\"punctuation\",\"variable.other.readwrite.js\",\"storage.type\",\"source.css\",\"string.quoted\"],\"settings\":{\"fontStyle\":\"\"}}],\"styleOverrides\":{\"frames\":{\"editorBackground\":\"var(--sl-color-gray-6)\",\"terminalBackground\":\"var(--sl-color-gray-6)\",\"editorActiveTabBackground\":\"var(--sl-color-gray-6)\",\"terminalTitlebarDotsForeground\":\"color-mix(in srgb, var(--sl-color-gray-5), transparent 25%)\",\"terminalTitlebarDotsOpacity\":\"0.75\",\"inlineButtonForeground\":\"var(--sl-color-text)\",\"frameBoxShadowCssValue\":\"none\"},\"textMarkers\":{\"markBackground\":\"#ffffff17\",\"markBorderColor\":\"#ffffff40\"}}},{\"name\":\"Night Owl Light\",\"type\":\"light\",\"colors\":{\"focusBorder\":\"#93a1a1\",\"foreground\":\"#403f53\",\"disabledForeground\":\"#61616180\",\"descriptionForeground\":\"#403f53\",\"errorForeground\":\"#403f53\",\"icon.foreground\":\"#424242\",\"contrastActiveBorder\":null,\"contrastBorder\":null,\"textBlockQuote.background\":\"#7f7f7f1a\",\"textBlockQuote.border\":\"#007acc80\",\"textCodeBlock.background\":\"#dcdcdc66\",\"textLink.activeForeground\":\"#006ab1\",\"textLink.foreground\":\"#006ab1\",\"textPreformat.foreground\":\"#a31515\",\"textSeparator.foreground\":\"#0000002e\",\"editor.background\":\"#f6f7f9\",\"editor.foreground\":\"#403f53\",\"editorLineNumber.foreground\":\"#90a7b2\",\"editorLineNumber.activeForeground\":\"#403f53\",\"editorActiveLineNumber.foreground\":\"#0b216f\",\"editor.selectionBackground\":\"#e0e0e0\",\"editor.inactiveSelectionBackground\":\"#e0e0e080\",\"editor.selectionHighlightBackground\":\"#339cec33\",\"editorError.foreground\":\"#e64d49\",\"editorWarning.foreground\":\"#daaa01\",\"editorInfo.foreground\":\"#1a85ff\",\"editorHint.foreground\":\"#6c6c6c\",\"problemsErrorIcon.foreground\":\"#e64d49\",\"problemsWarningIcon.foreground\":\"#daaa01\",\"problemsInfoIcon.foreground\":\"#1a85ff\",\"editor.findMatchBackground\":\"#93a1a16c\",\"editor.findMatchHighlightBackground\":\"#93a1a16c\",\"editor.findRangeHighlightBackground\":\"#7497a633\",\"editorLink.activeForeground\":\"#0000ff\",\"editorLightBulb.foreground\":\"#ddb100\",\"editorLightBulbAutoFix.foreground\":\"#007acc\",\"diffEditor.insertedTextBackground\":\"#9ccc2c40\",\"diffEditor.insertedTextBorder\":null,\"diffEditor.removedTextBackground\":\"#ff000033\",\"diffEditor.removedTextBorder\":null,\"diffEditor.insertedLineBackground\":\"#9bb95533\",\"diffEditor.removedLineBackground\":\"#ff000033\",\"editorStickyScroll.background\":\"#fbfbfb\",\"editorStickyScrollHover.background\":\"#f0f0f0\",\"editorInlayHint.background\":\"#2aa29899\",\"editorInlayHint.foreground\":\"#f0f0f0\",\"editorInlayHint.typeBackground\":\"#2aa29899\",\"editorInlayHint.typeForeground\":\"#f0f0f0\",\"editorInlayHint.parameterBackground\":\"#2aa29899\",\"editorInlayHint.parameterForeground\":\"#f0f0f0\",\"editorPane.background\":\"#fbfbfb\",\"editorGroup.emptyBackground\":null,\"editorGroup.focusedEmptyBorder\":null,\"editorGroupHeader.tabsBackground\":\"var(--sl-color-gray-6)\",\"editorGroupHeader.tabsBorder\":\"color-mix(in srgb, var(--sl-color-gray-5), transparent 25%)\",\"editorGroupHeader.noTabsBackground\":\"#f0f0f0\",\"editorGroupHeader.border\":null,\"editorGroup.border\":\"#f0f0f0\",\"editorGroup.dropBackground\":\"#2677cb2d\",\"editorGroup.dropIntoPromptForeground\":\"#403f53\",\"editorGroup.dropIntoPromptBackground\":\"#f0f0f0\",\"editorGroup.dropIntoPromptBorder\":null,\"sideBySideEditor.horizontalBorder\":\"#f0f0f0\",\"sideBySideEditor.verticalBorder\":\"#f0f0f0\",\"scrollbar.shadow\":\"#cccccc\",\"scrollbarSlider.background\":\"#0000001a\",\"scrollbarSlider.hoverBackground\":\"#00000055\",\"scrollbarSlider.activeBackground\":\"#00000099\",\"panel.background\":\"#f0f0f0\",\"panel.border\":\"#d9d9d9\",\"panelTitle.activeBorder\":\"#424242\",\"panelTitle.activeForeground\":\"#424242\",\"panelTitle.inactiveForeground\":\"#424242bf\",\"panelSectionHeader.background\":\"#80808051\",\"terminal.background\":\"#f6f6f6\",\"widget.shadow\":\"#d9d9d9\",\"editorWidget.background\":\"#f0f0f0\",\"editorWidget.foreground\":\"#403f53\",\"editorWidget.border\":\"#d9d9d9\",\"quickInput.background\":\"#f0f0f0\",\"quickInput.foreground\":\"#403f53\",\"quickInputTitle.background\":\"#0000000f\",\"pickerGroup.foreground\":\"#403f53\",\"pickerGroup.border\":\"#d9d9d9\",\"editor.hoverHighlightBackground\":\"#339cec33\",\"editorHoverWidget.background\":\"#f0f0f0\",\"editorHoverWidget.foreground\":\"#403f53\",\"editorHoverWidget.border\":\"#d9d9d9\",\"editorHoverWidget.statusBarBackground\":\"#e4e4e4\",\"titleBar.activeBackground\":\"var(--sl-color-gray-6)\",\"titleBar.activeForeground\":\"var(--sl-color-text)\",\"titleBar.inactiveBackground\":\"#f0f0f099\",\"titleBar.inactiveForeground\":\"#33333399\",\"titleBar.border\":\"color-mix(in srgb, var(--sl-color-gray-5), transparent 25%)\",\"toolbar.hoverBackground\":\"#b8b8b850\",\"toolbar.activeBackground\":\"#a6a6a650\",\"tab.activeBackground\":\"#f6f6f6\",\"tab.unfocusedActiveBackground\":\"#f6f6f6\",\"tab.inactiveBackground\":\"#f0f0f0\",\"tab.unfocusedInactiveBackground\":\"#f0f0f0\",\"tab.activeForeground\":\"var(--sl-color-text)\",\"tab.inactiveForeground\":\"#403f53\",\"tab.unfocusedActiveForeground\":\"#403f53b3\",\"tab.unfocusedInactiveForeground\":\"#403f5380\",\"tab.hoverBackground\":null,\"tab.unfocusedHoverBackground\":null,\"tab.hoverForeground\":null,\"tab.unfocusedHoverForeground\":null,\"tab.border\":\"#f0f0f0\",\"tab.lastPinnedBorder\":\"#a9a9a9\",\"tab.activeBorder\":\"transparent\",\"tab.unfocusedActiveBorder\":null,\"tab.activeBorderTop\":\"var(--sl-color-accent)\",\"tab.unfocusedActiveBorderTop\":null,\"tab.hoverBorder\":null,\"tab.unfocusedHoverBorder\":null,\"tab.activeModifiedBorder\":\"#2aa298\",\"tab.inactiveModifiedBorder\":\"#93a1a1\",\"tab.unfocusedActiveModifiedBorder\":\"#93a1a1\",\"tab.unfocusedInactiveModifiedBorder\":\"#93a1a1\",\"badge.background\":\"#2aa298\",\"badge.foreground\":\"#f0f0f0\",\"button.background\":\"#2aa298\",\"button.foreground\":\"#f0f0f0\",\"button.border\":null,\"button.separator\":\"#f0f0f066\",\"button.hoverBackground\":\"#22827a\",\"button.secondaryBackground\":\"#5f6a79\",\"button.secondaryForeground\":\"#ffffff\",\"button.secondaryHoverBackground\":\"#4c5561\",\"dropdown.background\":\"#f0f0f0\",\"dropdown.foreground\":\"#403f53\",\"dropdown.border\":\"#d9d9d9\",\"list.activeSelectionBackground\":\"#d3e8f8\",\"list.activeSelectionForeground\":\"#403f53\",\"tree.indentGuidesStroke\":\"#a9a9a9\",\"input.background\":\"#f0f0f0\",\"input.foreground\":\"#403f53\",\"input.placeholderForeground\":\"#93a1a1\",\"inputOption.activeBorder\":\"#2aa298\",\"inputOption.hoverBackground\":\"#b8b8b850\",\"inputOption.activeBackground\":\"#93a1a133\",\"inputOption.activeForeground\":\"#000000\",\"inputValidation.infoBackground\":\"#f0f0f0\",\"inputValidation.infoBorder\":\"#d0d0d0\",\"inputValidation.warningBackground\":\"#daaa01\",\"inputValidation.warningBorder\":\"#e0af02\",\"inputValidation.errorBackground\":\"#f76e6e\",\"inputValidation.errorBorder\":\"#de3d3b\",\"keybindingLabel.background\":\"#dddddd66\",\"keybindingLabel.foreground\":\"#555555\",\"keybindingLabel.border\":\"#cccccc66\",\"keybindingLabel.bottomBorder\":\"#bbbbbb66\",\"menu.foreground\":\"#403f53\",\"menu.background\":\"#f0f0f0\",\"menu.selectionForeground\":\"#403f53\",\"menu.selectionBackground\":\"#d3e8f8\",\"menu.separatorBackground\":\"#d4d4d4\",\"editor.snippetTabstopHighlightBackground\":\"#0a326433\",\"editor.snippetFinalTabstopHighlightBorder\":\"#0a326480\",\"terminal.ansiBlack\":\"#403f53\",\"terminal.ansiRed\":\"#de3d3b\",\"terminal.ansiGreen\":\"#08916a\",\"terminal.ansiYellow\":\"#e0af02\",\"terminal.ansiBlue\":\"#288ed7\",\"terminal.ansiMagenta\":\"#d6438a\",\"terminal.ansiCyan\":\"#2aa298\",\"terminal.ansiWhite\":\"#f0f0f0\",\"terminal.ansiBrightBlack\":\"#403f53\",\"terminal.ansiBrightRed\":\"#de3d3b\",\"terminal.ansiBrightGreen\":\"#08916a\",\"terminal.ansiBrightYellow\":\"#daaa01\",\"terminal.ansiBrightBlue\":\"#288ed7\",\"terminal.ansiBrightMagenta\":\"#d6438a\",\"terminal.ansiBrightCyan\":\"#2aa298\",\"terminal.ansiBrightWhite\":\"#f0f0f0\",\"selection.background\":\"#7a8181ad\",\"notifications.background\":\"#f0f0f0\",\"notifications.foreground\":\"#403f53\",\"notificationLink.foreground\":\"#994cc3\",\"notifications.border\":\"#cccccc\",\"notificationCenter.border\":\"#cccccc\",\"notificationToast.border\":\"#cccccc\",\"notificationCenterHeader.foreground\":\"#403f53\",\"notificationCenterHeader.background\":\"#f0f0f0\",\"input.border\":\"#d9d9d9\",\"progressBar.background\":\"#2aa298\",\"list.inactiveSelectionBackground\":\"#e0e7ea\",\"list.inactiveSelectionForeground\":\"#403f53\",\"list.focusBackground\":\"#d3e8f8\",\"list.hoverBackground\":\"#d3e8f8\",\"list.focusForeground\":\"#403f53\",\"list.hoverForeground\":\"#403f53\",\"list.highlightForeground\":\"#403f53\",\"list.errorForeground\":\"#e64d49\",\"list.warningForeground\":\"#daaa01\",\"activityBar.background\":\"#f0f0f0\",\"activityBar.foreground\":\"#403f53\",\"activityBar.dropBackground\":\"#d0d0d0\",\"activityBarBadge.background\":\"#403f53\",\"activityBarBadge.foreground\":\"#f0f0f0\",\"activityBar.border\":\"#f0f0f0\",\"sideBar.background\":\"#f0f0f0\",\"sideBar.foreground\":\"#403f53\",\"sideBarTitle.foreground\":\"#403f53\",\"sideBar.border\":\"#f0f0f0\",\"editorGroup.background\":\"#f6f6f6\",\"editorCursor.foreground\":\"#90a7b2\",\"editor.wordHighlightBackground\":\"#339cec33\",\"editor.wordHighlightStrongBackground\":\"#007dd659\",\"editor.lineHighlightBackground\":\"#f0f0f0\",\"editor.rangeHighlightBackground\":\"#7497a633\",\"editorWhitespace.foreground\":\"#d9d9d9\",\"editorIndentGuide.background\":\"#d9d9d9\",\"editorCodeLens.foreground\":\"#403f53\",\"editorBracketMatch.background\":\"#d3e8f8\",\"editorBracketMatch.border\":\"#2aa298\",\"editorError.border\":\"#fbfbfb\",\"editorWarning.border\":\"#daaa01\",\"editorGutter.addedBackground\":\"#49d0c5\",\"editorGutter.modifiedBackground\":\"#6fbef6\",\"editorGutter.deletedBackground\":\"#f76e6e\",\"editorRuler.foreground\":\"#d9d9d9\",\"editorOverviewRuler.errorForeground\":\"#e64d49\",\"editorOverviewRuler.warningForeground\":\"#daaa01\",\"editorSuggestWidget.background\":\"#f0f0f0\",\"editorSuggestWidget.foreground\":\"#403f53\",\"editorSuggestWidget.highlightForeground\":\"#403f53\",\"editorSuggestWidget.selectedBackground\":\"#d3e8f8\",\"editorSuggestWidget.border\":\"#d9d9d9\",\"debugExceptionWidget.background\":\"#f0f0f0\",\"debugExceptionWidget.border\":\"#d9d9d9\",\"editorMarkerNavigation.background\":\"#d0d0d0\",\"editorMarkerNavigationError.background\":\"#f76e6e\",\"editorMarkerNavigationWarning.background\":\"#daaa01\",\"debugToolBar.background\":\"#f0f0f0\",\"extensionButton.prominentBackground\":\"#2aa298\",\"extensionButton.prominentForeground\":\"#f0f0f0\",\"statusBar.background\":\"#f0f0f0\",\"statusBar.border\":\"#f0f0f0\",\"statusBar.debuggingBackground\":\"#f0f0f0\",\"statusBar.debuggingForeground\":\"#403f53\",\"statusBar.foreground\":\"#403f53\",\"statusBar.noFolderBackground\":\"#f0f0f0\",\"statusBar.noFolderForeground\":\"#403f53\",\"peekView.border\":\"#d9d9d9\",\"peekViewEditor.background\":\"#f6f6f6\",\"peekViewEditorGutter.background\":\"#f6f6f6\",\"peekViewEditor.matchHighlightBackground\":\"#49d0c5\",\"peekViewResult.background\":\"#f0f0f0\",\"peekViewResult.fileForeground\":\"#403f53\",\"peekViewResult.lineForeground\":\"#403f53\",\"peekViewResult.matchHighlightBackground\":\"#49d0c5\",\"peekViewResult.selectionBackground\":\"#e0e7ea\",\"peekViewResult.selectionForeground\":\"#403f53\",\"peekViewTitle.background\":\"#f0f0f0\",\"peekViewTitleLabel.foreground\":\"#403f53\",\"peekViewTitleDescription.foreground\":\"#403f53\",\"terminal.foreground\":\"#403f53\"},\"fg\":\"#403f53\",\"bg\":\"#f6f7f9\",\"semanticHighlighting\":false,\"settings\":[{\"name\":\"Changed\",\"scope\":[\"markup.changed\",\"meta.diff.header.git\",\"meta.diff.header.from-file\",\"meta.diff.header.to-file\"],\"settings\":{\"foreground\":\"#556484\"}},{\"name\":\"Deleted\",\"scope\":[\"markup.deleted.diff\"],\"settings\":{\"foreground\":\"#ae3c3afd\"}},{\"name\":\"Inserted\",\"scope\":[\"markup.inserted.diff\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Global settings\",\"settings\":{\"background\":\"#011627\",\"foreground\":\"#403f53\"}},{\"name\":\"Comment\",\"scope\":[\"comment\"],\"settings\":{\"foreground\":\"#5f636f\"}},{\"name\":\"String\",\"scope\":[\"string\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"String Quoted\",\"scope\":[\"string.quoted\",\"variable.other.readwrite.js\"],\"settings\":{\"foreground\":\"#984e4d\"}},{\"name\":\"Support Constant Math\",\"scope\":[\"support.constant.math\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Number\",\"scope\":[\"constant.numeric\",\"constant.character.numeric\"],\"settings\":{\"foreground\":\"#aa0982\",\"fontStyle\":\"\"}},{\"name\":\"Built-in constant\",\"scope\":[\"constant.language\",\"punctuation.definition.constant\",\"variable.other.constant\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"User-defined constant\",\"scope\":[\"constant.character\",\"constant.other\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Constant Character Escape\",\"scope\":[\"constant.character.escape\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"RegExp String\",\"scope\":[\"string.regexp\",\"string.regexp keyword.other\"],\"settings\":{\"foreground\":\"#3a688f\"}},{\"name\":\"Comma in functions\",\"scope\":[\"meta.function punctuation.separator.comma\"],\"settings\":{\"foreground\":\"#4d667b\"}},{\"name\":\"Variable\",\"scope\":[\"variable\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Keyword\",\"scope\":[\"punctuation.accessor\",\"keyword\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Storage\",\"scope\":[\"storage\",\"meta.var.expr\",\"meta.class meta.method.declaration meta.var.expr storage.type.js\",\"storage.type.property.js\",\"storage.type.property.ts\",\"storage.type.property.tsx\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Storage type\",\"scope\":[\"storage.type\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Storage type\",\"scope\":[\"storage.type.function.arrow.js\"],\"settings\":{\"fontStyle\":\"\"}},{\"name\":\"Class name\",\"scope\":[\"entity.name.class\",\"meta.class entity.name.type.class\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Inherited class\",\"scope\":[\"entity.other.inherited-class\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Function name\",\"scope\":[\"entity.name.function\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Meta Tag\",\"scope\":[\"punctuation.definition.tag\",\"meta.tag\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"HTML Tag names\",\"scope\":[\"entity.name.tag\",\"meta.tag.other.html\",\"meta.tag.other.js\",\"meta.tag.other.tsx\",\"entity.name.tag.tsx\",\"entity.name.tag.js\",\"entity.name.tag\",\"meta.tag.js\",\"meta.tag.tsx\",\"meta.tag.html\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Tag attribute\",\"scope\":[\"entity.other.attribute-name\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Entity Name Tag Custom\",\"scope\":[\"entity.name.tag.custom\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Library (function & constant)\",\"scope\":[\"support.function\",\"support.constant\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Support Constant Property Value meta\",\"scope\":[\"support.constant.meta.property-value\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Library class/type\",\"scope\":[\"support.type\",\"support.class\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Support Variable DOM\",\"scope\":[\"support.variable.dom\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Invalid\",\"scope\":[\"invalid\"],\"settings\":{\"foreground\":\"#bb2060\"}},{\"name\":\"Invalid deprecated\",\"scope\":[\"invalid.deprecated\"],\"settings\":{\"foreground\":\"#b23834\"}},{\"name\":\"Keyword Operator\",\"scope\":[\"keyword.operator\"],\"settings\":{\"foreground\":\"#096e72\",\"fontStyle\":\"\"}},{\"name\":\"Keyword Operator Relational\",\"scope\":[\"keyword.operator.relational\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Keyword Operator Assignment\",\"scope\":[\"keyword.operator.assignment\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Keyword Operator Arithmetic\",\"scope\":[\"keyword.operator.arithmetic\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Keyword Operator Bitwise\",\"scope\":[\"keyword.operator.bitwise\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Keyword Operator Increment\",\"scope\":[\"keyword.operator.increment\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Keyword Operator Ternary\",\"scope\":[\"keyword.operator.ternary\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Double-Slashed Comment\",\"scope\":[\"comment.line.double-slash\"],\"settings\":{\"foreground\":\"#5d6376\"}},{\"name\":\"Object\",\"scope\":[\"object\"],\"settings\":{\"foreground\":\"#58656a\"}},{\"name\":\"Null\",\"scope\":[\"constant.language.null\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"Meta Brace\",\"scope\":[\"meta.brace\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"Meta Delimiter Period\",\"scope\":[\"meta.delimiter.period\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Punctuation Definition String\",\"scope\":[\"punctuation.definition.string\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Punctuation Definition String Markdown\",\"scope\":[\"punctuation.definition.string.begin.markdown\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"Boolean\",\"scope\":[\"constant.language.boolean\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"Object Comma\",\"scope\":[\"object.comma\"],\"settings\":{\"foreground\":\"#646464\"}},{\"name\":\"Variable Parameter Function\",\"scope\":[\"variable.parameter.function\"],\"settings\":{\"foreground\":\"#096e72\",\"fontStyle\":\"\"}},{\"name\":\"Support Type Property Name & entity name tags\",\"scope\":[\"support.type.vendor.property-name\",\"support.constant.vendor.property-value\",\"support.type.property-name\",\"meta.property-list entity.name.tag\"],\"settings\":{\"foreground\":\"#096e72\",\"fontStyle\":\"\"}},{\"name\":\"Entity Name tag reference in stylesheets\",\"scope\":[\"meta.property-list entity.name.tag.reference\"],\"settings\":{\"foreground\":\"#286d70\"}},{\"name\":\"Constant Other Color RGB Value Punctuation Definition Constant\",\"scope\":[\"constant.other.color.rgb-value punctuation.definition.constant\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Constant Other Color\",\"scope\":[\"constant.other.color\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Keyword Other Unit\",\"scope\":[\"keyword.other.unit\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Meta Selector\",\"scope\":[\"meta.selector\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Entity Other Attribute Name Id\",\"scope\":[\"entity.other.attribute-name.id\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Meta Property Name\",\"scope\":[\"meta.property-name\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Doctypes\",\"scope\":[\"entity.name.tag.doctype\",\"meta.tag.sgml.doctype\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Punctuation Definition Parameters\",\"scope\":[\"punctuation.definition.parameters\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Keyword Control Operator\",\"scope\":[\"keyword.control.operator\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Keyword Operator Logical\",\"scope\":[\"keyword.operator.logical\"],\"settings\":{\"foreground\":\"#8844ae\",\"fontStyle\":\"\"}},{\"name\":\"Variable Instances\",\"scope\":[\"variable.instance\",\"variable.other.instance\",\"variable.readwrite.instance\",\"variable.other.readwrite.instance\",\"variable.other.property\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Variable Property Other object property\",\"scope\":[\"variable.other.object.property\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Variable Property Other object\",\"scope\":[\"variable.other.object.js\"],\"settings\":{\"fontStyle\":\"\"}},{\"name\":\"Entity Name Function\",\"scope\":[\"entity.name.function\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Keyword Operator Comparison, imports, returns and Keyword Operator Ruby\",\"scope\":[\"keyword.operator.comparison\",\"keyword.control.flow.js\",\"keyword.control.flow.ts\",\"keyword.control.flow.tsx\",\"keyword.control.ruby\",\"keyword.control.module.ruby\",\"keyword.control.class.ruby\",\"keyword.control.def.ruby\",\"keyword.control.loop.js\",\"keyword.control.loop.ts\",\"keyword.control.import.js\",\"keyword.control.import.ts\",\"keyword.control.import.tsx\",\"keyword.control.from.js\",\"keyword.control.from.ts\",\"keyword.control.from.tsx\",\"keyword.operator.instanceof.js\",\"keyword.operator.expression.instanceof.ts\",\"keyword.operator.expression.instanceof.tsx\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Keyword Control Conditional\",\"scope\":[\"keyword.control.conditional.js\",\"keyword.control.conditional.ts\",\"keyword.control.switch.js\",\"keyword.control.switch.ts\"],\"settings\":{\"foreground\":\"#8844ae\",\"fontStyle\":\"\"}},{\"name\":\"Support Constant, `new` keyword, Special Method Keyword, `debugger`, other keywords\",\"scope\":[\"support.constant\",\"keyword.other.special-method\",\"keyword.other.new\",\"keyword.other.debugger\",\"keyword.control\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Support Function\",\"scope\":[\"support.function\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Invalid Broken\",\"scope\":[\"invalid.broken\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Invalid Unimplemented\",\"scope\":[\"invalid.unimplemented\"],\"settings\":{\"foreground\":\"#486e26\"}},{\"name\":\"Invalid Illegal\",\"scope\":[\"invalid.illegal\"],\"settings\":{\"foreground\":\"#984e4d\"}},{\"name\":\"Language Variable\",\"scope\":[\"variable.language\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Support Variable Property\",\"scope\":[\"support.variable.property\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Variable Function\",\"scope\":[\"variable.function\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Variable Interpolation\",\"scope\":[\"variable.interpolation\"],\"settings\":{\"foreground\":\"#a64348\"}},{\"name\":\"Meta Function Call\",\"scope\":[\"meta.function-call\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Punctuation Section Embedded\",\"scope\":[\"punctuation.section.embedded\"],\"settings\":{\"foreground\":\"#b23834\"}},{\"name\":\"Punctuation Tweaks\",\"scope\":[\"punctuation.terminator.expression\",\"punctuation.definition.arguments\",\"punctuation.definition.array\",\"punctuation.section.array\",\"meta.array\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"More Punctuation Tweaks\",\"scope\":[\"punctuation.definition.list.begin\",\"punctuation.definition.list.end\",\"punctuation.separator.arguments\",\"punctuation.definition.list\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Template Strings\",\"scope\":[\"string.template meta.template.expression\"],\"settings\":{\"foreground\":\"#b23834\"}},{\"name\":\"Backticks(``) in Template Strings\",\"scope\":[\"string.template punctuation.definition.string\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"Italics\",\"scope\":[\"italic\"],\"settings\":{\"foreground\":\"#8844ae\",\"fontStyle\":\"italic\"}},{\"name\":\"Bold\",\"scope\":[\"bold\"],\"settings\":{\"foreground\":\"#3b61b0\",\"fontStyle\":\"bold\"}},{\"name\":\"Quote\",\"scope\":[\"quote\"],\"settings\":{\"foreground\":\"#5c6285\"}},{\"name\":\"Raw Code\",\"scope\":[\"raw\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"CoffeeScript Variable Assignment\",\"scope\":[\"variable.assignment.coffee\"],\"settings\":{\"foreground\":\"#186e73\"}},{\"name\":\"CoffeeScript Parameter Function\",\"scope\":[\"variable.parameter.function.coffee\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"CoffeeScript Assignments\",\"scope\":[\"variable.assignment.coffee\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"C# Readwrite Variables\",\"scope\":[\"variable.other.readwrite.cs\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"C# Classes & Storage types\",\"scope\":[\"entity.name.type.class.cs\",\"storage.type.cs\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"C# Namespaces\",\"scope\":[\"entity.name.type.namespace.cs\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Tag names in Stylesheets\",\"scope\":[\"entity.name.tag.css\",\"entity.name.tag.less\",\"entity.name.tag.custom.css\",\"support.constant.property-value.css\"],\"settings\":{\"foreground\":\"#984e4d\",\"fontStyle\":\"\"}},{\"name\":\"Wildcard(*) selector in Stylesheets\",\"scope\":[\"entity.name.tag.wildcard.css\",\"entity.name.tag.wildcard.less\",\"entity.name.tag.wildcard.scss\",\"entity.name.tag.wildcard.sass\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"CSS Keyword Other Unit\",\"scope\":[\"keyword.other.unit.css\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Attribute Name for CSS\",\"scope\":[\"meta.attribute-selector.css entity.other.attribute-name.attribute\",\"variable.other.readwrite.js\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Elixir Classes\",\"scope\":[\"source.elixir support.type.elixir\",\"source.elixir meta.module.elixir entity.name.class.elixir\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Elixir Functions\",\"scope\":[\"source.elixir entity.name.function\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Elixir Constants\",\"scope\":[\"source.elixir constant.other.symbol.elixir\",\"source.elixir constant.other.keywords.elixir\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Elixir String Punctuations\",\"scope\":[\"source.elixir punctuation.definition.string\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Elixir\",\"scope\":[\"source.elixir variable.other.readwrite.module.elixir\",\"source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Elixir Binary Punctuations\",\"scope\":[\"source.elixir .punctuation.binary.elixir\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Closure Constant Keyword\",\"scope\":[\"constant.keyword.clojure\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Go Function Calls\",\"scope\":[\"source.go meta.function-call.go\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Go Keywords\",\"scope\":[\"source.go keyword.package.go\",\"source.go keyword.import.go\",\"source.go keyword.function.go\",\"source.go keyword.type.go\",\"source.go keyword.struct.go\",\"source.go keyword.interface.go\",\"source.go keyword.const.go\",\"source.go keyword.var.go\",\"source.go keyword.map.go\",\"source.go keyword.channel.go\",\"source.go keyword.control.go\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"Go Constants e.g. nil, string format (%s, %d, etc.)\",\"scope\":[\"source.go constant.language.go\",\"source.go constant.other.placeholder.go\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"C++ Functions\",\"scope\":[\"entity.name.function.preprocessor.cpp\",\"entity.scope.name.cpp\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"C++ Meta Namespace\",\"scope\":[\"meta.namespace-block.cpp\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"C++ Language Primitive Storage\",\"scope\":[\"storage.type.language.primitive.cpp\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"C++ Preprocessor Macro\",\"scope\":[\"meta.preprocessor.macro.cpp\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"C++ Variable Parameter\",\"scope\":[\"variable.parameter\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Powershell Variables\",\"scope\":[\"variable.other.readwrite.powershell\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Powershell Function\",\"scope\":[\"support.function.powershell\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"ID Attribute Name in HTML\",\"scope\":[\"entity.other.attribute-name.id.html\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"HTML Punctuation Definition Tag\",\"scope\":[\"punctuation.definition.tag.html\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"HTML Doctype\",\"scope\":[\"meta.tag.sgml.doctype.html\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"JavaScript Classes\",\"scope\":[\"meta.class entity.name.type.class.js\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"JavaScript Method Declaration e.g. `constructor`\",\"scope\":[\"meta.method.declaration storage.type.js\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"JavaScript Terminator\",\"scope\":[\"terminator.js\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"JavaScript Meta Punctuation Definition\",\"scope\":[\"meta.js punctuation.definition.js\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"Entity Names in Code Documentations\",\"scope\":[\"entity.name.type.instance.jsdoc\",\"entity.name.type.instance.phpdoc\"],\"settings\":{\"foreground\":\"#4d667b\"}},{\"name\":\"Other Variables in Code Documentations\",\"scope\":[\"variable.other.jsdoc\",\"variable.other.phpdoc\"],\"settings\":{\"foreground\":\"#3e697c\"}},{\"name\":\"JavaScript module imports and exports\",\"scope\":[\"variable.other.meta.import.js\",\"meta.import.js variable.other\",\"variable.other.meta.export.js\",\"meta.export.js variable.other\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"JavaScript Variable Parameter Function\",\"scope\":[\"variable.parameter.function.js\"],\"settings\":{\"foreground\":\"#555ea2\"}},{\"name\":\"JavaScript[React] Variable Other Object\",\"scope\":[\"variable.other.object.js\",\"variable.other.object.jsx\",\"variable.object.property.js\",\"variable.object.property.jsx\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"JavaScript Variables\",\"scope\":[\"variable.js\",\"variable.other.js\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"JavaScript Entity Name Type\",\"scope\":[\"entity.name.type.js\",\"entity.name.type.module.js\"],\"settings\":{\"foreground\":\"#111111\",\"fontStyle\":\"\"}},{\"name\":\"JavaScript Support Classes\",\"scope\":[\"support.class.js\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"JSON Property Names\",\"scope\":[\"support.type.property-name.json\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"JSON Support Constants\",\"scope\":[\"support.constant.json\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"JSON Property values (string)\",\"scope\":[\"meta.structure.dictionary.value.json string.quoted.double\"],\"settings\":{\"foreground\":\"#7c5686\"}},{\"name\":\"Strings in JSON values\",\"scope\":[\"string.quoted.double.json punctuation.definition.string.json\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Specific JSON Property values like null\",\"scope\":[\"meta.structure.dictionary.json meta.structure.dictionary.value constant.language\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"JavaScript Other Variable\",\"scope\":[\"variable.other.object.js\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Ruby Variables\",\"scope\":[\"variable.other.ruby\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"Ruby Class\",\"scope\":[\"entity.name.type.class.ruby\"],\"settings\":{\"foreground\":\"#984e4d\"}},{\"name\":\"Ruby Hashkeys\",\"scope\":[\"constant.language.symbol.hashkey.ruby\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Ruby Symbols\",\"scope\":[\"constant.language.symbol.ruby\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"LESS Tag names\",\"scope\":[\"entity.name.tag.less\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"LESS Keyword Other Unit\",\"scope\":[\"keyword.other.unit.css\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Attribute Name for LESS\",\"scope\":[\"meta.attribute-selector.less entity.other.attribute-name.attribute\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Markdown Headings\",\"scope\":[\"markup.heading.markdown\",\"markup.heading.setext.1.markdown\",\"markup.heading.setext.2.markdown\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Markdown Italics\",\"scope\":[\"markup.italic.markdown\"],\"settings\":{\"foreground\":\"#8844ae\",\"fontStyle\":\"italic\"}},{\"name\":\"Markdown Bold\",\"scope\":[\"markup.bold.markdown\"],\"settings\":{\"foreground\":\"#3b61b0\",\"fontStyle\":\"bold\"}},{\"name\":\"Markdown Quote + others\",\"scope\":[\"markup.quote.markdown\"],\"settings\":{\"foreground\":\"#5c6285\"}},{\"name\":\"Markdown Raw Code + others\",\"scope\":[\"markup.inline.raw.markdown\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Markdown Links\",\"scope\":[\"markup.underline.link.markdown\",\"markup.underline.link.image.markdown\"],\"settings\":{\"foreground\":\"#954f5a\",\"fontStyle\":\"underline\"}},{\"name\":\"Markdown Link Title and Description\",\"scope\":[\"string.other.link.title.markdown\",\"string.other.link.description.markdown\"],\"settings\":{\"foreground\":\"#403f53\",\"fontStyle\":\"underline\"}},{\"name\":\"Markdown Punctuation\",\"scope\":[\"punctuation.definition.string.markdown\",\"punctuation.definition.string.begin.markdown\",\"punctuation.definition.string.end.markdown\",\"meta.link.inline.markdown punctuation.definition.string\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Markdown MetaData Punctuation\",\"scope\":[\"punctuation.definition.metadata.markdown\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Markdown List Punctuation\",\"scope\":[\"beginning.punctuation.definition.list.markdown\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Markdown Inline Raw String\",\"scope\":[\"markup.inline.raw.string.markdown\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"PHP Variables\",\"scope\":[\"variable.other.php\",\"variable.other.property.php\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Support Classes in PHP\",\"scope\":[\"support.class.php\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Punctuations in PHP function calls\",\"scope\":[\"meta.function-call.php punctuation\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"PHP Global Variables\",\"scope\":[\"variable.other.global.php\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Declaration Punctuation in PHP Global Variables\",\"scope\":[\"variable.other.global.php punctuation.definition.variable\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Language Constants in Python\",\"scope\":[\"constant.language.python\"],\"settings\":{\"foreground\":\"#a24848\"}},{\"name\":\"Python Function Parameter and Arguments\",\"scope\":[\"variable.parameter.function.python\",\"meta.function-call.arguments.python\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Python Function Call\",\"scope\":[\"meta.function-call.python\",\"meta.function-call.generic.python\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"Punctuations in Python\",\"scope\":[\"punctuation.python\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"Decorator Functions in Python\",\"scope\":[\"entity.name.function.decorator.python\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Python Language Variable\",\"scope\":[\"source.python variable.language.special\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Python import control keyword\",\"scope\":[\"keyword.control\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"SCSS Variable\",\"scope\":[\"variable.scss\",\"variable.sass\",\"variable.parameter.url.scss\",\"variable.parameter.url.sass\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Variables in SASS At-Rules\",\"scope\":[\"source.css.scss meta.at-rule variable\",\"source.css.sass meta.at-rule variable\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"Variables in SASS At-Rules\",\"scope\":[\"source.css.scss meta.at-rule variable\",\"source.css.sass meta.at-rule variable\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"Attribute Name for SASS\",\"scope\":[\"meta.attribute-selector.scss entity.other.attribute-name.attribute\",\"meta.attribute-selector.sass entity.other.attribute-name.attribute\"],\"settings\":{\"foreground\":\"#aa0982\"}},{\"name\":\"Tag names in SASS\",\"scope\":[\"entity.name.tag.scss\",\"entity.name.tag.sass\"],\"settings\":{\"foreground\":\"#096e72\"}},{\"name\":\"SASS Keyword Other Unit\",\"scope\":[\"keyword.other.unit.scss\",\"keyword.other.unit.sass\"],\"settings\":{\"foreground\":\"#8844ae\"}},{\"name\":\"TypeScript[React] Variables and Object Properties\",\"scope\":[\"variable.other.readwrite.alias.ts\",\"variable.other.readwrite.alias.tsx\",\"variable.other.readwrite.ts\",\"variable.other.readwrite.tsx\",\"variable.other.object.ts\",\"variable.other.object.tsx\",\"variable.object.property.ts\",\"variable.object.property.tsx\",\"variable.other.ts\",\"variable.other.tsx\",\"variable.tsx\",\"variable.ts\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"TypeScript[React] Entity Name Types\",\"scope\":[\"entity.name.type.ts\",\"entity.name.type.tsx\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"TypeScript[React] Node Classes\",\"scope\":[\"support.class.node.ts\",\"support.class.node.tsx\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"TypeScript[React] Entity Name Types as Parameters\",\"scope\":[\"meta.type.parameters.ts entity.name.type\",\"meta.type.parameters.tsx entity.name.type\"],\"settings\":{\"foreground\":\"#4d667b\"}},{\"name\":\"TypeScript[React] Import/Export Punctuations\",\"scope\":[\"meta.import.ts punctuation.definition.block\",\"meta.import.tsx punctuation.definition.block\",\"meta.export.ts punctuation.definition.block\",\"meta.export.tsx punctuation.definition.block\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"TypeScript[React] Punctuation Decorators\",\"scope\":[\"meta.decorator punctuation.decorator.ts\",\"meta.decorator punctuation.decorator.tsx\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"TypeScript[React] Punctuation Decorators\",\"scope\":[\"meta.tag.js meta.jsx.children.tsx\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"YAML Entity Name Tags\",\"scope\":[\"entity.name.tag.yaml\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"JavaScript Variable Other ReadWrite\",\"scope\":[\"variable.other.readwrite.js\",\"variable.parameter\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"Support Class Component\",\"scope\":[\"support.class.component.js\",\"support.class.component.tsx\"],\"settings\":{\"foreground\":\"#aa0982\",\"fontStyle\":\"\"}},{\"name\":\"Text nested in React tags\",\"scope\":[\"meta.jsx.children\",\"meta.jsx.children.js\",\"meta.jsx.children.tsx\"],\"settings\":{\"foreground\":\"#403f53\"}},{\"name\":\"TypeScript Classes\",\"scope\":[\"meta.class entity.name.type.class.tsx\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"TypeScript Entity Name Type\",\"scope\":[\"entity.name.type.tsx\",\"entity.name.type.module.tsx\"],\"settings\":{\"foreground\":\"#111111\"}},{\"name\":\"TypeScript Class Variable Keyword\",\"scope\":[\"meta.class.ts meta.var.expr.ts storage.type.ts\",\"meta.class.tsx meta.var.expr.tsx storage.type.tsx\"],\"settings\":{\"foreground\":\"#76578b\"}},{\"name\":\"TypeScript Method Declaration e.g. `constructor`\",\"scope\":[\"meta.method.declaration storage.type.ts\",\"meta.method.declaration storage.type.tsx\"],\"settings\":{\"foreground\":\"#3b61b0\"}},{\"name\":\"normalize font style of certain components\",\"scope\":[\"meta.property-list.css meta.property-value.css variable.other.less\",\"meta.property-list.scss variable.scss\",\"meta.property-list.sass variable.sass\",\"meta.brace\",\"keyword.operator.operator\",\"keyword.operator.or.regexp\",\"keyword.operator.expression.in\",\"keyword.operator.relational\",\"keyword.operator.assignment\",\"keyword.operator.comparison\",\"keyword.operator.type\",\"keyword.operator\",\"keyword\",\"punctuation.definition.string\",\"punctuation\",\"variable.other.readwrite.js\",\"storage.type\",\"source.css\",\"string.quoted\"],\"settings\":{\"fontStyle\":\"\"}}],\"styleOverrides\":{\"frames\":{\"editorBackground\":\"var(--sl-color-gray-7)\",\"terminalBackground\":\"var(--sl-color-gray-7)\",\"editorActiveTabBackground\":\"var(--sl-color-gray-7)\",\"terminalTitlebarDotsForeground\":\"color-mix(in srgb, var(--sl-color-gray-5), transparent 25%)\",\"terminalTitlebarDotsOpacity\":\"0.75\",\"inlineButtonForeground\":\"var(--sl-color-text)\",\"frameBoxShadowCssValue\":\"none\"},\"textMarkers\":{\"markBackground\":\"#0000001a\",\"markBorderColor\":\"#00000055\"}}}],\"defaultLocale\":\"en\",\"cascadeLayer\":\"starlight.components\",\"styleOverrides\":{\"borderRadius\":\"0px\",\"borderWidth\":\"1px\",\"codePaddingBlock\":\"0.75rem\",\"codePaddingInline\":\"1rem\",\"codeFontFamily\":\"var(--__sl-font-mono)\",\"codeFontSize\":\"var(--sl-text-code)\",\"codeLineHeight\":\"var(--sl-line-height)\",\"uiFontFamily\":\"var(--__sl-font)\",\"textMarkers\":{\"lineDiffIndicatorMarginLeft\":\"0.25rem\",\"defaultChroma\":\"45\",\"backgroundOpacity\":\"60%\"}},\"plugins\":[{\"name\":\"title-link\",\"hooks\":{}},{\"name\":\"Starlight Plugin\",\"hooks\":{}},{\"name\":\"astro-expressive-code\",\"hooks\":{}}]}]],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true,\"allowedDomains\":[]},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false,\"failOnPrerenderConflict\":false,\"svgo\":false},\"legacy\":{\"collections\":false},\"prefetch\":{\"prefetchAll\":true},\"i18n\":{\"defaultLocale\":\"en\",\"locales\":[\"en\"],\"routing\":{\"prefixDefaultLocale\":false,\"redirectToDefaultLocale\":false,\"fallbackType\":\"redirect\"}}}","docs",["Map",11,12,37,38,50,51,87,88,98,99,159,160,177,178,204,205,228,229,265,266,298,299,344,345,405,406,459,460,476,477,521,522,555,556,589,590,616,617,648,649],"index",{id:11,data:13,body:34,filePath:35,digest:36,deferredRender:16},{title:14,description:15,editUrl:16,head:17,template:21,hero:22,sidebar:31,pagefind:16,draft:32},"Diesel is a Safe, Extensible ORM and Query Builder for <a href=\"https://www.rust-lang.org/\" target=\"_blank\" class=\"rust-link\">Rust</a>","Diesel is the most productive way to interact with databases in Rust because of its safe and composable abstractions over queries.",true,[18],{tag:19,content:20},"style","body .main-pane {\n  background: -webkit-linear-gradient(#535379, #c3c3d6);\n  background: linear-gradient(#535379, #c3c3d6);\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n}\n","splash",{tagline:15,actions:23},[24,28],{text:25,link:26,variant:27}," Getting Started","/guides/getting-started","primary",{text:29,link:30,variant:27}," Contribute to Diesel","#contribute",{hidden:32,attrs:33},false,{},"import { Card, CardGrid, Tabs, TabItem } from '@astrojs/starlight/components';\nimport { features, communityProjects, sponsors, projects } from '../../data/index.js';\nimport Footer from '../../components/Footer.astro';\n\n\n\n\n<div style=\"text-align: center; margin-bottom: 4rem;\">\n    ## Why did we make Diesel? \n</div>\n\n\n<div class=\"feature-row-aligned\">\n  <CardGrid>\n    {features.map((feature) => (\n      <div class=\"feature-side-by-side\">\n        <div class=\"feature-img-side\">\n          <div class=\"features-img-container\">\n            <img class=\"features-img\" src={feature.img} />\n          </div>\n        </div>\n        <div class=\"feature-card-side\">\n          <h4>{feature.title}</h4>\n          <div key={feature.title}>\n            <p>{feature.text}</p>\n          </div>\n        </div>\n      </div>\n    ))}\n  </CardGrid>\n</div>\n\n\n\n<div style=\"text-align: center; margin-bottom: 4rem;\">\n    Still not sold? Have a look at an in-depth [comparison](./compare/compare_diesel) with other rust database crates.\n</div>\n\n\n<div style=\"text-align: center; margin: 3rem;\">\n    ## See some examples\n</div>\n\n\n<Tabs>\n  <TabItem label=\"Simple Queries\">\n    Simple queries are a complete breeze. Loading all users from a database:\n\n    ```rust title=\"Rust\"\n    users::table.load(&mut connection)\n    ```\n\n    ```sql title=\"Executed SQL\"\n    SELECT * FROM users;\n    ```\n\n    Loading all the posts for a user:\n\n    ```rust title=\"Rust\"\n    Post::belonging_to(user).load(&mut connection)\n    ```\n\n    ```sql title=\"Executed SQL\"\n    SELECT * FROM posts WHERE user_id = 1;\n    ```\n  </TabItem>\n\n  <TabItem label=\"Complex Queries\">\n    Diesel's powerful query builder helps you construct queries as simple or complex as you need, at zero cost.\n\n    ```rust title=\"Rust\"\n    let versions = Version::belonging_to(krate)\n      .select(id)\n      .order(num.desc())\n      .limit(5);\n    let downloads = version_downloads\n      .filter(date.gt(now - 90.days()))\n      .filter(version_id.eq(any(versions)))\n      .order(date)\n      .load::<Download>(&mut conn)?;\n    ```\n\n    ```sql title=\"Executed SQL\"\n    SELECT version_downloads.*\n      WHERE date > (NOW() - '90 days')\n        AND version_id = ANY(\n          SELECT id FROM versions\n            WHERE crate_id = 1\n            ORDER BY num DESC\n            LIMIT 5\n        )\n      ORDER BY date\n    ```\n  </TabItem>\n\n  <TabItem label=\"Less Boilerplate\">\n    Diesel codegen generates boilerplate for you. It lets you focus on your business logic, not mapping to and from SQL rows.\n\n    **With Diesel:**\n    ```rust title=\"Rust\"\n    #[derive(Queryable)]\n    pub struct Download {\n        id: i32,\n        version_id: i32,\n        downloads: i32,\n        counted: i32,\n        date: SystemTime,\n    }\n    ```\n\n    **Without Diesel:**\n    ```rust title=\"Rust\"\n    pub struct Download {\n        id: i32,\n        version_id: i32,\n        downloads: i32,\n        counted: i32,\n        date: SystemTime,\n    }\n\n    impl Download {\n        fn from_row(row: &Row) -> Download {\n            Download {\n                id: row.get(\"id\"),\n                version_id: row.get(\"version_id\"),\n                downloads: row.get(\"downloads\"),\n                counted: row.get(\"counted\"),\n                date: row.get(\"date\"),\n            }\n        }\n    }\n    ```\n  </TabItem>\n\n  <TabItem label=\"Inserting Data\">\n    It's not just about reading data. Diesel makes it easy to use structs for new records.\n\n    ```rust title=\"Rust\"\n    #[derive(Insertable)]\n    #[diesel(table_name = users)]\n    struct NewUser<'a> {\n        name: &'a str,\n        hair_color: Option<&'a str>,\n    }\n\n    let new_users = vec![\n        NewUser { name: \"Sean\", hair_color: Some(\"Black\") },\n        NewUser { name: \"Gordon\", hair_color: None },\n    ];\n\n    insert_into(users)\n        .values(&new_users)\n        .execute(&mut connection);\n    ```\n\n    ```sql title=\"Executed SQL\"\n    INSERT INTO users (name, hair_color) VALUES\n      ('Sean', 'Black'),\n      ('Gordon', DEFAULT)\n    ```\n  </TabItem>\n\n  <TabItem label=\"Updating Data\">\n    Diesel's codegen can generate several ways to update a row, letting you encapsulate your logic in the way that makes sense for your app.\n\n    **Modifying a struct:**\n    ```rust title=\"Rust\"\n    post.published = true;\n    post.save_changes(&mut connection);\n    ```\n\n    **One-off batch changes:**\n    ```rust title=\"Rust\"\n    update(users.filter(email.like(\"%@spammer.com\")))\n        .set(banned.eq(true))\n        .execute(&mut connection)\n    ```\n\n    **Using a struct for encapsulation:**\n    ```rust title=\"Rust\"\n    update(Settings::belonging_to(current_user))\n        .set(&settings_form)\n        .execute(&mut connection)\n    ```\n  </TabItem>\n\n  <TabItem label=\"Ergonomic Multidatabase support\">\n    Diesel allows to ergonomically abstract over different database backends while keeping all of it's compile time guarantees.\n\n    ```rust title=\"Rust\"\n    #[derive(diesel::MultiConnection)]\n    enum DatabaseConnection {\n        Sqlite(diesel::SqliteConnection),\n        Postgres(diesel::PgConnection),\n    }\n\n    let mut connection =\n        DatabaseConnection::establish(\"postgres://localhost/diesel\")?;\n\n    let all_users = users::table.load::<User>(connection)?;\n\n    match connection {\n        DatabaseConnection::Sqlite(connection) => {\n            perform_sqlite_specific_query(connection)?;\n        }\n        DatabaseConnection::Postgres(connection) => {\n            perform_postgres_specific_query(connection)?;\n        }\n    }\n    ```\n  </TabItem>\n\n  <TabItem label=\"Ergonomic Raw SQL\">\n    There will always be certain queries that are just easier to write as raw SQL, or can't be expressed with the query builder. Even in these cases, Diesel provides an easy to use API for writing raw SQL.\n\n    ```rust title=\"Rust\"\n    #[derive(QueryableByName)]\n    #[diesel(table_name = users)]\n    struct User {\n        id: i32,\n        name: String,\n        organization_id: i32,\n    }\n\n    sql_query(include_str!(\"complex_users_by_organization.sql\"))\n        .bind::<Integer, _>(organization_id)\n        .bind::<BigInt, _>(offset)\n        .bind::<BigInt, _>(limit)\n        .load::<User>(&mut conn)?;\n    ```\n  </TabItem>\n\n  <TabItem label=\"Popular Projects using Diesel\">\n    {projects.map((project) => (\n      <div key={project.name} className=\"community-project\">\n\n        <h2>\n          <a href={project.url} target=\"_blank\">\n            {project.name}\n          </a>\n        </h2>\n        \n        <img src={project.img} style={project.imgStyles} alt={project.name} />\n\n        {project.description}\n      \n      </div>\n    ))}\n\n    Do you have found some cool project that should be linked here? Submit an issue [here](https://github.com/sgrif/diesel.rs-website).\n  </TabItem>\n\n  <TabItem label=\"Community Extensions\">\n\n  The community has made some utilities to help make diesel even easier to work with!\n\n  <div>\n    {communityProjects.map((project) => (\n      <div key={project.name} className=\"community-project\">\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; gap: 1rem;\">\n        \n          <h4 style=\"margin: 0;\">\n            <a href={project.githubUrl} target=\"_blank\" style=\"font-family: monospace;\">\n              {project.name}\n            </a>\n          </h4>\n        \n          <a href={project.crateUrl} target=\"_blank\">\n            <img src={project.badge} alt={`${project.name} on crates.io`} />\n          </a>\n        \n        </div>\n\n        <br/>\n        \n        <p style=\"margin-top: 0.75rem; margin-bottom: 0;\">\n          {project.description}\n        </p>\n      \n      </div>\n    ))}\n  </div>\n\n  Something missing? Submit an issue [here](https://github.com/sgrif/diesel.rs-website).\n\n  <br />\n\n  </TabItem>\n</Tabs>\n\n\n<div style=\"text-align: center; margin-top: 5rem; margin-bottom: 2rem;\">\n    ## Contribute\n</div>\n\nThe Diesel project is always looking for people to help with various parts of the project. If you would like to help here are different ways to contribute to the project:\n\n* Contributing Code, Documentation or Guides. Checkout the planning for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\n* Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\n* Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions).\n* Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues).\n* Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues).\n* [Sponsoring](https://github.com/weiznich) the maintainers.\n\n\n<div style=\"text-align: center; margin-top: 5rem; margin-bottom: 3rem;\">\n    ## Security Reviews\n</div>\n\n* October 2025 (Diesel 2.3): [Review](/NGICore-Diesel-penetration-test-report-2025-1.0.pdf) by [RadicallyOpenSecurity](https://www.radicallyopensecurity.com/) as part of the [NLNet](https://nlnet.nl/project/Diesel/) funding.\n\n\n<div style=\"text-align: center; margin-top: 5rem; margin-bottom: 3rem;\">\n\n## Notable Sponsors and Supporters\n\n<br />\n<br />\n\nWe would like to thank all of the sponsors supporting the work on Diesel. Notable large sponsors are:\n\n</div>\n\n<div style=\"display: flex; flex-direction: column; gap: 1rem;\">\n  {sponsors.map((sponsor) => (\n    <span style=\"margin-bottom: 1rem;\">\n      <img \n        src={sponsor.img} \n        alt={sponsor.name} \n        style=\"width: 20rem; max-width: 100%; height: auto; margin: 0 auto;\" \n      />\n      \n      <br />\n\n      <a href={sponsor.url} target=\"_blank\" rel=\"noopener noreferrer\" style=\"display: block; text-align: center;\">\n        {sponsor.name}\n      </a>\n    </span>\n  ))}\n</div>\n\n<div style=\"text-align: center; margin-top: 4rem;\">\n  Additionally we would like to thank all persons sponsoring the project on [GitHub](https://github.com/sponsors/weiznich#sponsors). \n  Without them developing Diesel wouldn't be possible.\n</div>\n\n\n<Footer/>","src/content/docs/index.mdx","e3d9f2284318e63e","api_docs",{id:37,data:39,body:47,filePath:48,digest:49,deferredRender:16},{title:40,editUrl:16,head:41,template:44,sidebar:45,pagefind:16,draft:32},"API Documentation",[42],{tag:19,content:43},".version-box {\n  margin: 1rem 0rem 2rem 0rem;\n  padding: 1rem 0rem 1rem 1rem;\n}\n\n.version-box:hover {\n  background: var(--sl-color-accent-high);\n  transition: all 0.4s ease-out;\n  border-radius: 5px;\n}\n","doc",{hidden:32,attrs:46},{},"import { Card, Icon, LinkCard } from '@astrojs/starlight/components';\n\nexport const dieselVersions = [\n  { label: \"main branch\", link: \"https://docs.diesel.rs/main/diesel/index.html\" },\n  { label: \"2.3.x\", link: \"https://docs.diesel.rs/2.3.x/diesel/index.html\" },\n  { label: \"2.2.x\", link: \"https://docs.diesel.rs/2.2.x/diesel/index.html\" },\n  { label: \"2.1.x\", link: \"https://docs.diesel.rs/2.1.x/diesel/index.html\" },\n  { label: \"2.0.x\", link: \"https://docs.diesel.rs/2.0.x/diesel/index.html\" },\n  { label: \"1.4.x\", link: \"https://docs.diesel.rs/1.4.x/diesel/index.html\" },\n];\n\n\n\n{dieselVersions.map((item) => (\n  <div class=\"version-box\">\n    <a href={item.link}>\n      API Documentation ({`${item.label}`})\n    </a>\n  </div>\n))}","src/content/docs/api_docs/index.mdx","0b7887f9dddedbc8","compare/compare_diesel",{id:50,data:52,body:57,filePath:58,digest:59,rendered:60},{title:53,editUrl:16,head:54,template:44,sidebar:55,pagefind:16,draft:32},"Compare Diesel",[],{hidden:32,attrs:56},{},"This page aims to compare Diesel with various other crates that allow to connect to relational databases.\n\nWe will cover the following crates:\n\n* [Diesel](https://crates.io/crates/diesel) and [Diesel-async](https://crates.io/crates/diesel)\n* [SQLx](https://crates.io/crates/sqlx)\n* [SeaORM](https://crates.io/crates/sea-orm)\n* [tokio-postgres](https://crates.io/crates/tokio-postgres) and [postgres](https://crates.io/crates/tokio-postgres)\n* [mysql-async](https://crates.io/crates/mysql_async) and [mysql](https://crates.io/crates/mysql_async)\n* [rusqlite](https://crates.io/crates/rusqlite)\n\nAs part of this comparison we will try to cover the following topics:\n\n* [Stability](#stability), which covers what stability guarantees are provided by the corresponding crates\n* [Safety guarantees](#safety-guarantees), which covers what is checked by a specific crate at compile time\n* [Flexibility](#flexibility), which covers what queries can by expressed by the corresponding crates\n* [Extensibility](#extensibility), which covers how easy you can extend a specific crate by additional functionality\n* [Usability](#usability), which covers how easy it is to use a specific crate\n* [Performance](#performance), which covers how well a specific crate performs\n\n## Stability\n\nRust crates usually follow semantic versioning, which means the stability of Rust crates is mostly defined by their version. Any crate with an version greater than 1.0 promises not to make breaking changes without a major version bump. By convention a 1.0 release means that a crate reached a point where the authors consider the API stable and sound for an extended amount of time. \n\nFrom the listed crates **`diesel`** and **`sea-orm`** have a version greater than 1.0. **`diesel`** published a 1.0 release in 2018, **`diesel`** 2.0 was published 4 years later in 2022. **`sea-orm`** published a 1.0 version in Summer 2024. All other crates are still in a 0.x state.\n\n:::note[Known instances of potential SemVer violations]\nIn addition the author of this document is aware of the following potential SemVer violations:\n\n* `sea-orm` plans to regularly bump their public dependency on `sqlx` to newer version which is a breaking change according to the Semver spec. This happened the first time with the `sea-orm` 1.1 release, which is **minor** version while such a change would either require a major version bump, or remaining compatibility with the older `sqlx` versions as well.\n* `diesel` has a disabled-by-default `i-implement-a-third-party-backend-and-opt-into-breaking-changes` feature flag, that allows you to explicitly opt into an unstable API. In addition it also moves deprecated functionality behind an enabled by default `with-deprecated` feature flag. Depending on your point of view these feature flags might also be considered to be breaking changes.\n:::\n\n## Safety guarantees\n\n\nThere are three coarse different levels of safety guarantees offered by the different crates:\n\n1. **Pure database interface crates**, that only accept SQL as strings\n2. **An unchecked query builder interface**\n3. **Compile time checks** which verify your query at compile time\n\nThe `tokio-postgres`, `rusqlite`, and `mysql` crates belong to the first category. These crates offer an interface that allows you to pass in SQL string and a number of bind values. This is conceptually safe as long as you don't construct your SQL strings via `format!()` or other string concatenations methods. For these crates, you as a user are responsible for writing syntactically correct SQL. If you fail that you will likely get a runtime error.\n\n`sea-orm` belongs into the second category. It provides a Rust side DSL to construct queries. This ensures that queries are mostly syntactically correct, however it cannot reason about the types and other constraints of your queries. So it's still possible to construct queries that are syntactically correct, but can fail in any other way. The most prominent case for this a type mismatch between a value passed into the query and the column you compare in the query. There can be other similar issues here, like mismatches in the kind of aggregates you have in your select clause or other constraints on the query structure.\n\n`diesel` and `sqlx` belong into the third category. They perform checks on your query at compile time, which means they can usually check for that your query will actually be valid to be run. Similar to Rust code that compiles, this gives you the guarantee that the code is able to run, but not that it is free from logic bugs. At that point the similarities between `diesel` and `sqlx` end. `diesel` implements these checks in Rust's type system, while `sqlx` uses proc-macros to check your queries against your actual database. Both approaches have their own advantages and disadvantages. `sqlx` offers an straight forward interface where you can put in whole static queries as string, `diesel` requires you to write your queries by using the DSL it provides. This difference has the following consequence:\n\n* `sqlx` always needs to know the whole query at compile time\n* `sqlx` requires a database running to perform the type-checks, although they also offer a mode that allows to read the relevant information from a previously dumped folder\n* `diesel` can also check parts of the query at compile time. This allows you to build dynamic compile time checked queries as well.\n\nAdditionally there are differences in how exactly the type checking works. As `sqlx` relies on the database to provide type and correctness information, it needs to work with what these databases provide. These results widely varies between database systems and are often incomplete. A rather famous example here is the inference of the nullability of values coming from a left join. `sqlx` cannot infer that such a column might be actually `NULL` if it's marked as `NOT NULL` in your schema due to restrictions what these databases return. `diesel` on the other hand can infer this information as it brings its own type checking. On the other hand `diesel`'s approach has the downside that it needs to model all the relevant information in the type system, which opens up room for slight differences to the behaviour of the supported databases. At the time of writing the author is not aware of any such differences, but they could exist.\n\nOverall, both `diesel` and `sqlx` provide compile time checking, but the extent and correctness of this checking widely differs. `diesel`'s checking is much more extensive and robust compared to what is currently implemented by `sqlx`.\n\n## Flexibility\n\nAll listed crates expose an API that just lets you pass in string and a number of Rust-side values (via bind parameters). From that point of view every crate can express any possible SQL query. The main question here is rather: Which queries can be supported by using the safest possible API offered by this crate?\n\nFor the `tokio-postgres`, `rusqlite` and `mysql` crates this is simple to answer as the safest API is at the same time the API that lets you pass in a string and a number of bind values. So by definition it can execute any SQL query.\n\nFor `sea-orm` this API is their query builder, which obviously restricts the amount of supported queries by that DSL. At the time of writing this covers most common SQL functionality supported by PostgreSQL, SQLite and MySQL, which excludes most database specific features, such as JSON operators or other functionality for database-specific types. Notably it currently excludes the possibility to join more than 3 tables at the same time using their model-based API. It's possible to express such joins using their query builder instead. Crucially `sea-orm` also does not offer any extension points to extend their built-in DSL so you can bring your own drop in replacement for missing functionality. It is possible to write dynamic queries using the exposed query builder.\n\n`sqlx` allows you to express any at **compile time statically known** query via their macros. On the one hand this covers a large amount of possible SQL queries, on the other hand this excludes any query that might possibly rely on runtime information. This includes the following possible queries:\n\n* Anything that involves an `IN` expression that is constructed from a Rust-side vector of values\n* Any possible form of batch insert statements that again depend on a vector of values on the Rust-side\n* Any possible query that might want to add a condition depending on a Rust-side condition\n\nIn the opinion of the author of this document these cases are not that uncommon in real world applications. By not using the static query checking in these cases you essentially lose all benefits of `sqlx` there and fall back to the same level of functionality offered by `tokio-postgres`, `mysql` and `rusqlite`\n\n`diesel` allows you to check any query expressible by the built-in DSL or any DSL/your own extension. This includes most dynamic queries, as long as at least the `FROM` query of your query is known at compile time. At the time of writing the built-in `diesel` DSL covers almost all common SQL supported by any of the supported backends, including many database-specific types/operations/functions. There are SQL constructs that are currently unsupported by diesel. These include:\n\n* Common table expressions\n* Subqueries as `FROM` clause\n\nWhile it's possible to write custom extensions for all of these missing variants, it can be challenging to do that in a way that provides the same level of compile time checks as other parts of diesel.\n\n## Extensibility\n\nExtensibility is mostly important for crates providing additional functionality on top of just executing queries or which support more than one database, which makes this topic relevant for `sea-orm`, `sqlx` and `diesel`.\n\n`sea-orm` models most of their DSL as structs and enums. These have only the specified set of fields/variants. Given that for example expressions are implemented as enums this makes it impossible to easily provide your own custom expression operator that is not supported yet by `sea-orm`. The same goes for the supported database backends, which is an enum as well. Again this makes it impossible to extend the set of supported backends outside of `sea-orm`.\n\n`sqlx` heavily relies on proc-macros for its core functionality. As far as the author of this document knows it is not possible to extend a proc-macro crate, without providing an entirely new crate that reimplements/rexports the other proc-macro. This makes it essentially impossible to extend the set of database backends supported by `sqlx`.\n\n`diesel` heavily relies on traits for almost everything. One of the large upsides of this approach is that you can extend almost anything in `diesel`, including the DSL, the type mapping and the set of supported backends. You can find examples for this on crates.io:\n\n* [postgis-diesel](https://crates.io/crates/postgis_diesel) Support for the PostGIS extension (Functions & Types)\n* [pgvector](https://crates.io/crates/pgvector) Support for the PgVector extension (Functions & Types)\n* [diesel-oracle](https://crates.io/crates/diesel-oci) Support for Oracle as a custom backend\n\n\n## Usability\n\nThe `diesel-async` crate (not with the sqlite backend), the `sqlx` crate (not with the sqlite backend), the `sea-orm` crate (not with the sqlite backend), the `tokio-postgres` crate, the `postgres`, the `mysql-async` and the `mysql` crate provide pure Rust connection implementations. This makes the first compilation of these crates as easy as running `cargo build`. They don't require any additional dependencies.\n`diesel`, `rusqlite` and any other crate with a sqlite backend have dependencies on the native C client libraries for the relevant databases. These need to be installed before compiling these crates, although there are also ways to compile them as part of your build process. This can make the first compilation harder.\n\nAll of `diesel`, `diesel-async` and `sqlx` rely on traits to implement core parts of their functionality. While this makes things very flexible it can also lead to hard to understand error messages with these crates. `diesel` (and `diesel-async`) provide [documentation](https://docs.diesel.rs/2.2.x/diesel/index.html#how-to-read-diesels-compile-time-error-messages) on how to read error messages. Additionally it provides helper attributes and employs compiler hints to improve possible error messages to make them easier to understand.\n\n\n## Performance\n\nPerformance is a complicated topic. It can be noted that all of the listed crates provide good performance for almost all use-cases, as most users do not really need to care about the last bit of possible performance. Nevertheless there are differences in the performance provided by the different crates. As always: If you need to care about performance make sure to perform your **own** benchmarks with your own workload to find the optimal solution for your use-case. The following text will provide a general overview.\n[The Diesel benchmark repository](https://github.com/diesel-rs/metrics) provides an overview of different benchmark results for all listed crates. \nWe can observe the following points:\n\n* All async SQLite crates perform considerably worse than their sync counterparts. This is likely due to SQLite not providing an async API at all. Consider using a sync crate if your application only needs to support SQLite.\n* There is a notable difference between different output sizes for the different crates. For small output sizes there is almost no difference between most of them, while the gap becomes considerably larger for large output sizes. `diesel` and `diesel-async` perform relative well here. This might indicate that data deserialization is considerably more optimized in Diesel than in other crates\n\n\nThere is one notable performance related feature that deserves some discussion here: **Query Pipelining**. \nThis PostgreSQL specific feature allows to send several queries in directly behind each other without waiting for the results of the previous queries. This enables skipping some of the time that are usually coupled to network round trips. For obvious reason this only works for cases where subsequent queries do not depend on results from previous queries. The crates.io team reported a 20% performance increase after converting one of their endpoints to use query pipelining. Query Pipelining is supported by `diesel-async` and `tokio-postgres`. Notably `sqlx` and `sea-orm` do not support this feature.\n\n\n:::note[A note about the (non-)necessity of async database libraries]\nIn the context of performance there are often claims that async database drivers perform significantly better than their synchronous counter parts. At the time of writing this seems to be not true for the Rust ecosystem. The author of this text has the following opinions on this topic:\n\n* **SQLite** provides a purely synchronous API, any async library build on top of it introduces additional overhead.\n* **Simple SQLite queries** can stay under the 10 to 100 microseconds limit of what is [commonly considered as blocking in Rust](https://ryhl.io/blog/async-what-is-blocking/).\n* **For network-based database services** like PostgreSQL and MySQL your application is usually limited by the number of database connection. These database systems commonly allow only a few ten connections (up to the low hundreds) of database connections before running out of resources. If your application receives more concurrent requests than this it will need to wait on *getting* a database connection. This use-case is covered by async database pool solutions like [deadpool-diesel](https://docs.rs/deadpool-diesel/latest/deadpool_diesel/index.html), which can be used in combination with synchronous database libraries.\n\nThat all written: There are valid use-cases for using an async database library, for example setups with high network latency or situations where you need to abort requests. You can cover this use-case with [diesel-async](https://lib.rs/crates/diesel-async).\n:::","src/content/docs/compare/compare_diesel.md","d886d37a551fb029",{html:61,metadata:62},"<p>This page aims to compare Diesel with various other crates that allow to connect to relational databases.</p>\n<p>We will cover the following crates:</p>\n<ul>\n<li><a href=\"https://crates.io/crates/diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel</a> and <a href=\"https://crates.io/crates/diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel-async</a></li>\n<li><a href=\"https://crates.io/crates/sqlx\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">SQLx</a></li>\n<li><a href=\"https://crates.io/crates/sea-orm\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">SeaORM</a></li>\n<li><a href=\"https://crates.io/crates/tokio-postgres\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">tokio-postgres</a> and <a href=\"https://crates.io/crates/tokio-postgres\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">postgres</a></li>\n<li><a href=\"https://crates.io/crates/mysql_async\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">mysql-async</a> and <a href=\"https://crates.io/crates/mysql_async\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">mysql</a></li>\n<li><a href=\"https://crates.io/crates/rusqlite\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">rusqlite</a></li>\n</ul>\n<p>As part of this comparison we will try to cover the following topics:</p>\n<ul>\n<li><a href=\"#stability\">Stability</a>, which covers what stability guarantees are provided by the corresponding crates</li>\n<li><a href=\"#safety-guarantees\">Safety guarantees</a>, which covers what is checked by a specific crate at compile time</li>\n<li><a href=\"#flexibility\">Flexibility</a>, which covers what queries can by expressed by the corresponding crates</li>\n<li><a href=\"#extensibility\">Extensibility</a>, which covers how easy you can extend a specific crate by additional functionality</li>\n<li><a href=\"#usability\">Usability</a>, which covers how easy it is to use a specific crate</li>\n<li><a href=\"#performance\">Performance</a>, which covers how well a specific crate performs</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"stability\">Stability</h2><a class=\"sl-anchor-link\" href=\"#stability\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Stability</span></a></div>\n<p>Rust crates usually follow semantic versioning, which means the stability of Rust crates is mostly defined by their version. Any crate with an version greater than 1.0 promises not to make breaking changes without a major version bump. By convention a 1.0 release means that a crate reached a point where the authors consider the API stable and sound for an extended amount of time.</p>\n<p>From the listed crates <strong><code dir=\"auto\">diesel</code></strong> and <strong><code dir=\"auto\">sea-orm</code></strong> have a version greater than 1.0. <strong><code dir=\"auto\">diesel</code></strong> published a 1.0 release in 2018, <strong><code dir=\"auto\">diesel</code></strong> 2.0 was published 4 years later in 2022. <strong><code dir=\"auto\">sea-orm</code></strong> published a 1.0 version in Summer 2024. All other crates are still in a 0.x state.</p>\n<aside aria-label=\"Known instances of potential SemVer violations\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Known instances of potential SemVer violations</p><div class=\"starlight-aside__content\"><p>In addition the author of this document is aware of the following potential SemVer violations:</p><ul>\n<li><code dir=\"auto\">sea-orm</code> plans to regularly bump their public dependency on <code dir=\"auto\">sqlx</code> to newer version which is a breaking change according to the Semver spec. This happened the first time with the <code dir=\"auto\">sea-orm</code> 1.1 release, which is <strong>minor</strong> version while such a change would either require a major version bump, or remaining compatibility with the older <code dir=\"auto\">sqlx</code> versions as well.</li>\n<li><code dir=\"auto\">diesel</code> has a disabled-by-default <code dir=\"auto\">i-implement-a-third-party-backend-and-opt-into-breaking-changes</code> feature flag, that allows you to explicitly opt into an unstable API. In addition it also moves deprecated functionality behind an enabled by default <code dir=\"auto\">with-deprecated</code> feature flag. Depending on your point of view these feature flags might also be considered to be breaking changes.</li>\n</ul></div></aside>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"safety-guarantees\">Safety guarantees</h2><a class=\"sl-anchor-link\" href=\"#safety-guarantees\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Safety guarantees</span></a></div>\n<p>There are three coarse different levels of safety guarantees offered by the different crates:</p>\n<ol>\n<li><strong>Pure database interface crates</strong>, that only accept SQL as strings</li>\n<li><strong>An unchecked query builder interface</strong></li>\n<li><strong>Compile time checks</strong> which verify your query at compile time</li>\n</ol>\n<p>The <code dir=\"auto\">tokio-postgres</code>, <code dir=\"auto\">rusqlite</code>, and <code dir=\"auto\">mysql</code> crates belong to the first category. These crates offer an interface that allows you to pass in SQL string and a number of bind values. This is conceptually safe as long as you dont construct your SQL strings via <code dir=\"auto\">format!()</code> or other string concatenations methods. For these crates, you as a user are responsible for writing syntactically correct SQL. If you fail that you will likely get a runtime error.</p>\n<p><code dir=\"auto\">sea-orm</code> belongs into the second category. It provides a Rust side DSL to construct queries. This ensures that queries are mostly syntactically correct, however it cannot reason about the types and other constraints of your queries. So its still possible to construct queries that are syntactically correct, but can fail in any other way. The most prominent case for this a type mismatch between a value passed into the query and the column you compare in the query. There can be other similar issues here, like mismatches in the kind of aggregates you have in your select clause or other constraints on the query structure.</p>\n<p><code dir=\"auto\">diesel</code> and <code dir=\"auto\">sqlx</code> belong into the third category. They perform checks on your query at compile time, which means they can usually check for that your query will actually be valid to be run. Similar to Rust code that compiles, this gives you the guarantee that the code is able to run, but not that it is free from logic bugs. At that point the similarities between <code dir=\"auto\">diesel</code> and <code dir=\"auto\">sqlx</code> end. <code dir=\"auto\">diesel</code> implements these checks in Rusts type system, while <code dir=\"auto\">sqlx</code> uses proc-macros to check your queries against your actual database. Both approaches have their own advantages and disadvantages. <code dir=\"auto\">sqlx</code> offers an straight forward interface where you can put in whole static queries as string, <code dir=\"auto\">diesel</code> requires you to write your queries by using the DSL it provides. This difference has the following consequence:</p>\n<ul>\n<li><code dir=\"auto\">sqlx</code> always needs to know the whole query at compile time</li>\n<li><code dir=\"auto\">sqlx</code> requires a database running to perform the type-checks, although they also offer a mode that allows to read the relevant information from a previously dumped folder</li>\n<li><code dir=\"auto\">diesel</code> can also check parts of the query at compile time. This allows you to build dynamic compile time checked queries as well.</li>\n</ul>\n<p>Additionally there are differences in how exactly the type checking works. As <code dir=\"auto\">sqlx</code> relies on the database to provide type and correctness information, it needs to work with what these databases provide. These results widely varies between database systems and are often incomplete. A rather famous example here is the inference of the nullability of values coming from a left join. <code dir=\"auto\">sqlx</code> cannot infer that such a column might be actually <code dir=\"auto\">NULL</code> if its marked as <code dir=\"auto\">NOT NULL</code> in your schema due to restrictions what these databases return. <code dir=\"auto\">diesel</code> on the other hand can infer this information as it brings its own type checking. On the other hand <code dir=\"auto\">diesel</code>s approach has the downside that it needs to model all the relevant information in the type system, which opens up room for slight differences to the behaviour of the supported databases. At the time of writing the author is not aware of any such differences, but they could exist.</p>\n<p>Overall, both <code dir=\"auto\">diesel</code> and <code dir=\"auto\">sqlx</code> provide compile time checking, but the extent and correctness of this checking widely differs. <code dir=\"auto\">diesel</code>s checking is much more extensive and robust compared to what is currently implemented by <code dir=\"auto\">sqlx</code>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"flexibility\">Flexibility</h2><a class=\"sl-anchor-link\" href=\"#flexibility\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Flexibility</span></a></div>\n<p>All listed crates expose an API that just lets you pass in string and a number of Rust-side values (via bind parameters). From that point of view every crate can express any possible SQL query. The main question here is rather: Which queries can be supported by using the safest possible API offered by this crate?</p>\n<p>For the <code dir=\"auto\">tokio-postgres</code>, <code dir=\"auto\">rusqlite</code> and <code dir=\"auto\">mysql</code> crates this is simple to answer as the safest API is at the same time the API that lets you pass in a string and a number of bind values. So by definition it can execute any SQL query.</p>\n<p>For <code dir=\"auto\">sea-orm</code> this API is their query builder, which obviously restricts the amount of supported queries by that DSL. At the time of writing this covers most common SQL functionality supported by PostgreSQL, SQLite and MySQL, which excludes most database specific features, such as JSON operators or other functionality for database-specific types. Notably it currently excludes the possibility to join more than 3 tables at the same time using their model-based API. Its possible to express such joins using their query builder instead. Crucially <code dir=\"auto\">sea-orm</code> also does not offer any extension points to extend their built-in DSL so you can bring your own drop in replacement for missing functionality. It is possible to write dynamic queries using the exposed query builder.</p>\n<p><code dir=\"auto\">sqlx</code> allows you to express any at <strong>compile time statically known</strong> query via their macros. On the one hand this covers a large amount of possible SQL queries, on the other hand this excludes any query that might possibly rely on runtime information. This includes the following possible queries:</p>\n<ul>\n<li>Anything that involves an <code dir=\"auto\">IN</code> expression that is constructed from a Rust-side vector of values</li>\n<li>Any possible form of batch insert statements that again depend on a vector of values on the Rust-side</li>\n<li>Any possible query that might want to add a condition depending on a Rust-side condition</li>\n</ul>\n<p>In the opinion of the author of this document these cases are not that uncommon in real world applications. By not using the static query checking in these cases you essentially lose all benefits of <code dir=\"auto\">sqlx</code> there and fall back to the same level of functionality offered by <code dir=\"auto\">tokio-postgres</code>, <code dir=\"auto\">mysql</code> and <code dir=\"auto\">rusqlite</code></p>\n<p><code dir=\"auto\">diesel</code> allows you to check any query expressible by the built-in DSL or any DSL/your own extension. This includes most dynamic queries, as long as at least the <code dir=\"auto\">FROM</code> query of your query is known at compile time. At the time of writing the built-in <code dir=\"auto\">diesel</code> DSL covers almost all common SQL supported by any of the supported backends, including many database-specific types/operations/functions. There are SQL constructs that are currently unsupported by diesel. These include:</p>\n<ul>\n<li>Common table expressions</li>\n<li>Subqueries as <code dir=\"auto\">FROM</code> clause</li>\n</ul>\n<p>While its possible to write custom extensions for all of these missing variants, it can be challenging to do that in a way that provides the same level of compile time checks as other parts of diesel.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"extensibility\">Extensibility</h2><a class=\"sl-anchor-link\" href=\"#extensibility\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Extensibility</span></a></div>\n<p>Extensibility is mostly important for crates providing additional functionality on top of just executing queries or which support more than one database, which makes this topic relevant for <code dir=\"auto\">sea-orm</code>, <code dir=\"auto\">sqlx</code> and <code dir=\"auto\">diesel</code>.</p>\n<p><code dir=\"auto\">sea-orm</code> models most of their DSL as structs and enums. These have only the specified set of fields/variants. Given that for example expressions are implemented as enums this makes it impossible to easily provide your own custom expression operator that is not supported yet by <code dir=\"auto\">sea-orm</code>. The same goes for the supported database backends, which is an enum as well. Again this makes it impossible to extend the set of supported backends outside of <code dir=\"auto\">sea-orm</code>.</p>\n<p><code dir=\"auto\">sqlx</code> heavily relies on proc-macros for its core functionality. As far as the author of this document knows it is not possible to extend a proc-macro crate, without providing an entirely new crate that reimplements/rexports the other proc-macro. This makes it essentially impossible to extend the set of database backends supported by <code dir=\"auto\">sqlx</code>.</p>\n<p><code dir=\"auto\">diesel</code> heavily relies on traits for almost everything. One of the large upsides of this approach is that you can extend almost anything in <code dir=\"auto\">diesel</code>, including the DSL, the type mapping and the set of supported backends. You can find examples for this on crates.io:</p>\n<ul>\n<li><a href=\"https://crates.io/crates/postgis_diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">postgis-diesel</a> Support for the PostGIS extension (Functions &#x26; Types)</li>\n<li><a href=\"https://crates.io/crates/pgvector\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">pgvector</a> Support for the PgVector extension (Functions &#x26; Types)</li>\n<li><a href=\"https://crates.io/crates/diesel-oci\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">diesel-oracle</a> Support for Oracle as a custom backend</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"usability\">Usability</h2><a class=\"sl-anchor-link\" href=\"#usability\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Usability</span></a></div>\n<p>The <code dir=\"auto\">diesel-async</code> crate (not with the sqlite backend), the <code dir=\"auto\">sqlx</code> crate (not with the sqlite backend), the <code dir=\"auto\">sea-orm</code> crate (not with the sqlite backend), the <code dir=\"auto\">tokio-postgres</code> crate, the <code dir=\"auto\">postgres</code>, the <code dir=\"auto\">mysql-async</code> and the <code dir=\"auto\">mysql</code> crate provide pure Rust connection implementations. This makes the first compilation of these crates as easy as running <code dir=\"auto\">cargo build</code>. They dont require any additional dependencies.\n<code dir=\"auto\">diesel</code>, <code dir=\"auto\">rusqlite</code> and any other crate with a sqlite backend have dependencies on the native C client libraries for the relevant databases. These need to be installed before compiling these crates, although there are also ways to compile them as part of your build process. This can make the first compilation harder.</p>\n<p>All of <code dir=\"auto\">diesel</code>, <code dir=\"auto\">diesel-async</code> and <code dir=\"auto\">sqlx</code> rely on traits to implement core parts of their functionality. While this makes things very flexible it can also lead to hard to understand error messages with these crates. <code dir=\"auto\">diesel</code> (and <code dir=\"auto\">diesel-async</code>) provide <a href=\"https://docs.diesel.rs/2.2.x/diesel/index.html#how-to-read-diesels-compile-time-error-messages\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">documentation</a> on how to read error messages. Additionally it provides helper attributes and employs compiler hints to improve possible error messages to make them easier to understand.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"performance\">Performance</h2><a class=\"sl-anchor-link\" href=\"#performance\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Performance</span></a></div>\n<p>Performance is a complicated topic. It can be noted that all of the listed crates provide good performance for almost all use-cases, as most users do not really need to care about the last bit of possible performance. Nevertheless there are differences in the performance provided by the different crates. As always: If you need to care about performance make sure to perform your <strong>own</strong> benchmarks with your own workload to find the optimal solution for your use-case. The following text will provide a general overview.\n<a href=\"https://github.com/diesel-rs/metrics\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">The Diesel benchmark repository</a> provides an overview of different benchmark results for all listed crates.\nWe can observe the following points:</p>\n<ul>\n<li>All async SQLite crates perform considerably worse than their sync counterparts. This is likely due to SQLite not providing an async API at all. Consider using a sync crate if your application only needs to support SQLite.</li>\n<li>There is a notable difference between different output sizes for the different crates. For small output sizes there is almost no difference between most of them, while the gap becomes considerably larger for large output sizes. <code dir=\"auto\">diesel</code> and <code dir=\"auto\">diesel-async</code> perform relative well here. This might indicate that data deserialization is considerably more optimized in Diesel than in other crates</li>\n</ul>\n<p>There is one notable performance related feature that deserves some discussion here: <strong>Query Pipelining</strong>.\nThis PostgreSQL specific feature allows to send several queries in directly behind each other without waiting for the results of the previous queries. This enables skipping some of the time that are usually coupled to network round trips. For obvious reason this only works for cases where subsequent queries do not depend on results from previous queries. The crates.io team reported a 20% performance increase after converting one of their endpoints to use query pipelining. Query Pipelining is supported by <code dir=\"auto\">diesel-async</code> and <code dir=\"auto\">tokio-postgres</code>. Notably <code dir=\"auto\">sqlx</code> and <code dir=\"auto\">sea-orm</code> do not support this feature.</p>\n<aside aria-label=\"A note about the (non-)necessity of async database libraries\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>A note about the (non-)necessity of async database libraries</p><div class=\"starlight-aside__content\"><p>In the context of performance there are often claims that async database drivers perform significantly better than their synchronous counter parts. At the time of writing this seems to be not true for the Rust ecosystem. The author of this text has the following opinions on this topic:</p><ul>\n<li><strong>SQLite</strong> provides a purely synchronous API, any async library build on top of it introduces additional overhead.</li>\n<li><strong>Simple SQLite queries</strong> can stay under the 10 to 100 microseconds limit of what is <a href=\"https://ryhl.io/blog/async-what-is-blocking/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">commonly considered as blocking in Rust</a>.</li>\n<li><strong>For network-based database services</strong> like PostgreSQL and MySQL your application is usually limited by the number of database connection. These database systems commonly allow only a few ten connections (up to the low hundreds) of database connections before running out of resources. If your application receives more concurrent requests than this it will need to wait on <em>getting</em> a database connection. This use-case is covered by async database pool solutions like <a href=\"https://docs.rs/deadpool-diesel/latest/deadpool_diesel/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">deadpool-diesel</a>, which can be used in combination with synchronous database libraries.</li>\n</ul><p>That all written: There are valid use-cases for using an async database library, for example setups with high network latency or situations where you need to abort requests. You can cover this use-case with <a href=\"https://lib.rs/crates/diesel-async\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">diesel-async</a>.</p></div></aside>",{headings:63,localImagePaths:83,remoteImagePaths:84,frontmatter:85,imagePaths:86},[64,68,71,74,77,80],{depth:65,slug:66,text:67},2,"stability","Stability",{depth:65,slug:69,text:70},"safety-guarantees","Safety guarantees",{depth:65,slug:72,text:73},"flexibility","Flexibility",{depth:65,slug:75,text:76},"extensibility","Extensibility",{depth:65,slug:78,text:79},"usability","Usability",{depth:65,slug:81,text:82},"performance","Performance",[],[],{title:53},[],"guides/getting-started",{id:87,data:89,body:95,filePath:96,digest:97,deferredRender:16},{title:90,description:91,editUrl:16,head:92,template:44,sidebar:93,pagefind:16,draft:32},"Getting Started with Diesel","A step-by-step guide to setting up Diesel with PostgreSQL, SQLite, or MySQL.",[],{hidden:32,attrs:94},{},"import { Aside, Tabs, TabItem } from '@astrojs/starlight/components'; \n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\" value=\"postgres\" />\n  <TabItem label=\"SQLite\" value=\"sqlite\" />\n  <TabItem label=\"MySQL\" value=\"mysql\" />\n</Tabs>\n\n\n\nFor this guide, we're going to walk through some simple examples for each of the pieces of CRUD,\nwhich stands for \"Create Read Update Delete\". Each step in this guide will build on the previous\nand is meant to be followed along.\n\nBefore we start, make sure you have one of PostgreSQL, SQLite, or MySQL installed and running. In the project repository, you may find various [examples](https://github.com/diesel-rs/diesel/tree/2.3.x/examples) for every supported database.\n\n:::note[A note on Rust versions]\n\n  Diesel requires Rust 1.86.0 or later. If you're following along with this guide, make sure you're using at least that version of Rust by running `rustup update stable`.\n\n:::\n\n## Initializing a new project\n\nThe first thing we need to do is generate our project.\n\n```sh title=\"Generate a new project\"\ncargo new --lib diesel_demo\ncd diesel_demo\n```\n\nFirst, let's add Diesel to our dependencies. We're also going to use a tool called\n[`.env`][dotenvy] to manage our environment variables for us. We'll add it to our dependencies\nas well.\n\n[dotenvy]: https://github.com/allan2/dotenvy\n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n\n    ```toml title=\"Cargo.toml\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/Cargo.toml\"\n    [dependencies]\n    diesel = { version = \"2.2.0\", features = [\"postgres\"] }\n    # build libpq and openssl as part of the build process\n    # uncomment these lines if you run into setup issues\n    # pq-sys = { version = \"0.6\", features = [\"bundled\"] }\n    # openssl-sys = { version = \"0.9.100\", features = [\"vendored\"] } \n    dotenvy = \"0.15\"\n    ```\n  </TabItem>\n  <TabItem label=\"SQLite\">\n\n    ```toml title=\"Cargo.toml\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/Cargo.toml\"\n    [dependencies]\n    diesel = { version = \"2.2.0\", features = [\"sqlite\", \"returning_clauses_for_sqlite_3_35\"] }\n    # build libsqlite3 as part of the build process\n    # uncomment this line if you run into setup issues\n    # libsqlite3-sys = { version = \"0.30\", features = [\"bundled\"] }\n    dotenvy = \"0.15\"\n    ```\n  </TabItem>\n  <TabItem label=\"MySQL\">\n    \n    ```toml title=\"Cargo.toml\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/Cargo.toml\"\n    [dependencies]\n    diesel = { version = \"2.2.0\", features = [\"mysql\"] }\n    # build libmysqlclient as part of the build process\n    # uncomment this line if you run into setup issues\n    # mysqlclient-sys = { version = \"0.4\", features = [\"bundled\"] }\n    dotenvy = \"0.15\"\n    ```\n  </TabItem>\n</Tabs>\n\n\n\n## Installing Diesel CLI\n\nDiesel provides a separate [CLI] tool to help manage your project. Since it's a standalone binary,\nand doesn't affect your project's code directly, we don't add it to `Cargo.toml`.\nInstead, we just install it on our system.\n\n[CLI]: https://github.com/diesel-rs/diesel/tree/2.3.x/diesel_cli\n\nWe provide pre-built binaries for diesel cli. You can install the command line tool via:\n\n\n```sh title=\"Install the CLI tool\"\n# Linux/MacOS\ncurl --proto '=https' --tlsv1.2 -LsSf https://github.com/diesel-rs/diesel/releases/download/v2.3.5/diesel_cli-installer.sh | sh\n\n# Windows (powershell)\nSet-ExecutionPolicy RemoteSigned -scope CurrentUser\nirm https://github.com/diesel-rs/diesel/releases/download/v2.3.5/diesel_cli-installer.ps1 | iex\n```\n\nYou also can use [`cargo-binstall`](https://github.com/cargo-bins/cargo-binstall) for this. To install diesel cli with `cargo binstall` run the following command:\n\n\n```sh title=\"Install with cargo binstall\"\ncargo binstall diesel_cli\n```\n\nThis automatically finds the right binary for your system.\n\nAlternatively you can manually install diesel cli by using `cargo install:`\n\n\n```sh title=\"Install the CLI tool\"\ncargo install diesel_cli\n```\n\n\n:::note[A note on installing `diesel_cli`]\n\nIf you run into an error like:\n\n```sh\nnote: ld: library not found for -lmysqlclient\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n```\n\nThis means you are missing the client library needed for a database backend\n `mysqlclient` in this case. You can resolve this issue by either installing the library\n(using the usual way to do this depending on your operating system) or by excluding\nthe undesired default library with the `--no-default-features` flag. \n\nBy default diesel CLI depends on the following client libraries:\n\n* [`libpq`](https://www.postgresql.org/docs/current/libpq.html) for the PostgreSQL backend\n* [`libmysqlclient`](https://dev.mysql.com/doc/c-api/8.0/en/c-api-implementations.html) for the Mysql backend\n* [`libsqlite3`](https://www.sqlite.org/index.html) for the SQLite backend\n\nIf you are not sure on how to install those dependencies please consult the documentation of the corresponding dependency or your distribution package manager. By default diesel will dynamically link these libraries, which means they need to be present on your system at build and runtime.\n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n\n    For example, if you only have PostgreSQL installed, you can use this to install `diesel_cli` with only PostgreSQL:\n\n    ```sh title=\"PostgreSQL\"\n    cargo install diesel_cli --no-default-features --features postgres\n    ```\n\n  </TabItem>\n  <TabItem label=\"SQLite\">\n\n    For example, if you only have SQLite installed, you can use this to install `diesel_cli`\nwith only SQLite:\n\n    ```sh title=\"SQLite\"\n    cargo install diesel_cli --no-default-features --features sqlite\n    ```\n\n  </TabItem>\n  <TabItem label=\"MySQL\">\n    \n    For example, if you only have MySQL installed, you can use this to install `diesel_cli`\nwith only MySQL:\n\n    ```sh title=\"MySQL\"\n    cargo install diesel_cli --no-default-features --features mysql\n    ```\n\n  </TabItem>\n</Tabs>\n\n\nIf you are unsure how to configure these dependencies checkout [diesel CI](https://github.com/diesel-rs/diesel/blob/main/.github/workflows/ci.yml#L63-L222) configuration for a working setup for different operating systems.\n\nDiesel-cli also offers features to build and statically link these libraries during `cargo install`. Use the `postgres-bundled`, `mysql-bundled` and `sqlite-bundled` feature flags for this. You need to provide the build dependencies for these libraries in that case. This involves a C compiler for all of them and for mysql cmake + a C++ compiler. In turn it might simplify your setup process.\n\nThere are no `*-bundled` features for diesel itself. If you want to utilise static linking there as well you need to add a dependency on the relevant sys crate (`pq-sys` for PostgreSQL, `mysqlclient-sys` for MySQL and `libsqlite3-sys` for SQLite) and enable the `bundled` feature for this crate. See the uncommented lines in the example `Cargo.toml` files above for the corresponding setup.\n\n:::\n\n\n\n## Setup Diesel for your project\n\nWe need to tell Diesel where to find our database. We do this by setting the `DATABASE_URL`\nenvironment variable. On our development machines, we'll likely have multiple projects going,\nand we don't want to pollute our environment. We can put the url in a `.env` file instead.\n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n    ```sh\n    echo DATABASE_URL=postgres://username:password@localhost/diesel_demo > .env\n    ```\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n    ```sh\n    echo DATABASE_URL=/path/to/your/sqlite/database.db > .env\n    ```\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n    ```sh\n    echo DATABASE_URL=mysql://username:password@localhost/diesel_demo > .env\n    ```\n  </TabItem>\n</Tabs>\n\n\nNow Diesel CLI can set everything up for us.\n\n```sh\ndiesel setup\n```\n\nThis will create our database (if it didn't already exist) and set up the initial migrations directory, which will contain a generated migration file that establishes the Diesel setup. Note that the migrations directory will not be empty as the initial setup migration is automatically generated.\n\nNow we're going to write a small CLI that lets us manage a blog (ignoring the fact\nthat we can only access the database from this CLI). The first thing we're going to need is\na table to store our posts. Let's create a migration for that:\n\n```sh\ndiesel migration generate create_posts\n```\n\nDiesel CLI will create two empty files for us in the required structure.\nYou'll see output that looks something like this:\n\n```sh\nCreating migrations/20160815133237_create_posts/up.sql\nCreating migrations/20160815133237_create_posts/down.sql\n```\n\nMigrations allow us to evolve the database schema over time. Each migration consists of an `up.sql` file to apply the changes and a `down.sql` file to revert them. Applying and immediately reverting a migration should leave your database schema unchanged.\n\nNext, we'll write the SQL for migrations:\n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n    \n    ```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/getting_started_step_1/migrations/20160815133237_create_posts/up.sql\"\n    CREATE TABLE posts (\n      id SERIAL PRIMARY KEY,\n      title VARCHAR NOT NULL,\n      body TEXT NOT NULL,\n      published BOOLEAN NOT NULL DEFAULT FALSE\n    )\n    ```\n\n    ```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/getting_started_step_1/migrations/20160815133237_create_posts/down.sql\"\n    DROP TABLE posts\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/migrations/20170124012402_create_posts/up.sql\"\n    CREATE TABLE posts (\n      id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n      title VARCHAR NOT NULL,\n      body TEXT NOT NULL,\n      published BOOLEAN NOT NULL DEFAULT 0\n    )\n    ```\n\n    ```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/migrations/20170124012402_create_posts/down.sql\"\n    DROP TABLE posts\n    ```\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n    ```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/migrations/20160815133237_create_posts/up.sql\"\n    CREATE TABLE posts (\n      id INTEGER AUTO_INCREMENT PRIMARY KEY,\n      title VARCHAR(255) NOT NULL,\n      body TEXT NOT NULL,\n      published BOOLEAN NOT NULL DEFAULT FALSE\n    );\n    ```\n\n    ```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/migrations/20160815133237_create_posts/down.sql\"\n    DROP TABLE posts\n    ```\n  </TabItem>\n</Tabs>\n\n\nWe can apply our new migration:\n\n```sh\ndiesel migration run\n```\n\nIt's a good idea to ensure that `down.sql` is correct. You can quickly confirm that your `down.sql`\nrolls back your migration correctly by `redoing` the migration:\n\n```sh\ndiesel migration redo\n```\n\n\n:::note[A Note on Raw SQL in Migrations]\n\nSince migrations are written in raw SQL, they can contain specific features of the database system you use.\nFor example, the `CREATE TABLE` statement above uses PostgreSQL's `SERIAL` type. If you want to use SQLite instead,\nyou need to use `INTEGER` instead. The [diesel GitHub repository](https://github.com/diesel-rs/diesel/tree/main/examples) \ncontains modified examples for all supported backends. Be sure to select the backend you are using at the top of the page to see examples specific for that backend.\n\nIf you prefer to generate your migrations based on Rust code instead, the diesel CLI tool provides an additional `--diff-schema`  on the `diesel migration generate` command that allows to generate migrations based on the current schema definition and your database. To generate a migration equivalent to the shown Raw SQL migration you need to \n\n* Create a `schema.rs` file with the following content:\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n        \n    ```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/src/schema.rs\"\n    diesel::table! {\n        posts (id) {\n            id -> Int4,\n            title -> Varchar,\n            body -> Text,\n            published -> Bool,\n        }\n    }\n    ```\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n    \n    ```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/src/schema.rs\"\n    diesel::table! {\n        posts (id) {\n            id -> Integer,\n            title -> Text,\n            body -> Text,\n            published -> Bool,\n        }\n    }\n    ```\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n    \n    ```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/src/schema.rs\"\n    diesel::table! {\n        posts (id) {\n            id -> Integer,\n            title -> Varchar,\n            body -> Text,\n            published -> Bool,\n        }\n    }\n    ```\n  </TabItem>\n</Tabs>\n\n\n[The documentation of the `table!` macro](https://docs.diesel.rs/2.3.x/diesel/macro.table.html) contains the syntax used for this macros. [The `diesel::sql_types` module](https://docs.diesel.rs/2.3.x/diesel/sql_types/index.html) provides documentation for the SQL side types used to define the relevant columns.\n\n* Run `diesel migration generate --diff-schema create_posts`\n\nThis will generate both the `up.sql` and the `down.sql` files of your migration pre-populated with the relevant SQL.\nThese pre-populated migration files can serve as starting point to adjust the generated SQL to your needs. You as as user need to decide which modifications are relevant for your use case as Diesel will never generate a completly perfect migration for you. For this guide for example you need to add a `DEFAULT` clause to the `published` field to match the migration shown earlier.\n\n:::\n\n\n:::note[A Note on Using Migrations in Production]\n\nWhen preparing your app for use in production, you may want to run your migrations\nduring the application's initialization phase. You may also want to include the migration scripts\nas a part of your code, to avoid having to copy them to your deployment location/image etc.\n\nThe [diesel_migrations] crate provides the [`embed_migrations!`] macro, allowing you to embed migration scripts\nin the final binary. Once your code uses it, you can simply include `connection.run_pending_migrations(MIGRATIONS)`\nat the start of your `main` function to run migrations every time the application starts.\n\n[diesel_migrations]: https://docs.rs/crate/diesel_migrations/2.2.0\n[`embed_migrations!`]: https://docs.rs/diesel_migrations/2.2.0/diesel_migrations/macro.embed_migrations.html\n\n:::\n\n\n\n## Write Rust\n\nOK enough SQL, let's write some Rust. We'll start by writing some code to show the last five published posts.\nThe first thing we need to do is establish a database connection.\n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n\n      ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/src/lib.rs\"\n      use diesel::prelude::*;\n      use dotenvy::dotenv;\n      use std::env;\n\n      pub fn establish_connection() -> PgConnection {\n          dotenv().ok();\n\n          let database_url = env::var(\"DATABASE_URL\").expect(\"DATABASE_URL must be set\");\n          PgConnection::establish(&database_url)\n              .unwrap_or_else(|_| panic!(\"Error connecting to {}\", database_url))\n      }\n      ```\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n      ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/src/lib.rs\"\n      use diesel::prelude::*;\n      use dotenvy::dotenv;\n      use std::env;\n\n      pub fn establish_connection() -> SqliteConnection {\n          dotenv().ok();\n\n          let database_url = env::var(\"DATABASE_URL\").expect(\"DATABASE_URL must be set\");\n          SqliteConnection::establish(&database_url)\n              .unwrap_or_else(|_| panic!(\"Error connecting to {}\", database_url))\n      }\n      ```\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n      ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/src/lib.rs\"\n      use diesel::prelude::*;\n      use dotenvy::dotenv;\n      use std::env;\n\n      pub fn establish_connection() -> MysqlConnection {\n          dotenv().ok();\n\n          let database_url = env::var(\"DATABASE_URL\").expect(\"DATABASE_URL must be set\");\n          MysqlConnection::establish(&database_url)\n              .unwrap_or_else(|_| panic!(\"Error connecting to {}\", database_url))\n      }\n      ```\n  </TabItem>\n</Tabs>\n\n\nWe'll also want to create a `Post` struct into which we can read our data, and have diesel generate the names\nwe'll use to reference tables and columns in our queries.\n\nWe'll add the following lines to the top of `src/lib.rs`:\n\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n\n  ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/src/lib.rs#L1-L2\"\n  pub mod models;\n  pub mod schema;\n  ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n  ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/src/lib.rs#L1-L2\"\n  pub mod models;\n  pub mod schema;\n  ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n  ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/src/lib.rs#L1-L2\"\n  pub mod models;\n  pub mod schema;\n  ```\n\n  </TabItem>\n</Tabs>\n\n\nNext we need to create the two modules that we just declared.\n\n<Tabs syncKey=\"db-backend\">\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/models.rs\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/getting_started_step_1/src/models.rs\"\n    use diesel::prelude::*;\n\n    #[derive(Queryable, Selectable)]\n    #[diesel(table_name = crate::schema::posts)]\n    #[diesel(check_for_backend(diesel::pg::Pg))]\n    pub struct Post {\n        pub id: i32,\n        pub title: String,\n        pub body: String,\n        pub published: bool,\n    }\n    ```\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"src/models.rs\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/sqlite/getting_started_step_1/src/models.rs\"\n    use diesel::prelude::*;\n\n    #[derive(Queryable, Selectable)]\n    #[diesel(table_name = crate::schema::posts)]\n    #[diesel(check_for_backend(diesel::sqlite::Sqlite))]\n    pub struct Post {\n        pub id: i32,\n        pub title: String,\n        pub body: String,\n        pub published: bool,\n    }\n    ```\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n    ```rust title=\"src/models.rs\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/mysql/getting_started_step_1/src/models.rs\"\n    use diesel::prelude::*;\n\n    #[derive(Queryable, Selectable)]\n    #[diesel(table_name = crate::schema::posts)]\n    #[diesel(check_for_backend(diesel::mysql::Mysql))]\n    pub struct Post {\n        pub id: i32,\n        pub title: String,\n        pub body: String,\n        pub published: bool,\n    }\n    ```\n  </TabItem>\n</Tabs>\n\n\n[#[derive(Queryable)]](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Queryable.html) will generate all of the code needed to load a `Post` struct from a SQL query.\n\n[#[derive(Selectable)]](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Selectable.html) will generate code to construct a matching select clause based on your model type based on the \ntable defined via `#[diesel(table_name = crate::schema::posts)]`. \n\n`#[diesel(check_for_backend(diesel::pg::Pg))` (or `sqlite::SQLite` or `mysql::MySQL`) adds additional compile time checks to verify that all field types in \nyour struct are compatible with their corresponding SQL side expressions. This part is optional, but it greatly improves\nthe generated compiler error messages.\n\n\nTypically the schema module isn't created by hand, it gets generated by diesel CLI. When we ran `diesel setup`,\na file called [diesel.toml] was created which tells Diesel to maintain a file at `src/schema.rs` for us.\nThe file should look like this:\n\n[diesel.toml]: https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/diesel.toml\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/src/schema.rs\"\n    diesel::table! {\n      posts (id) {\n          id -> Int4,\n          title -> Varchar,\n          body -> Text,\n          published -> Bool,\n      }\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/src/schema.rs\"\n    diesel::table! {\n        posts (id) {\n            id -> Integer,\n            title -> Text,\n            body -> Text,\n            published -> Bool,\n        }\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n    \n    ```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/src/schema.rs\"\n    diesel::table! {\n      posts (id) {\n          id -> Integer,\n          title -> Varchar,\n          body -> Text,\n          published -> Bool,\n      }\n    }\n    ```\n\n  </TabItem>\n</Tabs>\n\n\nThe exact output might vary slightly depending on your database, but it should be equivalent.\n\nThe [`table!` macro] creates a bunch of code based on the database schema to represent\nall of the tables and columns. We'll see how exactly to use that in the next example.\nFor a deep dive into the generated code see the [Schema in Depth](schema-in-depth.html) guide.\n\nAny time we run or revert a migration, this file will get automatically updated.\n\n[`table!` macro]: https://docs.diesel.rs/2.3.x/diesel/macro.table.html\n\n\n:::note[A Note on Field Order]\n\nUsing `#[derive(Queryable)]` assumes that the order of fields on the `Post` struct matches\nthe columns in the `posts` table, so make sure to define them in the order seen in the `schema.rs` file.\nUsing `#[derive(Selectable)]` in combination with [`SelectableHelper::as_select`] ensures that the field order always matches. The `#[diesel(check_for_backend(diesel::pg::Pg))]` attribute provides a further check that all field types match which what your query is returning. This attribute can improve the error messages generated by the compiler significantly.\n\n[`SelectableHelper::as_select`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.SelectableHelper.html#tymethod.as_select\n\n:::\n\n\nLet's write the code to actually show us our posts.\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n  ```rust title=\"src/bin/show_posts.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_1/src/bin/show_posts.rs\"\n  use self::models::*;\n  use diesel::prelude::*;\n  use diesel_demo::*;\n\n  fn main() {\n      use self::schema::posts::dsl::*;\n\n      let connection = &mut establish_connection();\n      let results = posts\n          .filter(published.eq(true))\n          .limit(5)\n          .select(Post::as_select())\n          .load(connection)\n          .expect(\"Error loading posts\");\n\n      println!(\"Displaying {} posts\", results.len());\n      for post in results {\n          println!(\"{}\", post.title);\n          println!(\"-----------\\n\");\n          println!(\"{}\", post.body);\n      }\n  }\n  ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n  ```rust title=\"src/bin/show_posts.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_1/src/bin/show_posts.rs\"\n  use self::models::*;\n  use diesel::prelude::*;\n  use diesel_demo::*;\n\n  fn main() {\n      use self::schema::posts::dsl::*;\n\n      let connection = &mut establish_connection();\n      let results = posts\n          .filter(published.eq(true))\n          .limit(5)\n          .select(Post::as_select())\n          .load(connection)\n          .expect(\"Error loading posts\");\n\n      println!(\"Displaying {} posts\", results.len());\n      for post in results {\n          println!(\"{}\", post.title);\n          println!(\"-----------\\n\");\n          println!(\"{}\", post.body);\n      }\n  }\n  ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">\n\n  ```rust title=\"src/bin/show_posts.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_1/src/bin/show_posts.rs\"\n  use self::models::*;\n  use diesel::prelude::*;\n  use diesel_demo::*;\n\n  fn main() {\n      use self::schema::posts::dsl::*;\n\n      let connection = &mut establish_connection();\n      let results = posts\n          .filter(published.eq(true))\n          .limit(5)\n          .select(Post::as_select())\n          .load(connection)\n          .expect(\"Error loading posts\");\n\n      println!(\"Displaying {} posts\", results.len());\n      for post in results {\n          println!(\"{}\", post.title);\n          println!(\"-----------\\n\");\n          println!(\"{}\", post.body);\n      }\n  }\n  ```\n\n  </TabItem>\n\n</Tabs>\n\n\nThe use `self::schema::posts::dsl::*` line imports a bunch of aliases so that we can say `posts`\ninstead of `posts::table`, and `published` instead of `posts::published`. It's useful\nwhen we're only dealing with a single table, but that's not always what we want. It's always important \nto keep imports to `schema::table::dsl::*` inside of the current function to prevent polluting the module \nnamespace.\n\nWe can run our script with `cargo run --bin show_posts`. Unfortunately, the results\nwon't be terribly interesting, as we don't actually have any posts in the database.\nStill, we've written a decent amount of code, so let's commit.\n\nThe full code for the demo at this point can be found here for [PostgreSQL][full code], [SQLite][step 1 sqlite] and [MySQL][step 1 mysql].\n\n[full code]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/getting_started_step_1/\n[step 1 sqlite]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/sqlite/getting_started_step_1\n[step 1 mysql]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/mysql/getting_started_step_1\n\nNext, let's write some code to create a new post. We'll want a struct to use for inserting\na new record.\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/models.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_2/src/models.rs\"\n    use crate::schema::posts;\n\n    #[derive(Insertable)]\n    #[diesel(table_name = posts)]\n    pub struct NewPost<'a> {\n        pub title: &'a str,\n        pub body: &'a str,\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n    \n    ```rust title=\"src/models.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_2/src/models.rs\"\n    use crate::schema::posts;\n\n    #[derive(Insertable)]\n    #[diesel(table_name = posts)]\n    pub struct NewPost<'a> {\n        pub title: &'a str,\n        pub body: &'a str,\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n    ```rust title=\"src/models.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_2/src/models.rs\"\n    use crate::schema::posts;\n\n    #[derive(Insertable)]\n    #[diesel(table_name = posts)]\n    pub struct NewPost<'a> {\n        pub title: &'a str,\n        pub body: &'a str,\n    }\n    ```\n\n  </TabItem>\n  \n</Tabs>\n\n\nNow let's add a function to save a new post.\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_2/src/lib.rs\"\n    use self::models::{NewPost, Post};\n\n    pub fn create_post(conn: &mut PgConnection, title: &str, body: &str) -> Post {\n        use crate::schema::posts;\n\n        let new_post = NewPost { title, body };\n\n        diesel::insert_into(posts::table)\n            .values(&new_post)\n            .returning(Post::as_returning())\n            .get_result(conn)\n            .expect(\"Error saving new post\")\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_2/src/lib.rs\"\n    use self::models::{NewPost, Post};\n\n    pub fn create_post(conn: &mut SqliteConnection, title: &str, body: &str) -> Post {\n        use crate::schema::posts;\n\n        let new_post = NewPost { title, body };\n\n        diesel::insert_into(posts::table)\n            .values(&new_post)\n            .returning(Post::as_returning())\n            .get_result(conn)\n            .expect(\"Error saving new post\")\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n    ```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_2/src/lib.rs\"\n    use self::models::{NewPost, Post};\n\n    pub fn create_post(conn: &mut MysqlConnection, title: &str, body: &str) -> Post {\n        use crate::schema::posts;\n\n        let new_post = NewPost { title, body };\n\n        conn.transaction(|conn| {\n            diesel::insert_into(posts::table)\n                .values(&new_post)\n                .execute(conn)?;\n\n            posts::table\n                .order(posts::id.desc())\n                .select(Post::as_select())\n                .first(conn)\n        })\n        .expect(\"Error while saving post\")\n    }\n    ```\n\n  </TabItem>\n  \n</Tabs>\n\n\nWhen we call [`.get_result`] on an insert or update statement, it automatically adds `RETURNING *`\nto the end of the query, and lets us load it into any struct that implements `Queryable`\nfor the right types. Neat!\n\n\n\n\n:::note[A Note on `RETURNING` clauses]\n\nNot all databases support `RETURNING` clauses. On backends that support the RETURNING clause (such as PostgreSQL and SQLite), we can get data back from our insert as well.\nOn the SQLite backend, [RETURNING](https://www.sqlite.org/lang_returning.html) has been supported since version 3.35.0. To enable RETURNING clause add feature flag, `returning_clauses_for_sqlite_3_35` in `Cargo.toml`:\n\n```toml\ndiesel = { version = \"2.3.0\", features = [\"sqlite\", \"returning_clauses_for_sqlite_3_35\"] }\n```\n\nMySQL does not support RETURNING clauses. To get back all of the inserted rows, we can call `.get_results` instead of `.execute`.\nIf you follow this guide on a different database system be sure to checkout [the examples specific to your database system](https://github.com/diesel-rs/diesel/tree/2.3.x/examples).\n\n:::\n\n\nDiesel can insert more than one record in a single query. Just pass a `Vec` or slice to [`insert_into`],\nand then call [`get_results`] instead of `get_result`. If you don't actually want to do anything\nwith the row that was just inserted, call [`.execute`] instead. The compiler won't complain\nat you, that way. :)\n\n[`.get_result`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_result\n[`.execute`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.execute\n[`get_results`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_results\n[`insert_into`]: https://docs.diesel.rs/2.3.x/diesel/fn.insert_into.html\n\nNow that we've got everything set up, we can create a little script to write a new post.\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/bin/write_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_2/src/bin/write_post.rs\"\n    use diesel_demo::*;\n    use std::io::{stdin, Read};\n\n    fn main() {\n        let connection = &mut establish_connection();\n\n        let mut title = String::new();\n        let mut body = String::new();\n\n        println!(\"What would you like your title to be?\");\n        stdin().read_line(&mut title).unwrap();\n        let title = title.trim_end(); // Remove the trailing newline\n\n        println!(\"\\nOk! Let's write {title} (Press {EOF} when finished)\\n\",);\n        stdin().read_to_string(&mut body).unwrap();\n\n        let post = create_post(connection, title, &body);\n        println!(\"\\nSaved draft {title} with id {}\", post.id);\n    }\n\n    #[cfg(not(windows))]\n    const EOF: &str = \"CTRL+D\";\n\n    #[cfg(windows)]\n    const EOF: &str = \"CTRL+Z\";\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"src/bin/write_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_2/src/bin/write_post.rs\"\n    use diesel_demo::*;\n    use std::io::{stdin, Read};\n\n    fn main() {\n        let connection = &mut establish_connection();\n\n        let mut title = String::new();\n        let mut body = String::new();\n\n        println!(\"What would you like your title to be?\");\n        stdin().read_line(&mut title).unwrap();\n        let title = title.trim_end(); // Remove the trailing newline\n\n        println!(\"\\nOk! Let's write {title} (Press {EOF} when finished)\\n\",);\n        stdin().read_to_string(&mut body).unwrap();\n\n        let post = create_post(connection, title, &body);\n        println!(\"\\nSaved draft {title} with id {}\", post.id);\n    }\n\n    #[cfg(not(windows))]\n    const EOF: &str = \"CTRL+D\";\n\n    #[cfg(windows)]\n    const EOF: &str = \"CTRL+Z\";\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">  \n\n    ```rust title=\"src/bin/write_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_2/src/bin/write_post.rs\"\n    use diesel_demo::*;\n    use std::io::{stdin, Read};\n\n    fn main() {\n        let connection = &mut establish_connection();\n\n        let mut title = String::new();\n        let mut body = String::new();\n\n        println!(\"What would you like your title to be?\");\n        stdin().read_line(&mut title).unwrap();\n        let title = title.trim_end(); // Remove the trailing newline\n\n        println!(\"\\nOk! Let's write {title} (Press {EOF} when finished)\\n\",);\n        stdin().read_to_string(&mut body).unwrap();\n\n        let post = create_post(connection, title, &body);\n        println!(\"\\nSaved draft {title} with id {}\", post.id);\n    }\n\n    #[cfg(not(windows))]\n    const EOF: &str = \"CTRL+D\";\n\n    #[cfg(windows)]\n    const EOF: &str = \"CTRL+Z\";\n    ```\n\n  </TabItem>\n  \n</Tabs>\n\n\nWe can run our new script with `cargo run --bin write_post`. Go ahead and write a blog post.\nGet creative! Here was mine:\n\n```sh\n   Compiling diesel_demo v0.1.0 (file:///Users/sean/Documents/Projects/open-source/diesel_demo)\n     Running `target/debug/write_post`\n\nWhat would you like your title to be?\nDiesel demo\n\nOk! Let's write Diesel demo (Press CTRL+D when finished)\n\nYou know, a CLI application probably isn't the best interface for a blog demo.\nBut really I just wanted a semi-simple example, where I could focus on Diesel.\nI didn't want to get bogged down in some web framework here.\n\nSaved draft Diesel demo with id 1\n```\n\nUnfortunately, running `show_posts` still won't display our new post,\nbecause we saved it as a draft. If we look back to the code in\n`show_posts`, we added [`.filter(published.eq(true))`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter\n), and we had\n`published` default to false in our migration. We need to publish it!\nBut in order to do that, we'll need to look at how to update an\nexisting record. First, let's commit. The code for this demo at this\npoint can be found here for [PostgreSQL][commit-no-2], [SQLite][commit-no-2-sqlite], and [MySQL][commit-no-2-mysql].\n\n[commit-no-2]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/getting_started_step_2/\n[commit-no-2-sqlite]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/sqlite/getting_started_step_2/\n[commit-no-2-mysql]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/mysql/getting_started_step_2/\n[`.filter(published.eq(true))`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter\n\nNow that we've got create and read out of the way, update is actually\nrelatively simple. Let's jump right into the script:\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/bin/publish_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_3/src/bin/publish_post.rs\"\n    use self::models::Post;\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::{posts, published};\n\n        let id = args()\n            .nth(1)\n            .expect(\"publish_post requires a post id\")\n            .parse::<i32>()\n            .expect(\"Invalid ID\");\n        let connection = &mut establish_connection();\n\n        let post = diesel::update(posts.find(id))\n            .set(published.eq(true))\n            .returning(Post::as_returning())\n            .get_result(connection)\n            .unwrap();\n        println!(\"Published post {}\", post.title);\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"src/bin/publish_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_3/src/bin/publish_post.rs\"\n    use self::models::Post;\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::{posts, published};\n\n        let id = args()\n            .nth(1)\n            .expect(\"publish_post requires a post id\")\n            .parse::<i32>()\n            .expect(\"Invalid ID\");\n        let connection = &mut establish_connection();\n\n        let post = diesel::update(posts.find(id))\n            .set(published.eq(true))\n            .returning(Post::as_returning())\n            .get_result(connection)\n            .unwrap();\n        println!(\"Published post {}\", post.title);\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">\n\n    ```rust title=\"src/bin/publish_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_3/src/bin/publish_post.rs\"\n    use self::models::Post;\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::{posts, published};\n\n        let id = args()\n            .nth(1)\n            .expect(\"publish_post requires a post id\")\n            .parse::<i32>()\n            .expect(\"Invalid ID\");\n        let connection = &mut establish_connection();\n\n        let post = connection\n            .transaction(|connection| {\n                let post = posts.find(id).select(Post::as_select()).first(connection)?;\n\n                diesel::update(posts.find(id))\n                    .set(published.eq(true))\n                    .execute(connection)?;\n                Ok(post)\n            })\n            .unwrap_or_else(|_: diesel::result::Error| panic!(\"Unable to find post {}\", id));\n\n        println!(\"Published post {}\", post.title);\n    }\n    ```\n    \n  </TabItem>\n</Tabs>\n\n\nThat's it! Let's try it out with `cargo run --bin publish_post 1`.\n\n```sh\n Compiling diesel_demo v0.1.0 (file:///Users/sean/Documents/Projects/open-source/diesel_demo)\n   Running `target/debug/publish_post 1`\nPublished post Diesel demo\n```\n\nAdditionally, let's implement a possibility of fetching a single post. We will display the post id with its title.\nNotice the [`.optional()`] call. This returns `Option<Post>` instead of throwing an error, which we can then use in our matching pattern. For additional methods to modify the constructed select statements refer to the [`documentation` of `QueryDsl`]\n\n\n[`.optional()`]: https://docs.diesel.rs/2.3.x/diesel/result/trait.OptionalExtension.html#tymethod.optional\n[`documentation` of `QueryDsl`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.QueryDsl.html\n\n\n\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/bin/get_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_3/src/bin/get_post.rs\"\n    use self::models::Post;\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::posts;\n\n        let post_id = args()\n            .nth(1)\n            .expect(\"get_post requires a post id\")\n            .parse::<i32>()\n            .expect(\"Invalid ID\");\n\n        let connection = &mut establish_connection();\n\n        let post = posts\n            .find(post_id)\n            .select(Post::as_select())\n            .first(connection)\n            .optional(); // This allows for returning an Option<Post>, otherwise it will throw an error\n\n        match post {\n            Ok(Some(post)) => println!(\"Post with id: {} has a title: {}\", post.id, post.title),\n            Ok(None) => println!(\"Unable to find post {}\", post_id),\n            Err(_) => println!(\"An error occured while fetching post {}\", post_id),\n        }\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"src/bin/get_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_3/src/bin/get_post.rs\"\n    use self::models::Post;\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::posts;\n\n        let post_id = args()\n            .nth(1)\n            .expect(\"get_post requires a post id\")\n            .parse::<i32>()\n            .expect(\"Invalid ID\");\n\n        let connection = &mut establish_connection();\n\n        let post = posts\n            .find(post_id)\n            .select(Post::as_select())\n            .first(connection)\n            .optional(); // This allows for returning an Option<Post>, otherwise it will throw an error\n\n        match post {\n            Ok(Some(post)) => println!(\"Post with id: {} has a title: {}\", post.id, post.title),\n            Ok(None) => println!(\"Unable to find post {}\", post_id),\n            Err(_) => println!(\"An error occured while fetching post {}\", post_id),\n        }\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">\n\n    ```rust title=\"src/bin/get_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_3/src/bin/get_post.rs\"\n    use self::models::Post;\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::posts;\n\n        let post_id = args()\n            .nth(1)\n            .expect(\"get_post requires a post id\")\n            .parse::<i32>()\n            .expect(\"Invalid ID\");\n\n        let connection = &mut establish_connection();\n\n        let post = posts\n            .find(post_id)\n            .select(Post::as_select())\n            .first(connection)\n            .optional(); // This allows for returning an Option<Post>, otherwise it will throw an error\n\n        match post {\n            Ok(Some(post)) => println!(\"Post with id: {} has a title: {}\", post.id, post.title),\n            Ok(None) => println!(\"Unable to find post {}\", post_id),\n            Err(_) => println!(\"An error occured while fetching post {}\", post_id),\n        }\n    }\n    ```\n    \n  </TabItem>\n</Tabs>\n\n\nWe can see our post with `cargo run --bin get_post 1`.\n\n\n```sh\n Compiling diesel_demo v0.1.0 (file:///Users/sean/Documents/Projects/open-source/diesel_demo)\n   Running `target/debug/get_post 1`\n   Post with id: 1 has a title: Diesel demo\n```\n\nAnd now, finally, we can see our post with `cargo run --bin show_posts`.\n\n```sh\n     Running `target/debug/show_posts`\nDisplaying 1 posts\nDiesel demo\n----------\n\nYou know, a CLI application probably isn't the best interface for a blog demo.\nBut really I just wanted a semi-simple example, where I could focus on Diesel.\nI didn't want to get bogged down in some web framework here.\n```\n\nWe've still only covered three of the four letters of CRUD though. Let's show\nhow to delete things. Sometimes we write something we really hate, and\nwe don't have time to look up the ID. So let's delete based on the\ntitle, or even just some words in the title.\n\n\n\n\n<Tabs syncKey=\"db-backend\">\n\n  <TabItem label=\"PostgreSQL\">\n\n    ```rust title=\"src/bin/delete_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/getting_started_step_3/src/bin/delete_post.rs\"\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::*;\n\n        let target = args().nth(1).expect(\"Expected a target to match against\");\n        let pattern = format!(\"%{}%\", target);\n\n        let connection = &mut establish_connection();\n        let num_deleted = diesel::delete(posts.filter(title.like(pattern)))\n            .execute(connection)\n            .expect(\"Error deleting posts\");\n\n        println!(\"Deleted {} posts\", num_deleted);\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"SQLite\">\n\n    ```rust title=\"src/bin/delete_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/sqlite/getting_started_step_3/src/bin/delete_post.rs\"\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::*;\n\n        let target = args().nth(1).expect(\"Expected a target to match against\");\n        let pattern = format!(\"%{}%\", target);\n\n        let connection = &mut establish_connection();\n        let num_deleted = diesel::delete(posts.filter(title.like(pattern)))\n            .execute(connection)\n            .expect(\"Error deleting posts\");\n\n        println!(\"Deleted {} posts\", num_deleted);\n    }\n    ```\n\n  </TabItem>\n\n  <TabItem label=\"MySQL\">\n\n    ```rust title=\"src/bin/delete_post.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/mysql/getting_started_step_3/src/bin/delete_post.rs\"\n    use diesel::prelude::*;\n    use diesel_demo::*;\n    use std::env::args;\n\n    fn main() {\n        use self::schema::posts::dsl::*;\n\n        let target = args().nth(1).expect(\"Expected a target to match against\");\n        let pattern = format!(\"%{}%\", target);\n\n        let connection = &mut establish_connection();\n        let num_deleted = diesel::delete(posts.filter(title.like(pattern)))\n            .execute(connection)\n            .expect(\"Error deleting posts\");\n\n        println!(\"Deleted {} posts\", num_deleted);\n    }\n    ```\n\n  </TabItem>\n</Tabs>\n\n\n\n\nWe can run the script with `cargo run --bin delete_post demo` (at least with the title I chose).\nYour output should look something like:\n\n```sh\n   Compiling diesel_demo v0.1.0 (file:///Users/sean/Documents/Projects/open-source/diesel_demo)\n     Running `target/debug/delete_post demo`\nDeleted 1 posts\n```\n\nWhen we try to run `cargo run --bin show_posts` again, we can see that the post was in fact deleted.\nThis barely scratches the surface of what you can do with Diesel, but hopefully this tutorial\nhas given you a good foundation to build off of. We recommend exploring the [API docs] to see more.\nThe final code for this tutorial can be found here for [PostgreSQL][final], [SQLite][final code sqlite], and [MySQL][final code mysql].\n\n[API docs]: https://docs.diesel.rs/2.3.x/diesel/index.html\n[final]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/getting_started_step_3/\n[final code sqlite]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/sqlite/getting_started_step_3/\n[final code mysql]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/mysql/getting_started_step_3/","src/content/docs/guides/getting-started.mdx","2056f99a4197b372","guides/configuring-diesel-cli",{id:98,data:100,body:105,filePath:106,digest:107,rendered:108},{title:101,editUrl:16,head:102,template:44,sidebar:103,pagefind:16,draft:32},"Configuring Diesel CLI",[],{hidden:32,attrs:104},{},"Diesel CLI is an optional tool Diesel provides to manage your\ndatabase schema. Its main two roles are to run database\nmigrations, and to create a Rust file which represents your\ndatabase schema.\n\nThe behavior of Diesel CLI can be configured through a toml file. By\ndefault Diesel will look for `diesel.toml` in the same directory as\nyour `Cargo.toml` file. You can provide a different config file by\nsetting the `DIESEL_CONFIG_FILE` environment variable, or passing\n`--config-file` on the command line. You can get a basic config file\nwith some defaults provided by running `diesel setup`.\n\nAs of Diesel 2.3, the file contains a single section,\n`[print_schema]`. All fields in this file are optional.\n\n## The `file` field\n<br />\n\nThis field specifies the file where you want the Rust representation\nof your schema to live. When this field is present, commands which\nmodify database schema (such as `diesel migration run`) will\nautomatically run `diesel print-schema`, and output its results to\nthis file.\n\nThis means that you can modify your database schema without having to\nworry about running a separate command to update your Rust code. It is\nhighly recommended that you use this field, to ensure that the Rust\nrepresentation of your database schema is always in sync with what is\nactually in your database. Typically this is set to `src/schema.rs`.\n\nUnlike other fields, this doesn't actually modify the behavior of\n`diesel print-schema`. `diesel print-schema` will always output your\nschema to stdout, regardless of whether this field is present or not.\n\n## The `with_docs` field\n<br />\n\nWhen this field is set to `true`, `diesel print-schema` will act as\nthough the `--with-docs` flag was passed by default. This places a doc\ncomment on all tables and columns. This comment contains either the\ninformation provided by the database via `COMMENT ON` annotations\nor is generated by diesel.\n\n\n## The `filter` field\n<br />\n\nThis field specifies which tables should be output by `diesel\nprint-schema`. It corresponds to the `--only-tables` and\n`--except-tables` on the command line. Its value should be a map with\none of those two keys. For example:\n\n\n```toml title=\"diesel.toml\"\n[print_schema]\n# This will cause only the users and posts tables to be output\nfilter = { only_tables = [\"users\", \"posts\"] }\n\n# This will cause all tables *except* the comments table to be\n# output\nfilter = { except_tables = [\"comments\"] }\n```\n\n\n## The `schema` field\n<br />\n\nSpecifies which schema to use when searching for tables. When set,\n`diesel print-schema` will always behave as though `--schema` were\npassed. This field only affects PostgreSQL. If no value is provided,\nthe `public` schema will be searched.\n\n## The `generate_missing_sql_type_definitions` field\n<br />\n\nThis field accepts a boolean value, that configures whether `diesel print-schema`\nshould generate definitions for missing sql types as part of the `schema.rs` file.\nThe generated sql type definitions are placed in a separate `sql_types` module inside\nof the generated `schema.rs` file. This will generate only definitions for sql types actually\nused by any of the `table!` definitions generated by `diesel print-schema`. Those definitions\nautomatically use the auto-generated sql type definition.\n\nIf this field is not present, or set to `true`\n`diesel print-schema` will generate the corresponding definitions. This configuration\nonly generates custom sql type definition for PostgreSQL based database systems, as\nSQLite and MySQL are using a fixed set of sql types.\n\nSee the `exclude_custom_type_definitions` field for skipping the generation of certain custom types.\n\n\n```toml title=\"diesel.toml\"\n[print_schema]\n# skip generating missing sql type definitions\ngenerate_missing_sql_type_definitions = false\n```\n\n\n## The `custom_type_derives` field\n<br />\n\nThis field adds `#[derive(...)]` items to the sql type definitions\nautomatically generated as a result of the\n`generate_missing_sql_type_definitions` field.\nWhen set, `diesel print-schema` will behave as if `--custom-type-derives`\nwere passed. The `diesel::sql_types::SqlType` trait will be automatically\nderived if this flag is either empty, or doesn't already contain the trait.\n\n\n```toml title=\"diesel.toml\"\n[print_schema]\ngenerate_missing_sql_type_definitions = true\n# Derive `SqlType` and `Debug` for the automatically generated sql type definitions\ncustom_type_derives = [\"diesel::sql_types::SqlType\", \"std::fmt::Debug\"]\n```\n\n\n## The `except_custom_type_definitions` field\n<br />\n\nThis field allows to define a list of regexes matched against custom type names for which diesel-cli should not generate sql type definitions. You should use this option in combination with `import_types` if you use crates like `postgis-diesel` or `pgvector` that provide their own sql type definition for specific custom types. If not set this defaults to an empty list.\n\n\n```toml title=\"diesel.toml\"\n[print_schema]\ngenerate_missing_sql_type_definitions = true\n# excludes any type named `Vector` from the generated `sql_types` module\nexcept_custom_type_definitions = [\"Vector\"]\n```\n\n## The `import_types` field\n<br />\n\nThis field adds `use` statements to the top of every `table!`\ndeclaration. When set, `diesel print-schema` will behave as if\n`--import-types` were passed. When no value is given, only types from\n`diesel::sql_types` will be imported.\n\n\n```toml title=\"diesel.toml\"\n[print_schema]\n# Add types from `diesel_full_text_search` like `tsvector`\nimport_types = [\"diesel::sql_types::*\", \"diesel_full_text_search::types::*\"]\n```\n\n## The `patch_file` field\n<br />\n\nSpecifies a `.patch` file to be applied to your schema after it is\ngenerated. Corresponds to the `--patch-file` option on the command\nline.\n\nWe can't provide an option for every possible customization to this\nfile that you might want to make. This serves as a general purpose\ncatch-all for schema customizations.\n\nThe file should be a unified diff, which you can generate with `diff`\nor `git diff`. It's highly recommended that you provide more than 3\ncontext lines, especially if you have set `import_types`.\n\nYou can easily generate this file by making the changes you want to\n`schema.rs`, and then running `git diff -U6 > src/schema.patch`.\n\n\n## The `sqlite_integer_primary_key_is_bigint` field\n<br />\n\nThis field allows you to configure diesel-cli to thread `INTEGER PRIMARY KEY` fields as `BIGINT` for sqlite databases. If not set this defaults to false.\n\n```toml title=\"diesel.toml\"\n[print_schema]\nsqlite_integer_primary_key_is_bigint = true\n```\n\n## The `allow_tables_to_appear_in_same_query_config` field\n<br />\n\nThis field allows you to configure diesel-cli to generate an `allow_tables_to_appear_in_same_query!` call for all \ntables in your schema or only for those that can reasonably be joined via existing foreign key references. \nOnly tables appearing in this macro call can be joined by diesel. Possible options are:\n\n* `fk_related_tables` only generate `allow_tables_to_appear_in_same_query!` calls for tables that can be joined via foreign key relations\n* `all_tables` list all tables in a single `allow_tables_to_appear_in_same_query!` call (default if not set)\n* `none` do not generate a `allow_tables_to_appear_in_same_query!` call at all\n\n \n```toml title=\"diesel.toml\"\n[print_schema]\nallow_tables_to_appear_in_same_query_config = \"fk_related_tables\"\n```\n\n\n## The `column_sorting` field\n<br />\n\nThis field allows you to configure how diesel-cli orders column names in your `table!` declarations. It allows the following options:\n\n* `ordinal_position` to sort by the ordinal position given by the database. Note that this might be an unstable sorting depending on your migration order. This is the default value if this field is not set.\n* `name` to sort by the actual field name.\n\n\n```toml title=\"diesel.toml\"\n[print_schema]\ncolumn_sorting = \"name\"\n```\n\n## The `pg_domains_as_custom_types` field\n<br />\n\nThis field allows you to define a list of PostgreSQL domain type names that should be infered as custom SQL types by diesel-cli. This list can contain regular expressions to match on multiple domain types at once.\n\n \n```toml title=\"diesel.toml\"\n[print_schema]\npg_domains_as_custom_types = [\"int\", \"longtext\"]\n```\n\n## Nested sub schemas\n<br />\n\nDiesel-CLI allows to configure nested subschemas via `[print_schema.your_sub_schema]` entries. This allows to split up large `schema.rs` files into smaller ones or generate schema.rs files for multiple database schemas at once. Each subschema can configure all keys described above. Diesel-cli allows to configure the subschema that should be used via the `--schema-key` command line argument. If no such argument is given it default to the top level `[print_schema]` entry.\n\n\n\n```toml title=\"diesel.toml\"\n# defines a subschema `user1` including the `user1` table\n[print_schema.user1]\nfile = \"src/schema1.rs\"\nwith_docs = true\nfilter = { only_tables = [\"users1\"] }\n\n\n# defines a subschema `user2` including the `user2` table\n[print_schema.user2]\nfile = \"src/schema2.rs\"\nwith_docs = true\nfilter = { only_tables = [\"users2\"] }\n```","src/content/docs/guides/configuring-diesel-cli.md","2fa585dcd7dce7ca",{html:109,metadata:110},"<p>Diesel CLI is an optional tool Diesel provides to manage your\ndatabase schema. Its main two roles are to run database\nmigrations, and to create a Rust file which represents your\ndatabase schema.</p>\n<p>The behavior of Diesel CLI can be configured through a toml file. By\ndefault Diesel will look for <code dir=\"auto\">diesel.toml</code> in the same directory as\nyour <code dir=\"auto\">Cargo.toml</code> file. You can provide a different config file by\nsetting the <code dir=\"auto\">DIESEL_CONFIG_FILE</code> environment variable, or passing\n<code dir=\"auto\">--config-file</code> on the command line. You can get a basic config file\nwith some defaults provided by running <code dir=\"auto\">diesel setup</code>.</p>\n<p>As of Diesel 2.3, the file contains a single section,\n<code dir=\"auto\">[print_schema]</code>. All fields in this file are optional.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-file-field\">The <code dir=\"auto\">file</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-file-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The file field</span></a></div>\n<br>\n<p>This field specifies the file where you want the Rust representation\nof your schema to live. When this field is present, commands which\nmodify database schema (such as <code dir=\"auto\">diesel migration run</code>) will\nautomatically run <code dir=\"auto\">diesel print-schema</code>, and output its results to\nthis file.</p>\n<p>This means that you can modify your database schema without having to\nworry about running a separate command to update your Rust code. It is\nhighly recommended that you use this field, to ensure that the Rust\nrepresentation of your database schema is always in sync with what is\nactually in your database. Typically this is set to <code dir=\"auto\">src/schema.rs</code>.</p>\n<p>Unlike other fields, this doesnt actually modify the behavior of\n<code dir=\"auto\">diesel print-schema</code>. <code dir=\"auto\">diesel print-schema</code> will always output your\nschema to stdout, regardless of whether this field is present or not.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-with_docs-field\">The <code dir=\"auto\">with_docs</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-with_docs-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The with_docs field</span></a></div>\n<br>\n<p>When this field is set to <code dir=\"auto\">true</code>, <code dir=\"auto\">diesel print-schema</code> will act as\nthough the <code dir=\"auto\">--with-docs</code> flag was passed by default. This places a doc\ncomment on all tables and columns. This comment contains either the\ninformation provided by the database via <code dir=\"auto\">COMMENT ON</code> annotations\nor is generated by diesel.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-filter-field\">The <code dir=\"auto\">filter</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-filter-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The filter field</span></a></div>\n<br>\n<p>This field specifies which tables should be output by <code dir=\"auto\">diesel print-schema</code>. It corresponds to the <code dir=\"auto\">--only-tables</code> and\n<code dir=\"auto\">--except-tables</code> on the command line. Its value should be a map with\none of those two keys. For example:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># This will cause only the users and posts tables to be output</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = { </span><span style=\"--0:#C5E478;--1:#3B61B0\">only_tables</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># This will cause all tables *except* the comments table to be</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># output</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = { </span><span style=\"--0:#C5E478;--1:#3B61B0\">except_tables</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">comments</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]# This will cause only the users and posts tables to be outputfilter = { only_tables = [&#x22;users&#x22;, &#x22;posts&#x22;] }# This will cause all tables *except* the comments table to be# outputfilter = { except_tables = [&#x22;comments&#x22;] }\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-schema-field\">The <code dir=\"auto\">schema</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-schema-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The schema field</span></a></div>\n<br>\n<p>Specifies which schema to use when searching for tables. When set,\n<code dir=\"auto\">diesel print-schema</code> will always behave as though <code dir=\"auto\">--schema</code> were\npassed. This field only affects PostgreSQL. If no value is provided,\nthe <code dir=\"auto\">public</code> schema will be searched.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-generate_missing_sql_type_definitions-field\">The <code dir=\"auto\">generate_missing_sql_type_definitions</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-generate_missing_sql_type_definitions-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The generate_missing_sql_type_definitions field</span></a></div>\n<br>\n<p>This field accepts a boolean value, that configures whether <code dir=\"auto\">diesel print-schema</code>\nshould generate definitions for missing sql types as part of the <code dir=\"auto\">schema.rs</code> file.\nThe generated sql type definitions are placed in a separate <code dir=\"auto\">sql_types</code> module inside\nof the generated <code dir=\"auto\">schema.rs</code> file. This will generate only definitions for sql types actually\nused by any of the <code dir=\"auto\">table!</code> definitions generated by <code dir=\"auto\">diesel print-schema</code>. Those definitions\nautomatically use the auto-generated sql type definition.</p>\n<p>If this field is not present, or set to <code dir=\"auto\">true</code>\n<code dir=\"auto\">diesel print-schema</code> will generate the corresponding definitions. This configuration\nonly generates custom sql type definition for PostgreSQL based database systems, as\nSQLite and MySQL are using a fixed set of sql types.</p>\n<p>See the <code dir=\"auto\">exclude_custom_type_definitions</code> field for skipping the generation of certain custom types.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># skip generating missing sql type definitions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">generate_missing_sql_type_definitions</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#FF6A83;--1:#A24848\">false</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]# skip generating missing sql type definitionsgenerate_missing_sql_type_definitions = false\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-custom_type_derives-field\">The <code dir=\"auto\">custom_type_derives</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-custom_type_derives-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The custom_type_derives field</span></a></div>\n<br>\n<p>This field adds <code dir=\"auto\">#[derive(...)]</code> items to the sql type definitions\nautomatically generated as a result of the\n<code dir=\"auto\">generate_missing_sql_type_definitions</code> field.\nWhen set, <code dir=\"auto\">diesel print-schema</code> will behave as if <code dir=\"auto\">--custom-type-derives</code>\nwere passed. The <code dir=\"auto\">diesel::sql_types::SqlType</code> trait will be automatically\nderived if this flag is either empty, or doesnt already contain the trait.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">generate_missing_sql_type_definitions</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#FF6A83;--1:#A24848\">true</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># Derive `SqlType` and `Debug` for the automatically generated sql type definitions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">custom_type_derives</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">diesel::sql_types::SqlType</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">std::fmt::Debug</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]generate_missing_sql_type_definitions = true# Derive &#x60;SqlType&#x60; and &#x60;Debug&#x60; for the automatically generated sql type definitionscustom_type_derives = [&#x22;diesel::sql_types::SqlType&#x22;, &#x22;std::fmt::Debug&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-except_custom_type_definitions-field\">The <code dir=\"auto\">except_custom_type_definitions</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-except_custom_type_definitions-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The except_custom_type_definitions field</span></a></div>\n<br>\n<p>This field allows to define a list of regexes matched against custom type names for which diesel-cli should not generate sql type definitions. You should use this option in combination with <code dir=\"auto\">import_types</code> if you use crates like <code dir=\"auto\">postgis-diesel</code> or <code dir=\"auto\">pgvector</code> that provide their own sql type definition for specific custom types. If not set this defaults to an empty list.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">generate_missing_sql_type_definitions</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#FF6A83;--1:#A24848\">true</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># excludes any type named `Vector` from the generated `sql_types` module</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">except_custom_type_definitions</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Vector</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]generate_missing_sql_type_definitions = true# excludes any type named &#x60;Vector&#x60; from the generated &#x60;sql_types&#x60; moduleexcept_custom_type_definitions = [&#x22;Vector&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-import_types-field\">The <code dir=\"auto\">import_types</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-import_types-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The import_types field</span></a></div>\n<br>\n<p>This field adds <code dir=\"auto\">use</code> statements to the top of every <code dir=\"auto\">table!</code>\ndeclaration. When set, <code dir=\"auto\">diesel print-schema</code> will behave as if\n<code dir=\"auto\">--import-types</code> were passed. When no value is given, only types from\n<code dir=\"auto\">diesel::sql_types</code> will be imported.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># Add types from `diesel_full_text_search` like `tsvector`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">import_types</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">diesel::sql_types::*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">diesel_full_text_search::types::*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]# Add types from &#x60;diesel_full_text_search&#x60; like &#x60;tsvector&#x60;import_types = [&#x22;diesel::sql_types::*&#x22;, &#x22;diesel_full_text_search::types::*&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-patch_file-field\">The <code dir=\"auto\">patch_file</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-patch_file-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The patch_file field</span></a></div>\n<br>\n<p>Specifies a <code dir=\"auto\">.patch</code> file to be applied to your schema after it is\ngenerated. Corresponds to the <code dir=\"auto\">--patch-file</code> option on the command\nline.</p>\n<p>We cant provide an option for every possible customization to this\nfile that you might want to make. This serves as a general purpose\ncatch-all for schema customizations.</p>\n<p>The file should be a unified diff, which you can generate with <code dir=\"auto\">diff</code>\nor <code dir=\"auto\">git diff</code>. Its highly recommended that you provide more than 3\ncontext lines, especially if you have set <code dir=\"auto\">import_types</code>.</p>\n<p>You can easily generate this file by making the changes you want to\n<code dir=\"auto\">schema.rs</code>, and then running <code dir=\"auto\">git diff -U6 > src/schema.patch</code>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-sqlite_integer_primary_key_is_bigint-field\">The <code dir=\"auto\">sqlite_integer_primary_key_is_bigint</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-sqlite_integer_primary_key_is_bigint-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The sqlite_integer_primary_key_is_bigint field</span></a></div>\n<br>\n<p>This field allows you to configure diesel-cli to thread <code dir=\"auto\">INTEGER PRIMARY KEY</code> fields as <code dir=\"auto\">BIGINT</code> for sqlite databases. If not set this defaults to false.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">sqlite_integer_primary_key_is_bigint</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#FF6A83;--1:#A24848\">true</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]sqlite_integer_primary_key_is_bigint = true\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-allow_tables_to_appear_in_same_query_config-field\">The <code dir=\"auto\">allow_tables_to_appear_in_same_query_config</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-allow_tables_to_appear_in_same_query_config-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The allow_tables_to_appear_in_same_query_config field</span></a></div>\n<br>\n<p>This field allows you to configure diesel-cli to generate an <code dir=\"auto\">allow_tables_to_appear_in_same_query!</code> call for all\ntables in your schema or only for those that can reasonably be joined via existing foreign key references.\nOnly tables appearing in this macro call can be joined by diesel. Possible options are:</p>\n<ul>\n<li><code dir=\"auto\">fk_related_tables</code> only generate <code dir=\"auto\">allow_tables_to_appear_in_same_query!</code> calls for tables that can be joined via foreign key relations</li>\n<li><code dir=\"auto\">all_tables</code> list all tables in a single <code dir=\"auto\">allow_tables_to_appear_in_same_query!</code> call (default if not set)</li>\n<li><code dir=\"auto\">none</code> do not generate a <code dir=\"auto\">allow_tables_to_appear_in_same_query!</code> call at all</li>\n</ul>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">allow_tables_to_appear_in_same_query_config</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">fk_related_tables</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]allow_tables_to_appear_in_same_query_config = &#x22;fk_related_tables&#x22;\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-column_sorting-field\">The <code dir=\"auto\">column_sorting</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-column_sorting-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The column_sorting field</span></a></div>\n<br>\n<p>This field allows you to configure how diesel-cli orders column names in your <code dir=\"auto\">table!</code> declarations. It allows the following options:</p>\n<ul>\n<li><code dir=\"auto\">ordinal_position</code> to sort by the ordinal position given by the database. Note that this might be an unstable sorting depending on your migration order. This is the default value if this field is not set.</li>\n<li><code dir=\"auto\">name</code> to sort by the actual field name.</li>\n</ul>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">column_sorting</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]column_sorting = &#x22;name&#x22;\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-pg_domains_as_custom_types-field\">The <code dir=\"auto\">pg_domains_as_custom_types</code> field</h2><a class=\"sl-anchor-link\" href=\"#the-pg_domains_as_custom_types-field\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The pg_domains_as_custom_types field</span></a></div>\n<br>\n<p>This field allows you to define a list of PostgreSQL domain type names that should be infered as custom SQL types by diesel-cli. This list can contain regular expressions to match on multiple domain types at once.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">pg_domains_as_custom_types</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">int</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">longtext</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[print_schema]pg_domains_as_custom_types = [&#x22;int&#x22;, &#x22;longtext&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"nested-sub-schemas\">Nested sub schemas</h2><a class=\"sl-anchor-link\" href=\"#nested-sub-schemas\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Nested sub schemas</span></a></div>\n<br>\n<p>Diesel-CLI allows to configure nested subschemas via <code dir=\"auto\">[print_schema.your_sub_schema]</code> entries. This allows to split up large <code dir=\"auto\">schema.rs</code> files into smaller ones or generate schema.rs files for multiple database schemas at once. Each subschema can configure all keys described above. Diesel-cli allows to configure the subschema that should be used via the <code dir=\"auto\">--schema-key</code> command line argument. If no such argument is given it default to the top level <code dir=\"auto\">[print_schema]</code> entry.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">diesel.toml</span></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># defines a subschema `user1` including the `user1` table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema.user1]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">file</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">src/schema1.rs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">with_docs</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#FF6A83;--1:#A24848\">true</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = { </span><span style=\"--0:#C5E478;--1:#3B61B0\">only_tables</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users1</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\"># defines a subschema `user2` including the `user2` table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[print_schema.user2]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">file</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">src/schema2.rs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">with_docs</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#FF6A83;--1:#A24848\">true</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = { </span><span style=\"--0:#C5E478;--1:#3B61B0\">only_tables</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"# defines a subschema &#x60;user1&#x60; including the &#x60;user1&#x60; table[print_schema.user1]file = &#x22;src/schema1.rs&#x22;with_docs = truefilter = { only_tables = [&#x22;users1&#x22;] }# defines a subschema &#x60;user2&#x60; including the &#x60;user2&#x60; table[print_schema.user2]file = &#x22;src/schema2.rs&#x22;with_docs = truefilter = { only_tables = [&#x22;users2&#x22;] }\"><div></div></button></div></figure></div>",{headings:111,localImagePaths:154,remoteImagePaths:155,frontmatter:156,imagePaths:158},[112,115,118,121,124,127,130,133,136,139,142,145,148,151],{depth:65,slug:113,text:114},"the-file-field","The file field",{depth:65,slug:116,text:117},"the-with_docs-field","The with_docs field",{depth:65,slug:119,text:120},"the-filter-field","The filter field",{depth:65,slug:122,text:123},"the-schema-field","The schema field",{depth:65,slug:125,text:126},"the-generate_missing_sql_type_definitions-field","The generate_missing_sql_type_definitions field",{depth:65,slug:128,text:129},"the-custom_type_derives-field","The custom_type_derives field",{depth:65,slug:131,text:132},"the-except_custom_type_definitions-field","The except_custom_type_definitions field",{depth:65,slug:134,text:135},"the-import_types-field","The import_types field",{depth:65,slug:137,text:138},"the-patch_file-field","The patch_file field",{depth:65,slug:140,text:141},"the-sqlite_integer_primary_key_is_bigint-field","The sqlite_integer_primary_key_is_bigint field",{depth:65,slug:143,text:144},"the-allow_tables_to_appear_in_same_query_config-field","The allow_tables_to_appear_in_same_query_config field",{depth:65,slug:146,text:147},"the-column_sorting-field","The column_sorting field",{depth:65,slug:149,text:150},"the-pg_domains_as_custom_types-field","The pg_domains_as_custom_types field",{depth:65,slug:152,text:153},"nested-sub-schemas","Nested sub schemas",[],[],{title:101,lang:157},"en-US",[],"guides/composing-applications",{id:159,data:161,body:166,filePath:167,digest:168,rendered:169},{title:162,editUrl:16,head:163,template:44,sidebar:164,pagefind:16,draft:32},"Composing Applications with Diesel",[],{hidden:32,attrs:165},{},"One of the main benefits of using a query builder over raw SQL\nis that you can pull bits of your query out into functions and reuse them.\nIn this guide,\nwe'll look at common patterns for extracting your code into reusable pieces.\nWe'll also look at best practices for structuring your code.\n\nAll of our code examples are based on code from [crates.io](https://github.com/rust-lang/crates.io/),\na real-world application that uses Diesel extensively.\nAll of our examples will be focused on functions which *return*\nqueries or pieces of queries.\nNone of these examples will include a function that takes a database\nconnection.\nWe will go into the benefits of this structure at the end of the guide.\n\ncrates.io has a `canon_crate_name` SQL function\nwhich is always used when comparing crate names.\nRather than continuously writing\n`canon_crate_name(crates::name).eq(canon_crate_name(\"some name\"))`,\nwe can instead pull this out into a function.\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L168-L170\"\nuse diesel::dsl::Eq;\nuse diesel::prelude::define_sql_function;\nuse diesel::sql_types::Text;\n\ndefine_sql_function!(fn canon_crate_name(x: Text) -> Text);\n\ntype WithName<'a> = diesel::dsl::Eq<canon_crate_name<crates::name>, canon_crate_name<&'a str>>;\n\nfn with_name(name: &str) -> WithName {\n    canon_crate_name(crates::name).eq(canon_crate_name(name))\n}\n```\n\n\nWe need to specify the return type of this function. For this we define the `WithName` type which\nis composed of a helper type generated by the function macro (`canon_crate_name`) and helper types\ndefined in the [`diesel::dsl`](https://docs.diesel.rs/2.3.x/diesel/dsl/index.html). The later types closely mirror the functions used to construct the query.\n\n\nNow when we want to find a crate by name, we can write\n`crates::table.filter(with_name(\"foo\"))` instead.\nIf we want to accept types other than a `&'str`,\nwe can make the method generic.\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L168-L170\"\nuse diesel::dsl::Eq;\nuse diesel::prelude::define_sql_function;\nuse diesel::sql_types::Text;\n\ndefine_sql_function!(fn canon_crate_name(x: Text) -> Text);\n\ntype WithName<T> = diesel::dsl::Eq<canon_crate_name<crates::name>, canon_crate_name<T>>;\n\nfn with_name<T>(name: T) -> WithName<T>\nwhere\n    T: AsExpression<Text>,\n{\n    canon_crate_name(crates::name).eq(canon_crate_name(name))\n}\n```\n\n\nThe [`AsExpression`](https://docs.diesel.rs/2.3.x/diesel/dsl/index.html) trait describes any type that\ncan be converted to an expression of the SQL type `Text`. In this particular case it extends to function to \naccept `String`, `Cow<str>` and any SQL side text expression (e.g. `crates::name`) as an argument.\n\nIt's up to you whether you make your functions generic,\nor only take a single type.\nWe recommend only making these functions generic if it's actually needed,\nsince it requires additional bounds in your `where` clause.\nThe bounds you need might not be clear,\nunless you are familiar with Diesel's lower levels.\n\nIn these examples,\nwe are using helper types from [`diesel::dsl`]\nto write the return type explicitly.\nNearly every method in Diesel has a helper type like this.\nThe first type parameter is the method receiver\n(the thing before the `.`).\nThe remaining type parameters are the arguments to the method.\nIf we want to avoid writing this return type,\nor dynamically return a different expression,\nwe can box the value instead.\n\n[`diesel::dsl`]: https://docs.diesel.rs/2.3.x/diesel/dsl/index.html\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L168-L170\"\nuse diesel::pg::Pg;\nuse diesel::prelude::sql_function;\nuse diesel::sql_types::Text;\n\nsql_function!(fn canon_crate_name(x: Text) -> Text);\n\nfn with_name<'a, T>(name: T) -> Box<BoxableExpression<crates::table, Pg, SqlType = Bool> + 'a>\nwhere\n    T: AsExpression<Text>,\n    T::Expression: BoxableExpression<crates::table, Pg>,\n{\n    canon_crate_name(crates::name).eq(canon_crate_name(name))\n}\n```\n\n\nIn order to use [`BoxableExpression`], Diesel needs to know three things:\n\n- The table you intend to use it on\n- The backend you plan to execute it against\n- The SQL type it represents\n\nThis is all the information Diesel uses to type-check your query.\nNormally we can get this information from the type,\nbut since we've erased the type by boxing,\nwe have to supply it.\n\nThe table is used to make sure that you don't try to use `users::name`\non a query against `posts::table`.\nWe need to know the backend you will execute it on,\nso we don't accidentally use a PostgreSQL function on SQLite.\nThe SQL type is needed so we know what functions this can be passed to.\n\nBoxing an expression also implies that it has no aggregate functions.\nYou cannot box an aggregate expression in Diesel.\nAs of Diesel 2.0, a boxed expression can only be used with *exactly* the from\nclause given.\nYou cannot use a boxed expression for `crates::table` with an inner join to\nanother table.\n\n[`BoxableExpression`]: https://docs.diesel.rs/2.3.x/diesel/expression/trait.BoxableExpression.html\n\nFinally it's possible to use the `#[diesel::dsl::auto_type]` attribute macro, to automatically\nconstruct the correct return type for you.\n\n[#[diesel::dsl::auto_type]](https://docs.diesel.rs/2.3.x/diesel/dsl/attr.auto_type.html)\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\"\nimpl Crate {\n    #[diesel::dsl::auto_type(no_type_alias)]\n    fn with_name<'a>(name: &'a str) -> _ {\n        canon_crate_name(crates::name).eq(canon_crate_name.eq(name))\n    }\n}\n```\n\n\nFor any function annotated with `#[auto_type]` the procedural macro will replace the `_` return type with\na specific type. Additionally a type definition with the same name as the function name is generated. For this specific example the generation of the type definition is suppressed via the `no_type_alias` option as stable rust does not support associated types for non-trait impls yet.\n\nFor most built-in query DSL constructs the `#[auto_type]` macro will infer the correct type and use that information to construct the return type. For custom functions it might require an explicit type annotation to correctly infer the return type. For lifetimes, as in this example, an explict type annotation is required.\n\nIn addition to extracting expressions,\nyou can also pull out entire queries into functions.\nGoing back to crates.io,\nthe `Crate` struct doesn't use every column from the `crates` table.\nBecause we almost always select a subset of these columns,\nwe have an `all` function which selects the columns we need.\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L185-L187\"\nuse diesel::backend::Backend;\nuse diesel::dsl::{AsSelect, Select};\nuse diesel::pg::Pg;\n\n#[derive(Selectable, Queryable)]\n#[diesel(table_name = crates, check_for_backend(diesel::pg::Pg))]\nstruct Crate {\n    pub id: i32,\n    pub name: String,\n    pub updated_at: NaiveDateTime,\n    pub created_at: NaiveDateTime,\n    pub description: Option<String>,\n    pub homepage: Option<String>,\n    pub documentation: Option<String>,\n    pub repository: Option<String>,\n    pub max_upload_size: Option<i32>,\n    pub max_features: Option<i16>,\n}\n\ntype All = Select<crates::table, AsSelect<Crate, Pg>>;\n\nimpl Crate {\n    pub fn all() -> All {\n        crates::table.select(Crate::as_select())\n    }\n}\n```\n\n\nWe also frequently found ourselves writing\n`Crate::all().filter(with_name(crate_name))`.\nWe can pull that into a function as well.\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\"\nuse diesel::dsl::Filter;\n\ntype ByName<'a> = Filter<All, WithName<'a>>;\n\nimpl Crate {\n    fn by_name(name: &str) -> ByName<'_> {\n        Self::all().filter(with_name(name))\n    }\n}\n```\n\n\nAnd just like with expressions, if we don't want to write the return types,\nor we want to dynamically construct the query differently, we can box the whole query.\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\"\nuse diesel::expression::{Expression, AsExpression};\nuse diesel::pg::Pg;\nuse diesel::sql_types::Text;\nuse diesel::dsl::{SqlTypeOf, AsSelect};\n\ntype SqlType = SqlTypeOf<AsSelect<Crate, Pg>>;\ntype BoxedQuery<'a> = crates::BoxedQuery<'a, Pg, SqlType>;\n\nimpl Crate {\n    fn all() -> BoxedQuery<'static> {\n        crates::table.select(Crate::as_select()).into_boxed()\n    }\n\n    fn by_name<'a, T>(name: &'a str) -> BoxedQuery<'a> {\n        Self::all().filter(with_name(name))\n    }\n}\n```\n\n\nOnce again, we have to give Diesel some information to box the query:\n\n- The SQL type of the `SELECT` clause\n- The `FROM` clause\n- The backend you are going to execute it against\n\nThe SQL type is needed so we can determine what structs can be\ndeserialized from this query.\nThe `FROM` clause is needed so we can validate the arguments\nto future calls to `filter` and other query builder methods.\nThe backend is needed to ensure you don't accidentally use a\nPostgreSQL function on SQLite.\n\nFinally it's again possible to use `#[diesel::dsl::auto_type]` to let the proc-macro \ninfer the correct return type for you.\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\"\nimpl Crate {\n    #[diesel::dsl::auto_type(no_type_alias)]\n    fn by_name(name: &str) -> _ {\n        let all: All = Crate::all();\n        let filter: WithName<'a> = Self::with_name(name);\n        all.filter(filter)\n    }\n}\n```\n\n\nIn this case the `#[auto_type]` macro needs additional type expressions to work correctly.\n\nNote that in all of our examples,\nwe are writing functions that *return* queries or expressions.\nNone of these functions execute the query.\nIn general, you should always prefer functions that return queries,\nand avoid functions that take a connection as an argument.\nThis allows you to reuse and compose your queries.\n\nFor example, if we had written our `by_name` function like this:\n\n\n\n```rust title=\"src/models/krate.rs\" link=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\"\nimpl Crate {\n    fn by_name(name: &str, conn: &mut PgConnection) -> QueryResult<Self> {\n        Self::all()\n            .filter(with_name(name))\n            .first(conn)\n    }\n}\n```\n\n\nThen we would never be able to use this query in another context,\nor modify it further. By writing the function as one that returns a query,\nrather than executing it, we can do things like use it as a subselect.\n\n\n```rust title=\"Example\"\nlet version_id = versions\n    .select(id)\n    .filter(crate_id.eq_any(Crate::by_name(crate_name).select(crates::id)))\n    .filter(num.eq(version))\n    .first(conn)?;\n```\n\n\nOr use it to do things like get all of its downloads:\n\n\n```rust title=\"Example\"\nlet recent_downloads = Crate::by_name(crate_name)\n    .inner_join(crate_downloads::table)\n    .filter(CrateDownload::is_recent())\n    .select(sum(crate_downloads::downloads))\n    .get_result(conn)?;\n```\n\n\nAll code in this guide is based on real code from crates.io.\nYou can find the source [on GitHub][crates-io]\n\n[crates-io]: https://github.com/rust-lang/crates.io","src/content/docs/guides/composing-applications.md","a05343e24bc313b4",{html:170,metadata:171},"<p>One of the main benefits of using a query builder over raw SQL\nis that you can pull bits of your query out into functions and reuse them.\nIn this guide,\nwell look at common patterns for extracting your code into reusable pieces.\nWell also look at best practices for structuring your code.</p>\n<p>All of our code examples are based on code from <a href=\"https://github.com/rust-lang/crates.io/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">crates.io</a>,\na real-world application that uses Diesel extensively.\nAll of our examples will be focused on functions which <em>return</em>\nqueries or pieces of queries.\nNone of these examples will include a function that takes a database\nconnection.\nWe will go into the benefits of this structure at the end of the guide.</p>\n<p>crates.io has a <code dir=\"auto\">canon_crate_name</code> SQL function\nwhich is always used when comparing crate names.\nRather than continuously writing\n<code dir=\"auto\">canon_crate_name(crates::name).eq(canon_crate_name(\"some name\"))</code>,\nwe can instead pull this out into a function.</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L168-L170\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">define_sql_function;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">define_sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> WithName&#x3C;'a> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">>, </span><span style=\"--0:#C5E478;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str</span><span style=\"--0:#C792EA;--1:#8844AE\">>></span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> WithName {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::dsl::Eq;use diesel::prelude::define_sql_function;use diesel::sql_types::Text;define_sql_function!(fn canon_crate_name(x: Text) -> Text);type WithName<&#x27;a> = diesel::dsl::Eq<canon_crate_name<crates::name>, canon_crate_name<&#x26;&#x27;a str>>;fn with_name(name: &#x26;str) -> WithName {    canon_crate_name(crates::name).eq(canon_crate_name(name))}\"><div></div></button></div></figure></div>\n<p>We need to specify the return type of this function. For this we define the <code dir=\"auto\">WithName</code> type which\nis composed of a helper type generated by the function macro (<code dir=\"auto\">canon_crate_name</code>) and helper types\ndefined in the <a href=\"https://docs.diesel.rs/2.3.x/diesel/dsl/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::dsl</code></a>. The later types closely mirror the functions used to construct the query.</p>\n<p>Now when we want to find a crate by name, we can write\n<code dir=\"auto\">crates::table.filter(with_name(\"foo\"))</code> instead.\nIf we want to accept types other than a <code dir=\"auto\">&#x26;'str</code>,\nwe can make the method generic.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L168-L170\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">define_sql_function;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">define_sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> WithName&#x3C;T> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">>, </span><span style=\"--0:#C5E478;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T</span><span style=\"--0:#C792EA;--1:#8844AE\">>></span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> WithName&#x3C;T></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsExpression&#x3C;Text>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::dsl::Eq;use diesel::prelude::define_sql_function;use diesel::sql_types::Text;define_sql_function!(fn canon_crate_name(x: Text) -> Text);type WithName<T> = diesel::dsl::Eq<canon_crate_name<crates::name>, canon_crate_name<T>>;fn with_name<T>(name: T) -> WithName<T>where    T: AsExpression<Text>,{    canon_crate_name(crates::name).eq(canon_crate_name(name))}\"><div></div></button></div></figure></div>\n<p>The <a href=\"https://docs.diesel.rs/2.3.x/diesel/dsl/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">AsExpression</code></a> trait describes any type that\ncan be converted to an expression of the SQL type <code dir=\"auto\">Text</code>. In this particular case it extends to function to\naccept <code dir=\"auto\">String</code>, <code dir=\"auto\">Cow&#x3C;str></code> and any SQL side text expression (e.g. <code dir=\"auto\">crates::name</code>) as an argument.</p>\n<p>Its up to you whether you make your functions generic,\nor only take a single type.\nWe recommend only making these functions generic if its actually needed,\nsince it requires additional bounds in your <code dir=\"auto\">where</code> clause.\nThe bounds you need might not be clear,\nunless you are familiar with Diesels lower levels.</p>\n<p>In these examples,\nwe are using helper types from <a href=\"https://docs.diesel.rs/2.3.x/diesel/dsl/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::dsl</code></a>\nto write the return type explicitly.\nNearly every method in Diesel has a helper type like this.\nThe first type parameter is the method receiver\n(the thing before the <code dir=\"auto\">.</code>).\nThe remaining type parameters are the arguments to the method.\nIf we want to avoid writing this return type,\nor dynamically return a different expression,\nwe can box the value instead.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L168-L170\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">pg</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Pg;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_function;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;'a, T>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Box&#x3C;BoxableExpression&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">, Pg, SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Bool> </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> 'a></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsExpression&#x3C;Text>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxableExpression&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">, Pg>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::pg::Pg;use diesel::prelude::sql_function;use diesel::sql_types::Text;sql_function!(fn canon_crate_name(x: Text) -> Text);fn with_name<&#x27;a, T>(name: T) -> Box<BoxableExpression<crates::table, Pg, SqlType = Bool> + &#x27;a>where    T: AsExpression<Text>,    T::Expression: BoxableExpression<crates::table, Pg>,{    canon_crate_name(crates::name).eq(canon_crate_name(name))}\"><div></div></button></div></figure></div>\n<p>In order to use <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/trait.BoxableExpression.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">BoxableExpression</code></a>, Diesel needs to know three things:</p>\n<ul>\n<li>The table you intend to use it on</li>\n<li>The backend you plan to execute it against</li>\n<li>The SQL type it represents</li>\n</ul>\n<p>This is all the information Diesel uses to type-check your query.\nNormally we can get this information from the type,\nbut since weve erased the type by boxing,\nwe have to supply it.</p>\n<p>The table is used to make sure that you dont try to use <code dir=\"auto\">users::name</code>\non a query against <code dir=\"auto\">posts::table</code>.\nWe need to know the backend you will execute it on,\nso we dont accidentally use a PostgreSQL function on SQLite.\nThe SQL type is needed so we know what functions this can be passed to.</p>\n<p>Boxing an expression also implies that it has no aggregate functions.\nYou cannot box an aggregate expression in Diesel.\nAs of Diesel 2.0, a boxed expression can only be used with <em>exactly</em> the from\nclause given.\nYou cannot use a boxed expression for <code dir=\"auto\">crates::table</code> with an inner join to\nanother table.</p>\n<p>Finally its possible to use the <code dir=\"auto\">#[diesel::dsl::auto_type]</code> attribute macro, to automatically\nconstruct the correct return type for you.</p>\n<p><a href=\"https://docs.diesel.rs/2.3.x/diesel/dsl/attr.auto_type.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">#[diesel::dsl::auto_type]</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">auto_type(no_type_alias)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;'a>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">canon_crate_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl Crate {    #[diesel::dsl::auto_type(no_type_alias)]    fn with_name<&#x27;a>(name: &#x26;&#x27;a str) -> _ {        canon_crate_name(crates::name).eq(canon_crate_name.eq(name))    }}\"><div></div></button></div></figure></div>\n<p>For any function annotated with <code dir=\"auto\">#[auto_type]</code> the procedural macro will replace the <code dir=\"auto\">_</code> return type with\na specific type. Additionally a type definition with the same name as the function name is generated. For this specific example the generation of the type definition is suppressed via the <code dir=\"auto\">no_type_alias</code> option as stable rust does not support associated types for non-trait impls yet.</p>\n<p>For most built-in query DSL constructs the <code dir=\"auto\">#[auto_type]</code> macro will infer the correct type and use that information to construct the return type. For custom functions it might require an explicit type annotation to correctly infer the return type. For lifetimes, as in this example, an explict type annotation is required.</p>\n<p>In addition to extracting expressions,\nyou can also pull out entire queries into functions.\nGoing back to crates.io,\nthe <code dir=\"auto\">Crate</code> struct doesnt use every column from the <code dir=\"auto\">crates</code> table.\nBecause we almost always select a subset of these columns,\nwe have an <code dir=\"auto\">all</code> function which selects the columns we need.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L185-L187\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Backend;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{AsSelect, Select};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">pg</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Pg;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Selectable, Queryable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> crates, check_for_backend(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">pg</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Pg))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> NaiveDateTime,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> NaiveDateTime,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">description</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">homepage</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">documentation</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">repository</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">max_upload_size</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;i32>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">max_features</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;i16>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> All </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Select&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">, AsSelect&#x3C;Crate, Pg>>;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">all</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> All {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::backend::Backend;use diesel::dsl::{AsSelect, Select};use diesel::pg::Pg;#[derive(Selectable, Queryable)]#[diesel(table_name = crates, check_for_backend(diesel::pg::Pg))]struct Crate {    pub id: i32,    pub name: String,    pub updated_at: NaiveDateTime,    pub created_at: NaiveDateTime,    pub description: Option<String>,    pub homepage: Option<String>,    pub documentation: Option<String>,    pub repository: Option<String>,    pub max_upload_size: Option<i32>,    pub max_features: Option<i16>,}type All = Select<crates::table, AsSelect<Crate, Pg>>;impl Crate {    pub fn all() -> All {        crates::table.select(Crate::as_select())    }}\"><div></div></button></div></figure></div>\n<p>We also frequently found ourselves writing\n<code dir=\"auto\">Crate::all().filter(with_name(crate_name))</code>.\nWe can pull that into a function as well.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Filter;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ByName&#x3C;'a> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Filter&#x3C;All, WithName&#x3C;'a>>;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> ByName&#x3C;'_> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">all</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::dsl::Filter;type ByName<&#x27;a> = Filter<All, WithName<&#x27;a>>;impl Crate {    fn by_name(name: &#x26;str) -> ByName<&#x27;_> {        Self::all().filter(with_name(name))    }}\"><div></div></button></div></figure></div>\n<p>And just like with expressions, if we dont want to write the return types,\nor we want to dynamically construct the query differently, we can box the whole query.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{Expression, AsExpression};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">pg</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Pg;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{SqlTypeOf, AsSelect};</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlTypeOf&#x3C;AsSelect&#x3C;Crate, Pg>>;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedQuery&#x3C;'a> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">BoxedQuery&#x3C;'a, Pg, SqlType>;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">all</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedQuery&#x3C;'static> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into_boxed</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;'a, T>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedQuery&#x3C;'a> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">all</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::expression::{Expression, AsExpression};use diesel::pg::Pg;use diesel::sql_types::Text;use diesel::dsl::{SqlTypeOf, AsSelect};type SqlType = SqlTypeOf<AsSelect<Crate, Pg>>;type BoxedQuery<&#x27;a> = crates::BoxedQuery<&#x27;a, Pg, SqlType>;impl Crate {    fn all() -> BoxedQuery<&#x27;static> {        crates::table.select(Crate::as_select()).into_boxed()    }    fn by_name<&#x27;a, T>(name: &#x26;&#x27;a str) -> BoxedQuery<&#x27;a> {        Self::all().filter(with_name(name))    }}\"><div></div></button></div></figure></div>\n<p>Once again, we have to give Diesel some information to box the query:</p>\n<ul>\n<li>The SQL type of the <code dir=\"auto\">SELECT</code> clause</li>\n<li>The <code dir=\"auto\">FROM</code> clause</li>\n<li>The backend you are going to execute it against</li>\n</ul>\n<p>The SQL type is needed so we can determine what structs can be\ndeserialized from this query.\nThe <code dir=\"auto\">FROM</code> clause is needed so we can validate the arguments\nto future calls to <code dir=\"auto\">filter</code> and other query builder methods.\nThe backend is needed to ensure you dont accidentally use a\nPostgreSQL function on SQLite.</p>\n<p>Finally its again possible to use <code dir=\"auto\">#[diesel::dsl::auto_type]</code> to let the proc-macro\ninfer the correct return type for you.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">auto_type(no_type_alias)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> All </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">all</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">filter</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> WithName&#x3C;'a> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">all</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl Crate {    #[diesel::dsl::auto_type(no_type_alias)]    fn by_name(name: &#x26;str) -> _ {        let all: All = Crate::all();        let filter: WithName<&#x27;a> = Self::with_name(name);        all.filter(filter)    }}\"><div></div></button></div></figure></div>\n<p>In this case the <code dir=\"auto\">#[auto_type]</code> macro needs additional type expressions to work correctly.</p>\n<p>Note that in all of our examples,\nwe are writing functions that <em>return</em> queries or expressions.\nNone of these functions execute the query.\nIn general, you should always prefer functions that return queries,\nand avoid functions that take a connection as an argument.\nThis allows you to reuse and compose your queries.</p>\n<p>For example, if we had written our <code dir=\"auto\">by_name</code> function like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/rust-lang/crates.io/blob/12e75f1a0480f86b7b2efc76e155f449b3be9287/src/models/krate.rs#L172-L177\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/models/krate.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str, </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> PgConnection) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryResult&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\">> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">all</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">first</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl Crate {    fn by_name(name: &#x26;str, conn: &#x26;mut PgConnection) -> QueryResult<Self> {        Self::all()            .filter(with_name(name))            .first(conn)    }}\"><div></div></button></div></figure></div>\n<p>Then we would never be able to use this query in another context,\nor modify it further. By writing the function as one that returns a query,\nrather than executing it, we can do things like use it as a subselect.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">version_id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">versions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">crate_id</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq_any</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crates</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">num</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">version</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">first</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let version_id = versions    .select(id)    .filter(crate_id.eq_any(Crate::by_name(crate_name).select(crates::id)))    .filter(num.eq(version))    .first(conn)?;\"><div></div></button></div></figure></div>\n<p>Or use it to do things like get all of its downloads:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">recent_downloads</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">crate_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crate_downloads</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(CrateDownload</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">is_recent</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">sum</span><span style=\"--0:#D6DEEB;--1:#403F53\">(crate_downloads</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">downloads</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let recent_downloads = Crate::by_name(crate_name)    .inner_join(crate_downloads::table)    .filter(CrateDownload::is_recent())    .select(sum(crate_downloads::downloads))    .get_result(conn)?;\"><div></div></button></div></figure></div>\n<p>All code in this guide is based on real code from crates.io.\nYou can find the source <a href=\"https://github.com/rust-lang/crates.io\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">on GitHub</a></p>",{headings:172,localImagePaths:173,remoteImagePaths:174,frontmatter:175,imagePaths:176},[],[],[],{title:162,lang:157},[],"guides/extending-diesel",{id:177,data:179,body:184,filePath:185,digest:186,rendered:187},{title:180,editUrl:16,head:181,template:44,sidebar:182,pagefind:16,draft:32},"Extending Diesel",[],{hidden:32,attrs:183},{},"Diesel provides a lot of capabilities out of the box.\nHowever, it doesn't necessarily provide everything your app may want to use.\nOne of Diesel's greatest strengths\nis that it can be extended to add new functionality.\n\nIn this guide we'll look at several ways to hook into Diesel's query builder,\nboth to add new capabilities,\nand to introduce new abstractions.\n\nThis guide is only going to cover extending the query builder.\nHow to add support for new SQL types will be covered in a future guide.\n\n## `sql_function!`\n<br />\n\nThe easiest and most common way to extend Diesel's query builder\nis by declaring a new SQL function.\nThis can be used for functions defined by your database,\nor for built-in functions that Diesel doesn't support out of the box.\n\nFunctions in SQL often have multiple signatures,\nmaking them difficult or impossible to represent in Rust.\nBecause of this, Diesel only provides support for a small number\nof built-in SQL functions.\nConsider `COALESCE`.\nThis function can take any number of arguments,\nand its return type changes based on whether any arguments are `NOT NULL`.\nWhile we can't easily represent that in Rust,\nwe can use [`sql_function!`] to declare it with the exact signature we're using.\n\n[`sql_function!`]: https://docs.diesel.rs/2.3.x/diesel/expression/functions/macro.sql_function.html\n\n\n```rust title=\"Example\"\nuse diesel::sql_types::{Nullable, Text};\nsql_function! { fn coalesce(x: Nullable<Text>, y: Text) -> Text; }\n\nusers.select(coalesce(hair_color, \"blue\"))\n```\n\n\nAs this example shows,\n[`sql_function!`] converts its argument like other parts of the query builder.\nThis means that the generated function can take both Diesel expressions,\nand Rust values to be sent with the query.\n\nThe macro takes one argument: a function definition.\nHowever, the types in the function signature are SQL types,\nnot concrete Rust types.\nThis is what allows us to pass both columns and Rust strings.\nIf we defined this function manually, it would look like this:\n\n\n```rust title=\"Example\"\npub fn coalesce<X, Y>(x: X, y: Y) -> coalesce::HelperType<X, Y>\nwhere\n    X: AsExpression<Nullable<Text>>,\n    Y: AsExpression<Text>,\n{\n    ...\n}\n\npub(crate) mod coalesce {\n    pub type HelperType<X, Y> = ...;\n}\n```\n\n\nA helper type is generated with the same name as the function.\nThis helper type handles Diesel's argument conversion.\nThis lets us write `coalesce<hair_color, &str>`.\nMore information can be found in [the API documentation](https://docs.diesel.rs/2.3.x/diesel/expression/functions/macro.sql_function.html)\n\n## Using Custom SQL and How to Extend the Query DSL\n<br />\n\nOften times it's useful to encapsulate a common SQL pattern.\nFor example, if you're doing pagination on your queries,\nPostgreSQL is capable of loading the total count in a single query.\nThe query you would want to execute would look like this:\n\n\n```sql title=\"Example\"\nSELECT *, COUNT(*) OVER () FROM (subselect t) as paged_query_with LIMIT $1 OFFSET $2\n```\n\n\nHowever, as of version 2.0,\nDiesel doesn't support window functions, or selecting from a subselect.\nEven if Diesel's query builder supported those things,\nthis is a case that is easier to reason about in terms of the SQL we want to\ngenerate.\n\nLet's look at how we would go about adding a `paginate` method to Diesel's query\nbuilder, to generate that query.\nLet's assume for the time being that we have a struct `Paginated<T>` already.\nWe'll look at the specifics of this struct shortly.\n\nIf you are creating a struct where you want to manually define the SQL,\nyou will need to implement a trait called [`QueryFragment`].\nThe implementation will look like this:\n\n[`QueryFragment`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.QueryFragment.html\n\n\n\n```rust title=\"src/pagination.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L60-L73\"\nimpl<T> QueryFragment<Pg> for Paginated<T>\nwhere\n    T: QueryFragment<Pg>,\n{\n    fn walk_ast<'b>(&'b self, mut out: AstPass<'_, 'b, Pg>) -> QueryResult<()> {\n        out.push_sql(\"SELECT *, COUNT(*) OVER () FROM (\");\n        self.query.walk_ast(out.reborrow())?;\n        out.push_sql(\") as paged_query_with LIMIT \");\n        out.push_bind_param::<BigInt, _>(&self.per_page)?;\n        out.push_sql(\" OFFSET \");\n        out.push_bind_param::<BigInt, _>(&self.offset)?;\n        Ok(())\n    }\n}\n```\n\n\nFor details on what each method does,\nsee the documentation for [`AstPass`].\nOne important question to ask whenever you implement `QueryFragment`\nis whether you are generating a query that is safe to cache.\nThe way to answer this question is by asking\n\"does this struct generate an unlimited number of potential SQL queries\"?\nTypically that is only the case if the body of `walk_ast` contains a for loop.\nIf your query is not safe to cache, you *must* call\n[`out.unsafe_to_cache_prepared`].\n\nWhenever you implement `QueryFragment`, you also need to implement [`QueryId`].\n- We can use [`#[derive(QueryId)]`] for this.\nSince this struct represents a full query which can be executed,\nwe will implement [`RunQueryDsl`] which adds methods like [`execute`] and [`load`].\nSince this query has a return type,\nwe'll implement [`Query`] which states the return type as well.\n\n[`QueryId`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.QueryId.html\n[`AstPass`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.AstPass.html\n[`impl_query_id!`]: https://docs.diesel.rs/2.3.x/diesel/macro.impl_query_id.html\n[`RunQueryDsl`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html\n[`execute`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.execute\n[`load`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.load\n[`Query`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.Query.html\n[`#[derive(QueryId)]`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/derive.QueryId.html\n[`out.unsafe_to_cache_prepared`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.AstPass.html#method.unsafe_to_cache_prepared\n\n\n\n\n```rust title=\"src/pagination.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L54-L58\"\nimpl<T: Query> Query for Paginated<T> {\n    type SqlType = (T::SqlType, BigInt);\n}\n\nimpl<T> RunQueryDsl<PgConnection> for Paginated<T> {}\n```\n\n\nNow that we've implemented all of these things,\nlet's look at how we would go about constructing this.\nWe'll want to add a `paginate` method to all Diesel queries,\nwhich specifies which page we're on,\nas well as a `per_page` method which specifies the number of elements per page.\n\nIn order to add new methods to existing types, we can use a trait.\n\n\n\n```rust title=\"src/pagination.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L7-L39\"\npub trait Paginate: Sized {\n    fn paginate(self, page: i64) -> Paginated<Self>;\n}\n\nimpl<T> Paginate for T {\n    fn paginate(self, page: i64) -> Paginated<Self> {\n        Paginated {\n            query: self,\n            per_page: DEFAULT_PER_PAGE,\n            page,\n            offset: (page - 1) * DEFAULT_PER_PAGE,\n        }\n    }\n}\n\nconst DEFAULT_PER_PAGE: i64 = 10;\n\n#[derive(Debug, Clone, Copy, QueryId)]\npub struct Paginated<T> {\n    query: T,\n    page: i64,\n    per_page: i64,\n    offset: i64,\n}\n\nimpl<T> Paginated<T> {\n    pub fn per_page(self, per_page: i64) -> Self {\n        Paginated {\n            per_page,\n            offset: (self.page - 1) * per_page,\n            ..self\n        }\n    }\n}\n```\n\n\nNow we can get the third page of a query with 25 elements per page like this:\n\n\n```rust title=\"Example\"\n    let results: Vec<(User, i64)> = users::table\n        .paginate(3)\n        .per_page(25)\n        .get_results(&conn)\n        .expect(\"error\");\n```\n\n\nWith this code,\nwe could load any query into a `Vec<(T, i64)>`,\nbut we can do better.\nWhen doing pagination,\nyou usually want the records and the total number of pages.\nWe can write that method.\n\n\n\n```rust title=\"src/pagination.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L41-L51\"\nimpl<T> Paginated<T> {\n    pub fn load_and_count_pages<'a, U>(self, conn: &mut PgConnection) -> QueryResult<(Vec<U>, i64)>\n    where\n        Self: LoadQuery<'a, PgConnection, (U, i64)>,\n    {\n        let per_page = self.per_page;\n        let results = self.load::<(U, i64)>(conn)?;\n        let total = results.get(0).map(|x| x.1).unwrap_or(0);\n        let records = results.into_iter().map(|x| x.0).collect();\n        let total_pages = (total as f64 / per_page as f64).ceil() as i64;\n        Ok((records, total_pages))\n    }\n}\n```\n\n\nThis is one of the rare cases where we want to define a function that takes a\nconnection.\nOne benefit of defining the function this way\nis that if we wanted to support backends other than PostgreSQL,\nwe could have this function execute two queries.\n\nYou can find the full code for this example in [the \"advanced blog\" example].\n\n[the \"advanced blog\" example]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/advanced-blog-cli\n\n## Custom Operators\n<br />\n\nIf you're adding support for a new type to Diesel,\nor working with a type that has incomplete support,\nyou may wish to add support for the operators associated with that type.\nThe term operator refers to anything that uses one of these syntaxes:\n\n- Infix (e.g. `left OP right`)\n- Prefix (e.g. `OP expr`)\n- Postfix (e.g. `expr OP`)\n\nDiesel provides helper macros for defining each of these kinds of operators.\nIn fact, Diesel uses these macros to declare nearly all of the operators\nsupported by the main crate.\nThe macros are\n[`diesel::infix_operator!`], [`diesel::postfix_operator!`] and\n[`diesel::prefix_operator!`].\n\n[`diesel::infix_operator!`]: https://docs.diesel.rs/2.3.x/diesel/macro.infix_operator.html\n[`diesel::postfix_operator!`]: https://docs.diesel.rs/2.3.x/diesel/macro.postfix_operator.html\n[`diesel::prefix_operator!`]: https://docs.diesel.rs/2.3.x/diesel/macro.prefix_operator.html\n\nAll of these macros have the same signature.\nThey take between two and four arguments.\n\nThe first is the name of the struct you want to represent this operator.\n\nThe second is the actual SQL for this operator.\n\nThe third argument is optional, and is the SQL type of the operator.\nIf the SQL type is not specified, it will default to `Bool`.\nYou can also pass the \"magic\" type `ReturnBasedOnArgs`,\nwhich will cause the SQL type to be the same as the type of its arguments.\nDiesel uses this to make the string concatenation operator `||`\nreturn `Nullable<Text>` if the arguments are nullable,\nor `Text` if they are not null.\n\nThe fourth argument (or third if you didn't specify the SQL type)\nis the backend this operator is used for.\nIf you don't specify a backend,\nthe operator can be used on all backends.\n\nLet's look at some example usage from Diesel:\n\n```rust title=\"Example\"\n// A simple operator. It returns `Bool` and works on all backends.\ndiesel::infix_operator!(Eq, \" = \");\n\n// Here we've specified the SQL type.\n// Since this operator is only used for ordering, and we don't want it used\n// elsewhere, we've made it `()` which is normally useless.\ndiesel::postfix_operator!(Asc, \" ASC\", ());\n\n// Concat uses the magic `ReturnBasedOnArgs` return type\n// so it can work with both `Text` and `Nullable<Text>`.\ndiesel::infix_operator!(Concat, \" || \", ReturnBasedOnArgs);\n\n// This operator is PG specific, so we specify the backend\ndiesel::infix_operator!(IsDistinctFrom, \" IS DISTINCT FROM \", backend: Pg);\n\n// This operator is PG specific, and we are also specifying the SQL type.\ndiesel::postfix_operator!(NullsFirst, \" NULLS FIRST\", (), backend: Pg);\n```\n\n\nDiesel provides a proof-of-concept crate showing how to add new SQL types called\n`diesel_full_text_search`.\nThese are the operators as they are defined in that crate.\nYou'll notice all of the operators specify the backend,\nand many of them specify the return type.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel_full_text_search/blob/27b9946831caa8b08177c1818a50cb7f0563c9c0/src/lib.rs#L57-L62\"\ndiesel::infix_operator!(Matches, \" @@ \", backend: Pg);\ndiesel::infix_operator!(Concat, \" || \", TsVector, backend: Pg);\ndiesel::infix_operator!(And, \" && \", TsQuery, backend: Pg);\ndiesel::infix_operator!(Or, \" || \", TsQuery, backend: Pg);\ndiesel::infix_operator!(Contains, \" @> \", backend: Pg);\ndiesel::infix_operator!(ContainedBy, \" <@ \", backend: Pg);\n```\n\n\nHowever, just declaring the operator by itself isn't very useful.\nThis creates the types required by Diesel's query builder,\nbut doesn't provide anything to help use the operator in real code.\nThe structs created by these macros will have a `new` method,\nbut that's not typically how you work with Diesel's query builder.\n\n- Infix operators are usually methods on the left hand side.\n- Postfix operators are usually methods on the expression.\n- Prefix operators are usually bare functions.\n\nFor operators that you create with methods,\nyou would typically create a trait for this.\nFor example, here's how the [`.eq`] method gets defined by Diesel.\n\n[`.eq`]: https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.ExpressionMethods.html#method.eq\n\n\n\n```rust title=\"src/expression_methods/global_expression_methods.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/diesel/src/expression_methods/global_expression_methods.rs#L71-L77\"\npub trait ExpressionMethods: Expression + Sized {\n    fn eq<T>(self, other: T) -> dsl::Eq<Self, T>\n    where\n        Self::SqlType: SqlType,\n        T: AsExpression<Self::SqlType>,\n    {\n        Grouped(Eq::new(self, other.as_expression()))\n    }\n}\n\nimpl<T: Expression> ExpressionMethods for T {}\n```\n\n\nIt's important to note that these methods are where you should put any type\nconstraints.\nThe structs defined by `diesel::*_operator!` don't know or care about what the\ntypes of the arguments should be.\nThe `=` operator requires that both sides be of the same type,\nso we represent that in the type of `ExpressionMethods::eq`.\n\nYou'll also notice that our argument is\n[`AsExpression<Self::SqlType>`],\nnot [`Expression<SqlType = Self::SqlType>`].\nThis allows Rust values to be passed as well as Diesel expressions.\nFor example, we can do `text_col.eq(other_text_col)`,\nor `text_col.eq(\"Some Rust string\")`.\n\n[`AsExpression<Self::SqlType>`]: https://docs.diesel.rs/2.3.x/diesel/expression/trait.AsExpression.html\n[`Expression<SqlType = Self::SqlType>`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.Expression.html\n\nIf the operator is specific to only one SQL type,\nwe can represent that in our trait.\n\n\n\n```rust title=\"src/expression_methods/global_expression_methods.rs\" link=\"https://github.com/diesel-rs/diesel/blob/main/diesel/src/expression_methods/bool_expression_methods.rs\"\npub trait BoolExpressionMethods\nwhere\n    Self: Expression<SqlType = Bool> + Sized,\n{\n    fn and<T, ST>(self, other: T) -> dsl::And<Self, T, ST>\n    where\n        Self::SqlType: SqlType,\n        ST: SqlType + TypedExpressionType,\n        T: AsExpression<ST>,\n        And<Self, T::Expression>: Expression,\n    {\n        Grouped(And::new(self, other.as_expression()))\n    }\n}\n\nimpl<T> BoolExpressionMethods for T\nwhere\n    T: Expression,\n    T::SqlType: BoolOrNullableBool,\n{\n}\n```\n\n\nPrefix operators are usually defined as bare functions.\nThe code is very similar, but without the trait.\nHere's how [`not`] is defined in Diesel.\n\n[`not`]: https://docs.diesel.rs/2.3.x/diesel/dsl/fn.not.html\n\n\n\n```rust title=\"src/expression/not.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/diesel/src/expression/not.rs#L26-L32\"\npub fn not<T>(expr: T) -> not<T>\nwhere\n    T: Expression,\n    <T as Expression>::SqlType: BoolOrNullableBool,\n{\n    super::operators::Not::new(Grouped(expr))\n}\n```\n\n\nIn this case we're using `Grouped`\n(which is currently undocumented in Diesel and only used internally)\nto add parenthesis around our argument.\nThis ensures that the operator precedence in SQL matches what's expected.\nFor example, we would expect `not(true.and(false))` to return `true`.\nHowever, `SELECT NOT TRUE AND FALSE` returns `FALSE`.\nDiesel does the same thing for most of the built-in operators.\n\nIt's also a best practice to expose a \"helper type\" for your method,\nwhich does the same type conversion as the method itself.\nNobody wants to write `Eq<text_col, <&str as AsExpression<Text>>::Expression>`.\nInstead, we provide a type that lets you write [`Eq<text_col, &str>`].\n\n[`Eq<text_col, &str>`]: https://docs.diesel.rs/2.3.x/diesel/helper_types/type.Eq.html\n\n\n\n```rust title=\"src/expression/helper_types.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/diesel/src/expression/helper_types.rs#L21\"\npub type Eq<Lhs, Rhs> = Grouped<super::operators::Eq<Lhs, AsExpr<Rhs, Lhs>>>;\n```\n\n\nFor defining these types,\nyou'll usually want to make use of [`SqlTypeOf`], [`AsExpr`], and [`AsExprOf`].\n\n[`SqlTypeOf`]: https://docs.diesel.rs/2.3.x/diesel/helper_types/type.SqlTypeOf.html\n[`AsExpr`]: https://docs.diesel.rs/2.3.x/diesel/helper_types/type.AsExpr.html\n[`AsExprOf`]: https://docs.diesel.rs/2.3.x/diesel/helper_types/type.AsExprOf.html","src/content/docs/guides/extending-diesel.md","fbfb90211e55c2fe",{html:188,metadata:189},"<p>Diesel provides a lot of capabilities out of the box.\nHowever, it doesnt necessarily provide everything your app may want to use.\nOne of Diesels greatest strengths\nis that it can be extended to add new functionality.</p>\n<p>In this guide well look at several ways to hook into Diesels query builder,\nboth to add new capabilities,\nand to introduce new abstractions.</p>\n<p>This guide is only going to cover extending the query builder.\nHow to add support for new SQL types will be covered in a future guide.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"sql_function\"><code dir=\"auto\">sql_function!</code></h2><a class=\"sl-anchor-link\" href=\"#sql_function\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled sql_function!</span></a></div>\n<br>\n<p>The easiest and most common way to extend Diesels query builder\nis by declaring a new SQL function.\nThis can be used for functions defined by your database,\nor for built-in functions that Diesel doesnt support out of the box.</p>\n<p>Functions in SQL often have multiple signatures,\nmaking them difficult or impossible to represent in Rust.\nBecause of this, Diesel only provides support for a small number\nof built-in SQL functions.\nConsider <code dir=\"auto\">COALESCE</code>.\nThis function can take any number of arguments,\nand its return type changes based on whether any arguments are <code dir=\"auto\">NOT NULL</code>.\nWhile we cant easily represent that in Rust,\nwe can use <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/functions/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">sql_function!</code></a> to declare it with the exact signature were using.</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{Nullable, Text};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">coalesce</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Nullable&#x3C;Text>, </span><span style=\"--0:#C5E478;--1:#3B61B0\">y</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text; }</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">coalesce</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">blue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::sql_types::{Nullable, Text};sql_function! { fn coalesce(x: Nullable<Text>, y: Text) -> Text; }users.select(coalesce(hair_color, &#x22;blue&#x22;))\"><div></div></button></div></figure></div>\n<p>As this example shows,\n<a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/functions/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">sql_function!</code></a> converts its argument like other parts of the query builder.\nThis means that the generated function can take both Diesel expressions,\nand Rust values to be sent with the query.</p>\n<p>The macro takes one argument: a function definition.\nHowever, the types in the function signature are SQL types,\nnot concrete Rust types.\nThis is what allows us to pass both columns and Rust strings.\nIf we defined this function manually, it would look like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">coalesce</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;X, Y>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> X, </span><span style=\"--0:#C5E478;--1:#3B61B0\">y</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Y) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> coalesce</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">HelperType&#x3C;X, Y></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">X</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsExpression&#x3C;Nullable&#x3C;Text>>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Y</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsExpression&#x3C;Text>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">...</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#D6DEEB;--1:#403F53\"> coalesce {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> HelperType&#x3C;X, Y> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">...</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub fn coalesce<X, Y>(x: X, y: Y) -> coalesce::HelperType<X, Y>where    X: AsExpression<Nullable<Text>>,    Y: AsExpression<Text>,{    ...}pub(crate) mod coalesce {    pub type HelperType<X, Y> = ...;}\"><div></div></button></div></figure></div>\n<p>A helper type is generated with the same name as the function.\nThis helper type handles Diesels argument conversion.\nThis lets us write <code dir=\"auto\">coalesce&#x3C;hair_color, &#x26;str></code>.\nMore information can be found in <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/functions/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the API documentation</a></p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"using-custom-sql-and-how-to-extend-the-query-dsl\">Using Custom SQL and How to Extend the Query DSL</h2><a class=\"sl-anchor-link\" href=\"#using-custom-sql-and-how-to-extend-the-query-dsl\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Using Custom SQL and How to Extend the Query DSL</span></a></div>\n<br>\n<p>Often times its useful to encapsulate a common SQL pattern.\nFor example, if youre doing pagination on your queries,\nPostgreSQL is capable of loading the total count in a single query.\nThe query you would want to execute would look like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">*</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">COUNT</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">*</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">OVER</span><span style=\"--0:#D6DEEB;--1:#403F53\"> () </span><span style=\"--0:#C792EA;--1:#8844AE\">FROM</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (subselect t) </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> paged_query_with </span><span style=\"--0:#C792EA;--1:#8844AE\">LIMIT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> OFFSET $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT *, COUNT(*) OVER () FROM (subselect t) as paged_query_with LIMIT $1 OFFSET $2\"><div></div></button></div></figure></div>\n<p>However, as of version 2.0,\nDiesel doesnt support window functions, or selecting from a subselect.\nEven if Diesels query builder supported those things,\nthis is a case that is easier to reason about in terms of the SQL we want to\ngenerate.</p>\n<p>Lets look at how we would go about adding a <code dir=\"auto\">paginate</code> method to Diesels query\nbuilder, to generate that query.\nLets assume for the time being that we have a struct <code dir=\"auto\">Paginated&#x3C;T></code> already.\nWell look at the specifics of this struct shortly.</p>\n<p>If you are creating a struct where you want to manually define the SQL,\nyou will need to implement a trait called <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.QueryFragment.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryFragment</code></a>.\nThe implementation will look like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L60-L73\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/pagination.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T> QueryFragment&#x3C;Pg> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginated&#x3C;T></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryFragment&#x3C;Pg>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">walk_ast</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;'b>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'b </span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AstPass&#x3C;'_, 'b, Pg>) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryResult&#x3C;()> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">push_sql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">SELECT *, COUNT(*) OVER () FROM (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">self.</span><span style=\"--0:#D6DEEB;--1:#403F53\">query</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">walk_ast</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">reborrow</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">push_sql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">) as paged_query_with LIMIT </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">push_bind_param</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;BigInt, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;self.</span><span style=\"--0:#D6DEEB;--1:#403F53\">per_page)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">push_sql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> OFFSET </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">out</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">push_bind_param</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;BigInt, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;self.</span><span style=\"--0:#D6DEEB;--1:#403F53\">offset)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl<T> QueryFragment<Pg> for Paginated<T>where    T: QueryFragment<Pg>,{    fn walk_ast<&#x27;b>(&#x26;&#x27;b self, mut out: AstPass<&#x27;_, &#x27;b, Pg>) -> QueryResult<()> {        out.push_sql(&#x22;SELECT *, COUNT(*) OVER () FROM (&#x22;);        self.query.walk_ast(out.reborrow())?;        out.push_sql(&#x22;) as paged_query_with LIMIT &#x22;);        out.push_bind_param::<BigInt, _>(&#x26;self.per_page)?;        out.push_sql(&#x22; OFFSET &#x22;);        out.push_bind_param::<BigInt, _>(&#x26;self.offset)?;        Ok(())    }}\"><div></div></button></div></figure></div>\n<p>For details on what each method does,\nsee the documentation for <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.AstPass.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">AstPass</code></a>.\nOne important question to ask whenever you implement <code dir=\"auto\">QueryFragment</code>\nis whether you are generating a query that is safe to cache.\nThe way to answer this question is by asking\ndoes this struct generate an unlimited number of potential SQL queries?\nTypically that is only the case if the body of <code dir=\"auto\">walk_ast</code> contains a for loop.\nIf your query is not safe to cache, you <em>must</em> call\n[<code dir=\"auto\">out.unsafe_to_cache_prepared</code>].</p>\n<p>Whenever you implement <code dir=\"auto\">QueryFragment</code>, you also need to implement <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.QueryId.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryId</code></a>.</p>\n<ul>\n<li>We can use [<code dir=\"auto\">#[derive(QueryId)]</code>] for this.\nSince this struct represents a full query which can be executed,\nwe will implement <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl</code></a> which adds methods like <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.execute\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">execute</code></a> and <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.load\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">load</code></a>.\nSince this query has a return type,\nwell implement <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.Query.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Query</code></a> which states the return type as well.</li>\n</ul>\n<p>[<code dir=\"auto\">#[derive(QueryId)]</code>]: <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/derive.QueryId.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://docs.diesel.rs/2.3.x/diesel/query_builder/derive.QueryId.html</a>\n[<code dir=\"auto\">out.unsafe_to_cache_prepared</code>]: <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.AstPass.html#method.unsafe_to_cache_prepared\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.AstPass.html#method.unsafe_to_cache_prepared</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L54-L58\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/pagination.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Query> Query </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginated&#x3C;T> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (T</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqlType, BigInt);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T> RunQueryDsl&#x3C;PgConnection> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginated&#x3C;T> {}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl<T: Query> Query for Paginated<T> {    type SqlType = (T::SqlType, BigInt);}impl<T> RunQueryDsl<PgConnection> for Paginated<T> {}\"><div></div></button></div></figure></div>\n<p>Now that weve implemented all of these things,\nlets look at how we would go about constructing this.\nWell want to add a <code dir=\"auto\">paginate</code> method to all Diesel queries,\nwhich specifies which page were on,\nas well as a <code dir=\"auto\">per_page</code> method which specifies the number of elements per page.</p>\n<p>In order to add new methods to existing types, we can use a trait.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L7-L39\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/pagination.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginate</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Sized {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">paginate</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">page</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginated&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\">>;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T> Paginate </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">paginate</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">page</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginated&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\">> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Paginated {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">query</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">DEFAULT_PER_PAGE</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">page</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">offset</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">page</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#7FDBCA;--1:#096E72\">*</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">DEFAULT_PER_PAGE</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">const</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">DEFAULT_PER_PAGE</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64 </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">10</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Debug, Clone, Copy, QueryId)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Paginated&#x3C;T> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">query</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">page</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">offset</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T> Paginated&#x3C;T> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">per_page</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Paginated {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">offset</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#7FDBCA;--1:#096E72\">self.</span><span style=\"--0:#D6DEEB;--1:#403F53\">page </span><span style=\"--0:#7FDBCA;--1:#096E72\">-</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#7FDBCA;--1:#096E72\">*</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#7FDBCA;--1:#096E72\">..self</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub trait Paginate: Sized {    fn paginate(self, page: i64) -> Paginated<Self>;}impl<T> Paginate for T {    fn paginate(self, page: i64) -> Paginated<Self> {        Paginated {            query: self,            per_page: DEFAULT_PER_PAGE,            page,            offset: (page - 1) * DEFAULT_PER_PAGE,        }    }}const DEFAULT_PER_PAGE: i64 = 10;#[derive(Debug, Clone, Copy, QueryId)]pub struct Paginated<T> {    query: T,    page: i64,    per_page: i64,    offset: i64,}impl<T> Paginated<T> {    pub fn per_page(self, per_page: i64) -> Self {        Paginated {            per_page,            offset: (self.page - 1) * per_page,            ..self        }    }}\"><div></div></button></div></figure></div>\n<p>Now we can get the third page of a query with 25 elements per page like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">results</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;(User, i64)> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">paginate</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">per_page</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">25</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_results</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">expect</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">error</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"    let results: Vec<(User, i64)> = users::table        .paginate(3)        .per_page(25)        .get_results(&#x26;conn)        .expect(&#x22;error&#x22;);\"><div></div></button></div></figure></div>\n<p>With this code,\nwe could load any query into a <code dir=\"auto\">Vec&#x3C;(T, i64)></code>,\nbut we can do better.\nWhen doing pagination,\nyou usually want the records and the total number of pages.\nWe can write that method.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/advanced-blog-cli/src/pagination.rs#L41-L51\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/pagination.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T> Paginated&#x3C;T> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">load_and_count_pages</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;'a, U>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> PgConnection) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryResult&#x3C;(Vec&#x3C;U>, i64)></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> LoadQuery&#x3C;'a, PgConnection, (U, i64)>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">self.</span><span style=\"--0:#D6DEEB;--1:#403F53\">per_page;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">results</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">self.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(U, i64)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">total</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">results</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">0</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">unwrap_or</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">0</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">records</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">results</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into_iter</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">0</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">collect</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">total_pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">total</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> f64 </span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">per_page</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> f64)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ceil</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Ok((</span><span style=\"--0:#C5E478;--1:#3B61B0\">records</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">total_pages</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl<T> Paginated<T> {    pub fn load_and_count_pages<&#x27;a, U>(self, conn: &#x26;mut PgConnection) -> QueryResult<(Vec<U>, i64)>    where        Self: LoadQuery<&#x27;a, PgConnection, (U, i64)>,    {        let per_page = self.per_page;        let results = self.load::<(U, i64)>(conn)?;        let total = results.get(0).map(|x| x.1).unwrap_or(0);        let records = results.into_iter().map(|x| x.0).collect();        let total_pages = (total as f64 / per_page as f64).ceil() as i64;        Ok((records, total_pages))    }}\"><div></div></button></div></figure></div>\n<p>This is one of the rare cases where we want to define a function that takes a\nconnection.\nOne benefit of defining the function this way\nis that if we wanted to support backends other than PostgreSQL,\nwe could have this function execute two queries.</p>\n<p>You can find the full code for this example in <a href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/advanced-blog-cli\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the advanced blog example</a>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"custom-operators\">Custom Operators</h2><a class=\"sl-anchor-link\" href=\"#custom-operators\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Custom Operators</span></a></div>\n<br>\n<p>If youre adding support for a new type to Diesel,\nor working with a type that has incomplete support,\nyou may wish to add support for the operators associated with that type.\nThe term operator refers to anything that uses one of these syntaxes:</p>\n<ul>\n<li>Infix (e.g. <code dir=\"auto\">left OP right</code>)</li>\n<li>Prefix (e.g. <code dir=\"auto\">OP expr</code>)</li>\n<li>Postfix (e.g. <code dir=\"auto\">expr OP</code>)</li>\n</ul>\n<p>Diesel provides helper macros for defining each of these kinds of operators.\nIn fact, Diesel uses these macros to declare nearly all of the operators\nsupported by the main crate.\nThe macros are\n<a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.infix_operator.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::infix_operator!</code></a>, <a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.postfix_operator.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::postfix_operator!</code></a> and\n<a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.prefix_operator.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::prefix_operator!</code></a>.</p>\n<p>All of these macros have the same signature.\nThey take between two and four arguments.</p>\n<p>The first is the name of the struct you want to represent this operator.</p>\n<p>The second is the actual SQL for this operator.</p>\n<p>The third argument is optional, and is the SQL type of the operator.\nIf the SQL type is not specified, it will default to <code dir=\"auto\">Bool</code>.\nYou can also pass the magic type <code dir=\"auto\">ReturnBasedOnArgs</code>,\nwhich will cause the SQL type to be the same as the type of its arguments.\nDiesel uses this to make the string concatenation operator <code dir=\"auto\">||</code>\nreturn <code dir=\"auto\">Nullable&#x3C;Text></code> if the arguments are nullable,\nor <code dir=\"auto\">Text</code> if they are not null.</p>\n<p>The fourth argument (or third if you didnt specify the SQL type)\nis the backend this operator is used for.\nIf you dont specify a backend,\nthe operator can be used on all backends.</p>\n<p>Lets look at some example usage from Diesel:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Example</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// A simple operator. It returns `Bool` and works on all backends.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Eq, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Here we've specified the SQL type.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Since this operator is only used for ordering, and we don't want it used</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// elsewhere, we've made it `()` which is normally useless.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">postfix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Asc, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> ASC</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, ());</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Concat uses the magic `ReturnBasedOnArgs` return type</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// so it can work with both `Text` and `Nullable&#x3C;Text>`.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Concat, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> || </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, ReturnBasedOnArgs);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// This operator is PG specific, so we specify the backend</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(IsDistinctFrom, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> IS DISTINCT FROM </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// This operator is PG specific, and we are also specifying the SQL type.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">postfix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(NullsFirst, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> NULLS FIRST</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, (), </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// A simple operator. It returns &#x60;Bool&#x60; and works on all backends.diesel::infix_operator!(Eq, &#x22; = &#x22;);// Here we&#x27;ve specified the SQL type.// Since this operator is only used for ordering, and we don&#x27;t want it used// elsewhere, we&#x27;ve made it &#x60;()&#x60; which is normally useless.diesel::postfix_operator!(Asc, &#x22; ASC&#x22;, ());// Concat uses the magic &#x60;ReturnBasedOnArgs&#x60; return type// so it can work with both &#x60;Text&#x60; and &#x60;Nullable<Text>&#x60;.diesel::infix_operator!(Concat, &#x22; || &#x22;, ReturnBasedOnArgs);// This operator is PG specific, so we specify the backenddiesel::infix_operator!(IsDistinctFrom, &#x22; IS DISTINCT FROM &#x22;, backend: Pg);// This operator is PG specific, and we are also specifying the SQL type.diesel::postfix_operator!(NullsFirst, &#x22; NULLS FIRST&#x22;, (), backend: Pg);\"><div></div></button></div></figure></div>\n<p>Diesel provides a proof-of-concept crate showing how to add new SQL types called\n<code dir=\"auto\">diesel_full_text_search</code>.\nThese are the operators as they are defined in that crate.\nYoull notice all of the operators specify the backend,\nand many of them specify the return type.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel_full_text_search/blob/27b9946831caa8b08177c1818a50cb7f0563c9c0/src/lib.rs#L57-L62\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Matches, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> @@ </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Concat, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> || </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, TsVector, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(And, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> &#x26;&#x26; </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, TsQuery, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Or, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> || </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, TsQuery, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Contains, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> @> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">infix_operator!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(ContainedBy, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\"> &#x3C;@ </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">backend</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Pg);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::infix_operator!(Matches, &#x22; @@ &#x22;, backend: Pg);diesel::infix_operator!(Concat, &#x22; || &#x22;, TsVector, backend: Pg);diesel::infix_operator!(And, &#x22; &#x26;&#x26; &#x22;, TsQuery, backend: Pg);diesel::infix_operator!(Or, &#x22; || &#x22;, TsQuery, backend: Pg);diesel::infix_operator!(Contains, &#x22; @> &#x22;, backend: Pg);diesel::infix_operator!(ContainedBy, &#x22; <@ &#x22;, backend: Pg);\"><div></div></button></div></figure></div>\n<p>However, just declaring the operator by itself isnt very useful.\nThis creates the types required by Diesels query builder,\nbut doesnt provide anything to help use the operator in real code.\nThe structs created by these macros will have a <code dir=\"auto\">new</code> method,\nbut thats not typically how you work with Diesels query builder.</p>\n<ul>\n<li>Infix operators are usually methods on the left hand side.</li>\n<li>Postfix operators are usually methods on the expression.</li>\n<li>Prefix operators are usually bare functions.</li>\n</ul>\n<p>For operators that you create with methods,\nyou would typically create a trait for this.\nFor example, heres how the <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.ExpressionMethods.html#method.eq\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.eq</code></a> method gets defined by Diesel.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/diesel/src/expression_methods/global_expression_methods.rs#L71-L77\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/expression_methods/global_expression_methods.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ExpressionMethods</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Sized {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">other</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, T></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqlType</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsExpression&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqlType>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Grouped</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Eq</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">other</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_expression</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression> ExpressionMethods </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T {}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub trait ExpressionMethods: Expression + Sized {    fn eq<T>(self, other: T) -> dsl::Eq<Self, T>    where        Self::SqlType: SqlType,        T: AsExpression<Self::SqlType>,    {        Grouped(Eq::new(self, other.as_expression()))    }}impl<T: Expression> ExpressionMethods for T {}\"><div></div></button></div></figure></div>\n<p>Its important to note that these methods are where you should put any type\nconstraints.\nThe structs defined by <code dir=\"auto\">diesel::*_operator!</code> dont know or care about what the\ntypes of the arguments should be.\nThe <code dir=\"auto\">=</code> operator requires that both sides be of the same type,\nso we represent that in the type of <code dir=\"auto\">ExpressionMethods::eq</code>.</p>\n<p>Youll also notice that our argument is\n<a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/trait.AsExpression.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">AsExpression&#x3C;Self::SqlType></code></a>,\nnot <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.Expression.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Expression&#x3C;SqlType = Self::SqlType></code></a>.\nThis allows Rust values to be passed as well as Diesel expressions.\nFor example, we can do <code dir=\"auto\">text_col.eq(other_text_col)</code>,\nor <code dir=\"auto\">text_col.eq(\"Some Rust string\")</code>.</p>\n<p>If the operator is specific to only one SQL type,\nwe can represent that in our trait.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/main/diesel/src/expression_methods/bool_expression_methods.rs\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/expression_methods/global_expression_methods.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoolExpressionMethods</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression&#x3C;SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Bool> </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Sized,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">and</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#D6DEEB;--1:#403F53\">>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">other</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">And&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, T, ST></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqlType</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> TypedExpressionType,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsExpression&#x3C;ST>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">And&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">Self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, T</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Expression></span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Grouped</span><span style=\"--0:#D6DEEB;--1:#403F53\">(And</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">self</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">other</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_expression</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T> BoolExpressionMethods </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqlType</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoolOrNullableBool,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub trait BoolExpressionMethodswhere    Self: Expression<SqlType = Bool> + Sized,{    fn and<T, ST>(self, other: T) -> dsl::And<Self, T, ST>    where        Self::SqlType: SqlType,        ST: SqlType + TypedExpressionType,        T: AsExpression<ST>,        And<Self, T::Expression>: Expression,    {        Grouped(And::new(self, other.as_expression()))    }}impl<T> BoolExpressionMethods for Twhere    T: Expression,    T::SqlType: BoolOrNullableBool,{}\"><div></div></button></div></figure></div>\n<p>Prefix operators are usually defined as bare functions.\nThe code is very similar, but without the trait.\nHeres how <a href=\"https://docs.diesel.rs/2.3.x/diesel/dsl/fn.not.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">not</code></a> is defined in Diesel.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/diesel/src/expression/not.rs#L26-L32\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/expression/not.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">expr</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> T) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;T </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression></span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqlType</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoolOrNullableBool,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">super::</span><span style=\"--0:#D6DEEB;--1:#403F53\">operators</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Not</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">Grouped</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">expr</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub fn not<T>(expr: T) -> not<T>where    T: Expression,    <T as Expression>::SqlType: BoolOrNullableBool,{    super::operators::Not::new(Grouped(expr))}\"><div></div></button></div></figure></div>\n<p>In this case were using <code dir=\"auto\">Grouped</code>\n(which is currently undocumented in Diesel and only used internally)\nto add parenthesis around our argument.\nThis ensures that the operator precedence in SQL matches whats expected.\nFor example, we would expect <code dir=\"auto\">not(true.and(false))</code> to return <code dir=\"auto\">true</code>.\nHowever, <code dir=\"auto\">SELECT NOT TRUE AND FALSE</code> returns <code dir=\"auto\">FALSE</code>.\nDiesel does the same thing for most of the built-in operators.</p>\n<p>Its also a best practice to expose a helper type for your method,\nwhich does the same type conversion as the method itself.\nNobody wants to write <code dir=\"auto\">Eq&#x3C;text_col, &#x3C;&#x26;str as AsExpression&#x3C;Text>>::Expression></code>.\nInstead, we provide a type that lets you write <a href=\"https://docs.diesel.rs/2.3.x/diesel/helper_types/type.Eq.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Eq&#x3C;text_col, &#x26;str></code></a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/diesel/src/expression/helper_types.rs#L21\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/expression/helper_types.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Eq&#x3C;Lhs, Rhs> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Grouped&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">super::</span><span style=\"--0:#C5E478;--1:#3B61B0\">operators</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq&#x3C;Lhs, AsExpr&#x3C;Rhs, Lhs>>>;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub type Eq<Lhs, Rhs> = Grouped<super::operators::Eq<Lhs, AsExpr<Rhs, Lhs>>>;\"><div></div></button></div></figure></div>\n<p>For defining these types,\nyoull usually want to make use of <a href=\"https://docs.diesel.rs/2.3.x/diesel/helper_types/type.SqlTypeOf.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">SqlTypeOf</code></a>, <a href=\"https://docs.diesel.rs/2.3.x/diesel/helper_types/type.AsExpr.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">AsExpr</code></a>, and <a href=\"https://docs.diesel.rs/2.3.x/diesel/helper_types/type.AsExprOf.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">AsExprOf</code></a>.</p>",{headings:190,localImagePaths:200,remoteImagePaths:201,frontmatter:202,imagePaths:203},[191,194,197],{depth:65,slug:192,text:193},"sql_function","sql_function!",{depth:65,slug:195,text:196},"using-custom-sql-and-how-to-extend-the-query-dsl","Using Custom SQL and How to Extend the Query DSL",{depth:65,slug:198,text:199},"custom-operators","Custom Operators",[],[],{title:180,lang:157},[],"guides/all-about-updates",{id:204,data:206,body:211,filePath:212,digest:213,rendered:214},{title:207,editUrl:16,head:208,template:44,sidebar:209,pagefind:16,draft:32},"All About Updates",[],{hidden:32,attrs:210},{},"Most applications fall into a category called \"CRUD\" apps. CRUD stands for\n\"Create, Read, Update, Delete\". Diesel provides support for all four pieces,\nbut in this guide we're going to look at all the different ways to go about updating records.\n\nAn update statement is constructed by calling `diesel::update(target).set(changes)`.\nThe resulting statement is then run by calling either `execute`, `get_result`, or `get_results`.\n\nIf you look at the documentation for [`update`](https://docs.diesel.rs/2.3.x/diesel/fn.update.html),\nyou'll notice that the type of the argument is any type `T` which implements `IntoUpdateTarget`.\nYou don't need to worry about what this trait does, but it is important to know\nwhich types implement it. There are three kinds which implement this trait. The first is tables.\n\nIf we have a table that looks like this:\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L9-L18\"\ntable! {\n    posts {\n        id -> BigInt,\n        title -> Text,\n        body -> Text,\n        draft -> Bool,\n        publish_at -> Timestamp,\n        visit_count -> Integer,\n    }\n}\n```\n\n\nWe could write a query that publishes all posts by doing:\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L30-L34\"\nuse crate::posts::dsl::*;\n\ndiesel::update(posts).set(draft.eq(false)).execute(conn)\n```\n\n\nWe can use the [`debug_query`] function to inspect the generated SQL.\nThe output you see may slightly differ from this guide, depending on which backend you're using.\nIf we run `println!(\"{}\", debug_query::<Pg, _>(&our_query));`, we'll see the following:\n\n[`debug_query`]: https://docs.diesel.rs/2.3.x/diesel/fn.debug_query.html\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L36-L44\"\nUPDATE \"posts\" SET \"draft\" = $1 -- binds: [false]\n```\n\n\nThis is pretty much one-to-one with the Rust code (the `$1` denotes a bound parameter in PostgreSQL, in SQLite/MySQL it would be `?`, which will be substituted with `false` here). It's quite rare to want to update an entire table,\nthough. So let's look at how we can scope that down. The second kind that you can pass to\n`update` is any query which has only had `.filter` called on it. We could scope our update to\nonly touch posts where `publish_at` is in the past like so:\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L46-L54\"\nuse crate::posts::dsl::*;\nuse diesel::dsl::now;\n\ndiesel::update(posts)\n    .filter(publish_at.lt(now))\n    .set(draft.eq(false))\n    .execute(conn)\n```\n\n\nThat would generate the following SQL:\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L56-L70\"\nUPDATE \"posts\" SET \"draft\" = $1 WHERE (\"posts\".\"publish_at\" < CURRENT_TIMESTAMP) -- binds: [false]\n```\n\nThe most common update queries are just scoped to a single record. So the final kind that\nyou can pass to `update` is anything which implements [the `Identifiable` trait].\n`Identifiable` gets implemented by putting [`#[derive(Identifiable)]`] on a struct.\nIt represents any struct which is one-to-one with a row on a database table.\nImportantly, and unlike `Queryable`, the `Identifiable` trait requires that the schema\ngenerated by the `table!` macro be in scope, or the compilation will fail with E0433,\nnoting `Use of undeclared type or module (your_tablename)`.\n\n[the `Identifiable` trait]: https://docs.diesel.rs/2.3.x/diesel/associations/trait.Identifiable.html\n[`#[derive(Identifiable)]`]: https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Identifiable.html\n\nIf we wanted a struct that mapped to our posts table, it'd look something like this:\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L20-L28\"\n#[derive(Queryable, Identifiable, AsChangeset)]\npub struct Post {\n    pub id: i64,\n    pub title: String,\n    pub body: String,\n    pub draft: bool,\n    pub publish_at: SystemTime,\n    pub visit_count: i32,\n}\n```\n\n\nThe struct has one field per database column, but what's important for `Identifiable` is\nthat it has the `id` field, which is the primary key of our table. Since our struct name is\njust the table name without an `s`, we don't have to provide the table name explicitly.\nIf our struct were named something different, or if pluralizing it was more complex than\nputting an `s` on the end, we would have to specify the table name by adding `#[diesel(table_name = posts)]`.\nWe're using `SystemTime` here since it's in the standard library, but in a real application\nwe'd probably want to use a more full-featured type like one from `chrono`,\nwhich you can do by enabling the `chrono` feature on Diesel.\n\n\nIf we wanted to publish just this post, we could do it like this:\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L72-L76\"\ndiesel::update(post)\n    .set(posts::draft.eq(false))\n    .execute(conn)\n```\n\n\nIt's important to note that we always pass a reference to the post, not the post itself.\nWhen we write `update(post)`, that's equivalent to writing `update(posts.find(post.id))`,\nor `update(posts.filter(id.eq(post.id)))`. We can see this in the generated SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L78-L93\"\nUPDATE \"posts\" SET \"draft\" = $1 WHERE (\"posts\".\"id\" = $2) -- binds: [false, 1]\n```\n\n\nNow that we've seen all the ways to specify what we want to update,\nlet's look at the different ways to provide the data to update it with.\nWe've already seen the first way, which is to pass `column.eq(value)` directly.\nSo far we've just been passing Rust values here, but we can actually use any Diesel expression.\nFor example, we could increment a column:\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L95-L101\"\nuse crate::posts::dsl::*;\n\ndiesel::update(posts)\n    .set(visit_count.eq(visit_count + 1))\n    .execute(conn)\n```\n\n\nThat would generate this SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L103-L113\"\nUPDATE \"posts\" SET \"visit_count\" = (\"posts\".\"visit_count\" + $1) -- binds: [1]\n```\n\n\nAssigning values directly is great for small, simple changes.\nIf we wanted to update multiple columns this way, we can pass a tuple.\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L115-L124\"\nuse crate::posts::dsl::*;\n\ndiesel::update(posts)\n    .set((\n        title.eq(\"[REDACTED]\"),\n        body.eq(\"This post has been classified\"),\n    ))\n    .execute(conn)\n```\n\n\nThis will generate exactly the SQL you'd expect:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L126-L139\"\nUPDATE \"posts\" SET \"title\" = $1, \"body\" = $2 -- binds: [\"[REDACTED]\", \"This post has been classified\"]\n```\n\n\n## AsChangeset\n\nWhile it's nice to have the ability to update columns directly like this,\nit can quickly get cumbersome when dealing with forms that have more than a handful of fields.\nIf we look at the signature of [`.set`], you'll notice that the constraint is for a trait called\n[`AsChangeset`]. This is another trait that `diesel` can derive for us. We can add\n[`#[derive(AsChangeset)]`] to our `Post` struct, which will let us pass a `&Post` to `set`.\n\n[`.set`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.UpdateStatement.html#method.set\n[`AsChangeset`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.AsChangeset.html\n[`#[derive(AsChangeset)]`]: https://docs.diesel.rs/2.3.x/diesel/prelude/derive.AsChangeset.html\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L141-L143\"\ndiesel::update(posts::table).set(post).execute(conn)\n```\n\n\nThe SQL will set every field present on the `Post` struct except for the primary key.\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L145-L175\"\nUPDATE \"posts\" SET \"title\" = $1, \"body\" = $2, \"draft\" = $3, \"publish_at\" = $4, \"visit_count\" = $5 -- binds: [\"\", \"\", false, now, 0]\n```\n\nChanging the primary key of an existing row is almost never something that you want to do,\nso `#[derive(AsChangeset)]` assumes that you want to ignore it. The only way to change\nthe primary key is to explicitly do it with `.set(id.eq(new_id))`. However,\nnote that `#[derive(AsChangeset)]` doesn't have the information from your table definition.\nIf the primary key is something other than `id`, you'll need to put\n`#[diesel(primary_key(your_primary_key))]` on the struct as well.\n\nIf the struct has any optional fields on it, these will also have special behavior.\nBy default, `#[derive(AsChangeset)]` will assume that `None` means that you don't wish\nto assign that field. For example, if we had the following code:\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L177-L191\"\n#[derive(AsChangeset)]\n#[diesel(table_name = posts)]\nstruct PostForm<'a> {\n    title: Option<&'a str>,\n    body: Option<&'a str>,\n}\n\ndiesel::update(posts::table)\n    .set(&PostForm {\n        title: None,\n        body: Some(\"My new post\"),\n    })\n    .execute(conn)\n```\n\n\nThat would generate the following SQL:\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L193-L212\"\nUPDATE \"posts\" SET \"body\" = $1 -- binds: [\"My new post\"]\n```\n\n\nIf you wanted to assign `NULL` instead, you can either specify `#[diesel(treat_none_as_null = true)]` on the struct, or you can have the field be of type `Option<Option<T>>`. Diesel doesn't currently provide a way to explicitly assign a field to its default value, though it may be provided in the future.\n\nIf you are using PostgreSQL or SQLite, all of these options will work with `INSERT ON CONFLICT DO UPDATE`\nas well. See the [upsert docs] for more details.\n\n[upsert docs]: https://docs.diesel.rs/2.3.x/diesel/upsert/index.html\n\n## Executing your query\n\nOnce you've constructed your query, we need to actually execute it.\nThere are several different methods to do this, depending on what type you'd like back.\n\nThe simplest method for running your query is [`execute`]. This method will run your query,\nand return the number of rows that were affected. This is the method you should use\nif you simply want to ensure that the query executed successfully,\nand don't care about getting anything back from the database.\n\n[`execute`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#tymethod.execute\n\nFor queries where you do want to get data back from the database,\nwe need to use [`get_result`] or [`get_results`]. If you haven't explicitly called [`returning`],\nthese methods will return all of the columns on the table. Similar to [`load`] on a select statement,\nyou will need to specify the type you'd like to deserialize to (either a tuple or a struct with\n`#[derive(Queryable)]`). You should use [`get_results`] when you are expecting more than one record back.\nIf you are only expecting a single record, you can call [`get_result`] instead.\n\nIt should be noted that receiving 0 rows from [`get_result`] is considered an error condition by default.\nIf you want to get back 0 or 1 row (e.g. have a return type of `QueryResult<Option<T>>`),\nthen you will need to call `.get_result(...).optional()`.\n\n[`get_result`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_result\n[`get_results`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_results\n[`returning`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/update_statement/struct.UpdateStatement.html#method.returning\n[`load`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.load\n\nFinally, if your struct has both `#[derive(AsChangeset)]` and `#[derive(Identifiable)]`,\nyou will be able to use the [`save_changes`] method. Unlike the other methods mentioned in this guide,\nyou do not explicitly build a query when using [`save_changes`].\nDoing `foo.save_changes(&conn)` is equivalent to doing `diesel::update(&foo).set(&foo).get_result(&conn)`.\nLike [`get_result`] and [`get_results`], you will need to specify the type you'd like to get back.\n\n[`save_changes`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.SaveChangesDsl.html#method.save_changes\n\nAll of the code for this guide can be found in executable form in [this Diesel example].\n\n[this Diesel example]: https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs","src/content/docs/guides/all-about-updates.md","8baf279190fe38a8",{html:215,metadata:216},"<p>Most applications fall into a category called CRUD apps. CRUD stands for\nCreate, Read, Update, Delete. Diesel provides support for all four pieces,\nbut in this guide were going to look at all the different ways to go about updating records.</p>\n<p>An update statement is constructed by calling <code dir=\"auto\">diesel::update(target).set(changes)</code>.\nThe resulting statement is then run by calling either <code dir=\"auto\">execute</code>, <code dir=\"auto\">get_result</code>, or <code dir=\"auto\">get_results</code>.</p>\n<p>If you look at the documentation for <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.update.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">update</code></a>,\nyoull notice that the type of the argument is any type <code dir=\"auto\">T</code> which implements <code dir=\"auto\">IntoUpdateTarget</code>.\nYou dont need to worry about what this trait does, but it is important to know\nwhich types implement it. There are three kinds which implement this trait. The first is tables.</p>\n<p>If we have a table that looks like this:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L9-L18\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">posts</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> BigInt,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">body</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">draft</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Bool,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">publish_at</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Timestamp,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">visit_count</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"table! {    posts {        id -> BigInt,        title -> Text,        body -> Text,        draft -> Bool,        publish_at -> Timestamp,        visit_count -> Integer,    }}\"><div></div></button></div></figure></div>\n<p>We could write a query that publishes all posts by doing:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L30-L34\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">posts</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">draft</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">false</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use crate::posts::dsl::*;diesel::update(posts).set(draft.eq(false)).execute(conn)\"><div></div></button></div></figure></div>\n<p>We can use the <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.debug_query.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">debug_query</code></a> function to inspect the generated SQL.\nThe output you see may slightly differ from this guide, depending on which backend youre using.\nIf we run <code dir=\"auto\">println!(\"{}\", debug_query::&#x3C;Pg, _>(&#x26;our_query));</code>, well see the following:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L36-L44\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">draft</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [false]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;draft&#x22; = $1 -- binds: [false]\"><div></div></button></div></figure></div>\n<p>This is pretty much one-to-one with the Rust code (the <code dir=\"auto\">$1</code> denotes a bound parameter in PostgreSQL, in SQLite/MySQL it would be <code dir=\"auto\">?</code>, which will be substituted with <code dir=\"auto\">false</code> here). Its quite rare to want to update an entire table,\nthough. So lets look at how we can scope that down. The second kind that you can pass to\n<code dir=\"auto\">update</code> is any query which has only had <code dir=\"auto\">.filter</code> called on it. We could scope our update to\nonly touch posts where <code dir=\"auto\">publish_at</code> is in the past like so:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L46-L54\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">now;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">posts</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">publish_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">lt</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">draft</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">false</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use crate::posts::dsl::*;use diesel::dsl::now;diesel::update(posts)    .filter(publish_at.lt(now))    .set(draft.eq(false))    .execute(conn)\"><div></div></button></div></figure></div>\n<p>That would generate the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L56-L70\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">draft</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">WHERE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">publish_at</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">&#x3C;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> CURRENT_TIMESTAMP) </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [false]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;draft&#x22; = $1 WHERE (&#x22;posts&#x22;.&#x22;publish_at&#x22; < CURRENT_TIMESTAMP) -- binds: [false]\"><div></div></button></div></figure></div>\n<p>The most common update queries are just scoped to a single record. So the final kind that\nyou can pass to <code dir=\"auto\">update</code> is anything which implements <a href=\"https://docs.diesel.rs/2.3.x/diesel/associations/trait.Identifiable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the <code dir=\"auto\">Identifiable</code> trait</a>.\n<code dir=\"auto\">Identifiable</code> gets implemented by putting [<code dir=\"auto\">#[derive(Identifiable)]</code>] on a struct.\nIt represents any struct which is one-to-one with a row on a database table.\nImportantly, and unlike <code dir=\"auto\">Queryable</code>, the <code dir=\"auto\">Identifiable</code> trait requires that the schema\ngenerated by the <code dir=\"auto\">table!</code> macro be in scope, or the compilation will fail with E0433,\nnoting <code dir=\"auto\">Use of undeclared type or module (your_tablename)</code>.</p>\n<p>[<code dir=\"auto\">#[derive(Identifiable)]</code>]: <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Identifiable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Identifiable.html</a></p>\n<p>If we wanted a struct that mapped to our posts table, itd look something like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L20-L28\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Identifiable, AsChangeset)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Post {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i64,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">body</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">draft</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> bool,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">publish_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SystemTime,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">visit_count</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Identifiable, AsChangeset)]pub struct Post {    pub id: i64,    pub title: String,    pub body: String,    pub draft: bool,    pub publish_at: SystemTime,    pub visit_count: i32,}\"><div></div></button></div></figure></div>\n<p>The struct has one field per database column, but whats important for <code dir=\"auto\">Identifiable</code> is\nthat it has the <code dir=\"auto\">id</code> field, which is the primary key of our table. Since our struct name is\njust the table name without an <code dir=\"auto\">s</code>, we dont have to provide the table name explicitly.\nIf our struct were named something different, or if pluralizing it was more complex than\nputting an <code dir=\"auto\">s</code> on the end, we would have to specify the table name by adding <code dir=\"auto\">#[diesel(table_name = posts)]</code>.\nWere using <code dir=\"auto\">SystemTime</code> here since its in the standard library, but in a real application\nwed probably want to use a more full-featured type like one from <code dir=\"auto\">chrono</code>,\nwhich you can do by enabling the <code dir=\"auto\">chrono</code> feature on Diesel.</p>\n<p>If we wanted to publish just this post, we could do it like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L72-L76\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">post</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">draft</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">false</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::update(post)    .set(posts::draft.eq(false))    .execute(conn)\"><div></div></button></div></figure></div>\n<p>Its important to note that we always pass a reference to the post, not the post itself.\nWhen we write <code dir=\"auto\">update(post)</code>, thats equivalent to writing <code dir=\"auto\">update(posts.find(post.id))</code>,\nor <code dir=\"auto\">update(posts.filter(id.eq(post.id)))</code>. We can see this in the generated SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L78-L93\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">draft</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">WHERE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [false, 1]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;draft&#x22; = $1 WHERE (&#x22;posts&#x22;.&#x22;id&#x22; = $2) -- binds: [false, 1]\"><div></div></button></div></figure></div>\n<p>Now that weve seen all the ways to specify what we want to update,\nlets look at the different ways to provide the data to update it with.\nWeve already seen the first way, which is to pass <code dir=\"auto\">column.eq(value)</code> directly.\nSo far weve just been passing Rust values here, but we can actually use any Diesel expression.\nFor example, we could increment a column:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L95-L101\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">posts</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">visit_count</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">visit_count</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use crate::posts::dsl::*;diesel::update(posts)    .set(visit_count.eq(visit_count + 1))    .execute(conn)\"><div></div></button></div></figure></div>\n<p>That would generate this SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L103-L113\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">visit_count</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">visit_count</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [1]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;visit_count&#x22; = (&#x22;posts&#x22;.&#x22;visit_count&#x22; + $1) -- binds: [1]\"><div></div></button></div></figure></div>\n<p>Assigning values directly is great for small, simple changes.\nIf we wanted to update multiple columns this way, we can pass a tuple.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L115-L124\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">posts</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">((</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">[REDACTED]</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">body</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">This post has been classified</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use crate::posts::dsl::*;diesel::update(posts)    .set((        title.eq(&#x22;[REDACTED]&#x22;),        body.eq(&#x22;This post has been classified&#x22;),    ))    .execute(conn)\"><div></div></button></div></figure></div>\n<p>This will generate exactly the SQL youd expect:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L126-L139\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">title</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">body</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"[REDACTED]\", \"This post has been classified\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;title&#x22; = $1, &#x22;body&#x22; = $2 -- binds: [&#x22;[REDACTED]&#x22;, &#x22;This post has been classified&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"aschangeset\">AsChangeset</h2><a class=\"sl-anchor-link\" href=\"#aschangeset\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled AsChangeset</span></a></div>\n<p>While its nice to have the ability to update columns directly like this,\nit can quickly get cumbersome when dealing with forms that have more than a handful of fields.\nIf we look at the signature of <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/struct.UpdateStatement.html#method.set\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.set</code></a>, youll notice that the constraint is for a trait called\n<a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/trait.AsChangeset.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">AsChangeset</code></a>. This is another trait that <code dir=\"auto\">diesel</code> can derive for us. We can add\n[<code dir=\"auto\">#[derive(AsChangeset)]</code>] to our <code dir=\"auto\">Post</code> struct, which will let us pass a <code dir=\"auto\">&#x26;Post</code> to <code dir=\"auto\">set</code>.</p>\n<p>[<code dir=\"auto\">#[derive(AsChangeset)]</code>]: <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.AsChangeset.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://docs.diesel.rs/2.3.x/diesel/prelude/derive.AsChangeset.html</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L141-L143\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">post</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::update(posts::table).set(post).execute(conn)\"><div></div></button></div></figure></div>\n<p>The SQL will set every field present on the <code dir=\"auto\">Post</code> struct except for the primary key.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L145-L175\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">title</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">body</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">draft</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">publish_at</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">4</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">visit_count</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">5</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"\", \"\", false, now, 0]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;title&#x22; = $1, &#x22;body&#x22; = $2, &#x22;draft&#x22; = $3, &#x22;publish_at&#x22; = $4, &#x22;visit_count&#x22; = $5 -- binds: [&#x22;&#x22;, &#x22;&#x22;, false, now, 0]\"><div></div></button></div></figure></div>\n<p>Changing the primary key of an existing row is almost never something that you want to do,\nso <code dir=\"auto\">#[derive(AsChangeset)]</code> assumes that you want to ignore it. The only way to change\nthe primary key is to explicitly do it with <code dir=\"auto\">.set(id.eq(new_id))</code>. However,\nnote that <code dir=\"auto\">#[derive(AsChangeset)]</code> doesnt have the information from your table definition.\nIf the primary key is something other than <code dir=\"auto\">id</code>, youll need to put\n<code dir=\"auto\">#[diesel(primary_key(your_primary_key))]</code> on the struct as well.</p>\n<p>If the struct has any optional fields on it, these will also have special behavior.\nBy default, <code dir=\"auto\">#[derive(AsChangeset)]</code> will assume that <code dir=\"auto\">None</code> means that you dont wish\nto assign that field. For example, if we had the following code:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L177-L191\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(AsChangeset)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> posts)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> PostForm&#x3C;'a> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">body</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">update</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">PostForm {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> None,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">body</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Some(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">My new post</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(AsChangeset)]#[diesel(table_name = posts)]struct PostForm<&#x27;a> {    title: Option<&#x26;&#x27;a str>,    body: Option<&#x26;&#x27;a str>,}diesel::update(posts::table)    .set(&#x26;PostForm {        title: None,        body: Some(&#x22;My new post&#x22;),    })    .execute(conn)\"><div></div></button></div></figure></div>\n<p>That would generate the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs#L193-L212\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">UPDATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">posts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">SET</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">body</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"My new post\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"UPDATE &#x22;posts&#x22; SET &#x22;body&#x22; = $1 -- binds: [&#x22;My new post&#x22;]\"><div></div></button></div></figure></div>\n<p>If you wanted to assign <code dir=\"auto\">NULL</code> instead, you can either specify <code dir=\"auto\">#[diesel(treat_none_as_null = true)]</code> on the struct, or you can have the field be of type <code dir=\"auto\">Option&#x3C;Option&#x3C;T>></code>. Diesel doesnt currently provide a way to explicitly assign a field to its default value, though it may be provided in the future.</p>\n<p>If you are using PostgreSQL or SQLite, all of these options will work with <code dir=\"auto\">INSERT ON CONFLICT DO UPDATE</code>\nas well. See the <a href=\"https://docs.diesel.rs/2.3.x/diesel/upsert/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">upsert docs</a> for more details.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"executing-your-query\">Executing your query</h2><a class=\"sl-anchor-link\" href=\"#executing-your-query\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Executing your query</span></a></div>\n<p>Once youve constructed your query, we need to actually execute it.\nThere are several different methods to do this, depending on what type youd like back.</p>\n<p>The simplest method for running your query is <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#tymethod.execute\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">execute</code></a>. This method will run your query,\nand return the number of rows that were affected. This is the method you should use\nif you simply want to ensure that the query executed successfully,\nand dont care about getting anything back from the database.</p>\n<p>For queries where you do want to get data back from the database,\nwe need to use <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_result\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_result</code></a> or <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_results\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_results</code></a>. If you havent explicitly called <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/update_statement/struct.UpdateStatement.html#method.returning\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">returning</code></a>,\nthese methods will return all of the columns on the table. Similar to <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.load\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">load</code></a> on a select statement,\nyou will need to specify the type youd like to deserialize to (either a tuple or a struct with\n<code dir=\"auto\">#[derive(Queryable)]</code>). You should use <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_results\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_results</code></a> when you are expecting more than one record back.\nIf you are only expecting a single record, you can call <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_result\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_result</code></a> instead.</p>\n<p>It should be noted that receiving 0 rows from <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_result\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_result</code></a> is considered an error condition by default.\nIf you want to get back 0 or 1 row (e.g. have a return type of <code dir=\"auto\">QueryResult&#x3C;Option&#x3C;T>></code>),\nthen you will need to call <code dir=\"auto\">.get_result(...).optional()</code>.</p>\n<p>Finally, if your struct has both <code dir=\"auto\">#[derive(AsChangeset)]</code> and <code dir=\"auto\">#[derive(Identifiable)]</code>,\nyou will be able to use the <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.SaveChangesDsl.html#method.save_changes\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">save_changes</code></a> method. Unlike the other methods mentioned in this guide,\nyou do not explicitly build a query when using <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.SaveChangesDsl.html#method.save_changes\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">save_changes</code></a>.\nDoing <code dir=\"auto\">foo.save_changes(&#x26;conn)</code> is equivalent to doing <code dir=\"auto\">diesel::update(&#x26;foo).set(&#x26;foo).get_result(&#x26;conn)</code>.\nLike <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_result\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_result</code></a> and <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_results\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">get_results</code></a>, you will need to specify the type youd like to get back.</p>\n<p>All of the code for this guide can be found in executable form in <a href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_updates/src/lib.rs\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this Diesel example</a>.</p>",{headings:217,localImagePaths:224,remoteImagePaths:225,frontmatter:226,imagePaths:227},[218,221],{depth:65,slug:219,text:220},"aschangeset","AsChangeset",{depth:65,slug:222,text:223},"executing-your-query","Executing your query",[],[],{title:207,lang:157},[],"guides/all-about-selects",{id:228,data:230,body:235,filePath:236,digest:237,rendered:238},{title:231,editUrl:16,head:232,template:44,sidebar:233,pagefind:16,draft:32},"All About Selects",[],{hidden:32,attrs:234},{},"Most applications fall into a category called \"CRUD\" apps.\nCRUD stands for \"Create, Read, Update, Delete\".\nDiesel provides support for all four pieces,\nbut in this guide we're going to look at\nthe different ways to go about creating `SELECT` statements.\n\nThe examples for this guide are going to be shown for PostgreSQL,\nbut you can follow along with any backend.\n\nThis guide will cover how to construct `SELECT` statements using Diesel and \nit will also discuss how Diesel maps back query results to your Rust types.\n\nFor this guide, our schema will look like this:\n\n\n```rust title=\"src/schema.rs\"\ndiesel::table! {\n    users {\n        id -> Integer,\n        name -> Text,\n        hair_color -> Nullable<Text>,\n        created_at -> Timestamp,\n        updated_at -> Timestamp,\n    }\n}\n```\n\n\n## Query Building\n\nDiesel supports four ways of constructing `SELECT` queries:\n\n* Call [`diesel::select`](https://docs.diesel.rs/2.3.x/diesel/fn.select.html) to construct a `SELECT` statement **without** `FROM` clause\n* Call any method from the [`RunQueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html) trait on a table type to directly execute a `SELECT * FROM table` statement.\n* Call any method from the [`QueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html) trait on a table type to construct a specific `SELECT` statement.\n* Call [`HasQuery::query()`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.HasQuery.html#method.query) on a Rust type deriving the `HasQuery` trait\n\nFor this guide we mostly cover the third and fourth variant, as the first two variants are mostly useful for specific situations, while the other variants are the more general ones.\n\n### `SELECT` Statements without `FROM` clause\n\nDiesel allows to construct `SELECT` statements without `FROM` clauses via the [`diesel::select`](https://docs.diesel.rs/2.3.x/diesel/fn.select.html) function. This function can be used to construct simple queries.\n\nFor example you could query information about your PostgreSQL version via the following query:\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse diesel::expression::functions::declare_sql_function;\n\n// Declare the `version()` SQL function\n#[declare_sql_function]\nextern \"SQL\" {\n    fn version() -> Text;\n}\n\nlet version_text = diesel::select(version()).get_result::<String>(connection)?;\nprintln!(\"Running PostgreSQL: `{version_text}`\");\n```\n\n\nwhich is equivalent to the following SQL:\n\n\n```sql title=\"query.sql\"\nSELECT version();\n```\n\n\nThis simple query already demonstrates several important aspects of constructing `SELECT` queries using Diesel:\n\n1. Any query needs to end with a method from the [`RunQueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html) trait to actually execute the query. The method decides how many results are returned. For this particular example we use the [`RunQueryDsl::get_result`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_result) method as we already know that we only expect a single result.\n2. Diesel performs a mapping from the SQL types returned by your query to compatible Rust types. This mapping needs to use compatible types on both sides. For this particular example we declared the `version()` function in such a way that it returns a [`Text`] value, which is compatible to Rust `String` values. See the [result mapping](#result-mapping) section of this guide for more details on this topic.\n\n### `SELECT` statements via `RunQueryDsl`\n\nThe simplest way to construct a `SELECT` statement that loads data from a particular table is by calling any method from the [`RunQueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html) trait on the corresponding table type. This always constructs simple `SELECT * FROM table` queries.\n\nFor example to load all data from a particular table you can use the following query:\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\nuse chrono::NaiveDateTime;\n\n// This returns a Vec<(i32, String, Option<String>, NaiveDateTime, NaiveDateTime)>\nlet all_users = users::table.load::<(i32, String, Option<String>, NaiveDateTime, NaiveDateTime)>(connection)?;\n\nfor user in all_users {\n    println!(\"{}: {}\", user.0, user.1); \n}\n```\n\n\nwhich is equivalent to the following SQL query:\n\n\n```sql title=\"query.sql\"\nSELECT id, name, hair_color, created_at, updated_at FROM users;\n```\n\n\nBy default Diesel will always select all columns listed in your [`table!`](https://docs.diesel.rs/2.3.x/diesel/macro.table.html) definition in the same order as listed there.\n\n[`RunQueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html) provides the following other methods:\n\n* [`RunQueryDsl::load`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.load) to load all data returned by the query into a `Vec`\n* [`RunQueryDsl::get_results`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_results) is equivalent to [`RunQueryDsl::load`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.load) \n* [`RunQueryDsl::get_result`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_result) just loads the first result returned by the query and drops any potential remaining result\n* [`RunQueryDsl::first`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.first) appends a `LIMIT 1` to your query and then loads the single result returned by your query.\n\nSimilarly to what we already discussed in the previous section Diesel expects that the Rust type used to store the query result in matches what is returned by the query. In this particular case the query returns multiple values for each row, so the Rust side uses a tuple to represent that. See the [Result Mapping](#result-mapping) section for different solutions and more details on this topic.\n\n### `SELECT` statements via `QueryDsl`\n\nTo construct more complex `SELECT` statements you need to use the methods provided by the [`QueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html) trait. Each of the methods provided by this trait corresponds to one specific clause in a `SELECT` statement. You can usually chain these methods as you like to construct arbitrary complex `SELECT` statements. If called more than once most methods will just replace the previous content for this particular part of the `SELECT` statement.\n\nFor example the following query selects all users with an hair color of `green` and orders them by the time of the last update of those data.\n\n\n```rust title=\"srs/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\nuse chrono::NaiveDateTime;\n\nlet users_with_green_hair = users::table.filter(users::hair_color.eq('green'))\n    .order_by(users::updated_at.desc())\n    .load::<(i32, String, Option<String>, NaiveDateTime, NaiveDateTime)>(connection)?;\n\nfor user in users_with_green_hair {\n    println!(\"User {} has grean hair\", user.1);\n}\n```\n\nThis corresponds to the following SQL query:\n\n\n```sql title=\"query.sql\"\nSELECT id, name, hair_color, created_at, updated_at FROM users\nWHERE hair_color = $1\nORDER BY updated_at DESC;\n```\n\n\nDiesel will always use bind values for to include user provided values in the generated query. This ensures that no user provided value can inject additional SQL in the generated query.\n\nThere are the following notable exceptions for methods that have requirements on the order you call them:\n\n* [`QueryDsl::inner_join`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.inner_join) and [`QueryDsl::left_join`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.left_join) must be called before any column from the joined table is used in your query as otherwise Diesel doesn't know about them.\n* [`QueryDsl::group_by`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.group_by) must be called before you call [`QueryDsl::select`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select) as otherwise Diesel doesn't know which expressions are aggregated and which not.\n\nMost methods of the [`QueryDsl`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html) trait like [`filter()`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter) or [`select()`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select) accept SQL expressions. This enables you to construct various complex expressions via the different [`*ExpressionMethods`](https://docs.diesel.rs/2.3.x/diesel/expression_methods/index.html) traits provided by Diesel. Some of the traits and also the [`filter()`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter) function place additional constraints on the SQL side type of the expression. [`filter()`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter) always expects a boolean value, while for example any method of the [`TextExpressionMethods`](https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.TextExpressionMethods.html) trait expects you to call it on an expression of with a SQL side `TEXT` type.\n\nFor example the following constructs are valid expressions in Diesel:\n\n* `users::name` represents a table column with the corresponding SQL side type\n* `users::id.eq(42)` represents the expression `users.id = 42`\n* `users::id.eq(users::age + users::age)` represents the expression `users.id = (users.age + users.age)`\n* `42.into_sql::<Integer>().eq(users::id)` represents a comparision with the constant on the left side via the following SQL `$1 = users.id`\n* `users::id.eq(users::id + 5).eq(false)` represents a chained expression including an arithmetic operation via the following SQL `(users.id = (users.id + 5)) = false`\n\nAgain you can mostly mix and match these function calls as wanted as long as you make sure your SQL side types line up correctly.\n\nUsing such [`QueryDsl::select`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select) allows you to customize the `SELECT` clause of your `SELECT` statement. For example the following query will use a `WINDOW` function as part of the select clause. Keep in mind that changing the `SELECT` clause of your query naturally changes what your query returns, which in turn affects the structure of your Rust side type.\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n\nlet users = users::table.select((\n    users::id,\n    users::name,\n    users::hair_color, \n    dsl::lag(users::id).partition_by(users::hair_color)\n)).order_by(users::updated_at.asc())\n  .load::<(i32, String, Option<String>, Option<i32>)(connection)?;\n\nfor user in users {\n    println!(\"User {} has the hair color {:?}\", user.1, user.2);\n    if let Some(id) = users.3 {\n        println!(\"The user with the {id} has the same hair color\");\n    }\n}\n```\n\nThis is equivalent to the following SQL:\n\n\n```sql title=\"query.sql\"\nSELECT id, name, hair_color, lag(id) OVER(PARTITION BY hair_color) FROM users ORDER BY updated_at ASC;\n```\n\n\n### `SELECT` statements via `HasQuery::query()`\n\nThe [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) macro allows you to associate a particular query with your Rust side type. This ensures that query is always prepopulated with the correct select clause to match your Rust side data structure. \n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n\n#[derive(HasQuery)]\n#[diesel(table_name = users)]\nstruct User {\n    name: String,\n    hair_color: Option<String>,\n    id: i32,\n}\n\n// This now returns a `Vec<User>`, which is automatically infered\n// by using `User::query()` to construct your query\nlet users_with_green_hair = User::query()\n    .filter(users::hair_color.eq(\"green\"))\n    .order_by(users::updated_at.desc())\n    .load(conn)?;\n```\n\n\nwhich is equivalent to the following SQL:\n\n\n```sql title=\"query.sql\"\nSELECT name, hair_color, id FROM users WHERE hair_color = $1 ORDER BY updated_at DESC;\n```\n\nBy default the derive constructs a base query using the provided table including a `SELECT` clause matching the fields of your struct. These fields are mapped to the relevant table columns. \n\nThe [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) derive macro also allows to customize both the field mapping and also the base query construction via attributes. The macro nevertheless will always apply a `SELECT` clause matching your struct definition to the provided base query, so make sure that the base query actually fits that `SELECT` clause.\n\nTo mirror the example from the previous section you would need to write code like this:\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n\n#[derive(HasQuery)]\n#[diesel(base_query = users::table.order_by(users::updated_at.asc()))]\nstruct CustomUser {\n    id: i32,\n    name: String,\n    hair_color: Option<String>,\n    #[diesel(select_expression = dsl::lag(users::id).partition_by(users::hair_color))]\n    last_user_with_same_hair_color: Option<i32>,\n}\n\nlet users = Users::query().load(connection)?;\n\nfor user in users {\n    println!(\"User {} has the hair color {:?}\", user.name, user.hair_color);\n    if let Some(id) = users.last_user_with_same_hair_color {\n        println!(\"The user with the {id} has the same hair color\");\n    }\n}\n```\n\n## Result Mapping\n\nDiesel maps results of queries to Rust types. This is an important difference to the table based mapping performed by most ORM's. As result you usually end up with several Rust types belonging to the same table in your Diesel code base. At the same time a single Rust type can belong to several tables (e.g. via joins). This pattern gives you the necessary flexibility to both select only what you really need and also to evolve specific queries based on your needs and not what the table model expects you have.\n\nAs mentioned several times before Diesel performs checks at compile times to verify that the result returned by a particular query matches the Rust side data structure it is trying to load the result into. If there is a mismatch this will lead to a compilation error. Specifically Diesel checks that:\n\n* The number of returned fields match\n* The order of fields match in your query and in your Rust side type\n* The SQL side type of each field is compatible with the Rust type at this position.\n\nAt the most basic level Diesel allows to map query results directly to basic Rust types. For queries returning only a single field you can directly use the field type like this:\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n\nlet ids: Vec<i32> = users::table.select(users::id).load::<i32>(connection)?;\n```\n\n\nYou can usually get a list of supported Rust types for a particular SQL side type by checking out the Diesel API documentation of that particular SQL type. This example uses the `users::id` column in your select type. This column is of the type `Integer` so you would need to check the documentation of [`diesel::sql_types::Integer`](https://docs.diesel.rs/2.3.x/diesel/sql_types/struct.Integer.html) to get a list of all compatible Rust side types.\n\nFor queries returning more than one field you can use tuples to represent the result type like this:\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n\nlet id_and_name: Vec<(i32, String)> = users::table.select((users::id, users::name)).load(connection)?;\n```\n\n:::note[Single element tuple results]\n\nDiesel also allows to return single element tuple results for queries only returning a single field by also using a single element tuple in your select clause like this: `users::table.select((users::id, )).load::<(i32,)>(connection)` \n\nNote that the `,` turns the parenthesized expression into a single element tuple.\n\n:::\n\n\nIt is also possible to nest tuples by applying the same nesting both in the SQL representation and the Rust representation:\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n    \nusers::table.select((users::id, users::name, (users::id, users::name)))\n    .load::<(i32, String, (i32, String))>(connection)?;\n```\n\nThis feature is particularly useful if you want to seperate values from different tables later on.\n    \n\n:::note[Maximal supported tuple sizes]\n\nDue to limitations of the Rust Language Diesel only supports tuples up to a certain number of elements. If you use the default feature set this number will be 32, if you disable the default features this number decreases to 16. There are additional features (`64-column-tables` and `128-column-tables`) that increase the number of elements in a tuple to the number specified in the feature name. Note that a larger supported maximum size of tuples has impacts on the time required to compile Diesel and also to compile your code. So whenever possible choose a smaller size.\n:::\n\n</aside>\n\n\nMapping query results to tuples is a good idea if your query returns a small number of columns and you plan to destruct the returned result directly. Otherwise it's often a better idea to map query results to Rust structs. This gives you named fields, which in turn makes it harder to mix up the meaning of an particular field.\n\nDiesel provides a [`#[derive(Queryable)`](https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html) proc macro derive to easily map query results to a rust data type. The assumption of this derive is simple: It gets a tuple of values (as shown before) and maps each field of the tuple to the field of the struct in the order of the struct fields. So the first tuple field is mapped to the first struct field and so on.\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n    \n#[derive(Queryable)]\nstruct User {\n    id: i32,\n    name: String,\n}\n\nlet users: Vec<User> = users::table.select((users::id, users::name)).load::<User>(connection)?;\n```\n\nDiesel performs checks if the returned types match your struct and fail compilation if that's for any of the reasons listed before is not the case.  [`#[derive(Queryable)]`](https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html) is the most low level way to map query results provided by Diesel to Rust data structures. It offers the largest level of control at the cost of the worst compilation errors if something goes wrong.\n\nTo improve this situation Diesel provides a [`#[derive(Selectable)]`](https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html) proc macro derive. This derive allows to associate a `SELECT` clause with your Rust struct. It also provides a way to check on struct field level if each field is compatible with the corresponding SQL side type. You usually combine this derive with [`#[derive(Queryable)]`](https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html) like this:\n\n\n\n```rust title=\"src/lib.rs\"\nuse diesel::prelude::*;\nuse crate::schema::users;\n    \n#[derive(Queryable, Selectable)]\n#[diesel(table_name = users)]\n#[diesel(check_for_backend(diesel::pg::Pg))]\nstruct User {\n    id: i32,\n    name: String,\n}\n\nlet users: Vec<User> = users::table.select(User::as_select()).load(connection)?;\n```\n\n\nBy calling `.select(User::as_select())` you instruct Diesel to construct whatever `SELECT` clause matches your Rust side type. This locks in the query result type to be only `User` as long as you do not call `.select()` again. The `#[diesel(check_for_backend(diesel::pg::Pg))]` attribute generates additional optional code to improve error messages for the case of a field mismatch for the PostgreSQL backend. You can also pass several backends at once to this attribute by chaining them: `#[diesel(check_for_backend(diesel::pg::Pg, diesel::sqlite::Sqlite))]`. This will generate the necessary check code for all listed backends.\n\nThe [`#[derive(Selectable)]`](https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html) macro allows to nest other types implementing `Selectable` via the `#[diesel(embed)]` attribute. It will construct a nested select clause as shown before for tuples.\n\nThe `#[diesel(select_expression = users::id.eq(42))]` attribute allows you to provide custom select expressions for specific fields. By default the derive interprets the field name as column name of the corresponding table. The [API Documentation](https://docs.diesel.rs/2.3.x/diesel/expression/trait.Selectable.html#examples) of the trait provides several examples for these attributes.\n\nThe [`#[derive(Seletable)]`](https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html) macro still requires you to take care to manually apply the right select clause and line it up with [`#[derive(Queryable)]`](https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html). The [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) macro presented before takes another step and essentially combines both derives into a single derive with some additional functionality added.\n    \n```rust\nuse diesel::prelude::*;\nuse crate::schema::users;\n    \n#[derive(HasQuery)]\n#[diesel(table_name = users)]\nstruct User {\n    id: i32,\n    name: String,\n}\n\nlet users: Vec<User> = User::query().load(connection)?;\n```\n\nNotable differences to `#[derive(Selectable)]` and `#[derive(Queryable)]` are:\n\n* [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) automatically performs the checks for improved error messages for all enabled backends\n* [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) provides a `User::query()` method to easily construct the correct query\n* [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) accepts a `#[diesel(base_query)]` attribute to associate a specific more complex base query with the particular struct. The default base query is just `users::table`, either based on the explicitly specified table name or based on the infered table name.\n\nWe recommend to use [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) in any place that is covered by what this derive provided and only fall back to [`#[derive(Queryable)]`](https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html) and [`#[derive(Selectable)]`](https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html) for more specific use cases.","src/content/docs/guides/all-about-selects.md","18433366e51c20c0",{html:239,metadata:240},"<p>Most applications fall into a category called CRUD apps.\nCRUD stands for Create, Read, Update, Delete.\nDiesel provides support for all four pieces,\nbut in this guide were going to look at\nthe different ways to go about creating <code dir=\"auto\">SELECT</code> statements.</p>\n<p>The examples for this guide are going to be shown for PostgreSQL,\nbut you can follow along with any backend.</p>\n<p>This guide will cover how to construct <code dir=\"auto\">SELECT</code> statements using Diesel and\nit will also discuss how Diesel maps back query results to your Rust types.</p>\n<p>For this guide, our schema will look like this:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/schema.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Nullable&#x3C;Text>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Timestamp,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Timestamp,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::table! {    users {        id -> Integer,        name -> Text,        hair_color -> Nullable<Text>,        created_at -> Timestamp,        updated_at -> Timestamp,    }}\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"query-building\">Query Building</h2><a class=\"sl-anchor-link\" href=\"#query-building\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Query Building</span></a></div>\n<p>Diesel supports four ways of constructing <code dir=\"auto\">SELECT</code> queries:</p>\n<ul>\n<li>Call <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.select.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::select</code></a> to construct a <code dir=\"auto\">SELECT</code> statement <strong>without</strong> <code dir=\"auto\">FROM</code> clause</li>\n<li>Call any method from the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl</code></a> trait on a table type to directly execute a <code dir=\"auto\">SELECT * FROM table</code> statement.</li>\n<li>Call any method from the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl</code></a> trait on a table type to construct a specific <code dir=\"auto\">SELECT</code> statement.</li>\n<li>Call <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.HasQuery.html#method.query\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">HasQuery::query()</code></a> on a Rust type deriving the <code dir=\"auto\">HasQuery</code> trait</li>\n</ul>\n<p>For this guide we mostly cover the third and fourth variant, as the first two variants are mostly useful for specific situations, while the other variants are the more general ones.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"select-statements-without-from-clause\"><code dir=\"auto\">SELECT</code> Statements without <code dir=\"auto\">FROM</code> clause</h3><a class=\"sl-anchor-link\" href=\"#select-statements-without-from-clause\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled SELECT Statements without FROM clause</span></a></div>\n<p>Diesel allows to construct <code dir=\"auto\">SELECT</code> statements without <code dir=\"auto\">FROM</code> clauses via the <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.select.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::select</code></a> function. This function can be used to construct simple queries.</p>\n<p>For example you could query information about your PostgreSQL version via the following query:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">functions</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">declare_sql_function;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Declare the `version()` SQL function</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[declare_sql_function]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">extern</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">SQL</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">version</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">version_text</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">version</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;String>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Running PostgreSQL: `{version_text}`</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use diesel::expression::functions::declare_sql_function;// Declare the &#x60;version()&#x60; SQL function#[declare_sql_function]extern &#x22;SQL&#x22; {    fn version() -> Text;}let version_text = diesel::select(version()).get_result::<String>(connection)?;println!(&#x22;Running PostgreSQL: &#x60;{version_text}&#x60;&#x22;);\"><div></div></button></div></figure></div>\n<p>which is equivalent to the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">query.sql</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">version</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT version();\"><div></div></button></div></figure></div>\n<p>This simple query already demonstrates several important aspects of constructing <code dir=\"auto\">SELECT</code> queries using Diesel:</p>\n<ol>\n<li>Any query needs to end with a method from the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl</code></a> trait to actually execute the query. The method decides how many results are returned. For this particular example we use the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_result\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl::get_result</code></a> method as we already know that we only expect a single result.</li>\n<li>Diesel performs a mapping from the SQL types returned by your query to compatible Rust types. This mapping needs to use compatible types on both sides. For this particular example we declared the <code dir=\"auto\">version()</code> function in such a way that it returns a [<code dir=\"auto\">Text</code>] value, which is compatible to Rust <code dir=\"auto\">String</code> values. See the <a href=\"#result-mapping\">result mapping</a> section of this guide for more details on this topic.</li>\n</ol>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"select-statements-via-runquerydsl\"><code dir=\"auto\">SELECT</code> statements via <code dir=\"auto\">RunQueryDsl</code></h3><a class=\"sl-anchor-link\" href=\"#select-statements-via-runquerydsl\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled SELECT statements via RunQueryDsl</span></a></div>\n<p>The simplest way to construct a <code dir=\"auto\">SELECT</code> statement that loads data from a particular table is by calling any method from the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl</code></a> trait on the corresponding table type. This always constructs simple <code dir=\"auto\">SELECT * FROM table</code> queries.</p>\n<p>For example to load all data from a particular table you can use the following query:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> chrono</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">NaiveDateTime;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// This returns a Vec&#x3C;(i32, String, Option&#x3C;String>, NaiveDateTime, NaiveDateTime)></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all_users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(i32, String, Option&#x3C;String>, NaiveDateTime, NaiveDateTime)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all_users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">{}: {}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;use chrono::NaiveDateTime;// This returns a Vec<(i32, String, Option<String>, NaiveDateTime, NaiveDateTime)>let all_users = users::table.load::<(i32, String, Option<String>, NaiveDateTime, NaiveDateTime)>(connection)?;for user in all_users {    println!(&#x22;{}: {}&#x22;, user.0, user.1);}\"><div></div></button></div></figure></div>\n<p>which is equivalent to the following SQL query:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">query.sql</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> id, </span><span style=\"--0:#C792EA;--1:#8844AE\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, hair_color, created_at, updated_at </span><span style=\"--0:#C792EA;--1:#8844AE\">FROM</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT id, name, hair_color, created_at, updated_at FROM users;\"><div></div></button></div></figure></div>\n<p>By default Diesel will always select all columns listed in your <a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.table.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">table!</code></a> definition in the same order as listed there.</p>\n<p><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl</code></a> provides the following other methods:</p>\n<ul>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.load\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl::load</code></a> to load all data returned by the query into a <code dir=\"auto\">Vec</code></li>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_results\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl::get_results</code></a> is equivalent to <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.load\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl::load</code></a></li>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.get_result\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl::get_result</code></a> just loads the first result returned by the query and drops any potential remaining result</li>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.RunQueryDsl.html#method.first\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">RunQueryDsl::first</code></a> appends a <code dir=\"auto\">LIMIT 1</code> to your query and then loads the single result returned by your query.</li>\n</ul>\n<p>Similarly to what we already discussed in the previous section Diesel expects that the Rust type used to store the query result in matches what is returned by the query. In this particular case the query returns multiple values for each row, so the Rust side uses a tuple to represent that. See the <a href=\"#result-mapping\">Result Mapping</a> section for different solutions and more details on this topic.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"select-statements-via-querydsl\"><code dir=\"auto\">SELECT</code> statements via <code dir=\"auto\">QueryDsl</code></h3><a class=\"sl-anchor-link\" href=\"#select-statements-via-querydsl\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled SELECT statements via QueryDsl</span></a></div>\n<p>To construct more complex <code dir=\"auto\">SELECT</code> statements you need to use the methods provided by the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl</code></a> trait. Each of the methods provided by this trait corresponds to one specific clause in a <code dir=\"auto\">SELECT</code> statement. You can usually chain these methods as you like to construct arbitrary complex <code dir=\"auto\">SELECT</code> statements. If called more than once most methods will just replace the previous content for this particular part of the <code dir=\"auto\">SELECT</code> statement.</p>\n<p>For example the following query selects all users with an hair color of <code dir=\"auto\">green</code> and orders them by the time of the last update of those data.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">srs/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> chrono</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">NaiveDateTime;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users_with_green_hair</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#ECC48D;--1:#984E4D\">'green'</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">order_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">desc</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(i32, String, Option&#x3C;String>, NaiveDateTime, NaiveDateTime)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users_with_green_hair</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">User {} has grean hair</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;use chrono::NaiveDateTime;let users_with_green_hair = users::table.filter(users::hair_color.eq(&#x27;green&#x27;))    .order_by(users::updated_at.desc())    .load::<(i32, String, Option<String>, NaiveDateTime, NaiveDateTime)>(connection)?;for user in users_with_green_hair {    println!(&#x22;User {} has grean hair&#x22;, user.1);}\"><div></div></button></div></figure></div>\n<p>This corresponds to the following SQL query:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">query.sql</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> id, </span><span style=\"--0:#C792EA;--1:#8844AE\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, hair_color, created_at, updated_at </span><span style=\"--0:#C792EA;--1:#8844AE\">FROM</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">WHERE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> hair_color </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">ORDER BY</span><span style=\"--0:#D6DEEB;--1:#403F53\"> updated_at </span><span style=\"--0:#C792EA;--1:#8844AE\">DESC</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT id, name, hair_color, created_at, updated_at FROM usersWHERE hair_color = $1ORDER BY updated_at DESC;\"><div></div></button></div></figure></div>\n<p>Diesel will always use bind values for to include user provided values in the generated query. This ensures that no user provided value can inject additional SQL in the generated query.</p>\n<p>There are the following notable exceptions for methods that have requirements on the order you call them:</p>\n<ul>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.inner_join\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::inner_join</code></a> and <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.left_join\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::left_join</code></a> must be called before any column from the joined table is used in your query as otherwise Diesel doesnt know about them.</li>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.group_by\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::group_by</code></a> must be called before you call <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::select</code></a> as otherwise Diesel doesnt know which expressions are aggregated and which not.</li>\n</ul>\n<p>Most methods of the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl</code></a> trait like <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">filter()</code></a> or <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">select()</code></a> accept SQL expressions. This enables you to construct various complex expressions via the different <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">*ExpressionMethods</code></a> traits provided by Diesel. Some of the traits and also the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">filter()</code></a> function place additional constraints on the SQL side type of the expression. <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.filter\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">filter()</code></a> always expects a boolean value, while for example any method of the <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.TextExpressionMethods.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">TextExpressionMethods</code></a> trait expects you to call it on an expression of with a SQL side <code dir=\"auto\">TEXT</code> type.</p>\n<p>For example the following constructs are valid expressions in Diesel:</p>\n<ul>\n<li><code dir=\"auto\">users::name</code> represents a table column with the corresponding SQL side type</li>\n<li><code dir=\"auto\">users::id.eq(42)</code> represents the expression <code dir=\"auto\">users.id = 42</code></li>\n<li><code dir=\"auto\">users::id.eq(users::age + users::age)</code> represents the expression <code dir=\"auto\">users.id = (users.age + users.age)</code></li>\n<li><code dir=\"auto\">42.into_sql::&#x3C;Integer>().eq(users::id)</code> represents a comparision with the constant on the left side via the following SQL <code dir=\"auto\">$1 = users.id</code></li>\n<li><code dir=\"auto\">users::id.eq(users::id + 5).eq(false)</code> represents a chained expression including an arithmetic operation via the following SQL <code dir=\"auto\">(users.id = (users.id + 5)) = false</code></li>\n</ul>\n<p>Again you can mostly mix and match these function calls as wanted as long as you make sure your SQL side types line up correctly.</p>\n<p>Using such <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::select</code></a> allows you to customize the <code dir=\"auto\">SELECT</code> clause of your <code dir=\"auto\">SELECT</code> statement. For example the following query will use a <code dir=\"auto\">WINDOW</code> function as part of the select clause. Keep in mind that changing the <code dir=\"auto\">SELECT</code> clause of your query naturally changes what your query returns, which in turn affects the structure of your Rust side type.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">lag</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">partition_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">order_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">asc</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(i32, String, Option&#x3C;String>, Option&#x3C;i32>)(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">User {} has the hair color {:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Some(</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">The user with the {id} has the same hair color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;let users = users::table.select((    users::id,    users::name,    users::hair_color,    dsl::lag(users::id).partition_by(users::hair_color))).order_by(users::updated_at.asc())  .load::<(i32, String, Option<String>, Option<i32>)(connection)?;for user in users {    println!(&#x22;User {} has the hair color {:?}&#x22;, user.1, user.2);    if let Some(id) = users.3 {        println!(&#x22;The user with the {id} has the same hair color&#x22;);    }}\"><div></div></button></div></figure></div>\n<p>This is equivalent to the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">query.sql</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> id, </span><span style=\"--0:#C792EA;--1:#8844AE\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, hair_color, </span><span style=\"--0:#C5E478;--1:#3B61B0\">lag</span><span style=\"--0:#D6DEEB;--1:#403F53\">(id) </span><span style=\"--0:#C792EA;--1:#8844AE\">OVER</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">PARTITION</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">BY</span><span style=\"--0:#D6DEEB;--1:#403F53\"> hair_color) </span><span style=\"--0:#C792EA;--1:#8844AE\">FROM</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users </span><span style=\"--0:#C792EA;--1:#8844AE\">ORDER BY</span><span style=\"--0:#D6DEEB;--1:#403F53\"> updated_at </span><span style=\"--0:#C792EA;--1:#8844AE\">ASC</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT id, name, hair_color, lag(id) OVER(PARTITION BY hair_color) FROM users ORDER BY updated_at ASC;\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"select-statements-via-hasqueryquery\"><code dir=\"auto\">SELECT</code> statements via <code dir=\"auto\">HasQuery::query()</code></h3><a class=\"sl-anchor-link\" href=\"#select-statements-via-hasqueryquery\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled SELECT statements via HasQuery::query()</span></a></div>\n<p>The <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> macro allows you to associate a particular query with your Rust side type. This ensures that query is always prepopulated with the correct select clause to match your Rust side data structure.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(HasQuery)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// This now returns a `Vec&#x3C;User>`, which is automatically infered</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// by using `User::query()` to construct your query</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users_with_green_hair</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">green</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">order_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">desc</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;#[derive(HasQuery)]#[diesel(table_name = users)]struct User {    name: String,    hair_color: Option<String>,    id: i32,}// This now returns a &#x60;Vec<User>&#x60;, which is automatically infered// by using &#x60;User::query()&#x60; to construct your querylet users_with_green_hair = User::query()    .filter(users::hair_color.eq(&#x22;green&#x22;))    .order_by(users::updated_at.desc())    .load(conn)?;\"><div></div></button></div></figure></div>\n<p>which is equivalent to the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">query.sql</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, hair_color, id </span><span style=\"--0:#C792EA;--1:#8844AE\">FROM</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users </span><span style=\"--0:#C792EA;--1:#8844AE\">WHERE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> hair_color </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">ORDER BY</span><span style=\"--0:#D6DEEB;--1:#403F53\"> updated_at </span><span style=\"--0:#C792EA;--1:#8844AE\">DESC</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT name, hair_color, id FROM users WHERE hair_color = $1 ORDER BY updated_at DESC;\"><div></div></button></div></figure></div>\n<p>By default the derive constructs a base query using the provided table including a <code dir=\"auto\">SELECT</code> clause matching the fields of your struct. These fields are mapped to the relevant table columns.</p>\n<p>The <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> derive macro also allows to customize both the field mapping and also the base query construction via attributes. The macro nevertheless will always apply a <code dir=\"auto\">SELECT</code> clause matching your struct definition to the provided base query, so make sure that the base query actually fits that <code dir=\"auto\">SELECT</code> clause.</p>\n<p>To mirror the example from the previous section you would need to write code like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(HasQuery)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(base_query </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">order_by(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">asc()))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> CustomUser {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(select_expression </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">lag(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">id)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">partition_by(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">hair_color))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">last_user_with_same_hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;i32>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">User {} has the hair color {:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">name, </span><span style=\"--0:#C5E478;--1:#3B61B0\">user</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">hair_color);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Some(</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">last_user_with_same_hair_color {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">The user with the {id} has the same hair color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;#[derive(HasQuery)]#[diesel(base_query = users::table.order_by(users::updated_at.asc()))]struct CustomUser {    id: i32,    name: String,    hair_color: Option<String>,    #[diesel(select_expression = dsl::lag(users::id).partition_by(users::hair_color))]    last_user_with_same_hair_color: Option<i32>,}let users = Users::query().load(connection)?;for user in users {    println!(&#x22;User {} has the hair color {:?}&#x22;, user.name, user.hair_color);    if let Some(id) = users.last_user_with_same_hair_color {        println!(&#x22;The user with the {id} has the same hair color&#x22;);    }}\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"result-mapping\">Result Mapping</h2><a class=\"sl-anchor-link\" href=\"#result-mapping\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Result Mapping</span></a></div>\n<p>Diesel maps results of queries to Rust types. This is an important difference to the table based mapping performed by most ORMs. As result you usually end up with several Rust types belonging to the same table in your Diesel code base. At the same time a single Rust type can belong to several tables (e.g. via joins). This pattern gives you the necessary flexibility to both select only what you really need and also to evolve specific queries based on your needs and not what the table model expects you have.</p>\n<p>As mentioned several times before Diesel performs checks at compile times to verify that the result returned by a particular query matches the Rust side data structure it is trying to load the result into. If there is a mismatch this will lead to a compilation error. Specifically Diesel checks that:</p>\n<ul>\n<li>The number of returned fields match</li>\n<li>The order of fields match in your query and in your Rust side type</li>\n<li>The SQL side type of each field is compatible with the Rust type at this position.</li>\n</ul>\n<p>At the most basic level Diesel allows to map query results directly to basic Rust types. For queries returning only a single field you can directly use the field type like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">ids</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;i32> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;i32>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;let ids: Vec<i32> = users::table.select(users::id).load::<i32>(connection)?;\"><div></div></button></div></figure></div>\n<p>You can usually get a list of supported Rust types for a particular SQL side type by checking out the Diesel API documentation of that particular SQL type. This example uses the <code dir=\"auto\">users::id</code> column in your select type. This column is of the type <code dir=\"auto\">Integer</code> so you would need to check the documentation of <a href=\"https://docs.diesel.rs/2.3.x/diesel/sql_types/struct.Integer.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::sql_types::Integer</code></a> to get a list of all compatible Rust side types.</p>\n<p>For queries returning more than one field you can use tuples to represent the result type like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id_and_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;(i32, String)> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;let id_and_name: Vec<(i32, String)> = users::table.select((users::id, users::name)).load(connection)?;\"><div></div></button></div></figure></div>\n<aside aria-label=\"Single element tuple results\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Single element tuple results</p><div class=\"starlight-aside__content\"><p>Diesel also allows to return single element tuple results for queries only returning a single field by also using a single element tuple in your select clause like this: <code dir=\"auto\">users::table.select((users::id, )).load::&#x3C;(i32,)>(connection)</code></p><p>Note that the <code dir=\"auto\">,</code> turns the parenthesized expression into a single element tuple.</p></div></aside>\n<p>It is also possible to nest tuples by applying the same nesting both in the SQL representation and the Rust representation:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, (users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(i32, String, (i32, String))>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;users::table.select((users::id, users::name, (users::id, users::name)))    .load::<(i32, String, (i32, String))>(connection)?;\"><div></div></button></div></figure></div>\n<p>This feature is particularly useful if you want to seperate values from different tables later on.</p>\n<aside aria-label=\"Maximal supported tuple sizes\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Maximal supported tuple sizes</p><div class=\"starlight-aside__content\"><p>Due to limitations of the Rust Language Diesel only supports tuples up to a certain number of elements. If you use the default feature set this number will be 32, if you disable the default features this number decreases to 16. There are additional features (<code dir=\"auto\">64-column-tables</code> and <code dir=\"auto\">128-column-tables</code>) that increase the number of elements in a tuple to the number specified in the feature name. Note that a larger supported maximum size of tuples has impacts on the time required to compile Diesel and also to compile your code. So whenever possible choose a smaller size.</p></div></aside>\n\n<p>Mapping query results to tuples is a good idea if your query returns a small number of columns and you plan to destruct the returned result directly. Otherwise its often a better idea to map query results to Rust structs. This gives you named fields, which in turn makes it harder to mix up the meaning of an particular field.</p>\n<p>Diesel provides a <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Queryable)</code></a> proc macro derive to easily map query results to a rust data type. The assumption of this derive is simple: It gets a tuple of values (as shown before) and maps each field of the tuple to the field of the struct in the order of the struct fields. So the first tuple field is mapped to the first struct field and so on.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;User> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;User>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;#[derive(Queryable)]struct User {    id: i32,    name: String,}let users: Vec<User> = users::table.select((users::id, users::name)).load::<User>(connection)?;\"><div></div></button></div></figure></div>\n<p>Diesel performs checks if the returned types match your struct and fail compilation if thats for any of the reasons listed before is not the case.  <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Queryable)]</code></a> is the most low level way to map query results provided by Diesel to Rust data structures. It offers the largest level of control at the cost of the worst compilation errors if something goes wrong.</p>\n<p>To improve this situation Diesel provides a <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Selectable)]</code></a> proc macro derive. This derive allows to associate a <code dir=\"auto\">SELECT</code> clause with your Rust struct. It also provides a way to check on struct field level if each field is compatible with the corresponding SQL side type. You usually combine this derive with <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Queryable)]</code></a> like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/lib.rs</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(check_for_backend(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">pg</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Pg))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;User> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;#[derive(Queryable, Selectable)]#[diesel(table_name = users)]#[diesel(check_for_backend(diesel::pg::Pg))]struct User {    id: i32,    name: String,}let users: Vec<User> = users::table.select(User::as_select()).load(connection)?;\"><div></div></button></div></figure></div>\n<p>By calling <code dir=\"auto\">.select(User::as_select())</code> you instruct Diesel to construct whatever <code dir=\"auto\">SELECT</code> clause matches your Rust side type. This locks in the query result type to be only <code dir=\"auto\">User</code> as long as you do not call <code dir=\"auto\">.select()</code> again. The <code dir=\"auto\">#[diesel(check_for_backend(diesel::pg::Pg))]</code> attribute generates additional optional code to improve error messages for the case of a field mismatch for the PostgreSQL backend. You can also pass several backends at once to this attribute by chaining them: <code dir=\"auto\">#[diesel(check_for_backend(diesel::pg::Pg, diesel::sqlite::Sqlite))]</code>. This will generate the necessary check code for all listed backends.</p>\n<p>The <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Selectable)]</code></a> macro allows to nest other types implementing <code dir=\"auto\">Selectable</code> via the <code dir=\"auto\">#[diesel(embed)]</code> attribute. It will construct a nested select clause as shown before for tuples.</p>\n<p>The <code dir=\"auto\">#[diesel(select_expression = users::id.eq(42))]</code> attribute allows you to provide custom select expressions for specific fields. By default the derive interprets the field name as column name of the corresponding table. The <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/trait.Selectable.html#examples\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">API Documentation</a> of the trait provides several examples for these attributes.</p>\n<p>The <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Seletable)]</code></a> macro still requires you to take care to manually apply the right select clause and line it up with <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Queryable)]</code></a>. The <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> macro presented before takes another step and essentially combines both derives into a single derive with some additional functionality added.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(HasQuery)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;User> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::users;#[derive(HasQuery)]#[diesel(table_name = users)]struct User {    id: i32,    name: String,}let users: Vec<User> = User::query().load(connection)?;\"><div></div></button></div></figure></div>\n<p>Notable differences to <code dir=\"auto\">#[derive(Selectable)]</code> and <code dir=\"auto\">#[derive(Queryable)]</code> are:</p>\n<ul>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> automatically performs the checks for improved error messages for all enabled backends</li>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> provides a <code dir=\"auto\">User::query()</code> method to easily construct the correct query</li>\n<li><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> accepts a <code dir=\"auto\">#[diesel(base_query)]</code> attribute to associate a specific more complex base query with the particular struct. The default base query is just <code dir=\"auto\">users::table</code>, either based on the explicitly specified table name or based on the infered table name.</li>\n</ul>\n<p>We recommend to use <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> in any place that is covered by what this derive provided and only fall back to <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Queryable)]</code></a> and <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Selectable)]</code></a> for more specific use cases.</p>",{headings:241,localImagePaths:261,remoteImagePaths:262,frontmatter:263,imagePaths:264},[242,245,249,252,255,258],{depth:65,slug:243,text:244},"query-building","Query Building",{depth:246,slug:247,text:248},3,"select-statements-without-from-clause","SELECT Statements without FROM clause",{depth:246,slug:250,text:251},"select-statements-via-runquerydsl","SELECT statements via RunQueryDsl",{depth:246,slug:253,text:254},"select-statements-via-querydsl","SELECT statements via QueryDsl",{depth:246,slug:256,text:257},"select-statements-via-hasqueryquery","SELECT statements via HasQuery::query()",{depth:65,slug:259,text:260},"result-mapping","Result Mapping",[],[],{title:231,lang:157},[],"guides/all-about-inserts",{id:265,data:267,body:272,filePath:273,digest:274,rendered:275},{title:268,editUrl:16,head:269,template:44,sidebar:270,pagefind:16,draft:32},"All About Inserts",[],{hidden:32,attrs:271},{},"Most applications fall into a category called \"CRUD\" apps.\nCRUD stands for \"Create, Read, Update, Delete\".\nDiesel provides support for all four pieces,\nbut in this guide we're going to look at\nthe different ways to go about creating `INSERT` statements.\n\nThe examples for this guide are going to be shown for PostgreSQL,\nbut you can follow along with any backend.\nThe full code examples for all backends are linked at the bottom of this guide.\n\nAn insert statement always starts with [`insert_into`].\nThe first argument to this function is the table you're inserting into.\n\n[`insert_into`]: https://docs.diesel.rs/2.3.x/diesel/fn.insert_into.html\n\nFor this guide, our schema will look like this:\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L11-L21\"\ndiesel::table! {\n    users {\n        id -> Integer,\n        name -> Text,\n        hair_color -> Nullable<Text>,\n        created_at -> Timestamp,\n        updated_at -> Timestamp,\n    }\n}\n```\n\n\nSince our functions are going to only operate on the `users` table,\nwe can put `use schema::users::dsl::*;` at the top of our function,\nwhich will let us write `insert_into(users)` instead of\n`insert_into(users::table)`.\nIf you're importing `table::dsl::*`,\nmake sure it's always inside a function, not the top of your module.\n\nIf all of the columns on a table have a default,\nthe simplest thing we can do is call [`.default_values`].\nWe could write a function that ran that query like this:\n\n[`.default_values`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/insert_statement/struct.IncompleteInsertStatement.html#method.default_values\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L41-L45\"\nuse schema::users::dsl::*;\n\ninsert_into(users).default_values().execute(conn)\n```\n\nIt's worth noting that this code will still compile,\neven if you don't have default values on all of your columns.\nDiesel will ensure that the value you're assigning has the right type,\nbut it can't validate whether the column has a default,\nany constraints that could fail,\nor any triggers that could fire.\n\nWe can use [`debug_query`] to inspect the generated SQL.\nThe exact SQL that is generated may differ depending on the backend you're using.\nIf we run `println!(\"{}\", debug_query::<Pg, _>(&our_query));`,\nwe'll see the following:\n\n[`debug_query`]: https://docs.diesel.rs/2.3.x/diesel/fn.debug_query.html\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L47-L54\"\nINSERT INTO \"users\" DEFAULT VALUES -- binds: []\n```\n\n\nIf we want to actually provide values, we can call [`.values`] instead.\nThere are a lot of different arguments we can provide here.\nThe simplest is a single column/value pair using [`.eq`].\n\n[`.values`]: https://docs.diesel.rs/2.3.x/diesel/query_builder/insert_statement/struct.IncompleteInsertStatement.html#method.values\n[`.eq`]: https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.ExpressionMethods.html#method.eq\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L56-L60\"\nuse schema::users::dsl::*;\n\ninsert_into(users).values(name.eq(\"Sean\")).execute(conn)\n```\n\nThis will generate the following SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L62-L70\"\nINSERT INTO \"users\" (\"name\") VALUES ($1)\n-- binds [\"Sean\"]\n```\n\nIf we want to provide values for more than one column, we can pass a tuple.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L72-L78\"\ninsert_into(users)\n    .values((name.eq(\"Tess\"), hair_color.eq(\"Brown\")))\n    .execute(conn)\n```\n\n\nThis will generate the following SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L80-L88\"\nINSERT INTO \"users\" (\"name\", \"hair_color\") VALUES ($1, $2)\n-- binds: [\"Tess\", \"Brown\"]\n```\n\n\n## Insertable\n\nWorking with tuples is the typical way to do an insert\nif you just have some values that you want to stick in the database.\nBut what if your data is coming from another source,\nlike a web form deserialized by Serde?\nIt'd be annoying to have to write\n`(name.eq(user.name), hair_color.eq(user.hair_color))`.\n\nDiesel provides the [`Insertable`] trait for this case.\n`Insertable` maps your struct to columns in the database.\nWe can derive this automatically by adding [`#[derive(Insertable)]`] to our type.\n\n[`Insertable`]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.Insertable.html\n[`#[derive(Insertable)]`]: https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Insertable.html\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L23-L30\"\nuse schema::users;\n\n#[derive(Deserialize, Insertable)]\n#[diesel(table_name = users)]\npub struct UserForm<'a> {\n    name: &'a str,\n    hair_color: Option<&'a str>,\n}\n```\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L90-L99\"\nuse schema::users::dsl::*;\n\nlet json = r#\"{ \"name\": \"Sean\", \"hair_color\": \"Black\" }\"#;\nlet user_form = serde_json::from_str::<UserForm>(json)?;\n\ninsert_into(users).values(&user_form).execute(conn)?;\n\nOk(())\n```\n\n\nThis will generate the same SQL as if we had used a tuple.\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L101-L111\"\nINSERT INTO \"users\" (\"name\", \"hair_color\") VALUES ($1, $2)\n-- binds: [\"Sean\", \"Black\"]\n```\n\n\nIf one of the fields is `None`, the default value will be inserted for that field.\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L113-L122\"\nuse schema::users::dsl::*;\n\nlet json = r#\"{ \"name\": \"Ruby\", \"hair_color\": null }\"#;\nlet user_form = serde_json::from_str::<UserForm>(json)?;\n\ninsert_into(users).values(&user_form).execute(conn)?;\n\nOk(())\n```\n\n\nThat will generate the following SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L124-L134\"\nINSERT INTO \"users\" (\"name\", \"hair_color\") VALUES ($1, DEFAULT)\n-- binds: [\"Ruby\"]\n```\n\n\n## Batch Insert\n\nIf we want to insert more than one row at a time,\nwe can do that by passing a `&Vec` or slice of any of the forms used above.\nKeep in mind that you're always passing a reference here.\n\nOn backends that support the `DEFAULT` keyword (all backends except SQLite),\nthe data will be inserted in a single query.\nOn SQLite, one query will be performed per row.\n\n\n:::note[Customizing the usage of `DEFAULT` values]\n\nYou can use the `#[diesel(treat_none_as_default_value = false)]` attribute on a struct to disable using `DEFAULT` in place of `None` \nvalues and rather use `NULL` values for such fields. This enables for example real batch inserts with the SQLite backend.\n\n:::\n\nFor example, if we wanted to insert two rows with a single value,\nwe can just use a `Vec`.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L136-L142\"\nuse schema::users::dsl::*;\n\ninsert_into(users)\n    .values(&vec![name.eq(\"Sean\"), name.eq(\"Tess\")])\n    .execute(conn)\n```\n\nWhich generates the following SQL:\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L144-L153\"\nINSERT INTO \"users\" (\"name\") VALUES ($1), ($2)\n-- binds [\"Sean\", \"Tess\"]\n```\n\n\nIf we wanted to use `DEFAULT` for some of our rows, we can use an option here.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L155-L161\"\nuse schema::users::dsl::*;\n\ninsert_into(users)\n    .values(&vec![Some(name.eq(\"Sean\")), None])\n    .execute(conn)\n```\n\n\nNote that the type here is `Option<Eq<Column, Value>>` not `Eq<Column, Option<Value>>`.\nDoing `column.eq(None)` would insert `NULL` not `DEFAULT`.\nThis generates the following SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L163-L172\"\nINSERT INTO \"users\" (\"name\") VALUES ($1), (DEFAULT)\n-- binds [\"Sean\"]\n```\n\nWe can do the same thing with tuples.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L174-L183\"\nuse schema::users::dsl::*;\n\ninsert_into(users)\n    .values(&vec![\n        (name.eq(\"Sean\"), hair_color.eq(\"Black\")),\n        (name.eq(\"Tess\"), hair_color.eq(\"Brown\")),\n    ])\n    .execute(conn)\n```\n\n\nWhich generates the following SQL:\n\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L185-L198\"\nINSERT INTO \"users\" (\"name\", \"hair_color\")\nVALUES ($1, $2), ($3, $4)\n-- binds: [\"Sean\", \"Black\", \"Tess\", \"Brown\"]\n```\n\n\nOnce again, we can use an `Option` for any of the fields to insert `DEFAULT`.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L200-L209\"\nuse schema::users::dsl::*;\n\ninsert_into(users)\n    .values(&vec![\n        (name.eq(\"Sean\"), Some(hair_color.eq(\"Black\"))),\n        (name.eq(\"Ruby\"), None),\n    ])\n    .execute(conn)\n```\n\n\nWhich generates the following SQL:\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L211-L224\"\nINSERT INTO \"users\" (\"name\", \"hair_color\")\nVALUES ($1, $2), ($3, DEFAULT)\n-- binds: [\"Sean\", \"Black\", \"Ruby\"]\n```\n\nFinally, `Insertable` structs can be used for batch insert as well.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L226-L238\"\nuse schema::users::dsl::*;\n\nlet json = r#\"[\n    { \"name\": \"Sean\", \"hair_color\": \"Black\" },\n    { \"name\": \"Tess\", \"hair_color\": \"Brown\" }\n]\"#;\nlet user_form = serde_json::from_str::<Vec<UserForm>>(json)?;\n\ninsert_into(users).values(&user_form).execute(conn)?;\n\nOk(())\n```\n\n\nThis generates the same SQL as if we had used a tuple:\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L211-L224\"\nINSERT INTO \"users\" (\"name\", \"hair_color\")\nVALUES ($1, $2), ($3, $4)\n-- binds: [\"Sean\", \"Black\", \"Tess\", \"Brown\"]\n```\n\n\n## The `RETURNING` Clause\n<br/>\n\nOn backends that support the `RETURNING` clause (such as PostgreSQL and SQLite),\nwe can get data back from our insert as well.\nOn the SQLite backend, support for the `RETURNING` clause can be\nenabled with a feature flag, `returning_clauses_for_sqlite_3_35`.\nMySQL does not support `RETURNING` clauses.\nTo get back all of the inserted rows,\nwe can call [`.get_results`] instead of [`.execute`].\n\n[`.get_results`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_results\n[`.execute`]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.execute\n\nGiven this struct:\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L32-L39\"\n#[derive(Queryable, PartialEq, Debug)]\nstruct User {\n    id: i32,\n    name: String,\n    hair_color: Option<String>,\n    created_at: SystemTime,\n    updated_at: SystemTime,\n}\n```\n\nWe can use `get_results` with this test:\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L256-L292\"\nuse diesel::select;\nuse schema::users::dsl::*;\n\nlet now = select(diesel::dsl::now).get_result::<SystemTime>(conn)?;\n\nlet inserted_users = insert_into(users)\n    .values(&vec![\n        (id.eq(1), name.eq(\"Sean\")),\n        (id.eq(2), name.eq(\"Tess\")),\n    ])\n    .get_results(conn)?;\n\nlet expected_users = vec![\n    User {\n        id: 1,\n        name: \"Sean\".into(),\n        hair_color: None,\n        created_at: now,\n        updated_at: now,\n    },\n    User {\n        id: 2,\n        name: \"Tess\".into(),\n        hair_color: None,\n        created_at: now,\n        updated_at: now,\n    },\n];\nassert_eq!(expected_users, inserted_users);\n```\n\n\nTo inspect the SQL generated by `.get_results` or `.get_result`,\nwe will need to call `.as_query` before passing it to `debug_query`.\nThe query in the last test generates the following SQL:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L294-L306\"\nINSERT INTO \"users\" (\"id\", \"name\") VALUES ($1, $2), ($3, $4)\nRETURNING \"users\".\"id\", \"users\".\"name\", \"users\".\"hair_color\",\n          \"users\".\"created_at\", \"users\".\"updated_at\"\n-- binds: [1, \"Sean\", 2, \"Tess\"]\n```\n\n\nYou'll notice that we've never given an explicit value for `created_at` and\n`updated_at` in any of our examples.\nWith Diesel, you typically won't set those values in Rust.\nTypically these columns get set with `DEFAULT CURRENT_TIMESTAMP`,\nand a trigger is used to change `updated_at` on updates.\nIf you're using PostgreSQL, you can use a built-in trigger\nby running `SELECT diesel_manage_updated_at('users');` in a migration.\n\nIf we expect one row instead of multiple, we can call `.get_result` instead of\n`.get_results`.\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L308-L332\"\nuse diesel::select;\nuse schema::users::dsl::*;\n\nlet now = select(diesel::dsl::now).get_result::<SystemTime>(conn)?;\n\nlet inserted_user = insert_into(users)\n    .values((id.eq(3), name.eq(\"Ruby\")))\n    .get_result(conn)?;\n\nlet expected_user = User {\n    id: 3,\n    name: \"Ruby\".into(),\n    hair_color: None,\n    created_at: now,\n    updated_at: now,\n};\nassert_eq!(expected_user, inserted_user);\n```\n\nThis generates the same SQL as `get_results`:\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L334-L347\"\nINSERT INTO \"users\" (\"id\", \"name\") VALUES ($1, $2)\nRETURNING \"users\".\"id\", \"users\".\"name\", \"users\".\"hair_color\",\n          \"users\".\"created_at\", \"users\".\"updated_at\"\n-- binds: [3, \"Ruby\"]\n```\n\n\nFinally, if we only want a single column back, we can call `.returning()` explicitly.\nThis code would return the inserted ID:\n\n\n\n```rust title=\"src/lib.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L349-L356\"\nuse schema::users::dsl::*;\n\ninsert_into(users)\n    .values(name.eq(\"Ruby\"))\n    .returning(id)\n    .get_result(conn)\n```\n\n\nWhich generates the following SQL:\n\n\n\n```sql title=\"Generated SQL\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L358-L367\"\nINSERT INTO \"users\" (\"name\") VALUES ($1)\nRETURNING \"users\".\"id\"\n-- binds: [\"Ruby\"]\n```\n\n\n## \"Upsert\"\n<br />\n\nEvery type of insert statement covered in this guide can also be used for\n\"insert or update\" queries, also known as \"upsert\".\nThe specifics of upsert are covered extensively in the API documentation.\n\nFor PostgreSQL and SQLite, see the [`diesel::upsert`] module.\nFor MySQL, upsert is done via `REPLACE`.\nSee [`replace_into`] for details.\n\n\n[`diesel::upsert`]: https://docs.diesel.rs/2.3.x/diesel/upsert/index.html\n[`replace_into`]: https://docs.diesel.rs/2.3.x/diesel/fn.replace_into.html\n\n## Conclusion\n<br />\n\nWhile there are a lot of examples in this guide,\nultimately the only difference between various kinds of insert statements\nis the argument passed to `.values`.\n\nAll examples in this guide are run as part of Diesel's test suite.\nYou can find the full code examples for each backend at these links:\n\n- [PostgreSQL]\n- [MySQL]\n- [SQLite]\n\n[PostgreSQL]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/all_about_inserts\n[MySQL]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/mysql/all_about_inserts\n[SQLite]: https://github.com/diesel-rs/diesel/tree/2.3.x/examples/sqlite/all_about_inserts","src/content/docs/guides/all-about-inserts.md","1b4086476c36b090",{html:276,metadata:277},"<p>Most applications fall into a category called CRUD apps.\nCRUD stands for Create, Read, Update, Delete.\nDiesel provides support for all four pieces,\nbut in this guide were going to look at\nthe different ways to go about creating <code dir=\"auto\">INSERT</code> statements.</p>\n<p>The examples for this guide are going to be shown for PostgreSQL,\nbut you can follow along with any backend.\nThe full code examples for all backends are linked at the bottom of this guide.</p>\n<p>An insert statement always starts with <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.insert_into.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">insert_into</code></a>.\nThe first argument to this function is the table youre inserting into.</p>\n<p>For this guide, our schema will look like this:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L11-L21\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Nullable&#x3C;Text>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Timestamp,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Timestamp,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::table! {    users {        id -> Integer,        name -> Text,        hair_color -> Nullable<Text>,        created_at -> Timestamp,        updated_at -> Timestamp,    }}\"><div></div></button></div></figure></div>\n<p>Since our functions are going to only operate on the <code dir=\"auto\">users</code> table,\nwe can put <code dir=\"auto\">use schema::users::dsl::*;</code> at the top of our function,\nwhich will let us write <code dir=\"auto\">insert_into(users)</code> instead of\n<code dir=\"auto\">insert_into(users::table)</code>.\nIf youre importing <code dir=\"auto\">table::dsl::*</code>,\nmake sure its always inside a function, not the top of your module.</p>\n<p>If all of the columns on a table have a default,\nthe simplest thing we can do is call <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/insert_statement/struct.IncompleteInsertStatement.html#method.default_values\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.default_values</code></a>.\nWe could write a function that ran that query like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L41-L45\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">default_values</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users).default_values().execute(conn)\"><div></div></button></div></figure></div>\n<p>Its worth noting that this code will still compile,\neven if you dont have default values on all of your columns.\nDiesel will ensure that the value youre assigning has the right type,\nbut it cant validate whether the column has a default,\nany constraints that could fail,\nor any triggers that could fire.</p>\n<p>We can use <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.debug_query.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">debug_query</code></a> to inspect the generated SQL.\nThe exact SQL that is generated may differ depending on the backend youre using.\nIf we run <code dir=\"auto\">println!(\"{}\", debug_query::&#x3C;Pg, _>(&#x26;our_query));</code>,\nwell see the following:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L47-L54\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">DEFAULT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: []</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; DEFAULT VALUES -- binds: []\"><div></div></button></div></figure></div>\n<p>If we want to actually provide values, we can call <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_builder/insert_statement/struct.IncompleteInsertStatement.html#method.values\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.values</code></a> instead.\nThere are a lot of different arguments we can provide here.\nThe simplest is a single column/value pair using <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.ExpressionMethods.html#method.eq\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.eq</code></a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L56-L60\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users).values(name.eq(&#x22;Sean&#x22;)).execute(conn)\"><div></div></button></div></figure></div>\n<p>This will generate the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L62-L70\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds [\"Sean\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;) VALUES ($1)-- binds [&#x22;Sean&#x22;]\"><div></div></button></div></figure></div>\n<p>If we want to provide values for more than one column, we can pass a tuple.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L72-L78\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">((</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Tess</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Brown</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"insert_into(users)    .values((name.eq(&#x22;Tess&#x22;), hair_color.eq(&#x22;Brown&#x22;)))    .execute(conn)\"><div></div></button></div></figure></div>\n<p>This will generate the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L80-L88\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Tess\", \"Brown\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;, &#x22;hair_color&#x22;) VALUES ($1, $2)-- binds: [&#x22;Tess&#x22;, &#x22;Brown&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"insertable\">Insertable</h2><a class=\"sl-anchor-link\" href=\"#insertable\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Insertable</span></a></div>\n<p>Working with tuples is the typical way to do an insert\nif you just have some values that you want to stick in the database.\nBut what if your data is coming from another source,\nlike a web form deserialized by Serde?\nItd be annoying to have to write\n<code dir=\"auto\">(name.eq(user.name), hair_color.eq(user.hair_color))</code>.</p>\n<p>Diesel provides the <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.Insertable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Insertable</code></a> trait for this case.\n<code dir=\"auto\">Insertable</code> maps your struct to columns in the database.\nWe can derive this automatically by adding [<code dir=\"auto\">#[derive(Insertable)]</code>] to our type.</p>\n<p>[<code dir=\"auto\">#[derive(Insertable)]</code>]: <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Insertable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://docs.diesel.rs/2.3.x/diesel/prelude/derive.Insertable.html</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L23-L30\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Deserialize, Insertable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> UserForm&#x3C;'a> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'a str>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users;#[derive(Deserialize, Insertable)]#[diesel(table_name = users)]pub struct UserForm<&#x27;a> {    name: &#x26;&#x27;a str,    hair_color: Option<&#x26;&#x27;a str>,}\"><div></div></button></div></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L90-L99\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">json</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#984E4D\">r</span><span style=\"--0:#D9F5DD;--1:#111111\">#\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">{ \"name\": \"Sean\", \"hair_color\": \"Black\" }</span><span style=\"--0:#D9F5DD;--1:#111111\">\"#</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user_form</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> serde_json</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">from_str</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;UserForm>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">json</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">user_form</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;let json = r#&#x22;{ &#x22;name&#x22;: &#x22;Sean&#x22;, &#x22;hair_color&#x22;: &#x22;Black&#x22; }&#x22;#;let user_form = serde_json::from_str::<UserForm>(json)?;insert_into(users).values(&#x26;user_form).execute(conn)?;Ok(())\"><div></div></button></div></figure></div>\n<p>This will generate the same SQL as if we had used a tuple.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L101-L111\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Sean\", \"Black\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;, &#x22;hair_color&#x22;) VALUES ($1, $2)-- binds: [&#x22;Sean&#x22;, &#x22;Black&#x22;]\"><div></div></button></div></figure></div>\n<p>If one of the fields is <code dir=\"auto\">None</code>, the default value will be inserted for that field.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L113-L122\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">json</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#984E4D\">r</span><span style=\"--0:#D9F5DD;--1:#111111\">#\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">{ \"name\": \"Ruby\", \"hair_color\": null }</span><span style=\"--0:#D9F5DD;--1:#111111\">\"#</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user_form</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> serde_json</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">from_str</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;UserForm>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">json</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">user_form</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;let json = r#&#x22;{ &#x22;name&#x22;: &#x22;Ruby&#x22;, &#x22;hair_color&#x22;: null }&#x22;#;let user_form = serde_json::from_str::<UserForm>(json)?;insert_into(users).values(&#x26;user_form).execute(conn)?;Ok(())\"><div></div></button></div></figure></div>\n<p>That will generate the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L124-L134\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C792EA;--1:#8844AE\">DEFAULT</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Ruby\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;, &#x22;hair_color&#x22;) VALUES ($1, DEFAULT)-- binds: [&#x22;Ruby&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"batch-insert\">Batch Insert</h2><a class=\"sl-anchor-link\" href=\"#batch-insert\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Batch Insert</span></a></div>\n<p>If we want to insert more than one row at a time,\nwe can do that by passing a <code dir=\"auto\">&#x26;Vec</code> or slice of any of the forms used above.\nKeep in mind that youre always passing a reference here.</p>\n<p>On backends that support the <code dir=\"auto\">DEFAULT</code> keyword (all backends except SQLite),\nthe data will be inserted in a single query.\nOn SQLite, one query will be performed per row.</p>\n<aside aria-label=\"Customizing the usage of DEFAULT values\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Customizing the usage of <code dir=\"auto\">DEFAULT</code> values</p><div class=\"starlight-aside__content\"><p>You can use the <code dir=\"auto\">#[diesel(treat_none_as_default_value = false)]</code> attribute on a struct to disable using <code dir=\"auto\">DEFAULT</code> in place of <code dir=\"auto\">None</code>\nvalues and rather use <code dir=\"auto\">NULL</code> values for such fields. This enables for example real batch inserts with the SQLite backend.</p></div></aside>\n<p>For example, if we wanted to insert two rows with a single value,\nwe can just use a <code dir=\"auto\">Vec</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L136-L142\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Tess</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)])</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users)    .values(&#x26;vec![name.eq(&#x22;Sean&#x22;), name.eq(&#x22;Tess&#x22;)])    .execute(conn)\"><div></div></button></div></figure></div>\n<p>Which generates the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L144-L153\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">), ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds [\"Sean\", \"Tess\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;) VALUES ($1), ($2)-- binds [&#x22;Sean&#x22;, &#x22;Tess&#x22;]\"><div></div></button></div></figure></div>\n<p>If we wanted to use <code dir=\"auto\">DEFAULT</code> for some of our rows, we can use an option here.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L155-L161\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[Some(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)), None])</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users)    .values(&#x26;vec![Some(name.eq(&#x22;Sean&#x22;)), None])    .execute(conn)\"><div></div></button></div></figure></div>\n<p>Note that the type here is <code dir=\"auto\">Option&#x3C;Eq&#x3C;Column, Value>></code> not <code dir=\"auto\">Eq&#x3C;Column, Option&#x3C;Value>></code>.\nDoing <code dir=\"auto\">column.eq(None)</code> would insert <code dir=\"auto\">NULL</code> not <code dir=\"auto\">DEFAULT</code>.\nThis generates the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L163-L172\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">), (</span><span style=\"--0:#C792EA;--1:#8844AE\">DEFAULT</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds [\"Sean\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;) VALUES ($1), (DEFAULT)-- binds [&#x22;Sean&#x22;]\"><div></div></button></div></figure></div>\n<p>We can do the same thing with tuples.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L174-L183\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Black</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Tess</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Brown</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users)    .values(&#x26;vec![        (name.eq(&#x22;Sean&#x22;), hair_color.eq(&#x22;Black&#x22;)),        (name.eq(&#x22;Tess&#x22;), hair_color.eq(&#x22;Brown&#x22;)),    ])    .execute(conn)\"><div></div></button></div></figure></div>\n<p>Which generates the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L185-L198\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">), ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">4</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Sean\", \"Black\", \"Tess\", \"Brown\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;, &#x22;hair_color&#x22;)VALUES ($1, $2), ($3, $4)-- binds: [&#x22;Sean&#x22;, &#x22;Black&#x22;, &#x22;Tess&#x22;, &#x22;Brown&#x22;]\"><div></div></button></div></figure></div>\n<p>Once again, we can use an <code dir=\"auto\">Option</code> for any of the fields to insert <code dir=\"auto\">DEFAULT</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L200-L209\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">), Some(</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Black</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Ruby</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">), None),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users)    .values(&#x26;vec![        (name.eq(&#x22;Sean&#x22;), Some(hair_color.eq(&#x22;Black&#x22;))),        (name.eq(&#x22;Ruby&#x22;), None),    ])    .execute(conn)\"><div></div></button></div></figure></div>\n<p>Which generates the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L211-L224\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">), ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C792EA;--1:#8844AE\">DEFAULT</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Sean\", \"Black\", \"Ruby\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;, &#x22;hair_color&#x22;)VALUES ($1, $2), ($3, DEFAULT)-- binds: [&#x22;Sean&#x22;, &#x22;Black&#x22;, &#x22;Ruby&#x22;]\"><div></div></button></div></figure></div>\n<p>Finally, <code dir=\"auto\">Insertable</code> structs can be used for batch insert as well.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L226-L238\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">json</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#984E4D\">r</span><span style=\"--0:#D9F5DD;--1:#111111\">#\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#984E4D\">    </span></span><span style=\"--0:#ECC48D;--1:#984E4D\">{ \"name\": \"Sean\", \"hair_color\": \"Black\" },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#984E4D\">    </span></span><span style=\"--0:#ECC48D;--1:#984E4D\">{ \"name\": \"Tess\", \"hair_color\": \"Brown\" }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#ECC48D;--1:#984E4D\">]</span><span style=\"--0:#D9F5DD;--1:#111111\">\"#</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user_form</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> serde_json</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">from_str</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;Vec&#x3C;UserForm>>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">json</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">user_form</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;let json = r#&#x22;[    { &#x22;name&#x22;: &#x22;Sean&#x22;, &#x22;hair_color&#x22;: &#x22;Black&#x22; },    { &#x22;name&#x22;: &#x22;Tess&#x22;, &#x22;hair_color&#x22;: &#x22;Brown&#x22; }]&#x22;#;let user_form = serde_json::from_str::<Vec<UserForm>>(json)?;insert_into(users).values(&#x26;user_form).execute(conn)?;Ok(())\"><div></div></button></div></figure></div>\n<p>This generates the same SQL as if we had used a tuple:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L211-L224\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">), ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">4</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Sean\", \"Black\", \"Tess\", \"Brown\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;, &#x22;hair_color&#x22;)VALUES ($1, $2), ($3, $4)-- binds: [&#x22;Sean&#x22;, &#x22;Black&#x22;, &#x22;Tess&#x22;, &#x22;Brown&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"the-returning-clause\">The <code dir=\"auto\">RETURNING</code> Clause</h2><a class=\"sl-anchor-link\" href=\"#the-returning-clause\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled The RETURNING Clause</span></a></div>\n<br>\n<p>On backends that support the <code dir=\"auto\">RETURNING</code> clause (such as PostgreSQL and SQLite),\nwe can get data back from our insert as well.\nOn the SQLite backend, support for the <code dir=\"auto\">RETURNING</code> clause can be\nenabled with a feature flag, <code dir=\"auto\">returning_clauses_for_sqlite_3_35</code>.\nMySQL does not support <code dir=\"auto\">RETURNING</code> clauses.\nTo get back all of the inserted rows,\nwe can call <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.get_results\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.get_results</code></a> instead of <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.RunQueryDsl.html#method.execute\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.execute</code></a>.</p>\n<p>Given this struct:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L32-L39\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, PartialEq, Debug)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Option&#x3C;String>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SystemTime,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SystemTime,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, PartialEq, Debug)]struct User {    id: i32,    name: String,    hair_color: Option<String>,    created_at: SystemTime,    updated_at: SystemTime,}\"><div></div></button></div></figure></div>\n<p>We can use <code dir=\"auto\">get_results</code> with this test:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L256-L292\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">select;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;SystemTime>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">inserted_users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Tess</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_results</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">expected_users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> None,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Tess</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> None,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">];</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">assert_eq!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">expected_users</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">inserted_users</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::select;use schema::users::dsl::*;let now = select(diesel::dsl::now).get_result::<SystemTime>(conn)?;let inserted_users = insert_into(users)    .values(&#x26;vec![        (id.eq(1), name.eq(&#x22;Sean&#x22;)),        (id.eq(2), name.eq(&#x22;Tess&#x22;)),    ])    .get_results(conn)?;let expected_users = vec![    User {        id: 1,        name: &#x22;Sean&#x22;.into(),        hair_color: None,        created_at: now,        updated_at: now,    },    User {        id: 2,        name: &#x22;Tess&#x22;.into(),        hair_color: None,        created_at: now,        updated_at: now,    },];assert_eq!(expected_users, inserted_users);\"><div></div></button></div></figure></div>\n<p>To inspect the SQL generated by <code dir=\"auto\">.get_results</code> or <code dir=\"auto\">.get_result</code>,\nwe will need to call <code dir=\"auto\">.as_query</code> before passing it to <code dir=\"auto\">debug_query</code>.\nThe query in the last test generates the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L294-L306\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">), ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">4</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">RETURNING </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">created_at</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">updated_at</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [1, \"Sean\", 2, \"Tess\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;id&#x22;, &#x22;name&#x22;) VALUES ($1, $2), ($3, $4)RETURNING &#x22;users&#x22;.&#x22;id&#x22;, &#x22;users&#x22;.&#x22;name&#x22;, &#x22;users&#x22;.&#x22;hair_color&#x22;,          &#x22;users&#x22;.&#x22;created_at&#x22;, &#x22;users&#x22;.&#x22;updated_at&#x22;-- binds: [1, &#x22;Sean&#x22;, 2, &#x22;Tess&#x22;]\"><div></div></button></div></figure></div>\n<p>Youll notice that weve never given an explicit value for <code dir=\"auto\">created_at</code> and\n<code dir=\"auto\">updated_at</code> in any of our examples.\nWith Diesel, you typically wont set those values in Rust.\nTypically these columns get set with <code dir=\"auto\">DEFAULT CURRENT_TIMESTAMP</code>,\nand a trigger is used to change <code dir=\"auto\">updated_at</code> on updates.\nIf youre using PostgreSQL, you can use a built-in trigger\nby running <code dir=\"auto\">SELECT diesel_manage_updated_at('users');</code> in a migration.</p>\n<p>If we expect one row instead of multiple, we can call <code dir=\"auto\">.get_result</code> instead of\n<code dir=\"auto\">.get_results</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L308-L332\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">select;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;SystemTime>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">inserted_user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">((</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Ruby</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">expected_user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">3</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Ruby</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> None,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">created_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">updated_at</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">now</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">assert_eq!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">expected_user</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">inserted_user</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::select;use schema::users::dsl::*;let now = select(diesel::dsl::now).get_result::<SystemTime>(conn)?;let inserted_user = insert_into(users)    .values((id.eq(3), name.eq(&#x22;Ruby&#x22;)))    .get_result(conn)?;let expected_user = User {    id: 3,    name: &#x22;Ruby&#x22;.into(),    hair_color: None,    created_at: now,    updated_at: now,};assert_eq!(expected_user, inserted_user);\"><div></div></button></div></figure></div>\n<p>This generates the same SQL as <code dir=\"auto\">get_results</code>:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L334-L347\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, $</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">RETURNING </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">hair_color</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">created_at</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">updated_at</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [3, \"Ruby\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;id&#x22;, &#x22;name&#x22;) VALUES ($1, $2)RETURNING &#x22;users&#x22;.&#x22;id&#x22;, &#x22;users&#x22;.&#x22;name&#x22;, &#x22;users&#x22;.&#x22;hair_color&#x22;,          &#x22;users&#x22;.&#x22;created_at&#x22;, &#x22;users&#x22;.&#x22;updated_at&#x22;-- binds: [3, &#x22;Ruby&#x22;]\"><div></div></button></div></figure></div>\n<p>Finally, if we only want a single column back, we can call <code dir=\"auto\">.returning()</code> explicitly.\nThis code would return the inserted ID:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L349-L356\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/lib.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Ruby</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">returning</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use schema::users::dsl::*;insert_into(users)    .values(name.eq(&#x22;Ruby&#x22;))    .returning(id)    .get_result(conn)\"><div></div></button></div></figure></div>\n<p>Which generates the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/all_about_inserts/src/lib.rs#L358-L367\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Generated SQL</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">INSERT INTO</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">VALUES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ($</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">RETURNING </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">users</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- binds: [\"Ruby\"]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"INSERT INTO &#x22;users&#x22; (&#x22;name&#x22;) VALUES ($1)RETURNING &#x22;users&#x22;.&#x22;id&#x22;-- binds: [&#x22;Ruby&#x22;]\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"upsert\">Upsert</h2><a class=\"sl-anchor-link\" href=\"#upsert\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Upsert</span></a></div>\n<br>\n<p>Every type of insert statement covered in this guide can also be used for\ninsert or update queries, also known as upsert.\nThe specifics of upsert are covered extensively in the API documentation.</p>\n<p>For PostgreSQL and SQLite, see the <a href=\"https://docs.diesel.rs/2.3.x/diesel/upsert/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::upsert</code></a> module.\nFor MySQL, upsert is done via <code dir=\"auto\">REPLACE</code>.\nSee <a href=\"https://docs.diesel.rs/2.3.x/diesel/fn.replace_into.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">replace_into</code></a> for details.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"conclusion\">Conclusion</h2><a class=\"sl-anchor-link\" href=\"#conclusion\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Conclusion</span></a></div>\n<br>\n<p>While there are a lot of examples in this guide,\nultimately the only difference between various kinds of insert statements\nis the argument passed to <code dir=\"auto\">.values</code>.</p>\n<p>All examples in this guide are run as part of Diesels test suite.\nYou can find the full code examples for each backend at these links:</p>\n<ul>\n<li><a href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/all_about_inserts\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PostgreSQL</a></li>\n<li><a href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/mysql/all_about_inserts\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">MySQL</a></li>\n<li><a href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/sqlite/all_about_inserts\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">SQLite</a></li>\n</ul>",{headings:278,localImagePaths:294,remoteImagePaths:295,frontmatter:296,imagePaths:297},[279,282,285,288,291],{depth:65,slug:280,text:281},"insertable","Insertable",{depth:65,slug:283,text:284},"batch-insert","Batch Insert",{depth:65,slug:286,text:287},"the-returning-clause","The RETURNING Clause",{depth:65,slug:289,text:290},"upsert","Upsert",{depth:65,slug:292,text:293},"conclusion","Conclusion",[],[],{title:268,lang:157},[],"guides",{id:298,data:300,body:305,filePath:306,digest:307,rendered:308},{title:301,editUrl:16,head:302,template:44,sidebar:303,pagefind:16,draft:32},"Guides to Diesel",[],{hidden:32,attrs:304},{},"#### [Getting Started](/guides/getting-started)\n\nEverything you need to know to install and configure Diesel, and create your first application.\n\n#### [All About Selects](/guides/all-about-selects)\n\nIn this guide you will learn how to build Diesel queries and how query results are mapped to your Rust data structures.\n\n#### [All About Updates](/guides/all-about-updates)\n\nThis guide covers everything you need to know about constructing UPDATE queries with Diesel.\n\n#### [All About Inserts](/guides/all-about-inserts)\n\nJust like the last guide, but this guide covers INSERT queries.\n\n#### [Relations](/guides/relations)\n\nThis guide covers everything you need to know about querying data from more than one table with Diesel.\n\n#### [Composing Applications with Diesel](/guides/composing-applications)\n\nThis guide covers how to structure your application, and best practices for reusing code.\n\n#### [Schema in Depth](/guides/schema-in-depth)\n\nEver wondered what exactly diesel print-schema and table! are doing?\nThis guide will walk you through exactly what code gets generated, and how it's done.\n\n#### [Extending Diesel](/guides/extending-diesel)\n\nWant to use a feature Diesel doesn't support? Have a user defined SQL function?\nWish Diesel had custom query helpers (like pagination)?\nThis guide will cover everything you need to know about extending Diesel\nwith new functionality.\n\n#### [Configuring Diesel CLI](/guides/configuring-diesel-cli)\n\nThis guide will cover all available configuration options in `diesel.toml`, and what they do.\n\n#### [Diesel 2.0 migration guide](/guides/migration-guide/)\n\nThis guide contains information about how to resolve breaking changes while updating from Diesel\n1.4.x to Diesel 2.0\n\n### Valuable third party resources\n\n* [RustWeek 2025 Diesel Workshop](https://blog.weiznich.de/rustweek_2025.html)\n* [EuroRust 2024 Diesel Workshop](https://blog.weiznich.de/eurorust_2024.html)\n\nDo you have found some valuable resource that should be linked here? Submit an issue [here](https://github.com/sgrif/diesel.rs-website)","src/content/docs/guides/index.md","65c3e0e6689e0c2a",{html:309,metadata:310},"<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"getting-started\"><a href=\"/guides/getting-started\">Getting Started</a></h4><a class=\"sl-anchor-link\" href=\"#getting-started\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Getting Started</span></a></div>\n<p>Everything you need to know to install and configure Diesel, and create your first application.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"all-about-selects\"><a href=\"/guides/all-about-selects\">All About Selects</a></h4><a class=\"sl-anchor-link\" href=\"#all-about-selects\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled All About Selects</span></a></div>\n<p>In this guide you will learn how to build Diesel queries and how query results are mapped to your Rust data structures.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"all-about-updates\"><a href=\"/guides/all-about-updates\">All About Updates</a></h4><a class=\"sl-anchor-link\" href=\"#all-about-updates\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled All About Updates</span></a></div>\n<p>This guide covers everything you need to know about constructing UPDATE queries with Diesel.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"all-about-inserts\"><a href=\"/guides/all-about-inserts\">All About Inserts</a></h4><a class=\"sl-anchor-link\" href=\"#all-about-inserts\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled All About Inserts</span></a></div>\n<p>Just like the last guide, but this guide covers INSERT queries.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"relations\"><a href=\"/guides/relations\">Relations</a></h4><a class=\"sl-anchor-link\" href=\"#relations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Relations</span></a></div>\n<p>This guide covers everything you need to know about querying data from more than one table with Diesel.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"composing-applications-with-diesel\"><a href=\"/guides/composing-applications\">Composing Applications with Diesel</a></h4><a class=\"sl-anchor-link\" href=\"#composing-applications-with-diesel\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Composing Applications with Diesel</span></a></div>\n<p>This guide covers how to structure your application, and best practices for reusing code.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"schema-in-depth\"><a href=\"/guides/schema-in-depth\">Schema in Depth</a></h4><a class=\"sl-anchor-link\" href=\"#schema-in-depth\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Schema in Depth</span></a></div>\n<p>Ever wondered what exactly diesel print-schema and table! are doing?\nThis guide will walk you through exactly what code gets generated, and how its done.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"extending-diesel\"><a href=\"/guides/extending-diesel\">Extending Diesel</a></h4><a class=\"sl-anchor-link\" href=\"#extending-diesel\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Extending Diesel</span></a></div>\n<p>Want to use a feature Diesel doesnt support? Have a user defined SQL function?\nWish Diesel had custom query helpers (like pagination)?\nThis guide will cover everything you need to know about extending Diesel\nwith new functionality.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"configuring-diesel-cli\"><a href=\"/guides/configuring-diesel-cli\">Configuring Diesel CLI</a></h4><a class=\"sl-anchor-link\" href=\"#configuring-diesel-cli\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Configuring Diesel CLI</span></a></div>\n<p>This guide will cover all available configuration options in <code dir=\"auto\">diesel.toml</code>, and what they do.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"diesel-20-migration-guide\"><a href=\"/guides/migration-guide/\">Diesel 2.0 migration guide</a></h4><a class=\"sl-anchor-link\" href=\"#diesel-20-migration-guide\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Diesel 2.0 migration guide</span></a></div>\n<p>This guide contains information about how to resolve breaking changes while updating from Diesel\n1.4.x to Diesel 2.0</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"valuable-third-party-resources\">Valuable third party resources</h3><a class=\"sl-anchor-link\" href=\"#valuable-third-party-resources\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Valuable third party resources</span></a></div>\n<ul>\n<li><a href=\"https://blog.weiznich.de/rustweek_2025.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">RustWeek 2025 Diesel Workshop</a></li>\n<li><a href=\"https://blog.weiznich.de/eurorust_2024.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">EuroRust 2024 Diesel Workshop</a></li>\n</ul>\n<p>Do you have found some valuable resource that should be linked here? Submit an issue <a href=\"https://github.com/sgrif/diesel.rs-website\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a></p>",{headings:311,localImagePaths:340,remoteImagePaths:341,frontmatter:342,imagePaths:343},[312,316,318,320,322,325,327,330,332,334,337],{depth:313,slug:314,text:315},4,"getting-started","Getting Started",{depth:313,slug:317,text:231},"all-about-selects",{depth:313,slug:319,text:207},"all-about-updates",{depth:313,slug:321,text:268},"all-about-inserts",{depth:313,slug:323,text:324},"relations","Relations",{depth:313,slug:326,text:162},"composing-applications-with-diesel",{depth:313,slug:328,text:329},"schema-in-depth","Schema in Depth",{depth:313,slug:331,text:180},"extending-diesel",{depth:313,slug:333,text:101},"configuring-diesel-cli",{depth:313,slug:335,text:336},"diesel-20-migration-guide","Diesel 2.0 migration guide",{depth:246,slug:338,text:339},"valuable-third-party-resources","Valuable third party resources",[],[],{title:301,lang:157},[],"guides/migration-guide",{id:344,data:346,body:350,filePath:351,digest:352,rendered:353},{title:336,editUrl:16,head:347,template:44,sidebar:348,pagefind:16,draft:32},[],{hidden:32,attrs:349},{},"Diesel 2.0 introduces substantial changes to Diesel's inner workings. \nIn some cases this impacts code written using Diesel 1.4.x. \nThis document outlines notable changes and presents potential update strategies. \nWe recommend to start the upgrade by removing the usage of all items that \nare marked as deprecated in Diesel 1.4.x.\n\nAny code base migrating to Diesel 2.0 is expected to be affected at least by \nthe following changes:\n\n* [Diesel now requires a mutable reference to the connection](#2-0-0-mutable-connection)\n* [Changed derive attributes](#2-0-0-derive-attributes)\n\nUsers of `diesel_migration` are additionally affected by the following change:\n\n* [`diesel_migration` rewrite](#2-0-0-upgrade-migrations)\n\nUsers of `BoxableExpression` might be affected by the following change:\n\n* [Changed nullability of operators](#2-0-0-nullability-ops)\n\nUsers of tables containing a column of the type `Array<T>` are affected by the following change:\n\n* [Changed nullability of array elements](#2-0-0-nullability-of-array-elements)\n\nUsers that implement support for their SQL types or type mappings are affected \nby the following changes:\n\n* [Changed required traits for custom SQL types](#2-0-0-custom-type-implementation)\n* [Changed `ToSql` implementations](#2-0-0-to-sql)\n* [Changed `FromSql` implementations](#2-0-0-from-sql)\n\n`no_arg_sql_function!` macro is now pending deprecation.\nUsers of the macro are advised to consider `sql_function!` macro.\n\n* [Deprecated usage of `no_arg_sql_function!` macro](#2-0-0-no_arg_sql_function)\n\nUsers of `eq_any` on the PostgreSQL backend might hit type rejection error in rare cases.\n\n* [Changed accepted argument to `eq_any()` for the PostgreSQL backend](#2-0-0-changed_eq_any)\n\nUsers that update generic Diesel code will also be affected by the following changes:\n\n* [Removing `NonAggregate` in favor of `ValidGrouping`](#2-0-0-upgrade-non-aggregate)\n* [Changed generic bounds](#2-0-0-generic-changes)\n\nAdditionally this release contains many changes for users that implemented a custom backend/connection.\nWe do not provide explicit migration steps but we encourage users to reach out with questions pertaining to these changes. \n\n\n## Mutable Connections required<a name=\"2-0-0-mutable-connection\"></a>\n<br />\n\nDiesel now requires mutable access to the [`Connection`] to perform any database interaction. The following changes\nare required for all usages of any [`Connection`] type:\n\n[`Connection`]: http://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html\n\n\n```diff title=\"Change\"\n- let connection = PgConnection::establish_connection(\"\")?;\n- let result = some_query.load(&connection)?;\n+ let mut connection = PgConnection::establish_connection(\"\")?;\n+ let result = some_query.load(&mut connection)?;\n```\n\nWe expect this to be a straightforward change as the connection already can execute only one query at a time.\n\n\n## Derive attributes<a name=\"2-0-0-derive-attributes\"></a>\n<br />\n\nWe have updated all of our Diesel derive attributes to follow the patterns that are used\nwidely in the Rust's ecosystem. This means that all of them need to be wrapped by `#[diesel()]` now.  You can now specify multiple attributes on the same line using `,` separator.\n\nThis is backward compatible and thus all of your old attributes will still work, but with\nwarnings. The attributes can be upgraded by either looking at the warnings or by reading\ndiesel derive documentation reference.\n\n## `diesel_migration` rewrite<a name = \"2-0-0-upgrade-migrations\"></a>\n<br />\n\nWe have completely rewritten the `diesel_migration` crate. As a part of this rewrite all \nfree standing functions are removed from `diesel_migration`. Equivalent functionality \nis now provided by the [`MigrationHarness`] trait, which is implemented for any [`Connection` ]\ntype and for [`HarnessWithOutput`]. Refer to their documentations for details.\n\nAdditionally, this rewrite changed the way we provide migrations. Instead of having our own implementation\nfor file based and embedded migration we now provide a unified [`MigrationSource`] trait to abstract \nover the differences. `diesel_migration` provides two implementations:\n\n* [`FileBasedMigrations`], which mirrors the existing behaviour to load raw sql migrations at run time\nform a specific directory\n* [`EmbeddedMigrations`], which mirrors the existing [`embed_migrations!()`] macro. \n\nFinally the [`embed_migrations!()`] macro itself changed. Instead of generating a magical embedded module \nit now generates an instance of [`EmbeddedMigrations`], that could be stored in a constant for example.\n\nThat means code using [`embed_migrations!()`] needs to be changed from\n\n[`MigrationHarness`]: http://docs.diesel.rs/2.0.x/diesel_migrations/trait.MigrationHarness.html\n[`HarnessWithOutput`]: http://docs.diesel.rs/2.0.x/diesel_migrations/struct.HarnessWithOutput.html\n[`FileBasedMigrations`]: http://docs.diesel.rs/2.0.x/diesel_migrations/struct.FileBasedMigrations.html\n[`EmbeddedMigrations`]: http://docs.diesel.rs/2.0.x/diesel_migrations/struct.EmbeddedMigrations.html\n[`embed_migrations!()`]: http://docs.diesel.rs/2.0.x/diesel_migrations/macro.embed_migrations.html\n[`MigrationSource`]: http://docs.diesel.rs/2.0.x/diesel/migration/trait.MigrationSource.html\n\n\n```rust title=\"Change\"\nembed_migrations!()\n\nfn run_migration(conn: &PgConnection) {\n    embedded_migrations::run(conn).unwrap()\n}\n```\n\nto \n\n\n```rust title=\"Change\"\npub const MIGRATIONS: EmbeddedMigrations = embed_migrations!();\n\nfn run_migration(conn: &mut PgConnection) {\n    conn.run_pending_migrations(MIGRATIONS).unwrap();\n}\n```\n\n\n## Changed nullability of operators<a name=\"2-0-0-nullability-ops\"></a>\n<br />\n\nWe changed the way how we handle the propagation of null values through binary operators. Diesel 1.x always assumed \nthat the result of a binary operation `value_a > value_b` is not nullable, which does not match the behaviour of the \nunderlying databases. `value_a > null` may return a `NULL` value there. With Diesel 2.0 we changed this to match more\nclosely the behaviour of the underlying databases. We expect this change to have the biggest impact on existing usages\nof `BoxableExpression` as it may change the resulting sql type there. As a possible workaround for divering sql types \nthere we recommend to use one of the following functions:\n\n* [`NullableExpressionMethods::nullable()`](http://docs.diesel.rs/2.0.x/diesel/expression_methods/trait.NullableExpressionMethods.html#method.nullable)\n* [`NullableExpressionMethods::assume_not_null()`](http://docs.diesel.rs/2.0.x/diesel/expression_methods/trait.NullableExpressionMethods.html#method.assume_not_null)\n\n## Changed nullability of array elements<a name=\"2-0-0-nullability-of-array-elements\"></a>\n<br />\n\nWe changed the inferred SQL type for columns with array types for the PostgreSQL backend. Instead of using `Array<ST>` \nwe now infer `Array<Nullable<ST>>` to support arrays containing `NULL` values. This change implies a change mapping\nof columns of the corresponding types. It is possible to handle this change using one of the following strategies:\n\n* Use `Vec<Option<T>>` as rust side type instead of `Vec<T>`\n* Manually set the corresponding column to `Array<ST>` in your schema, to signal that this array does not contain null values. You may want to use the [`patch_file`] key for diesel CLI for this.\n* Use [`#[diesel(deserialize_as = \"\")]`] to explicitly overwrite the  deserialization implementation used for this specific struct field. Checkout the documentation of [`#[derive(Queryable)]`] for details.\n\n[`patch_file`]: ./configuring-diesel-cli.html\n[`#[diesel(deserialize_as = \"\")]`]: http://docs.diesel.rs/2.0.x/diesel/deserialize/derive.Queryable.html#optional-field-attributes\n[`#[derive(Queryable)]`]: http://docs.diesel.rs/2.0.x/diesel/deserialize/derive.Queryable.html\n\n## Custom SQL type implementations<a name=\"2-0-0-custom-type-implementation\"></a>\n<br />\n\nWe changed how we mark sql types as nullable at type level. For this we replaced the `NonNull` trait with a \nmore generic [`SqlType`] trait, which allows to mark a sql type as (non-) nullable. This may affect custom\nsql type implementations.\n\nUsers that already use the existing [`#[derive(SqlType)]`] do not need to change any code. The derive internally\ngenerates the correct code after the update. Users that use a manual implementation of `NonNull` need to replace\nit with a corresponding [`SqlType`] implementation:\n\n[`SqlType`]: http://docs.diesel.rs/2.0.x/diesel/sql_types/trait.SqlType.html\n[`#[derive(SqlType)]`]: http://docs.diesel.rs/2.0.x/diesel/sql_types/derive.SqlType.html\n\n```diff title=\"Change\"\n- impl NonNull for MyCustomSqlType {}\n+ impl SqlType for MyCustomSqlType {\n+     type IsNull = diesel::sql_types::is_nullable::NotNull;\n+ }\n```\n\n\nAdditionally, the diesel CLI tool was changed so that it automatically generates the Rust side definition of custom SQL types \nas long as they appear on any table. This feature currently only supports the PostgreSQL backend, as all other supported backends\ndo not support real custom types at SQL level at all.\n\n## Changed `ToSql` implementations<a name=\"2-0-0-to-sql\"></a>\n<br />\n\nWe restructured the way Diesel serializes Rust values to their backend specific representation.\nThis enables us to skip copying the value at all if the specific backend supports writing to a \nshared buffer. Unfortunately, this feature requires changes to the [`ToSql`] trait. This change introduces\na lifetime that ensures that a value implementing [`ToSql`] outlives the underlying serialisation buffer.\nAdditionally we separated the output buffer type for Sqlite from the type used for PostgreSQL and Mysql.\n\nThis has the implication that for generic implementations using a inner existing [`ToSql`] implementation you cannot\ncreate temporary values anymore and forward them to the inner implementation.\n\nFor backend concrete implementations, the following functions allow You to work around this limitation:\n\n* [`Output::reborrow()`] for the `Pg` and `Mysql` backend\n* [`Output::set_value()`] for the `Sqlite` backend (Refer to the documentation of [`SqliteBindValue`] for accepted values)\n\n[`ToSql`]: http://docs.diesel.rs/2.0.x/diesel/serialize/trait.ToSql.html\n[`Output::reborrow()`]: http://docs.diesel.rs/2.0.x/diesel/serialize/struct.Output.html#method.reborrow\n[`Output::set_value()`]: http://docs.diesel.rs/2.0.x/diesel/serialize/struct.Output.html#method.set_value\n[`SqliteBindValue`]: http://docs.diesel.rs/2.0.x/diesel/sqlite/struct.SqliteBindValue.html\n\n\n## Changed `FromSql` implementations<a name=\"2-0-0-from-sql\"></a>\n<br />\n\nWe changed the raw value representation for both PostgreSQL and MySQL\nbackends, from a `&[u8]` to an opaque type. This allows us to include additional information like the database side\ntype there. This change enables users to write [`FromSql`] implementations that decide dynamically what kind of value\nwas received. The new value types for both backends expose a `as_bytes()` method to access the underlying byte buffer.\n\n[`FromSql`]: http://docs.diesel.rs/2.0.x/diesel/deserialize/trait.FromSql.html\n\nAny affected backend needs to perform the following changes:\n\n```diff title=\"Change\"\nimpl<DB: Backend> FromSql<YourSqlType, DB> for YourType {\n-    fn from_sql(bytes: &[u8]) -> deserialize::Result<Self> {\n+    fn from_sql(value: backend::RawValue<'_, DB>) -> deserialize::Result<Self> {\n+        let bytes = value.as_bytes();\n         // \n     }\n}\n```\n\n\n## `no_arg_sql_function`<a name=\"2-0-0-no_arg_sql_function\"></a>\n<br />\n\nThe [`no_arg_sql_function!`] was deprecated without direct replacement. At the same time the\n[`sql_function!`] macro gained support for sql functions without argument. This support generates slightly \ndifferent code. Instead of representing the sql function as zero sized struct, [`sql_function!`] will generate an ordinary function call without arguments. This requires changing any usage of the generated dsl. This change \naffects all of the usages of the [`no_arg_sql_function!`] in third party crates.\n\n[`no_arg_sql_function!`]: http://docs.diesel.rs/2.0.x/diesel/macro.no_arg_sql_function.html\n[`sql_function!`]: http://docs.diesel.rs/2.0.x/diesel/expression/functions/macro.sql_function.html\n\n```diff title=\"Change\"\n- no_arg_sql_function!(now, sql_types::Timestamp, \"Represents the SQL NOW() function\");\n- \n- diesel::select(now)\n \n+ sql_function!{\n+     /// Represents the SQL NOW() function\n+     fn now() -> sql_types::Timestamp;\n+ }\n+\n+ diesel::select(now())\n```\n\n\n## Changed accepted argument to `eq_any()` for the PostgreSQL backend <a name=\"2-0-0-changed_eq_any\"></a>\n<br />\n\nDiesel 2.0 introduces an optimisation that replaces the `IN($1, ..., $n)` expression generated previously by `.eq_any()` with the more optimised `= ANY($1)` which binds the parameter as single array instead of binding each element separately. This improves the performance of large lists and allows us to keep such queries in the prepared statement cache, which enables future performance improvements. Unfortunately not all previously accepted arguments are accepted now. Newly rejected cases include:\n\n* A list of arrays where the `values` variable in `col.eq_any(values)` has the type `Vec<Vec<T>>`\n* Using `.eq_any()` on several columns at one via `(table::col_a, table_col::b).eq_any(values)`\n\nBoth cases can be worked around by using boxed queries and repeated chained equality checks.\n\n## Replacement of `NonAggregate` with `ValidGrouping`<a name=\"2-0-0-upgrade-non-aggregate\"></a>\n<br />\n\nDiesel now fully enforces the aggregation rules, which required us to change the way we represent the aggregation \nat the type system level. This is used to provide `group_by` support. Diesel's aggregation rules \nmatch the semantics of PostgreSQL or MySQL with the `ONLY_FULL_GROUP_BY` option enabled.\n\nAs part of this change we removed the `NonAggregate` trait in favor of a new, more expressive [`ValidGrouping`]\ntrait. Existing implementations of `NonAggregate` must be replaced with an equivalent [`ValidGrouping`] implementation.\n\n[`ValidGrouping`]: http://docs.diesel.rs/2.0.x/diesel/expression/trait.ValidGrouping.html\n\nThe following change shows how to replace an existing implementation with a strictly equivalent implementation.\n\n\n```diff title=\"Change\"\n- impl NonAggregate for MyQueryNode {}\n+ impl ValidGrouping<()> for MyQueryNode {\n+    type IsAggregate = is_aggregate::No;\n+ }\n```\n\nAdditional changes may be required to adapt custom query ast implementations to fully support `group_by` clauses. \nRefer to the documentation of [`ValidGrouping`] for details.\n\nIn addition, any occurrence of `NonAggregate` in trait bounds needs to be replaced. Again, the following\nchange shows the strictly equivalent version:\n\n```diff title=\"Change\"\n where\n-     T: NonAggregate,\n+     T: ValidGrouping<()>,\n+     T::IsAggregate: MixedGrouping<is_aggregate::No, Output = is_aggregate::No>,\n+     is_aggregate::No: MixedGrouping<T::IsAggregate, Output = is_aggregate::No>,\n```\n\n## Other changes to generics<a name=\"2-0-0-generic-changes\"></a>\n<br />\n\nIn addition to the changes listed above, we changed numerous internal details of Diesel. This will have impact on\nmost codebases that include non-trivial generic code abstracting over Diesel. This section tries to list as much of those\nchanges as possible\n\n### Removed most of the non-public reachable API\n<br />\n\nWith Diesel 2.0 we removed most of the API which was marked with `#[doc(hidden)]`. Technically these parts of the API \nhave always been private to Diesel. This change enforces this distinction in stricter way. In addition, some\nparts of these formerly hidden API are now documented and exposed behind the\n`i-implement-a-third-party-backend-and-opt-into-breaking-changes` crate feature. As the name already implies \nwe reserve the right to change these APIs between different Diesel 2.x minor releases, so you should always pin\na concrete minor release version if you use these APIs.\nIf you depended on such an API and you cannot find a suitable replacement we invite you to work with us on exposing the corresponding \nfeature as part of the stable API.\n\n### Changed structure of the deserialization traits\n<br />\n\nWe changed the internal structure of the [`FromSqlRow`], [`Queryable`] and [`QueryableByName`] trait family used for deserialization. This change allows us to unify our deserialization code.\nWe hopefully put sufficient wild card implementations in place so that old trait bounds imply \nthe right trait anyway. For cases where this does not hold true, the following changes may be required:\n\n`Queryable<ST, DB>` is now equivalent to `FromSqlRow<ST, DB>`. The latter is used as an actual trait bound \non the corresponding [`RunQueryDsl`] methods.\n`QueryableByName<DB>` is now equivalent to `FromSqlRow<Untyped, DB>`. The latter is used as an actual trait \non the corresponding [`RunQueryDsl`] methods.\n\n[`FromSqlRow`]: http://docs.diesel.rs/2.0.x/diesel/deserialize/trait.FromSqlRow.html\n[`Queryable`]: http://docs.diesel.rs/2.0.x/diesel/prelude/trait.Queryable.html\n[`QueryableByName`]: http://docs.diesel.rs/2.0.x/diesel/prelude/trait.QueryableByName.html\n\n### Changed the scope of `QueryFragment` implementations\n<br />\n\nWith Diesel 2.0, we introduced a way to specialise [`QueryFragment`] implementations for specific backend, while \nproviding a generic implementation for other backends. To be able to use this feature in the future we marked\nexisting wild card [`QueryFragment`] implementations with an additional [`DieselReserveSpecialization`]. \nRustc suggests just adding an additional trait bound on this trait. It's not possible to add a bound on \nthis trait without opting into breaking changes and it's almost never required to actually do that. Any\noccurrence of an error mentioning this trait can simply be fixed by adding a trait bound like follows:\n\n[`QueryFragment`]: http://docs.diesel.rs/2.0.x/diesel/query_builder/trait.QueryFragment.html\n[`DieselReserveSpecialization`]: http://docs.diesel.rs/2.0.x/diesel/backend/trait.DieselReserveSpecialization.html\n\n```rust title=\"Change\"\nwhere\n    QueryAstNodeMentionedInTheErrorMessage: QueryFragment<BackendType>\n```\n\nThis rule has one notable exception: Third party backend implementations. We expect those backends to opt into the \n`i-implement-a-third-party-backend-and-opt-into-breaking-changes` feature anyway, as it's otherwise not possible to \nimplement a third party backend.","src/content/docs/guides/migration-guide.md","775baae8687ca7f2",{html:354,metadata:355},"<p>Diesel 2.0 introduces substantial changes to Diesels inner workings.\nIn some cases this impacts code written using Diesel 1.4.x.\nThis document outlines notable changes and presents potential update strategies.\nWe recommend to start the upgrade by removing the usage of all items that\nare marked as deprecated in Diesel 1.4.x.</p>\n<p>Any code base migrating to Diesel 2.0 is expected to be affected at least by\nthe following changes:</p>\n<ul>\n<li><a href=\"#2-0-0-mutable-connection\">Diesel now requires a mutable reference to the connection</a></li>\n<li><a href=\"#2-0-0-derive-attributes\">Changed derive attributes</a></li>\n</ul>\n<p>Users of <code dir=\"auto\">diesel_migration</code> are additionally affected by the following change:</p>\n<ul>\n<li><a href=\"#2-0-0-upgrade-migrations\"><code dir=\"auto\">diesel_migration</code> rewrite</a></li>\n</ul>\n<p>Users of <code dir=\"auto\">BoxableExpression</code> might be affected by the following change:</p>\n<ul>\n<li><a href=\"#2-0-0-nullability-ops\">Changed nullability of operators</a></li>\n</ul>\n<p>Users of tables containing a column of the type <code dir=\"auto\">Array&#x3C;T></code> are affected by the following change:</p>\n<ul>\n<li><a href=\"#2-0-0-nullability-of-array-elements\">Changed nullability of array elements</a></li>\n</ul>\n<p>Users that implement support for their SQL types or type mappings are affected\nby the following changes:</p>\n<ul>\n<li><a href=\"#2-0-0-custom-type-implementation\">Changed required traits for custom SQL types</a></li>\n<li><a href=\"#2-0-0-to-sql\">Changed <code dir=\"auto\">ToSql</code> implementations</a></li>\n<li><a href=\"#2-0-0-from-sql\">Changed <code dir=\"auto\">FromSql</code> implementations</a></li>\n</ul>\n<p><code dir=\"auto\">no_arg_sql_function!</code> macro is now pending deprecation.\nUsers of the macro are advised to consider <code dir=\"auto\">sql_function!</code> macro.</p>\n<ul>\n<li><a href=\"#2-0-0-no_arg_sql_function\">Deprecated usage of <code dir=\"auto\">no_arg_sql_function!</code> macro</a></li>\n</ul>\n<p>Users of <code dir=\"auto\">eq_any</code> on the PostgreSQL backend might hit type rejection error in rare cases.</p>\n<ul>\n<li><a href=\"#2-0-0-changed_eq_any\">Changed accepted argument to <code dir=\"auto\">eq_any()</code> for the PostgreSQL backend</a></li>\n</ul>\n<p>Users that update generic Diesel code will also be affected by the following changes:</p>\n<ul>\n<li><a href=\"#2-0-0-upgrade-non-aggregate\">Removing <code dir=\"auto\">NonAggregate</code> in favor of <code dir=\"auto\">ValidGrouping</code></a></li>\n<li><a href=\"#2-0-0-generic-changes\">Changed generic bounds</a></li>\n</ul>\n<p>Additionally this release contains many changes for users that implemented a custom backend/connection.\nWe do not provide explicit migration steps but we encourage users to reach out with questions pertaining to these changes.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"mutable-connections-required\">Mutable Connections required<a name=\"2-0-0-mutable-connection\"></a></h2><a class=\"sl-anchor-link\" href=\"#mutable-connections-required\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Mutable Connections required</span></a></div>\n<br>\n<p>Diesel now requires mutable access to the <a href=\"http://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Connection</code></a> to perform any database interaction. The following changes\nare required for all usages of any <a href=\"http://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Connection</code></a> type:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"diff\"><code><div class=\"ec-line highlight del\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">let connection = PgConnection::establish_connection(\"\")?;</span></div></div><div class=\"ec-line highlight del\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">let result = some_query.load(&#x26;connection)?;</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">let mut connection = PgConnection::establish_connection(\"\")?;</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">let result = some_query.load(&#x26;mut connection)?;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let connection = PgConnection::establish_connection(&#x22;&#x22;)?;let result = some_query.load(&#x26;connection)?;let mut connection = PgConnection::establish_connection(&#x22;&#x22;)?;let result = some_query.load(&#x26;mut connection)?;\"><div></div></button></div></figure></div>\n<p>We expect this to be a straightforward change as the connection already can execute only one query at a time.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"derive-attributes\">Derive attributes<a name=\"2-0-0-derive-attributes\"></a></h2><a class=\"sl-anchor-link\" href=\"#derive-attributes\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Derive attributes</span></a></div>\n<br>\n<p>We have updated all of our Diesel derive attributes to follow the patterns that are used\nwidely in the Rusts ecosystem. This means that all of them need to be wrapped by <code dir=\"auto\">#[diesel()]</code> now.  You can now specify multiple attributes on the same line using <code dir=\"auto\">,</code> separator.</p>\n<p>This is backward compatible and thus all of your old attributes will still work, but with\nwarnings. The attributes can be upgraded by either looking at the warnings or by reading\ndiesel derive documentation reference.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"diesel_migration-rewrite\"><code dir=\"auto\">diesel_migration</code> rewrite<a name=\"2-0-0-upgrade-migrations\"></a></h2><a class=\"sl-anchor-link\" href=\"#diesel_migration-rewrite\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled diesel_migration rewrite</span></a></div>\n<br>\n<p>We have completely rewritten the <code dir=\"auto\">diesel_migration</code> crate. As a part of this rewrite all\nfree standing functions are removed from <code dir=\"auto\">diesel_migration</code>. Equivalent functionality\nis now provided by the <a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/trait.MigrationHarness.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">MigrationHarness</code></a> trait, which is implemented for any <a href=\"http://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Connection</code> </a>\ntype and for <a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/struct.HarnessWithOutput.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">HarnessWithOutput</code></a>. Refer to their documentations for details.</p>\n<p>Additionally, this rewrite changed the way we provide migrations. Instead of having our own implementation\nfor file based and embedded migration we now provide a unified <a href=\"http://docs.diesel.rs/2.0.x/diesel/migration/trait.MigrationSource.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">MigrationSource</code></a> trait to abstract\nover the differences. <code dir=\"auto\">diesel_migration</code> provides two implementations:</p>\n<ul>\n<li><a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/struct.FileBasedMigrations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">FileBasedMigrations</code></a>, which mirrors the existing behaviour to load raw sql migrations at run time\nform a specific directory</li>\n<li><a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/struct.EmbeddedMigrations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">EmbeddedMigrations</code></a>, which mirrors the existing <a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/macro.embed_migrations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">embed_migrations!()</code></a> macro.</li>\n</ul>\n<p>Finally the <a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/macro.embed_migrations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">embed_migrations!()</code></a> macro itself changed. Instead of generating a magical embedded module\nit now generates an instance of <a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/struct.EmbeddedMigrations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">EmbeddedMigrations</code></a>, that could be stored in a constant for example.</p>\n<p>That means code using <a href=\"http://docs.diesel.rs/2.0.x/diesel_migrations/macro.embed_migrations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">embed_migrations!()</code></a> needs to be changed from</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">embed_migrations!</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">run_migration</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">PgConnection) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">embedded_migrations</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">run</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">unwrap</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"embed_migrations!()fn run_migration(conn: &#x26;PgConnection) {    embedded_migrations::run(conn).unwrap()}\"><div></div></button></div></figure></div>\n<p>to</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">const</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">MIGRATIONS</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> EmbeddedMigrations </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">embed_migrations!</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">run_migration</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> PgConnection) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">run_pending_migrations</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">MIGRATIONS</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">unwrap</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub const MIGRATIONS: EmbeddedMigrations = embed_migrations!();fn run_migration(conn: &#x26;mut PgConnection) {    conn.run_pending_migrations(MIGRATIONS).unwrap();}\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"changed-nullability-of-operators\">Changed nullability of operators<a name=\"2-0-0-nullability-ops\"></a></h2><a class=\"sl-anchor-link\" href=\"#changed-nullability-of-operators\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed nullability of operators</span></a></div>\n<br>\n<p>We changed the way how we handle the propagation of null values through binary operators. Diesel 1.x always assumed\nthat the result of a binary operation <code dir=\"auto\">value_a > value_b</code> is not nullable, which does not match the behaviour of the\nunderlying databases. <code dir=\"auto\">value_a > null</code> may return a <code dir=\"auto\">NULL</code> value there. With Diesel 2.0 we changed this to match more\nclosely the behaviour of the underlying databases. We expect this change to have the biggest impact on existing usages\nof <code dir=\"auto\">BoxableExpression</code> as it may change the resulting sql type there. As a possible workaround for divering sql types\nthere we recommend to use one of the following functions:</p>\n<ul>\n<li><a href=\"http://docs.diesel.rs/2.0.x/diesel/expression_methods/trait.NullableExpressionMethods.html#method.nullable\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">NullableExpressionMethods::nullable()</code></a></li>\n<li><a href=\"http://docs.diesel.rs/2.0.x/diesel/expression_methods/trait.NullableExpressionMethods.html#method.assume_not_null\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">NullableExpressionMethods::assume_not_null()</code></a></li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"changed-nullability-of-array-elements\">Changed nullability of array elements<a name=\"2-0-0-nullability-of-array-elements\"></a></h2><a class=\"sl-anchor-link\" href=\"#changed-nullability-of-array-elements\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed nullability of array elements</span></a></div>\n<br>\n<p>We changed the inferred SQL type for columns with array types for the PostgreSQL backend. Instead of using <code dir=\"auto\">Array&#x3C;ST></code>\nwe now infer <code dir=\"auto\">Array&#x3C;Nullable&#x3C;ST>></code> to support arrays containing <code dir=\"auto\">NULL</code> values. This change implies a change mapping\nof columns of the corresponding types. It is possible to handle this change using one of the following strategies:</p>\n<ul>\n<li>Use <code dir=\"auto\">Vec&#x3C;Option&#x3C;T>></code> as rust side type instead of <code dir=\"auto\">Vec&#x3C;T></code></li>\n<li>Manually set the corresponding column to <code dir=\"auto\">Array&#x3C;ST></code> in your schema, to signal that this array does not contain null values. You may want to use the <a href=\"./configuring-diesel-cli.html\"><code dir=\"auto\">patch_file</code></a> key for diesel CLI for this.</li>\n<li>Use [<code dir=\"auto\">#[diesel(deserialize_as = \"\")]</code>] to explicitly overwrite the  deserialization implementation used for this specific struct field. Checkout the documentation of [<code dir=\"auto\">#[derive(Queryable)]</code>] for details.</li>\n</ul>\n<p>[<code dir=\"auto\">#[diesel(deserialize_as = \"\")]</code>]: <a href=\"http://docs.diesel.rs/2.0.x/diesel/deserialize/derive.Queryable.html#optional-field-attributes\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">http://docs.diesel.rs/2.0.x/diesel/deserialize/derive.Queryable.html#optional-field-attributes</a>\n[<code dir=\"auto\">#[derive(Queryable)]</code>]: <a href=\"http://docs.diesel.rs/2.0.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">http://docs.diesel.rs/2.0.x/diesel/deserialize/derive.Queryable.html</a></p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"custom-sql-type-implementations\">Custom SQL type implementations<a name=\"2-0-0-custom-type-implementation\"></a></h2><a class=\"sl-anchor-link\" href=\"#custom-sql-type-implementations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Custom SQL type implementations</span></a></div>\n<br>\n<p>We changed how we mark sql types as nullable at type level. For this we replaced the <code dir=\"auto\">NonNull</code> trait with a\nmore generic <a href=\"http://docs.diesel.rs/2.0.x/diesel/sql_types/trait.SqlType.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">SqlType</code></a> trait, which allows to mark a sql type as (non-) nullable. This may affect custom\nsql type implementations.</p>\n<p>Users that already use the existing [<code dir=\"auto\">#[derive(SqlType)]</code>] do not need to change any code. The derive internally\ngenerates the correct code after the update. Users that use a manual implementation of <code dir=\"auto\">NonNull</code> need to replace\nit with a corresponding <a href=\"http://docs.diesel.rs/2.0.x/diesel/sql_types/trait.SqlType.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">SqlType</code></a> implementation:</p>\n<p>[<code dir=\"auto\">#[derive(SqlType)]</code>]: <a href=\"http://docs.diesel.rs/2.0.x/diesel/sql_types/derive.SqlType.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">http://docs.diesel.rs/2.0.x/diesel/sql_types/derive.SqlType.html</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"diff\"><code><div class=\"ec-line highlight del\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">impl NonNull for MyCustomSqlType {}</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">impl SqlType for MyCustomSqlType {</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">type IsNull = diesel::sql_types::is_nullable::NotNull;</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl NonNull for MyCustomSqlType {}impl SqlType for MyCustomSqlType {    type IsNull = diesel::sql_types::is_nullable::NotNull;}\"><div></div></button></div></figure></div>\n<p>Additionally, the diesel CLI tool was changed so that it automatically generates the Rust side definition of custom SQL types\nas long as they appear on any table. This feature currently only supports the PostgreSQL backend, as all other supported backends\ndo not support real custom types at SQL level at all.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"changed-tosql-implementations\">Changed <code dir=\"auto\">ToSql</code> implementations<a name=\"2-0-0-to-sql\"></a></h2><a class=\"sl-anchor-link\" href=\"#changed-tosql-implementations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed ToSql implementations</span></a></div>\n<br>\n<p>We restructured the way Diesel serializes Rust values to their backend specific representation.\nThis enables us to skip copying the value at all if the specific backend supports writing to a\nshared buffer. Unfortunately, this feature requires changes to the <a href=\"http://docs.diesel.rs/2.0.x/diesel/serialize/trait.ToSql.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ToSql</code></a> trait. This change introduces\na lifetime that ensures that a value implementing <a href=\"http://docs.diesel.rs/2.0.x/diesel/serialize/trait.ToSql.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ToSql</code></a> outlives the underlying serialisation buffer.\nAdditionally we separated the output buffer type for Sqlite from the type used for PostgreSQL and Mysql.</p>\n<p>This has the implication that for generic implementations using a inner existing <a href=\"http://docs.diesel.rs/2.0.x/diesel/serialize/trait.ToSql.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ToSql</code></a> implementation you cannot\ncreate temporary values anymore and forward them to the inner implementation.</p>\n<p>For backend concrete implementations, the following functions allow You to work around this limitation:</p>\n<ul>\n<li><a href=\"http://docs.diesel.rs/2.0.x/diesel/serialize/struct.Output.html#method.reborrow\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Output::reborrow()</code></a> for the <code dir=\"auto\">Pg</code> and <code dir=\"auto\">Mysql</code> backend</li>\n<li><a href=\"http://docs.diesel.rs/2.0.x/diesel/serialize/struct.Output.html#method.set_value\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Output::set_value()</code></a> for the <code dir=\"auto\">Sqlite</code> backend (Refer to the documentation of <a href=\"http://docs.diesel.rs/2.0.x/diesel/sqlite/struct.SqliteBindValue.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">SqliteBindValue</code></a> for accepted values)</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"changed-fromsql-implementations\">Changed <code dir=\"auto\">FromSql</code> implementations<a name=\"2-0-0-from-sql\"></a></h2><a class=\"sl-anchor-link\" href=\"#changed-fromsql-implementations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed FromSql implementations</span></a></div>\n<br>\n<p>We changed the raw value representation for both PostgreSQL and MySQL\nbackends, from a <code dir=\"auto\">&#x26;[u8]</code> to an opaque type. This allows us to include additional information like the database side\ntype there. This change enables users to write <a href=\"http://docs.diesel.rs/2.0.x/diesel/deserialize/trait.FromSql.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">FromSql</code></a> implementations that decide dynamically what kind of value\nwas received. The new value types for both backends expose a <code dir=\"auto\">as_bytes()</code> method to access the underlying byte buffer.</p>\n<p>Any affected backend needs to perform the following changes:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"diff\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">impl&#x3C;DB: Backend> FromSql&#x3C;YourSqlType, DB> for YourType {</span></div></div><div class=\"ec-line highlight del\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">fn from_sql(bytes: &#x26;[u8]) -> deserialize::Result&#x3C;Self> {</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">fn from_sql(value: backend::RawValue&#x3C;'_, DB>) -> deserialize::Result&#x3C;Self> {</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">let bytes = value.as_bytes();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">         </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">// </span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">     </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl<DB: Backend> FromSql<YourSqlType, DB> for YourType {    fn from_sql(bytes: &#x26;[u8]) -> deserialize::Result<Self> {    fn from_sql(value: backend::RawValue<&#x27;_, DB>) -> deserialize::Result<Self> {        let bytes = value.as_bytes();         //      }}\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"no_arg_sql_function\"><code dir=\"auto\">no_arg_sql_function</code><a name=\"2-0-0-no_arg_sql_function\"></a></h2><a class=\"sl-anchor-link\" href=\"#no_arg_sql_function\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled no_arg_sql_function</span></a></div>\n<br>\n<p>The <a href=\"http://docs.diesel.rs/2.0.x/diesel/macro.no_arg_sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">no_arg_sql_function!</code></a> was deprecated without direct replacement. At the same time the\n<a href=\"http://docs.diesel.rs/2.0.x/diesel/expression/functions/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">sql_function!</code></a> macro gained support for sql functions without argument. This support generates slightly\ndifferent code. Instead of representing the sql function as zero sized struct, <a href=\"http://docs.diesel.rs/2.0.x/diesel/expression/functions/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">sql_function!</code></a> will generate an ordinary function call without arguments. This requires changing any usage of the generated dsl. This change\naffects all of the usages of the <a href=\"http://docs.diesel.rs/2.0.x/diesel/macro.no_arg_sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">no_arg_sql_function!</code></a> in third party crates.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"diff\"><code><div class=\"ec-line highlight del\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">no_arg_sql_function!(now, sql_types::Timestamp, \"Represents the SQL NOW() function\");</span></div></div><div class=\"ec-line highlight del\"><div class=\"code\">\n</div></div><div class=\"ec-line highlight del\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel::select(now)</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">sql_function!{</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">/// Represents the SQL NOW() function</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">fn now() -> sql_types::Timestamp;</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\">\n</div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel::select(now())</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"no_arg_sql_function!(now, sql_types::Timestamp, &#x22;Represents the SQL NOW() function&#x22;);diesel::select(now)sql_function!{    /// Represents the SQL NOW() function    fn now() -> sql_types::Timestamp;}diesel::select(now())\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"changed-accepted-argument-to-eq_any-for-the-postgresql-backend\">Changed accepted argument to <code dir=\"auto\">eq_any()</code> for the PostgreSQL backend <a name=\"2-0-0-changed_eq_any\"></a></h2><a class=\"sl-anchor-link\" href=\"#changed-accepted-argument-to-eq_any-for-the-postgresql-backend\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed accepted argument to eq_any() for the PostgreSQL backend </span></a></div>\n<br>\n<p>Diesel 2.0 introduces an optimisation that replaces the <code dir=\"auto\">IN($1, ..., $n)</code> expression generated previously by <code dir=\"auto\">.eq_any()</code> with the more optimised <code dir=\"auto\">= ANY($1)</code> which binds the parameter as single array instead of binding each element separately. This improves the performance of large lists and allows us to keep such queries in the prepared statement cache, which enables future performance improvements. Unfortunately not all previously accepted arguments are accepted now. Newly rejected cases include:</p>\n<ul>\n<li>A list of arrays where the <code dir=\"auto\">values</code> variable in <code dir=\"auto\">col.eq_any(values)</code> has the type <code dir=\"auto\">Vec&#x3C;Vec&#x3C;T>></code></li>\n<li>Using <code dir=\"auto\">.eq_any()</code> on several columns at one via <code dir=\"auto\">(table::col_a, table_col::b).eq_any(values)</code></li>\n</ul>\n<p>Both cases can be worked around by using boxed queries and repeated chained equality checks.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"replacement-of-nonaggregate-with-validgrouping\">Replacement of <code dir=\"auto\">NonAggregate</code> with <code dir=\"auto\">ValidGrouping</code><a name=\"2-0-0-upgrade-non-aggregate\"></a></h2><a class=\"sl-anchor-link\" href=\"#replacement-of-nonaggregate-with-validgrouping\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Replacement of NonAggregate with ValidGrouping</span></a></div>\n<br>\n<p>Diesel now fully enforces the aggregation rules, which required us to change the way we represent the aggregation\nat the type system level. This is used to provide <code dir=\"auto\">group_by</code> support. Diesels aggregation rules\nmatch the semantics of PostgreSQL or MySQL with the <code dir=\"auto\">ONLY_FULL_GROUP_BY</code> option enabled.</p>\n<p>As part of this change we removed the <code dir=\"auto\">NonAggregate</code> trait in favor of a new, more expressive <a href=\"http://docs.diesel.rs/2.0.x/diesel/expression/trait.ValidGrouping.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ValidGrouping</code></a>\ntrait. Existing implementations of <code dir=\"auto\">NonAggregate</code> must be replaced with an equivalent <a href=\"http://docs.diesel.rs/2.0.x/diesel/expression/trait.ValidGrouping.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ValidGrouping</code></a> implementation.</p>\n<p>The following change shows how to replace an existing implementation with a strictly equivalent implementation.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"diff\"><code><div class=\"ec-line highlight del\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">impl NonAggregate for MyQueryNode {}</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">impl ValidGrouping&#x3C;()> for MyQueryNode {</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">type IsAggregate = is_aggregate::No;</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl NonAggregate for MyQueryNode {}impl ValidGrouping<()> for MyQueryNode {   type IsAggregate = is_aggregate::No;}\"><div></div></button></div></figure></div>\n<p>Additional changes may be required to adapt custom query ast implementations to fully support <code dir=\"auto\">group_by</code> clauses.\nRefer to the documentation of <a href=\"http://docs.diesel.rs/2.0.x/diesel/expression/trait.ValidGrouping.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ValidGrouping</code></a> for details.</p>\n<p>In addition, any occurrence of <code dir=\"auto\">NonAggregate</code> in trait bounds needs to be replaced. Again, the following\nchange shows the strictly equivalent version:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"diff\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">where</span></div></div><div class=\"ec-line highlight del\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">     </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T: NonAggregate,</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">     </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T: ValidGrouping&#x3C;()>,</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">     </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">T::IsAggregate: MixedGrouping&#x3C;is_aggregate::No, Output = is_aggregate::No>,</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">     </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">is_aggregate::No: MixedGrouping&#x3C;T::IsAggregate, Output = is_aggregate::No>,</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"where     T: NonAggregate,     T: ValidGrouping<()>,     T::IsAggregate: MixedGrouping<is_aggregate::No, Output = is_aggregate::No>,     is_aggregate::No: MixedGrouping<T::IsAggregate, Output = is_aggregate::No>,\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"other-changes-to-generics\">Other changes to generics<a name=\"2-0-0-generic-changes\"></a></h2><a class=\"sl-anchor-link\" href=\"#other-changes-to-generics\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Other changes to generics</span></a></div>\n<br>\n<p>In addition to the changes listed above, we changed numerous internal details of Diesel. This will have impact on\nmost codebases that include non-trivial generic code abstracting over Diesel. This section tries to list as much of those\nchanges as possible</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"removed-most-of-the-non-public-reachable-api\">Removed most of the non-public reachable API</h3><a class=\"sl-anchor-link\" href=\"#removed-most-of-the-non-public-reachable-api\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Removed most of the non-public reachable API</span></a></div>\n<br>\n<p>With Diesel 2.0 we removed most of the API which was marked with <code dir=\"auto\">#[doc(hidden)]</code>. Technically these parts of the API\nhave always been private to Diesel. This change enforces this distinction in stricter way. In addition, some\nparts of these formerly hidden API are now documented and exposed behind the\n<code dir=\"auto\">i-implement-a-third-party-backend-and-opt-into-breaking-changes</code> crate feature. As the name already implies\nwe reserve the right to change these APIs between different Diesel 2.x minor releases, so you should always pin\na concrete minor release version if you use these APIs.\nIf you depended on such an API and you cannot find a suitable replacement we invite you to work with us on exposing the corresponding\nfeature as part of the stable API.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"changed-structure-of-the-deserialization-traits\">Changed structure of the deserialization traits</h3><a class=\"sl-anchor-link\" href=\"#changed-structure-of-the-deserialization-traits\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed structure of the deserialization traits</span></a></div>\n<br>\n<p>We changed the internal structure of the <a href=\"http://docs.diesel.rs/2.0.x/diesel/deserialize/trait.FromSqlRow.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">FromSqlRow</code></a>, <a href=\"http://docs.diesel.rs/2.0.x/diesel/prelude/trait.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Queryable</code></a> and <a href=\"http://docs.diesel.rs/2.0.x/diesel/prelude/trait.QueryableByName.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryableByName</code></a> trait family used for deserialization. This change allows us to unify our deserialization code.\nWe hopefully put sufficient wild card implementations in place so that old trait bounds imply\nthe right trait anyway. For cases where this does not hold true, the following changes may be required:</p>\n<p><code dir=\"auto\">Queryable&#x3C;ST, DB></code> is now equivalent to <code dir=\"auto\">FromSqlRow&#x3C;ST, DB></code>. The latter is used as an actual trait bound\non the corresponding [<code dir=\"auto\">RunQueryDsl</code>] methods.\n<code dir=\"auto\">QueryableByName&#x3C;DB></code> is now equivalent to <code dir=\"auto\">FromSqlRow&#x3C;Untyped, DB></code>. The latter is used as an actual trait\non the corresponding [<code dir=\"auto\">RunQueryDsl</code>] methods.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"changed-the-scope-of-queryfragment-implementations\">Changed the scope of <code dir=\"auto\">QueryFragment</code> implementations</h3><a class=\"sl-anchor-link\" href=\"#changed-the-scope-of-queryfragment-implementations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Changed the scope of QueryFragment implementations</span></a></div>\n<br>\n<p>With Diesel 2.0, we introduced a way to specialise <a href=\"http://docs.diesel.rs/2.0.x/diesel/query_builder/trait.QueryFragment.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryFragment</code></a> implementations for specific backend, while\nproviding a generic implementation for other backends. To be able to use this feature in the future we marked\nexisting wild card <a href=\"http://docs.diesel.rs/2.0.x/diesel/query_builder/trait.QueryFragment.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryFragment</code></a> implementations with an additional <a href=\"http://docs.diesel.rs/2.0.x/diesel/backend/trait.DieselReserveSpecialization.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">DieselReserveSpecialization</code></a>.\nRustc suggests just adding an additional trait bound on this trait. Its not possible to add a bound on\nthis trait without opting into breaking changes and its almost never required to actually do that. Any\noccurrence of an error mentioning this trait can simply be fixed by adding a trait bound like follows:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Change</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">where</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">QueryAstNodeMentionedInTheErrorMessage</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryFragment&#x3C;BackendType></span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"where    QueryAstNodeMentionedInTheErrorMessage: QueryFragment<BackendType>\"><div></div></button></div></figure></div>\n<p>This rule has one notable exception: Third party backend implementations. We expect those backends to opt into the\n<code dir=\"auto\">i-implement-a-third-party-backend-and-opt-into-breaking-changes</code> feature anyway, as its otherwise not possible to\nimplement a third party backend.</p>",{headings:356,localImagePaths:401,remoteImagePaths:402,frontmatter:403,imagePaths:404},[357,360,363,366,369,372,375,378,381,383,386,389,392,395,398],{depth:65,slug:358,text:359},"mutable-connections-required","Mutable Connections required",{depth:65,slug:361,text:362},"derive-attributes","Derive attributes",{depth:65,slug:364,text:365},"diesel_migration-rewrite","diesel_migration rewrite",{depth:65,slug:367,text:368},"changed-nullability-of-operators","Changed nullability of operators",{depth:65,slug:370,text:371},"changed-nullability-of-array-elements","Changed nullability of array elements",{depth:65,slug:373,text:374},"custom-sql-type-implementations","Custom SQL type implementations",{depth:65,slug:376,text:377},"changed-tosql-implementations","Changed ToSql implementations",{depth:65,slug:379,text:380},"changed-fromsql-implementations","Changed FromSql implementations",{depth:65,slug:382,text:382},"no_arg_sql_function",{depth:65,slug:384,text:385},"changed-accepted-argument-to-eq_any-for-the-postgresql-backend","Changed accepted argument to eq_any() for the PostgreSQL backend ",{depth:65,slug:387,text:388},"replacement-of-nonaggregate-with-validgrouping","Replacement of NonAggregate with ValidGrouping",{depth:65,slug:390,text:391},"other-changes-to-generics","Other changes to generics",{depth:246,slug:393,text:394},"removed-most-of-the-non-public-reachable-api","Removed most of the non-public reachable API",{depth:246,slug:396,text:397},"changed-structure-of-the-deserialization-traits","Changed structure of the deserialization traits",{depth:246,slug:399,text:400},"changed-the-scope-of-queryfragment-implementations","Changed the scope of QueryFragment implementations",[],[],{title:336,lang:157},[],"guides/relations",{id:405,data:407,body:411,filePath:412,digest:413,rendered:414},{title:324,editUrl:16,head:408,template:44,sidebar:409,pagefind:16,draft:32},[],{hidden:32,attrs:410},{},"For this guide, we're going to look at joins, 1-to-many and many-to-many relations in Diesel.\nEach step in this guide will build on the previous, and is meant to be followed along.\n\n**This guide assumes that you have gone through the [Getting Started Guide](/guides/getting-started/)**\n\n## New project\n<br />\n\nLet's make a new project for this guide:\n\n\n```sh title=\"Generate a new project\"\ncargo new --lib diesel_relations\ncd diesel_relations\n```\n\n\nAs before, let's add Diesel and dotenvy to our dependencies.\n\n\n```sh title=\"Add dependencies\"\ncargo add diesel --features \"postgres\"\ncargo add dotenvy\n```\n\n\nYour `Cargo.toml` file should now contain entries similar to the following ones:\n\n\n```toml title=\"Cargo.toml\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/Cargo.toml#L8-L10\"\n[dependencies]\ndiesel = { version = \"2.1.0\", features = [\"postgres\"] }\ndotenvy = \"0.15.6\"\n```\n\n\nAnd a `.env` to point Diesel to the correct database.\n\n```sh title=\".env\"\necho DATABASE_URL=postgres://username:password@localhost/diesel_relations > .env\n```\n\nNow we can set up Diesel by running:\n\n```sh\ndiesel setup\n```\n\n## 1-to-many or 1:m\n<br />\n\nWe need to create two different objects that we want to connect, for the first\n1-to-many example let's create books and pages. A book can have many pages, but\na page can only belong to a single book.\n\n## Migrations\n<br />\n\n```sh\ndiesel migration generate create_books\ndiesel migration generate create_pages\n```\n\nNext, we'll write the SQL for the book migration, which should be straight forward:\n\n\n```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-08-193717_create_books/up.sql\"\nCREATE TABLE books (\n  id SERIAL PRIMARY KEY,\n  title VARCHAR NOT NULL\n);\n```\n\nThe pages migration needs to point to the book they appear in, therefore we add a reference to the book to the migration:\n\n\n```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-08-193718_create_pages/up.sql\"\nCREATE TABLE pages (\n  id SERIAL PRIMARY KEY,\n  page_number INT NOT NULL,\n  content TEXT NOT NULL,\n  book_id INTEGER NOT NULL REFERENCES books(id)\n);\n```\n\n\nLet's add the corresponding down migrations as well:\n\n\n\n```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/relations/migrations/2023-02-08-193717_create_books/down.sql\"\nDROP TABLE books;\n```\n\n\nand again for pages\n\n\n```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/relations/migrations/2023-02-08-193718_create_pages/down.sql\"\nDROP TABLE pages;\n```\n\n\nWe can apply our new migration:\n\n```sh\ndiesel migration run\n```\n\nLet's make sure the down migrations are correct too:\n\n```sh\ndiesel migration redo -n 2\n```\n\n## Schema.rs\n<br />\n\nThe generated schema should now look like this:\n\n\n\n```rust title=\"schema.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/schema.rs\"\n// @generated automatically by Diesel CLI.\n\ndiesel::table! {\n    books (id) {\n        id -> Int4,\n        title -> Varchar,\n    }\n}\n\ndiesel::table! {\n    pages (id) {\n        id -> Int4,\n        page_number -> Int4,\n        content -> Text,\n        book_id -> Int4,\n    }\n}\n\ndiesel::joinable!(pages -> books (book_id));\n\ndiesel::allow_tables_to_appear_in_same_query!(\n    books,\n    pages,\n);\n```\n\nDiesel picked up on the foreign key references. It created a schema for us that has pages as\njoinable into books via the `book_id` and allows for the two to appear in the\nsame query. This allows to join this table without specify an explicit `ON` clause. Diesel generates these `joinable!` instances only for cases where there is only a single relation between two tables based on a non-composite foreign key. All other cases require to specify an explicit the `ON` clause while constructing such joins.\n\n## Models\n<br />\n\nLet's reflect this now in our `model.rs`\n\n\n```rust title=\"src/model.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/model.rs#L22-L38\"\nuse diesel::prelude::*;\n\nuse crate::schema::{books, pages};\n\n\n#[derive(Queryable, Identifiable, Selectable, Debug, PartialEq)]\n#[diesel(table_name = books)]\npub struct Book {\n    pub id: i32,\n    pub title: String,\n}\n\n#[derive(Queryable, Selectable, Identifiable, Associations, Debug, PartialEq)]\n#[diesel(belongs_to(Book))]\n#[diesel(table_name = pages)]\npub struct Page {\n    pub id: i32,\n    pub page_number: i32,\n    pub content: String,\n    pub book_id: i32,\n}\n\n```\n\n\nAssociations in Diesel are always child-to-parent. You can declare an\nassociation between two records with `#[diesel(belongs_to)]`. First we need to add\n[`#[derive(Associations)]`][associations-docs]\n, which will allow us to add `#[diesel(belongs_to(Book))]` to `Page`.\nThat tells  that pages belong to books and thereby reflect our 1-to-many relation.\n\nBy default diesel will assume that your struct contains a field with the lower case\nremote type name appended with `_id`. So for the given example `book_id`. If your\nforeign key field has a different name you can specify that via the `foreign_key` option:\n`#[diesel(belongs_to(Book, foreign_key = book_id))]`\n\n[associations-docs]: https://docs.diesel.rs/2.3.x/diesel/associations/derive.Associations.html\n\n## Reading data\n<br />\n\nFor ease of following this tutorial, we are going to put all the code into `main.rs`. We create a separate function for each part of the guide. See the linked code for the complete file content.\n\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L88-L98\"\nlet momo = books::table\n    .filter(books::title.eq(\"Momo\"))\n    .select(Book::as_select())\n    .get_result(conn)?;\n\n// get pages for a book\nlet pages = Page::belonging_to(&momo)\n    .select(Page::as_select())\n    .load(conn)?;\n\nprintln!(\"Pages for \\\"Momo\\\": \\n {pages:?}\\n\");\n```\n\n\n[`Page::belonging_to`][belonging-to-dsl-docs] allows to query all child records related to one or more\nparent record. For the presented case it will load all pages for the book with the title \"Momo\".\nThis function generates a query for loading these data. It does not execute the query, so that\nit is possible to add additional clauses to the query later on.\nThe generated query is equivalent to `SELECT * FROM pages WHERE book_id IN()` with\na list of given book ids derived from the function input.\n\n\n[belonging-to-dsl-docs]: https://docs.diesel.rs/2.3.x/diesel/prelude/trait.BelongingToDsl.html\n\n\nLoading all pages for a single book is a straight forward query, it becomes more complicated if we\nwant to load all pages per book. This is a classic ORM problem, where frameworks sometimes run in\nthe so called N+1 query problem. That problem describes cases where a framework naively loads all\nbooks first and then execute one query per book to receive the relevant pages. This approach is bad\nfor performance because it executes an unbound number of queries.\n\nDiesel's [associations API] sidesteps that problem by providing a special tailored API for such cases:\n\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L100-L115\"\nlet all_books = books::table.select(Book::as_select()).load(conn)?;\n\n// get all pages for all books\nlet pages = Page::belonging_to(&all_books)\n    .select(Page::as_select())\n    .load(conn)?;\n\n// group the pages per book\nlet pages_per_book = pages\n    .grouped_by(&all_books)\n    .into_iter()\n    .zip(all_books)\n    .map(|(pages, book)| (book, pages))\n    .collect::<Vec<(Book, Vec<Page>)>>();\n\nprintln!(\"Pages per book: \\n {pages_per_book:?}\\n\");\n```\n\n\nHere we use a similar construct as before to load all pages for a given list of books by constructing the\nrelevant query via `Page::belonging_to`. The important difference to before is that we now pass a slice of books\nas argument. This will again construct the equivalent of the `SELECT * FROM pages WHERE book_id IN()` query as\nbefore. The important difference here is that we use the [`.grouped_by`] function to later group each page to the\ncorrect book. In total there are two queries executed in this code block, independently of the number of queried books and pages.\n\n[associations API]: https://docs.diesel.rs/2.3.x/diesel/associations/index.html\n[`.grouped_by`]: https://docs.diesel.rs/2.3.x/diesel/associations/trait.GroupedBy.html\n\n\n:::note[A note on consuming these data]\n\nA common use case for loading associated data is to return a serialized data structure like\n```json\n[{\n    \"id\": 1,\n    \"title\": \"Momo\",\n    \"pages\": [],\n}]\n```\n\nGiven the API provided by diesel, such a structure can easily be implemented by collecting the data in a struct with named fields instead of a tuple and using [`#[serde(flatten)]`](https://serde.rs/field-attrs.html#flatten) on the relevant fields.\n\n```rust\n#[derive(Serialize)]\nstruct BookWithPages {\n    #[serde(flatten)]\n    book: Book,\n    pages: Vec<Page>,\n}\n\n// group the pages per book\nlet pages_per_book = pages\n    .grouped_by(&all_books)\n    .into_iter()\n    .zip(all_books)\n    .map(|(pages, book)| BookWithPages { book, pages })\n    .collect::<Vec<BookWithPages>>();\n\n```\n\n:::\n\n\n## Joins\n<br />\n\nWe have currently loaded all pages for a given book by using the API provided by the `diesel::associations` module.\nThis API is designed to work for parent-child relations, but not the other way around. Using plain SQL joins is\nthe preferred way to resolve such relations the other way around. Diesel provides two kinds of joins: `INNER JOIN` and `LEFT JOIN`, where the former expects that linked elements always exist. The latter allows to include rows with missing linked elements. Both constructs load data by executing a single query.\n\n### `INNER JOIN`\n<br />\n\n[`QueryDsl::inner_join`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.inner_join) allows to construct `INNER JOIN` statements between different tables.\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L70-L76\"\nlet page_with_book = pages::table\n    .inner_join(books::table)\n    .filter(books::title.eq(\"Momo\"))\n    .select((Page::as_select(), Book::as_select()))\n    .load::<(Page, Book)>(conn)?;\n\nprintln!(\"Page-Book pairs: {page_with_book:?}\");\n```\n\n\n`QueryDsl::inner_join()` modifies the constructed query to include a `INNER JOIN` clause based on the provided arguments. The `ON` clause of the join statement can be\ninferred based on the [`joinable!`][doc-joinable] call in your `schema.rs` file. In addition it's possible to specify custom `ON` clauses via [`JoinDsl::on`][doc-on].\nIf no explicit select clause is provided the constructed query will return a tuple of both default select clauses for both sides of the join. This can be deserialized\nto a rust tuple or any compatible type implementing [`Queryable`][doc-queryable].\n\nIt is possible to chain several joins to join multiple tables. The nesting of the joins controls which tables exactly are joined. This means the following two statements are not equal:\n\n```rust\nusers::table.inner_join(posts::table.inner_join(comments::table));\n\n// Results in the following SQL\n// SELECT * FROM users\n// INNER JOIN posts ON users.id = posts.user_id\n// INNER JOIN comments ON post.id = comments.post_id\n\nusers::table.inner_join(posts::table).inner_join(comments::table);\n\n// Results in the following SQL\n// SELECT * FROM users\n// INNER JOIN posts ON users.id = posts.user_id\n// INNER JOIN comments ON users.id = comments.user_id\n\n```\n\nFor joining the same table more than once, refer to the [`alias!`][doc-alias] macro to create distinct aliases.\n\n\n[doc-joinable]: https://docs.diesel.rs/2.3.x/diesel/macro.joinable.html\n[doc-on]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.JoinOnDsl.html#method.on\n[doc-queryable]: https://docs.diesel.rs/2.3.x/diesel/deserialize/trait.Queryable.html\n[doc-alias]: https://docs.diesel.rs/2.3.x/diesel/macro.alias.html\n\n### `LEFT JOIN`\n<br />\n\n[`QueryDsl::left_join`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.left_join) allows to construct `LEFT JOIN` statements between different tables.\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L78-L83\"\nlet book_without_pages = books::table\n    .left_join(pages::table)\n    .select((Book::as_select(), Option::<Page>::as_select()))\n    .load::<(Book, Option<Page>)>(conn)?;\n\nprintln!(\"Book-Page pairs (including empty books): {book_without_pages:?}\");\n```\n\nThis works similar to `QueryDsl::inner_join` with the notable difference that any column returned from a joined table is considered to be nullable. This has several consequences:\n\n* A query like `books::table.left_join(pages::table).load(conn)` returns `(Book, Option<Page>)` or any compatible type\n* Explicit calls to [`QueryDsl::select`](https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select) require\nthat any column that comes from the left joined table is annotated with a [`NullableExpressionMethods::nullable`][doc-nullable] call.\nThis function can be called for individual columns, expressions or tuples containing columns form left joined tables.\n\n[doc-nullable]: https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.NullableExpressionMethods.html#method.nullable\n\n## many-to-many or m:n\n<br />\n\nWe currently have books and they have pages, but books have an author, too. To\nbe precise, a book can have more than one author and an author can have more\nthan one book. So we have a many-to-many relation here. Diesel does not have a\nconcept of `has_many` but instead we are going create a \"join table\"\n`books_authors` and add a `belongs_to` to both `books` and `authors`. Let's see\nthat in action.\n\n## Migrations\n<br />\n\n```sh\ndiesel migration generate create_authors\ndiesel migration generate create_books_authors\n```\n\nLet's keep it simple and just give our `authors` a name.\n\n\n```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084424_add_authors/up.sql\"\nCREATE TABLE authors (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR NOT NULL\n);\n```\n\n\nAnd the corresponding down migration.\n\n\n```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084424_add_authors/down.sql\"\nDROP TABLE authors;\n```\n\n\nThe `books_authors` migration has two foreign keys which point to book's id and\nthe author's id. This allows us to create a many-to-many relation between books\nand authors.\n\n\n\n```sql title=\"up.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084617_add_books_authors/up.sql\"\nCREATE TABLE books_authors (\n  book_id INTEGER REFERENCES books(id),\n  author_id INTEGER REFERENCES authors(id),\n  PRIMARY KEY(book_id, author_id)\n);\n```\n\n\nAnd the corresponding down migration.\n\n\n```sql title=\"down.sql\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084617_add_books_authors/down.sql\"\nDROP TABLE books_authors;\n```\n\n\nLastly, let's run the migrations\n\n\n```sh title=\"Run the migrations\"\ndiesel migration run\ndiesel migration redo -n 2\n```\n\n\n## Model\n<br />\n\nNow let's reflect the join table in the `model.rs`. To keep this brief, let's only look at what we are adding.\n\n\n\n```rust title=\"src/model.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/model.rs#L1-L20\"\nuse diesel::prelude::*;\n\nuse crate::schema::{books, pages, authors, books_authors};\n\n#[derive(Queryable, Selectable, Identifiable, PartialEq, Debug)]\n#[diesel(table_name = authors)]\npub struct Author {\n    pub id: i32,\n    pub name: String,\n}\n\n#[derive(Identifiable, Selectable, Queryable, Associations, Debug)]\n#[diesel(belongs_to(Book))]\n#[diesel(belongs_to(Author))]\n#[diesel(table_name = books_authors)]\n#[diesel(primary_key(book_id, author_id))]\npub struct BookAuthor {\n    pub book_id: i32,\n    pub author_id: i32,\n}\n\n```\n\n\nThe important part is to give `BooksAuthor` two `belongs_to` that point to the book and the author.\n\n## Reading data\n<br />\n\nIf we now want to load all books of a given author we can combine joins and diesels `BelongingToDsl` to load these data:\n\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L121-L131\"\nlet astrid_lindgren = authors::table\n    .filter(authors::name.eq(\"Astrid Lindgren\"))\n    .select(Author::as_select())\n    .get_result(conn)?;\n\n// get all of Astrid Lindgren's books\nlet books = BookAuthor::belonging_to(&astrid_lindgren)\n    .inner_join(books::table)\n    .select(Book::as_select())\n    .load(conn)?;\nprintln!(\"Books by Astrid Lindgren: {books:?}\");\n```\n\n\nAs described before `BookAuthor::belonging_to` constructs a query to which we can chain other clauses. In this case we join the `books` table to include the relevant books and select only the columns relevant for populating the `Book` type. This results in loading all books for a given author.\n\nThe same approach can be applied the other way around, to load all authors for a given book:\n\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L133-L143\"\nlet collaboration = books::table\n    .filter(books::title.eq(\"Pippi and Momo\"))\n    .select(Book::as_select())\n    .get_result(conn)?;\n\n// get authors for the collaboration\nlet authors = BookAuthor::belonging_to(&collaboration)\n    .inner_join(authors::table)\n    .select(Author::as_select())\n    .load(conn)?;\nprintln!(\"Authors for \\\"Pippi and Momo\\\": {authors:?}\");\n```\n\n\nAs before we can use this approach to load a list of all authors and their associated books:\n\n\n```rust title=\"src/main.rs\" link=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L146-L162\"\nlet all_authors = authors::table\n    .select(Author::as_select())\n    .load(conn)?;\n\nlet books = BookAuthor::belonging_to(&authors)\n    .inner_join(books::table)\n    .select((BookAuthor::as_select(), Book::as_select()))\n    .load(conn)?;\n\nlet books_per_author: Vec<(Author, Vec<Book>)> = books\n    .grouped_by(&all_authors)\n    .into_iter()\n    .zip(authors)\n    .map(|(b, author)| (author, b.into_iter().map(|(_, book)| book).collect()))\n    .collect();\n\nprintln!(\"All authors including their books: {books_per_author:?}\");\n```\n\n\nAs before we load all associated books by joining the books table to the query produced by `BookAuthor::belonging_to`. It is important to load the data from `books_authors` as well, as these data include the relevant mapping. The grouping is performed again with the `.grouped_by` method, similar to how this was done for the 1-to-n relations case. We now need to exclude the `BookAuthor` information in the final grouping step explicitly.\n\nThe final code for this tutorial can be found [here](https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations).","src/content/docs/guides/relations.md","1c889f84e93229a2",{html:415,metadata:416},"<p>For this guide, were going to look at joins, 1-to-many and many-to-many relations in Diesel.\nEach step in this guide will build on the previous, and is meant to be followed along.</p>\n<p><strong>This guide assumes that you have gone through the <a href=\"/guides/getting-started/\">Getting Started Guide</a></strong></p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"new-project\">New project</h2><a class=\"sl-anchor-link\" href=\"#new-project\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled New project</span></a></div>\n<br>\n<p>Lets make a new project for this guide:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame is-terminal has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Generate a new project</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">cargo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">--lib</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">diesel_relations</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">cd</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">diesel_relations</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"cargo new --lib diesel_relationscd diesel_relations\"><div></div></button></div></figure></div>\n<p>As before, lets add Diesel and dotenvy to our dependencies.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Add dependencies</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">cargo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">add</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">--features</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">cargo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">add</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">dotenvy</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"cargo add diesel --features &#x22;postgres&#x22;cargo add dotenvy\"><div></div></button></div></figure></div>\n<p>Your <code dir=\"auto\">Cargo.toml</code> file should now contain entries similar to the following ones:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/Cargo.toml#L8-L10\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">Cargo.toml</a></figcaption><pre data-language=\"toml\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[dependencies]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = { </span><span style=\"--0:#C5E478;--1:#3B61B0\">version</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">2.1.0</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">features</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">dotenvy</span><span style=\"--0:#D6DEEB;--1:#403F53\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">0.15.6</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[dependencies]diesel = { version = &#x22;2.1.0&#x22;, features = [&#x22;postgres&#x22;] }dotenvy = &#x22;0.15.6&#x22;\"><div></div></button></div></figure></div>\n<p>And a <code dir=\"auto\">.env</code> to point Diesel to the correct database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">.env</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">echo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">DATABASE_URL=postgres://username:password@localhost/diesel_relations</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">.env</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"echo DATABASE_URL=postgres://username:password@localhost/diesel_relations > .env\"><div></div></button></div></figure></div>\n<p>Now we can set up Diesel by running:</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">setup</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel setup\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"1-to-many-or-1m\">1-to-many or 1:m</h2><a class=\"sl-anchor-link\" href=\"#1-to-many-or-1m\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled 1-to-many or 1:m</span></a></div>\n<br>\n<p>We need to create two different objects that we want to connect, for the first\n1-to-many example lets create books and pages. A book can have many pages, but\na page can only belong to a single book.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"migrations\">Migrations</h2><a class=\"sl-anchor-link\" href=\"#migrations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Migrations</span></a></div>\n<br>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">generate</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">create_books</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">generate</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">create_pages</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel migration generate create_booksdiesel migration generate create_pages\"><div></div></button></div></figure></div>\n<p>Next, well write the SQL for the book migration, which should be straight forward:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-08-193717_create_books/up.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">up.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">CREATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">books</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">id </span><span style=\"--0:#C792EA;--1:#8844AE\">SERIAL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">PRIMARY KEY</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">title </span><span style=\"--0:#C792EA;--1:#8844AE\">VARCHAR</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"CREATE TABLE books (  id SERIAL PRIMARY KEY,  title VARCHAR NOT NULL);\"><div></div></button></div></figure></div>\n<p>The pages migration needs to point to the book they appear in, therefore we add a reference to the book to the migration:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-08-193718_create_pages/up.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">up.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">CREATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">id </span><span style=\"--0:#C792EA;--1:#8844AE\">SERIAL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">PRIMARY KEY</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">page_number </span><span style=\"--0:#C792EA;--1:#8844AE\">INT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">content </span><span style=\"--0:#C792EA;--1:#8844AE\">TEXT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">book_id </span><span style=\"--0:#C792EA;--1:#8844AE\">INTEGER</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">REFERENCES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books(id)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"CREATE TABLE pages (  id SERIAL PRIMARY KEY,  page_number INT NOT NULL,  content TEXT NOT NULL,  book_id INTEGER NOT NULL REFERENCES books(id));\"><div></div></button></div></figure></div>\n<p>Lets add the corresponding down migrations as well:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/relations/migrations/2023-02-08-193717_create_books/down.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">down.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">DROP</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"DROP TABLE books;\"><div></div></button></div></figure></div>\n<p>and again for pages</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/tree/2.3.x/examples/postgres/relations/migrations/2023-02-08-193718_create_pages/down.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">down.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">DROP</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> pages;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"DROP TABLE pages;\"><div></div></button></div></figure></div>\n<p>We can apply our new migration:</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">run</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel migration run\"><div></div></button></div></figure></div>\n<p>Lets make sure the down migrations are correct too:</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">redo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">-n</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel migration redo -n 2\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"schemars\">Schema.rs</h2><a class=\"sl-anchor-link\" href=\"#schemars\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Schema.rs</span></a></div>\n<br>\n<p>The generated schema should now look like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/schema.rs\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">schema.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// @generated automatically by Diesel CLI.</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">books</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Int4,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Varchar,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Int4,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">page_number</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Int4,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">content</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">book_id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Int4,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">joinable!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">books</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">book_id</span><span style=\"--0:#D6DEEB;--1:#403F53\">));</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">allow_tables_to_appear_in_same_query!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">books</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// @generated automatically by Diesel CLI.diesel::table! {    books (id) {        id -> Int4,        title -> Varchar,    }}diesel::table! {    pages (id) {        id -> Int4,        page_number -> Int4,        content -> Text,        book_id -> Int4,    }}diesel::joinable!(pages -> books (book_id));diesel::allow_tables_to_appear_in_same_query!(    books,    pages,);\"><div></div></button></div></figure></div>\n<p>Diesel picked up on the foreign key references. It created a schema for us that has pages as\njoinable into books via the <code dir=\"auto\">book_id</code> and allows for the two to appear in the\nsame query. This allows to join this table without specify an explicit <code dir=\"auto\">ON</code> clause. Diesel generates these <code dir=\"auto\">joinable!</code> instances only for cases where there is only a single relation between two tables based on a non-composite foreign key. All other cases require to specify an explicit the <code dir=\"auto\">ON</code> clause while constructing such joins.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"models\">Models</h2><a class=\"sl-anchor-link\" href=\"#models\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Models</span></a></div>\n<br>\n<p>Lets reflect this now in our <code dir=\"auto\">model.rs</code></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/model.rs#L22-L38\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/model.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{books, pages};</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Identifiable, Selectable, Debug, PartialEq)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Book {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable, Identifiable, Associations, Debug, PartialEq)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(belongs_to(Book))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> pages)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Page {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">page_number</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">content</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">book_id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::{books, pages};#[derive(Queryable, Identifiable, Selectable, Debug, PartialEq)]#[diesel(table_name = books)]pub struct Book {    pub id: i32,    pub title: String,}#[derive(Queryable, Selectable, Identifiable, Associations, Debug, PartialEq)]#[diesel(belongs_to(Book))]#[diesel(table_name = pages)]pub struct Page {    pub id: i32,    pub page_number: i32,    pub content: String,    pub book_id: i32,}\"><div></div></button></div></figure></div>\n<p>Associations in Diesel are always child-to-parent. You can declare an\nassociation between two records with <code dir=\"auto\">#[diesel(belongs_to)]</code>. First we need to add\n<a href=\"https://docs.diesel.rs/2.3.x/diesel/associations/derive.Associations.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Associations)]</code></a>\n, which will allow us to add <code dir=\"auto\">#[diesel(belongs_to(Book))]</code> to <code dir=\"auto\">Page</code>.\nThat tells  that pages belong to books and thereby reflect our 1-to-many relation.</p>\n<p>By default diesel will assume that your struct contains a field with the lower case\nremote type name appended with <code dir=\"auto\">_id</code>. So for the given example <code dir=\"auto\">book_id</code>. If your\nforeign key field has a different name you can specify that via the <code dir=\"auto\">foreign_key</code> option:\n<code dir=\"auto\">#[diesel(belongs_to(Book, foreign_key = book_id))]</code></p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"reading-data\">Reading data</h2><a class=\"sl-anchor-link\" href=\"#reading-data\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Reading data</span></a></div>\n<br>\n<p>For ease of following this tutorial, we are going to put all the code into <code dir=\"auto\">main.rs</code>. We create a separate function for each part of the guide. See the linked code for the complete file content.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L88-L98\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">momo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Momo</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// get pages for a book</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Page</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">belonging_to</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">momo</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Page</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Pages for </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Momo</span><span style=\"--0:#F78C6C;--1:#AA0982\">\\\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">: </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\n</span><span style=\"--0:#ECC48D;--1:#984E4D\"> {pages:?}</span><span style=\"--0:#F78C6C;--1:#AA0982\">\\n</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let momo = books::table    .filter(books::title.eq(&#x22;Momo&#x22;))    .select(Book::as_select())    .get_result(conn)?;// get pages for a booklet pages = Page::belonging_to(&#x26;momo)    .select(Page::as_select())    .load(conn)?;println!(&#x22;Pages for \\&#x22;Momo\\&#x22;: \\n {pages:?}\\n&#x22;);\"><div></div></button></div></figure></div>\n<p><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.BelongingToDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Page::belonging_to</code></a> allows to query all child records related to one or more\nparent record. For the presented case it will load all pages for the book with the title Momo.\nThis function generates a query for loading these data. It does not execute the query, so that\nit is possible to add additional clauses to the query later on.\nThe generated query is equivalent to <code dir=\"auto\">SELECT * FROM pages WHERE book_id IN()</code> with\na list of given book ids derived from the function input.</p>\n<p>Loading all pages for a single book is a straight forward query, it becomes more complicated if we\nwant to load all pages per book. This is a classic ORM problem, where frameworks sometimes run in\nthe so called N+1 query problem. That problem describes cases where a framework naively loads all\nbooks first and then execute one query per book to receive the relevant pages. This approach is bad\nfor performance because it executes an unbound number of queries.</p>\n<p>Diesels <a href=\"https://docs.diesel.rs/2.3.x/diesel/associations/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">associations API</a> sidesteps that problem by providing a special tailored API for such cases:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L100-L115\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all_books</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// get all pages for all books</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Page</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">belonging_to</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">all_books</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Page</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// group the pages per book</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages_per_book</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">grouped_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">all_books</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into_iter</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">zip</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">all_books</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">collect</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;Vec&#x3C;(Book, Vec&#x3C;Page>)>>();</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Pages per book: </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\n</span><span style=\"--0:#ECC48D;--1:#984E4D\"> {pages_per_book:?}</span><span style=\"--0:#F78C6C;--1:#AA0982\">\\n</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let all_books = books::table.select(Book::as_select()).load(conn)?;// get all pages for all bookslet pages = Page::belonging_to(&#x26;all_books)    .select(Page::as_select())    .load(conn)?;// group the pages per booklet pages_per_book = pages    .grouped_by(&#x26;all_books)    .into_iter()    .zip(all_books)    .map(|(pages, book)| (book, pages))    .collect::<Vec<(Book, Vec<Page>)>>();println!(&#x22;Pages per book: \\n {pages_per_book:?}\\n&#x22;);\"><div></div></button></div></figure></div>\n<p>Here we use a similar construct as before to load all pages for a given list of books by constructing the\nrelevant query via <code dir=\"auto\">Page::belonging_to</code>. The important difference to before is that we now pass a slice of books\nas argument. This will again construct the equivalent of the <code dir=\"auto\">SELECT * FROM pages WHERE book_id IN()</code> query as\nbefore. The important difference here is that we use the <a href=\"https://docs.diesel.rs/2.3.x/diesel/associations/trait.GroupedBy.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">.grouped_by</code></a> function to later group each page to the\ncorrect book. In total there are two queries executed in this code block, independently of the number of queried books and pages.</p>\n<aside aria-label=\"A note on consuming these data\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>A note on consuming these data</p><div class=\"starlight-aside__content\"><p>A common use case for loading associated data is to return a serialized data structure like</p><div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">[{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">\"id\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">\"title\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7C5686\">Momo</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">\"pages\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: [</span><span style=\"--0:#FFFFFF;--1:#984E4D\"></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}]</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"[{    &#x22;id&#x22;: 1,    &#x22;title&#x22;: &#x22;Momo&#x22;,    &#x22;pages&#x22;: [],}]\"><div></div></button></div></figure></div><p>Given the API provided by diesel, such a structure can easily be implemented by collecting the data in a struct with named fields instead of a tuple and using <a href=\"https://serde.rs/field-attrs.html#flatten\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[serde(flatten)]</code></a> on the relevant fields.</p><div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Serialize)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BookWithPages {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[serde(flatten)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Book,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;Page>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// group the pages per book</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages_per_book</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">grouped_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">all_books</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into_iter</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">zip</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">all_books</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BookWithPages { </span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> })</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">collect</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;Vec&#x3C;BookWithPages>>();</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Serialize)]struct BookWithPages {    #[serde(flatten)]    book: Book,    pages: Vec<Page>,}// group the pages per booklet pages_per_book = pages    .grouped_by(&#x26;all_books)    .into_iter()    .zip(all_books)    .map(|(pages, book)| BookWithPages { book, pages })    .collect::<Vec<BookWithPages>>();\"><div></div></button></div></figure></div></div></aside>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"joins\">Joins</h2><a class=\"sl-anchor-link\" href=\"#joins\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Joins</span></a></div>\n<br>\n<p>We have currently loaded all pages for a given book by using the API provided by the <code dir=\"auto\">diesel::associations</code> module.\nThis API is designed to work for parent-child relations, but not the other way around. Using plain SQL joins is\nthe preferred way to resolve such relations the other way around. Diesel provides two kinds of joins: <code dir=\"auto\">INNER JOIN</code> and <code dir=\"auto\">LEFT JOIN</code>, where the former expects that linked elements always exist. The latter allows to include rows with missing linked elements. Both constructs load data by executing a single query.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"inner-join\"><code dir=\"auto\">INNER JOIN</code></h3><a class=\"sl-anchor-link\" href=\"#inner-join\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled INNER JOIN</span></a></div>\n<br>\n<p><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.inner_join\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::inner_join</code></a> allows to construct <code dir=\"auto\">INNER JOIN</code> statements between different tables.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L70-L76\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">page_with_book</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> pages</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Momo</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((Page</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(), Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(Page, Book)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Page-Book pairs: {page_with_book:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let page_with_book = pages::table    .inner_join(books::table)    .filter(books::title.eq(&#x22;Momo&#x22;))    .select((Page::as_select(), Book::as_select()))    .load::<(Page, Book)>(conn)?;println!(&#x22;Page-Book pairs: {page_with_book:?}&#x22;);\"><div></div></button></div></figure></div>\n<p><code dir=\"auto\">QueryDsl::inner_join()</code> modifies the constructed query to include a <code dir=\"auto\">INNER JOIN</code> clause based on the provided arguments. The <code dir=\"auto\">ON</code> clause of the join statement can be\ninferred based on the <a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.joinable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">joinable!</code></a> call in your <code dir=\"auto\">schema.rs</code> file. In addition its possible to specify custom <code dir=\"auto\">ON</code> clauses via <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/trait.JoinOnDsl.html#method.on\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">JoinDsl::on</code></a>.\nIf no explicit select clause is provided the constructed query will return a tuple of both default select clauses for both sides of the join. This can be deserialized\nto a rust tuple or any compatible type implementing <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/trait.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Queryable</code></a>.</p>\n<p>It is possible to chain several joins to join multiple tables. The nesting of the joins controls which tables exactly are joined. This means the following two statements are not equal:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(comments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">));</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Results in the following SQL</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// SELECT * FROM users</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// INNER JOIN posts ON users.id = posts.user_id</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// INNER JOIN comments ON post.id = comments.post_id</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(comments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Results in the following SQL</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// SELECT * FROM users</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// INNER JOIN posts ON users.id = posts.user_id</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// INNER JOIN comments ON users.id = comments.user_id</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"users::table.inner_join(posts::table.inner_join(comments::table));// Results in the following SQL// SELECT * FROM users// INNER JOIN posts ON users.id = posts.user_id// INNER JOIN comments ON post.id = comments.post_idusers::table.inner_join(posts::table).inner_join(comments::table);// Results in the following SQL// SELECT * FROM users// INNER JOIN posts ON users.id = posts.user_id// INNER JOIN comments ON users.id = comments.user_id\"><div></div></button></div></figure></div>\n<p>For joining the same table more than once, refer to the <a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.alias.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">alias!</code></a> macro to create distinct aliases.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"left-join\"><code dir=\"auto\">LEFT JOIN</code></h3><a class=\"sl-anchor-link\" href=\"#left-join\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled LEFT JOIN</span></a></div>\n<br>\n<p><a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.left_join\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::left_join</code></a> allows to construct <code dir=\"auto\">LEFT JOIN</code> statements between different tables.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L78-L83\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">book_without_pages</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">left_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(pages</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(), Option</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;Page></span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(Book, Option&#x3C;Page>)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Book-Page pairs (including empty books): {book_without_pages:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let book_without_pages = books::table    .left_join(pages::table)    .select((Book::as_select(), Option::<Page>::as_select()))    .load::<(Book, Option<Page>)>(conn)?;println!(&#x22;Book-Page pairs (including empty books): {book_without_pages:?}&#x22;);\"><div></div></button></div></figure></div>\n<p>This works similar to <code dir=\"auto\">QueryDsl::inner_join</code> with the notable difference that any column returned from a joined table is considered to be nullable. This has several consequences:</p>\n<ul>\n<li>A query like <code dir=\"auto\">books::table.left_join(pages::table).load(conn)</code> returns <code dir=\"auto\">(Book, Option&#x3C;Page>)</code> or any compatible type</li>\n<li>Explicit calls to <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/trait.QueryDsl.html#method.select\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::select</code></a> require\nthat any column that comes from the left joined table is annotated with a <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.NullableExpressionMethods.html#method.nullable\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">NullableExpressionMethods::nullable</code></a> call.\nThis function can be called for individual columns, expressions or tuples containing columns form left joined tables.</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"many-to-many-or-mn\">many-to-many or m:n</h2><a class=\"sl-anchor-link\" href=\"#many-to-many-or-mn\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled many-to-many or m:n</span></a></div>\n<br>\n<p>We currently have books and they have pages, but books have an author, too. To\nbe precise, a book can have more than one author and an author can have more\nthan one book. So we have a many-to-many relation here. Diesel does not have a\nconcept of <code dir=\"auto\">has_many</code> but instead we are going create a join table\n<code dir=\"auto\">books_authors</code> and add a <code dir=\"auto\">belongs_to</code> to both <code dir=\"auto\">books</code> and <code dir=\"auto\">authors</code>. Lets see\nthat in action.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"migrations-1\">Migrations</h2><a class=\"sl-anchor-link\" href=\"#migrations-1\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Migrations</span></a></div>\n<br>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">generate</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">create_authors</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">generate</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">create_books_authors</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel migration generate create_authorsdiesel migration generate create_books_authors\"><div></div></button></div></figure></div>\n<p>Lets keep it simple and just give our <code dir=\"auto\">authors</code> a name.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084424_add_authors/up.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">up.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">CREATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">authors</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">id </span><span style=\"--0:#C792EA;--1:#8844AE\">SERIAL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">PRIMARY KEY</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8844AE\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">VARCHAR</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"CREATE TABLE authors (  id SERIAL PRIMARY KEY,  name VARCHAR NOT NULL);\"><div></div></button></div></figure></div>\n<p>And the corresponding down migration.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084424_add_authors/down.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">down.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">DROP</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> authors;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"DROP TABLE authors;\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">books_authors</code> migration has two foreign keys which point to books id and\nthe authors id. This allows us to create a many-to-many relation between books\nand authors.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084617_add_books_authors/up.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">up.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">CREATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">books_authors</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">book_id </span><span style=\"--0:#C792EA;--1:#8844AE\">INTEGER</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">REFERENCES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books(id),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">author_id </span><span style=\"--0:#C792EA;--1:#8844AE\">INTEGER</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">REFERENCES</span><span style=\"--0:#D6DEEB;--1:#403F53\"> authors(id),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8844AE\">PRIMARY KEY</span><span style=\"--0:#D6DEEB;--1:#403F53\">(book_id, author_id)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"CREATE TABLE books_authors (  book_id INTEGER REFERENCES books(id),  author_id INTEGER REFERENCES authors(id),  PRIMARY KEY(book_id, author_id));\"><div></div></button></div></figure></div>\n<p>And the corresponding down migration.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/migrations/2023-02-17-084617_add_books_authors/down.sql\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">down.sql</a></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">DROP</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books_authors;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"DROP TABLE books_authors;\"><div></div></button></div></figure></div>\n<p>Lastly, lets run the migrations</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Run the migrations</span></figcaption><pre data-language=\"sh\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">run</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">diesel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">migration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3B61B0\">redo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">-n</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel migration rundiesel migration redo -n 2\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"model\">Model</h2><a class=\"sl-anchor-link\" href=\"#model\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Model</span></a></div>\n<br>\n<p>Now lets reflect the join table in the <code dir=\"auto\">model.rs</code>. To keep this brief, lets only look at what we are adding.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/model.rs#L1-L20\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/model.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">prelude</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{books, pages, authors, books_authors};</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable, Identifiable, PartialEq, Debug)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> authors)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Author {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Identifiable, Selectable, Queryable, Associations, Debug)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(belongs_to(Book))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(belongs_to(Author))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books_authors)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(primary_key(book_id, author_id))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BookAuthor {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">book_id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">author_id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::prelude::*;use crate::schema::{books, pages, authors, books_authors};#[derive(Queryable, Selectable, Identifiable, PartialEq, Debug)]#[diesel(table_name = authors)]pub struct Author {    pub id: i32,    pub name: String,}#[derive(Identifiable, Selectable, Queryable, Associations, Debug)]#[diesel(belongs_to(Book))]#[diesel(belongs_to(Author))]#[diesel(table_name = books_authors)]#[diesel(primary_key(book_id, author_id))]pub struct BookAuthor {    pub book_id: i32,    pub author_id: i32,}\"><div></div></button></div></figure></div>\n<p>The important part is to give <code dir=\"auto\">BooksAuthor</code> two <code dir=\"auto\">belongs_to</code> that point to the book and the author.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"reading-data-1\">Reading data</h2><a class=\"sl-anchor-link\" href=\"#reading-data-1\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Reading data</span></a></div>\n<br>\n<p>If we now want to load all books of a given author we can combine joins and diesels <code dir=\"auto\">BelongingToDsl</code> to load these data:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L121-L131\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">astrid_lindgren</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> authors</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(authors</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Astrid Lindgren</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Author</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// get all of Astrid Lindgren's books</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">books</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BookAuthor</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">belonging_to</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">astrid_lindgren</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Books by Astrid Lindgren: {books:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let astrid_lindgren = authors::table    .filter(authors::name.eq(&#x22;Astrid Lindgren&#x22;))    .select(Author::as_select())    .get_result(conn)?;// get all of Astrid Lindgren&#x27;s bookslet books = BookAuthor::belonging_to(&#x26;astrid_lindgren)    .inner_join(books::table)    .select(Book::as_select())    .load(conn)?;println!(&#x22;Books by Astrid Lindgren: {books:?}&#x22;);\"><div></div></button></div></figure></div>\n<p>As described before <code dir=\"auto\">BookAuthor::belonging_to</code> constructs a query to which we can chain other clauses. In this case we join the <code dir=\"auto\">books</code> table to include the relevant books and select only the columns relevant for populating the <code dir=\"auto\">Book</code> type. This results in loading all books for a given author.</p>\n<p>The same approach can be applied the other way around, to load all authors for a given book:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L133-L143\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">collaboration</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">title</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Pippi and Momo</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// get authors for the collaboration</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">authors</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BookAuthor</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">belonging_to</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">collaboration</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(authors</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Author</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Authors for </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Pippi and Momo</span><span style=\"--0:#F78C6C;--1:#AA0982\">\\\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">: {authors:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let collaboration = books::table    .filter(books::title.eq(&#x22;Pippi and Momo&#x22;))    .select(Book::as_select())    .get_result(conn)?;// get authors for the collaborationlet authors = BookAuthor::belonging_to(&#x26;collaboration)    .inner_join(authors::table)    .select(Author::as_select())    .load(conn)?;println!(&#x22;Authors for \\&#x22;Pippi and Momo\\&#x22;: {authors:?}&#x22;);\"><div></div></button></div></figure></div>\n<p>As before we can use this approach to load a list of all authors and their associated books:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><a class=\"title\" href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations/src/main.rs#L146-L162\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: inherit; text-decoration: none; cursor: pointer;\">src/main.rs</a></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all_authors</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> authors</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Author</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">books</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BookAuthor</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">belonging_to</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">authors</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(books</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((BookAuthor</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(), Book</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">books_per_author</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Vec&#x3C;(Author, Vec&#x3C;Book>)> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">books</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">grouped_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">all_authors</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into_iter</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">zip</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">authors</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">b</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">author</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">author</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">b</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">into_iter</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">book</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">collect</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">collect</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">All authors including their books: {books_per_author:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let all_authors = authors::table    .select(Author::as_select())    .load(conn)?;let books = BookAuthor::belonging_to(&#x26;authors)    .inner_join(books::table)    .select((BookAuthor::as_select(), Book::as_select()))    .load(conn)?;let books_per_author: Vec<(Author, Vec<Book>)> = books    .grouped_by(&#x26;all_authors)    .into_iter()    .zip(authors)    .map(|(b, author)| (author, b.into_iter().map(|(_, book)| book).collect()))    .collect();println!(&#x22;All authors including their books: {books_per_author:?}&#x22;);\"><div></div></button></div></figure></div>\n<p>As before we load all associated books by joining the books table to the query produced by <code dir=\"auto\">BookAuthor::belonging_to</code>. It is important to load the data from <code dir=\"auto\">books_authors</code> as well, as these data include the relevant mapping. The grouping is performed again with the <code dir=\"auto\">.grouped_by</code> method, similar to how this was done for the 1-to-n relations case. We now need to exclude the <code dir=\"auto\">BookAuthor</code> information in the final grouping step explicitly.</p>\n<p>The final code for this tutorial can be found <a href=\"https://github.com/diesel-rs/diesel/blob/2.3.x/examples/postgres/relations\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a>.</p>",{headings:417,localImagePaths:455,remoteImagePaths:456,frontmatter:457,imagePaths:458},[418,421,424,427,430,433,436,439,442,445,448,450,453],{depth:65,slug:419,text:420},"new-project","New project",{depth:65,slug:422,text:423},"1-to-many-or-1m","1-to-many or 1:m",{depth:65,slug:425,text:426},"migrations","Migrations",{depth:65,slug:428,text:429},"schemars","Schema.rs",{depth:65,slug:431,text:432},"models","Models",{depth:65,slug:434,text:435},"reading-data","Reading data",{depth:65,slug:437,text:438},"joins","Joins",{depth:246,slug:440,text:441},"inner-join","INNER JOIN",{depth:246,slug:443,text:444},"left-join","LEFT JOIN",{depth:65,slug:446,text:447},"many-to-many-or-mn","many-to-many or m:n",{depth:65,slug:449,text:426},"migrations-1",{depth:65,slug:451,text:452},"model","Model",{depth:65,slug:454,text:435},"reading-data-1",[],[],{title:324,lang:157},[],"guides/schema-in-depth",{id:459,data:461,body:465,filePath:466,digest:467,rendered:468},{title:329,editUrl:16,head:462,template:44,sidebar:463,pagefind:16,draft:32},[],{hidden:32,attrs:464},{},"In this guide we're going to look at what exactly `diesel print-schema`\nand [`table!`] do. For `table!`, we will show a simplified version of the actual code\nthat gets generated, and explain how each piece is relevant to you.\nIf you've ever been confused about what exactly is getting generated,\nor what `use schema::posts::dsl::*` means, this is the right place to be.\nAnother way to get an overview of which types are available where is to open\nthe API documentation of your current crate via `cargo doc --open` and navigate\nto the relevant module there.\n\n`diesel print-schema` is a command provided by Diesel CLI.\nThis command will establish a database connection, query for a list of all the tables\nand their columns, and generate `table!` invocations for each one.\n`diesel print-schema` will skip any table names which start with `__` (a double underscore).\nDiesel can be configured to automatically re-run `diesel print-schema`\nwhenever you run migrations. See [Configuring Diesel CLI] for details.\n\n`table!` is where the bulk of the code gets generated. If you wanted to,\nyou could see the actual exact code that gets generated\nby running `cargo +nightly rustc -- -Z unstable-options --pretty=expanded`.\nHowever, the output will be quite noisy, and there's a lot of code\nthat won't actually be relevant to you.\nInstead we're going to go step by step through a *simplified* version of this output,\nwhich only has the code which you would use directly.\n\nFor this example, we'll look at the code generated by this `table!` invocation:\n\n[Configuring Diesel CLI]: ./configuring-diesel-cli.html\n[`table!`]: https://docs.diesel.rs/2.3.x/diesel/macro.table.html\n\n```rust\ntable! {\n    users {\n        id -> Integer,\n        name -> Text,\n        hair_color -> Nullable<Text>,\n    }\n}\n```\n\nIf you just want to see the full simplified code and look through it yourself,\nyou will find it at the end of this guide.\n\nThe output of `table!` is always a Rust module with the same name.\nThe first and most important part of this module will be the definition of the table itself:\n\n```rust\npub struct table;\n```\n\nThis is the struct that represents the user's table for the purpose of constructing SQL queries.\nIt's usually referenced in code as `users::table` (or sometimes just `users`, more on that in a bit).\nNext, we'll see there's a module called `columns`, with one struct per column of the table.\n\n```rust\npub struct id;\npub struct name;\npub struct hair_color;\n```\n\nEach of these structs uniquely represents each column of the table\nfor the purpose of constructing SQL queries.\nEach of these structs will implement a trait called [`Expression`],\nwhich indicates the SQL type of the column.\n\n[`Expression`]: https://docs.diesel.rs/2.3.x/diesel/expression/trait.Expression.html\n\n```rust\nimpl Expression for id {\n    type SqlType = Integer;\n}\n\nimpl Expression for name {\n    type SqlType = Text;\n}\n\nimpl Expression for hair_color {\n    type SqlType = Nullable<Text>;\n}\n```\n\nThe `SqlType` type is at the core of how Diesel ensures that your queries are correct.\nThis type will be used by [`ExpressionMethods`] to determine what things can and cannot\nbe passed to methods like `eq`. It will also be used by [`Queryable`] to determine\nwhat types can be deserialized when this column appears in the select clause.\n\n[`ExpressionMethods`]: https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.ExpressionMethods.html\n[`Queryable`]: https://docs.diesel.rs/2.3.x/diesel/deserialize/trait.Queryable.html\n\nIn the columns module you'll also see a special column called `star`.\nIts definition looks like this:\n\n```rust\npub struct star;\n\nimpl Expression for star {\n    type SqlType = NotSelectable;\n}\n```\n\nThe `star` struct represents `users.*` in the query builder.\nThis struct is only intended to be used for generating count queries.\nIt should never be used directly. Diesel loads your data from a query by index,\nnot by name. In order to ensure that we're actually getting the data\nfor the column we think we are, Diesel never uses `*` when we actually want to\nget the data back out of it. We will instead generate an explicit select clause\nsuch as `SELECT users.id, users.name, users.hair_color`.\n\nEverything in the columns module will be re-exported from the parent module.\nThis is why we can reference columns as `users::id`, and not `users::columns::id`.\n\n```rust\npub use self::columns::*;\n\npub struct table;\n\npub mod columns {\n    /* ... */\n}\n```\n\nQueries can often get quite verbose when everything has to be prefixed with `users::`.\nFor this reason, Diesel also provides a convenience module called `dsl`.\n\n```rust\npub mod dsl {\n    pub use super::columns::{id, name, hair_color};\n    pub use super::table as users;\n}\n```\n\nThis module re-exports everything in `columns` module (except for `star`),\nand also re-exports the table but renamed to the actual name of the table.\nThis means that instead of writing:\n\n```rust\nusers::table\n    .filter(users::name.eq(\"Sean\"))\n    .filter(users::hair_color.eq(\"black\"))\n```\n\nwe can instead write:\n\n```rust\nusers.filter(name.eq(\"Sean\")).filter(hair_color.eq(\"black\"))\n```\n\nThe `dsl` module should only ever be imported for single functions.\nYou should never have `use schema::users::dsl::*;` at the top of a module.\nCode like `#[derive(Insertable)]` will assume that `users` points to the module,\nnot the table struct.\n\nSince `star` is otherwise inaccessible if you have `use schema::users::dsl::*;`,\nit is also exposed as an instance method on the table.\n\n```rust\nimpl table {\n    pub fn star(&self) -> star {\n        star\n    }\n}\n```\n\nNext, there are several traits that get implemented for `table`.\nYou generally will never interact with these directly,\nbut they are what enable most of the query builder functions\nfound in [the `query_dsl` module],\nas well as use with `insert`, `update`, and `delete`.\n\n[the `query_dsl` module]: https://docs.diesel.rs/2.3.x/diesel/query_dsl/index.html\n\n```rust\nimpl AsQuery for table {\n    /* body omitted */\n}\n\nimpl Table for table {\n    /* body omitted */\n}\n\nimpl IntoUpdateTarget for table {\n    /* body omitted */\n}\n```\n\nFinally, there are a few small type definitions\nand constants defined to make your life easier.\n\n```rust\npub const all_columns: (id, name, hair_color) = (id, name, hair_color);\n\npub type SqlType = (Integer, Text, Nullable<Text>);\n\npub type BoxedQuery<'a, DB, ST = SqlType> = BoxedSelectStatement<'a, ST, table, DB>;\n```\n\n`all_columns` is just a tuple of all of the column on the table.\nIt is what is used to generate the `select` statement for a query on this table\nwhen you don't specify one explicitly. If you ever want to reference `users::star`\nfor things that aren't count queries, you probably want `users::all_columns` instead.\n\n`SqlType` will be the SQL type of `all_columns`.\nIt's rare to need to reference this directly,\nbut it's less verbose than `<<users::table as Table>::AllColumns as Expression>::SqlType`\nwhen you need it.\n\nFinally, there is a helper type for referencing boxed queries built from this table.\nThis means that instead of writing `diesel::dsl::IntoBoxed<'static, users::table, Pg>`\nyou can instead write `users::BoxedQuery<'static, Pg>`.\nYou can optionally specify the SQL type as well if the query has a custom select clause.\n\nAnd that's everything! Here is the full code that was generated for this table:\n\n```rust\npub mod users {\n    pub use self::columns::*;\n\n    pub mod dsl {\n        pub use super::columns::{id, name, hair_color};\n        pub use super::table as users;\n    }\n\n    pub const all_columns: (id, name, hair_color) = (id, name, hair_color);\n\n    pub struct table;\n\n    impl table {\n        pub fn star(&self) -> star {\n            star\n        }\n    }\n\n    pub type SqlType = (Integer, Text, Nullable<Text>);\n\n    pub type BoxedQuery<'a, DB, ST = SqlType> = BoxedSelectStatement<'a, ST, FromClause<table>, DB>;\n\n    impl AsQuery for table {\n        /* body omitted */\n    }\n\n    impl Table for table {\n        /* body omitted */\n    }\n\n    impl IntoUpdateTarget for table {\n        /* body omitted */\n    }\n\n    pub mod columns {\n        pub struct star;\n\n        impl Expression for star {\n            type SqlType = ();\n        }\n\n        pub struct id;\n\n        impl Expression for id {\n            type SqlType = Integer;\n        }\n\n        pub struct name;\n\n        impl Expression for name {\n            type SqlType = Text;\n        }\n\n        pub struct hair_color;\n\n        impl Expression for hair_color {\n            type SqlType = Nullable<Text>;\n        }\n    }\n}\n```","src/content/docs/guides/schema-in-depth.md","73a488ffd6a41bb8",{html:469,metadata:470},"<p>In this guide were going to look at what exactly <code dir=\"auto\">diesel print-schema</code>\nand <a href=\"https://docs.diesel.rs/2.3.x/diesel/macro.table.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">table!</code></a> do. For <code dir=\"auto\">table!</code>, we will show a simplified version of the actual code\nthat gets generated, and explain how each piece is relevant to you.\nIf youve ever been confused about what exactly is getting generated,\nor what <code dir=\"auto\">use schema::posts::dsl::*</code> means, this is the right place to be.\nAnother way to get an overview of which types are available where is to open\nthe API documentation of your current crate via <code dir=\"auto\">cargo doc --open</code> and navigate\nto the relevant module there.</p>\n<p><code dir=\"auto\">diesel print-schema</code> is a command provided by Diesel CLI.\nThis command will establish a database connection, query for a list of all the tables\nand their columns, and generate <code dir=\"auto\">table!</code> invocations for each one.\n<code dir=\"auto\">diesel print-schema</code> will skip any table names which start with <code dir=\"auto\">__</code> (a double underscore).\nDiesel can be configured to automatically re-run <code dir=\"auto\">diesel print-schema</code>\nwhenever you run migrations. See <a href=\"./configuring-diesel-cli.html\">Configuring Diesel CLI</a> for details.</p>\n<p><code dir=\"auto\">table!</code> is where the bulk of the code gets generated. If you wanted to,\nyou could see the actual exact code that gets generated\nby running <code dir=\"auto\">cargo +nightly rustc -- -Z unstable-options --pretty=expanded</code>.\nHowever, the output will be quite noisy, and theres a lot of code\nthat wont actually be relevant to you.\nInstead were going to go step by step through a <em>simplified</em> version of this output,\nwhich only has the code which you would use directly.</p>\n<p>For this example, well look at the code generated by this <code dir=\"auto\">table!</code> invocation:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Nullable&#x3C;Text>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"table! {    users {        id -> Integer,        name -> Text,        hair_color -> Nullable<Text>,    }}\"><div></div></button></div></figure></div>\n<p>If you just want to see the full simplified code and look through it yourself,\nyou will find it at the end of this guide.</p>\n<p>The output of <code dir=\"auto\">table!</code> is always a Rust module with the same name.\nThe first and most important part of this module will be the definition of the table itself:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub struct table;\"><div></div></button></div></figure></div>\n<p>This is the struct that represents the users table for the purpose of constructing SQL queries.\nIts usually referenced in code as <code dir=\"auto\">users::table</code> (or sometimes just <code dir=\"auto\">users</code>, more on that in a bit).\nNext, well see theres a module called <code dir=\"auto\">columns</code>, with one struct per column of the table.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub struct id;pub struct name;pub struct hair_color;\"><div></div></button></div></figure></div>\n<p>Each of these structs uniquely represents each column of the table\nfor the purpose of constructing SQL queries.\nEach of these structs will implement a trait called <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/trait.Expression.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Expression</code></a>,\nwhich indicates the SQL type of the column.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Nullable&#x3C;Text>;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl Expression for id {    type SqlType = Integer;}impl Expression for name {    type SqlType = Text;}impl Expression for hair_color {    type SqlType = Nullable<Text>;}\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">SqlType</code> type is at the core of how Diesel ensures that your queries are correct.\nThis type will be used by <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.ExpressionMethods.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">ExpressionMethods</code></a> to determine what things can and cannot\nbe passed to methods like <code dir=\"auto\">eq</code>. It will also be used by <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/trait.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Queryable</code></a> to determine\nwhat types can be deserialized when this column appears in the select clause.</p>\n<p>In the columns module youll also see a special column called <code dir=\"auto\">star</code>.\nIts definition looks like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> NotSelectable;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub struct star;impl Expression for star {    type SqlType = NotSelectable;}\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">star</code> struct represents <code dir=\"auto\">users.*</code> in the query builder.\nThis struct is only intended to be used for generating count queries.\nIt should never be used directly. Diesel loads your data from a query by index,\nnot by name. In order to ensure that were actually getting the data\nfor the column we think we are, Diesel never uses <code dir=\"auto\">*</code> when we actually want to\nget the data back out of it. We will instead generate an explicit select clause\nsuch as <code dir=\"auto\">SELECT users.id, users.name, users.hair_color</code>.</p>\n<p>Everything in the columns module will be re-exported from the parent module.\nThis is why we can reference columns as <code dir=\"auto\">users::id</code>, and not <code dir=\"auto\">users::columns::id</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">self::</span><span style=\"--0:#D6DEEB;--1:#403F53\">columns</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#D6DEEB;--1:#403F53\"> columns {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#919F9F;--1:#5F636F\">/* ... */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub use self::columns::*;pub struct table;pub mod columns {    /* ... */}\"><div></div></button></div></figure></div>\n<p>Queries can often get quite verbose when everything has to be prefixed with <code dir=\"auto\">users::</code>.\nFor this reason, Diesel also provides a convenience module called <code dir=\"auto\">dsl</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">super::</span><span style=\"--0:#D6DEEB;--1:#403F53\">columns</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{id, name, hair_color};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">super::</span><span style=\"--0:#D6DEEB;--1:#403F53\">table </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub mod dsl {    pub use super::columns::{id, name, hair_color};    pub use super::table as users;}\"><div></div></button></div></figure></div>\n<p>This module re-exports everything in <code dir=\"auto\">columns</code> module (except for <code dir=\"auto\">star</code>),\nand also re-exports the table but renamed to the actual name of the table.\nThis means that instead of writing:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">black</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"users::table    .filter(users::name.eq(&#x22;Sean&#x22;))    .filter(users::hair_color.eq(&#x22;black&#x22;))\"><div></div></button></div></figure></div>\n<p>we can instead write:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">black</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"users.filter(name.eq(&#x22;Sean&#x22;)).filter(hair_color.eq(&#x22;black&#x22;))\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">dsl</code> module should only ever be imported for single functions.\nYou should never have <code dir=\"auto\">use schema::users::dsl::*;</code> at the top of a module.\nCode like <code dir=\"auto\">#[derive(Insertable)]</code> will assume that <code dir=\"auto\">users</code> points to the module,\nnot the table struct.</p>\n<p>Since <code dir=\"auto\">star</code> is otherwise inaccessible if you have <code dir=\"auto\">use schema::users::dsl::*;</code>,\nit is also exposed as an instance method on the table.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;self</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl table {    pub fn star(&#x26;self) -> star {        star    }}\"><div></div></button></div></figure></div>\n<p>Next, there are several traits that get implemented for <code dir=\"auto\">table</code>.\nYou generally will never interact with these directly,\nbut they are what enable most of the query builder functions\nfound in <a href=\"https://docs.diesel.rs/2.3.x/diesel/query_dsl/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the <code dir=\"auto\">query_dsl</code> module</a>,\nas well as use with <code dir=\"auto\">insert</code>, <code dir=\"auto\">update</code>, and <code dir=\"auto\">delete</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsQuery </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#919F9F;--1:#5F636F\">/* body omitted */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Table </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#919F9F;--1:#5F636F\">/* body omitted */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> IntoUpdateTarget </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#919F9F;--1:#5F636F\">/* body omitted */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"impl AsQuery for table {    /* body omitted */}impl Table for table {    /* body omitted */}impl IntoUpdateTarget for table {    /* body omitted */}\"><div></div></button></div></figure></div>\n<p>Finally, there are a few small type definitions\nand constants defined to make your life easier.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">const</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all_columns</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (Integer, Text, Nullable&#x3C;Text>);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedQuery&#x3C;'a, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">DB</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedSelectStatement&#x3C;'a, ST, </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">, DB>;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub const all_columns: (id, name, hair_color) = (id, name, hair_color);pub type SqlType = (Integer, Text, Nullable<Text>);pub type BoxedQuery<&#x27;a, DB, ST = SqlType> = BoxedSelectStatement<&#x27;a, ST, table, DB>;\"><div></div></button></div></figure></div>\n<p><code dir=\"auto\">all_columns</code> is just a tuple of all of the column on the table.\nIt is what is used to generate the <code dir=\"auto\">select</code> statement for a query on this table\nwhen you dont specify one explicitly. If you ever want to reference <code dir=\"auto\">users::star</code>\nfor things that arent count queries, you probably want <code dir=\"auto\">users::all_columns</code> instead.</p>\n<p><code dir=\"auto\">SqlType</code> will be the SQL type of <code dir=\"auto\">all_columns</code>.\nIts rare to need to reference this directly,\nbut its less verbose than <code dir=\"auto\">&#x3C;&#x3C;users::table as Table>::AllColumns as Expression>::SqlType</code>\nwhen you need it.</p>\n<p>Finally, there is a helper type for referencing boxed queries built from this table.\nThis means that instead of writing <code dir=\"auto\">diesel::dsl::IntoBoxed&#x3C;'static, users::table, Pg></code>\nyou can instead write <code dir=\"auto\">users::BoxedQuery&#x3C;'static, Pg></code>.\nYou can optionally specify the SQL type as well if the query has a custom select clause.</p>\n<p>And thats everything! Here is the full code that was generated for this table:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">self::</span><span style=\"--0:#D6DEEB;--1:#403F53\">columns</span><span style=\"--0:#7FDBCA;--1:#096E72\">::*</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">super::</span><span style=\"--0:#D6DEEB;--1:#403F53\">columns</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{id, name, hair_color};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">super::</span><span style=\"--0:#D6DEEB;--1:#403F53\">table </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">const</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">all_columns</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;self</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (Integer, Text, Nullable&#x3C;Text>);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedQuery&#x3C;'a, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">DB</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> BoxedSelectStatement&#x3C;'a, ST, FromClause&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">>, DB>;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AsQuery </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#919F9F;--1:#5F636F\">/* body omitted */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Table </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#919F9F;--1:#5F636F\">/* body omitted */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> IntoUpdateTarget </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#919F9F;--1:#5F636F\">/* body omitted */</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#D6DEEB;--1:#403F53\"> columns {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">star</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C792EA;--1:#8844AE\">impl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Expression </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">hair_color</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlType </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Nullable&#x3C;Text>;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pub mod users {    pub use self::columns::*;    pub mod dsl {        pub use super::columns::{id, name, hair_color};        pub use super::table as users;    }    pub const all_columns: (id, name, hair_color) = (id, name, hair_color);    pub struct table;    impl table {        pub fn star(&#x26;self) -> star {            star        }    }    pub type SqlType = (Integer, Text, Nullable<Text>);    pub type BoxedQuery<&#x27;a, DB, ST = SqlType> = BoxedSelectStatement<&#x27;a, ST, FromClause<table>, DB>;    impl AsQuery for table {        /* body omitted */    }    impl Table for table {        /* body omitted */    }    impl IntoUpdateTarget for table {        /* body omitted */    }    pub mod columns {        pub struct star;        impl Expression for star {            type SqlType = ();        }        pub struct id;        impl Expression for id {            type SqlType = Integer;        }        pub struct name;        impl Expression for name {            type SqlType = Text;        }        pub struct hair_color;        impl Expression for hair_color {            type SqlType = Nullable<Text>;        }    }}\"><div></div></button></div></figure></div>",{headings:471,localImagePaths:472,remoteImagePaths:473,frontmatter:474,imagePaths:475},[],[],[],{title:329,lang:157},[],"news/2_0_0_release",{id:476,data:478,body:483,filePath:484,digest:485,rendered:486},{title:479,editUrl:16,head:480,template:44,sidebar:481,pagefind:16,draft:32},"Diesel 2.0.0",[],{hidden:32,attrs:482},{},"Diesel 2.0.0 contains the contributions of more than 130 people. More than 1700 commits were submitted\nover a span of 3 years.\n\nAs part of this release we introduced numerous new features and rewrote large parts of the internal structure.\nCheck out our [changelog for a complete list of changes](/changelog.html). As this is a new major Diesel release it contains a number of breaking changes. Checkout our [migration guide](/guides/migration-guide/) for details about how to handle those breaking changes.\n\nThis release contains the following parts:\n\n* diesel 2.0.0\n* diesel_derives 2.0.0\n* diesel_migrations 2.0.0\n* diesel_cli 2.0.0\n* diesel_dynamic_schema 0.2.0\n\nSupport the development of Diesel by [sponsoring our work on GitHub](https://github.com/diesel-rs/diesel)\n\n## Features\n\nAs a highlight Diesel 2.0.0 adds support for the following features:\n\n* Fully type checked `GROUP BY` support\n* Support for table aliasing\n* Support for defining select clauses via a corresponding type\n* Support for `UNION`/`INTERSECT` queries\n\nIn addition to the highlighted features Diesel 2.0.0 fixes several issues in our type level SQL representation such that it now correctly handles the following cases:\n\n* Mixed nested `LEFT JOINS` and `INNER JOINS`\n* Chaining mixed nullable expressions via `AND`, `OR` and similar operators\n\n### Support for `GROUP BY` clauses\n\nDiesel 2.0 adds support for `GROUP BY` clauses for select queries.\n\nThis means queries like the following one will just work.\n\n\n[Example]()\n\n```rust title=\"Rust\"\n users::table.inner_join(posts::table)\n    .group_by(users::id)\n    .select((users::name, count(posts::id)))\n```\n\nAs this is the case for all other Diesel built-in query dsl, this construct is fully checked at compile time. This means Diesel\nwill ensure that the `GROUP BY` clause is valid for the current query and it will also ensure that expressions appearing inside\nof your `SELECT` clause will match the aggregation rules provided by the current `GROUP BY` clause. Checkout the documentation of [`QueryDsl::group_by`](https://docs.diesel.rs/2.0.x/diesel/prelude/trait.QueryDsl.html#method.group_by) for examples.\n\n### Support for table aliasing\n\nDiesel 2.0 adds support for table aliasing. This enables users to write queries, where a table appears more than once in the corresponding\n`FROM` clause. For this Diesel provides a [`diesel::alias!`] macro that allows to define new alias for existing tables.\n\nThe following query demonstrates the support for this feature:\n\n\n[Example]()\n\n\n```rust title=\"Rust\"\n// Define new table alias for the existing `users` table\nlet users1 = diesel::alias!(schema::users as user1);\n\n// Use the corresponding alias inside any existing query\nusers::table\n    .inner_join(users1.on(users::id).eq(users1.field(users::id))))\n    .select((users::id, users::name, users1.field(users::name)))\n    .order_by(users1.field(users::id))\n```\n\nAgain all of this is checked at compile time. So similar to a normal table, columns from aliases are only allowed to appear if\nthe corresponding query actually uses the alias.\n\n[`diesel::alias!`]: https://docs.diesel.rs/2.0.x/diesel/macro.alias.html\n\n### Implied selection via the new `Selectable` trait\n\nDiesel 2.0 features a new [`Selectable`] trait and derive that lets users declare that a type expects a certain kind of select clause.\nThe major use case for this feature is to ensure that columns from a specific query are always requested in the right order\nfor a corresponding type implementing `Queryable`. This also works for complex queries involving joins or other kinds of nesting.\n\n\n[Example]()\n\n\n```rust title=\"Rust\"\n#[derive(Queryable, Selectable)]\nstruct User {\n    id: i32,\n    name: String,\n}\n\nlet first_user = users.select(User::as_select()).first(connection)?;\n```\n\n\nDiesel enforces at type system level that once you provided such a select clause via `User::as_select()` you are only allowed\nto construct this type from the returned result of the corresponding query. This means there is no need to specify the `User` type\ntwice in the query above.\n\n[`Selectable`]: https://docs.diesel.rs/2.0.x/diesel/expression/trait.Selectable.html\n\n### Support for `UNION`/`INTERSECT`/`EXCEPT` queries\n\nDiesel 2.0 extents the query builder to support query combinations via `UNION`/`INTERSECT`/`EXCEPT`. This allows you\nto easily chain multiple queries together as long as they return fields of the same type. Queries like the following\none are now supported:\n\n[Example]()\n\n\n```rust title=\"Rust\"\n users.select(user_name.nullable())\n    .union(animals.select(animal_name).filter(animal_name.is_not_null()))\n```\n\nAs always this is checked at compile time to reject invalid queries, like for example that ones containing select\nclauses with different fields. Checkout the documentation of [`CombineDsl`](https://docs.diesel.rs/2.0.x/diesel/prelude/trait.CombineDsl.html) for details.\n\n## Call for Participation\n\nThe release of Diesel 2.0 does not only include the features listed above, but also marks the\npoint where the following things can be provided by third party crates:\n\n* Custom `QueryDsl` extensions to support previously unsupported SQL features. Checkout \n[`diesel_full_text_search`](https://github.com/diesel-rs/diesel_full_text_search) for an example\n* Alternative query dsl implementations reusing the existing `Connection` infrastructure\n* Custom [`Connection`](https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#provide-a-new-connection-implementation-for-an-existing-backend) implementations for existing backends\n* Custom [`Connection`](https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#implement-support-for-an-unsupported-database-system) \nand [`Backend`](https://docs.diesel.rs/2.0.x/diesel/backend/trait.Backend.html#implementing-a-custom-backend) implementations for previously unsupported backends. Checkout [diesel-oci](https://github.com/GiGainfosystems/diesel-oci) for an example.\n\nWe encourage our community to try out those features. Especially we would like to see experimentation around:\n\n* Previously unsupported database backends\n* Pure rust implementations of existing backend implementations. Checkout [this](https://github.com/sfackler/rust-postgres/issues/890) and [this](https://github.com/blackbeam/rust-mysql-simple/discussions/320) discussion for starting points.\n* Alternative query dsl implementations. Checkout [this discussion](https://github.com/SeaQL/sea-query/discussions/168) as starting point.\n\nPlease get in touch with us for pointers, help and details.\n\n\n## Input for Future Roadmap\n\nWith the release of Diesel 2.0 the planing for our next releases start. Hopefully they will not take as long as Diesel 2.0. We are looking for input on which features are wanted by our community. Please open a discussion thread with your idea in our [discussion forum](https://github.com/diesel-rs/diesel/discussions/categories/ideas).\n\nWeiznich will work on improving error messages for trait heavy crates based on a Rust Foundation Project Grant. This work will hopefully improve error messages for Diesel as well. If you are aware of bad error messages please submit a\nminimal example [here](https://github.com/weiznich/rust-foundation-community-grant).\n\n## Update considerations\n\nDiesel 2.0 introduces substantial changes to Diesel's inner workings. \nIn some cases this impacts code written using Diesel 1.4.x. \nThis document outlines notable changes and presents potential update strategies. \nWe recommend to start the upgrade by removing the usage of all items that \nare marked as deprecated in Diesel 1.4.x.\n\nAny code base migrating from Diesel 1.4.x to Diesel 2.0 is expected to be affected at least by \nthe following changes:\n\n* [Diesel now requires a mutable reference to the connection](/guides/migration-guide#2-0-0-mutable-connection)\n* [Changed derive attributes](/guides/migration-guide#2-0-0-derive-attributes)\n\nUsers of `diesel_migration` are additionally affected by the following change:\n\n* [`diesel_migration` rewrite](/guides/migration-guide#2-0-0-upgrade-migrations)\n\nUsers of `BoxableExpression` might be affected by the following change:\n\n* [Changed nullability of operators](/guides/migration-guide#2-0-0-nullability-ops)\n\nUsers of tables containing a column of the type `Array<T>` are affected by the following change:\n\n* [Changed nullability of array elements](/guides/migration-guide#2-0-0-nullability-of-array-elements)\n\nUsers that implement support for their SQL types or type mappings are affected \nby the following changes:\n\n* [Changed required traits for custom SQL types](/guides/migration-guide#2-0-0-custom-type-implementation)\n* [Changed `ToSql` implementations](/guides/migration-guide#2-0-0-to-sql)\n* [Changed `FromSql` implementations](/guides/migration-guide#2-0-0-from-sql)\n\n`no_arg_sql_function!` macro is now pending deprecation.\nUsers of the macro are advised to consider `sql_function!` macro.\n\n* [Deprecated usage of `no_arg_sql_function!` macro](/guides/migration-guide#2-0-0-no_arg_sql_function)\n\nUsers of `eq_any` on the PostgreSQL backend might hit type rejection error in rare cases.\n\n* [Changed accepted argument to `eq_any()` for the PostgreSQL backend](/guides/migration-guide#2-0-0-changed_eq_any)\n\nUsers that update generic Diesel code will also be affected by the following changes:\n\n* [Removing `NonAggregate` in favor of `ValidGrouping`](/guides/migration-guide#2-0-0-upgrade-non-aggregate)\n* [Changed generic bounds](/guides/migration-guide#2-0-0-generic-changes)\n\nAdditionally this release contains many changes for users that implemented a custom backend/connection.\nWe do not provide explicit migration steps but we encourage users to reach out with questions pertaining to these changes. \n\n## Thanks\n\nAs part of this release we would like to welcome @Ten0 as part of the\ndiesel core team.\n\nThank you to everyone who helped make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\n\nIn addition to the Diesel core team, 141 people contributed code to this release. A huge thank you to:\n\n\n* Alessandro Menezes\n* Alexander 'z33ky' Hirsch\n* Alexei Pastuchov\n* Alice Ryhl\n* Amila Welihinda\n* Andre Braga Reis\n* Andreas Runfalk\n* Andrew Safigan\n* Andrew Speed\n* Andy Russell\n* Artem Vorotnikov\n* Arve Seljebu\n* Billy Chan\n* Blas Rodriguez Irizar\n* Bryan Henry\n* Callym\n* Caroline Glassberg-Powell\n* Cassie Jones\n* Chenxi Yuan\n* Chris Eckhardt\n* Chris Hanks\n* Chris Maddox\n* Chris West (Faux)\n* Clouds Flowing\n* Corentin Henry\n* Daniel Buse\n* Danilo Bargen\n* David Teller\n* David Tulig\n* DebugSteven\n* Diggory Blake\n* Dmitriy Pleshevskiy\n* Dusty Mabe\n* DrVilepis\n* EclipsedSolari\n* Emile Fugulin\n* Emm\n* Emmanuel Surleau\n* Erlend Langseth\n* Felix Watts\n* Filip Gospodinov\n* Garrett Thornburg\n* Giorgio Gambino\n* Grgory Obanos\n* Hal Gentz\n* Han Xu\n* Heliozoa\n* Henk van der Laan\n* Henry Boisdequin\n* Hirokazu Hata\n* Iban Eguia (Razican)\n* Igor Raits\n* Ivan Tham\n* JR Heard\n* Jean SIMARD\n* Jeremy Stucki\n* Ji Sejkora\n* jigaoqiang\n* Joel Parker Henderson\n* John Brandt\n* Jonas Platte\n* Jonas Schievink\n* Joshua Koudys\n* Juhasz Sandor\n* Justice4Joffrey\n* Katharina Fey\n* Kevin King\n* Kevin Kirchner\n* Khionu Sybiern\n* Kitsu\n* Koisell\n* Kononnable\n* Leonardo Yvens\n* Lukas Markeffsky\n* Maccesch\n* Marc-Stefan Cassola\n* Martell Malone\n* Martijn Groeneveldt\n* Martin Nordholts\n* Matthew Kuo\n* Matthieu Guillemot\n* Mcat12\n* Meven\n* Mike Cronce\n* Mr Ceperka\n* Nafiul Islam\n* Nathan Papapietro\n* Nicholas Yang\n* Oliver Cooper\n* Otto Castle\n* Pankaj Jangid\n* Paolo Barbolini\n* Paul Le Corre\n* Paul Martensen\n* Pavan Kumar Sunkara\n* Pawe Przeniczny\n* Philip Trauner\n* Raphael Arias\n* Roman\n* Ryan Leckey\n* Sarthak Singh\n* Scott Driggers\n* Sean Klein\n* Simon Ertl\n* Spencer Taylor\n* Steven Chu\n* Storm Timmermans\n* Sbastien Santoro\n* Takayuki Maeda\n* Thomas Constantine Moore\n* Thomas Eizinger\n* Thomas Etter\n* Tom MacWright\n* Tuetuopay\n* Urhengulas\n* Vanio Begic\n* WebeWizard\n* William Myers\n* Yin Jifeng\n* Yuki Okushi\n* Zane Duffield\n* blackghost1987\n* czotomo\n* dchenk\n* ejc Drobni\n* gorbit99\n* hasezoey\n* hi-rustin\n* kevinpoitra\n* kpcyrd\n* matthew-dowdell\n* ode79\n* ropottnik\n* telios\n* theredfish\n* zoewithabang\n* Zhenhui Xie\n* mile Fugulin\n* een\n* \n* _Binboy","src/content/docs/news/2_0_0_release.md","8ca8e2c9e0751dec",{html:487,metadata:488},"<p>Diesel 2.0.0 contains the contributions of more than 130 people. More than 1700 commits were submitted\nover a span of 3 years.</p>\n<p>As part of this release we introduced numerous new features and rewrote large parts of the internal structure.\nCheck out our <a href=\"/changelog.html\">changelog for a complete list of changes</a>. As this is a new major Diesel release it contains a number of breaking changes. Checkout our <a href=\"/guides/migration-guide/\">migration guide</a> for details about how to handle those breaking changes.</p>\n<p>This release contains the following parts:</p>\n<ul>\n<li>diesel 2.0.0</li>\n<li>diesel_derives 2.0.0</li>\n<li>diesel_migrations 2.0.0</li>\n<li>diesel_cli 2.0.0</li>\n<li>diesel_dynamic_schema 0.2.0</li>\n</ul>\n<p>Support the development of Diesel by <a href=\"https://github.com/diesel-rs/diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">sponsoring our work on GitHub</a></p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"features\">Features</h2><a class=\"sl-anchor-link\" href=\"#features\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Features</span></a></div>\n<p>As a highlight Diesel 2.0.0 adds support for the following features:</p>\n<ul>\n<li>Fully type checked <code dir=\"auto\">GROUP BY</code> support</li>\n<li>Support for table aliasing</li>\n<li>Support for defining select clauses via a corresponding type</li>\n<li>Support for <code dir=\"auto\">UNION</code>/<code dir=\"auto\">INTERSECT</code> queries</li>\n</ul>\n<p>In addition to the highlighted features Diesel 2.0.0 fixes several issues in our type level SQL representation such that it now correctly handles the following cases:</p>\n<ul>\n<li>Mixed nested <code dir=\"auto\">LEFT JOINS</code> and <code dir=\"auto\">INNER JOINS</code></li>\n<li>Chaining mixed nullable expressions via <code dir=\"auto\">AND</code>, <code dir=\"auto\">OR</code> and similar operators</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"support-for-group-by-clauses\">Support for <code dir=\"auto\">GROUP BY</code> clauses</h3><a class=\"sl-anchor-link\" href=\"#support-for-group-by-clauses\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Support for GROUP BY clauses</span></a></div>\n<p>Diesel 2.0 adds support for <code dir=\"auto\">GROUP BY</code> clauses for select queries.</p>\n<p>This means queries like the following one will just work.</p>\n<p><a href=\"\">Example</a></p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\"> </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">group_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">count</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\" users::table.inner_join(posts::table)    .group_by(users::id)    .select((users::name, count(posts::id)))\"><div></div></button></div></figure></div>\n<p>As this is the case for all other Diesel built-in query dsl, this construct is fully checked at compile time. This means Diesel\nwill ensure that the <code dir=\"auto\">GROUP BY</code> clause is valid for the current query and it will also ensure that expressions appearing inside\nof your <code dir=\"auto\">SELECT</code> clause will match the aggregation rules provided by the current <code dir=\"auto\">GROUP BY</code> clause. Checkout the documentation of <a href=\"https://docs.diesel.rs/2.0.x/diesel/prelude/trait.QueryDsl.html#method.group_by\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">QueryDsl::group_by</code></a> for examples.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"support-for-table-aliasing\">Support for table aliasing</h3><a class=\"sl-anchor-link\" href=\"#support-for-table-aliasing\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Support for table aliasing</span></a></div>\n<p>Diesel 2.0 adds support for table aliasing. This enables users to write queries, where a table appears more than once in the corresponding\n<code dir=\"auto\">FROM</code> clause. For this Diesel provides a <a href=\"https://docs.diesel.rs/2.0.x/diesel/macro.alias.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::alias!</code></a> macro that allows to define new alias for existing tables.</p>\n<p>The following query demonstrates the support for this feature:</p>\n<p><a href=\"\">Example</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Define new table alias for the existing `users` table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">alias!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user1</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Use the corresponding alias inside any existing query</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">on</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">field</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">))))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">field</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">order_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">field</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// Define new table alias for the existing &#x60;users&#x60; tablelet users1 = diesel::alias!(schema::users as user1);// Use the corresponding alias inside any existing queryusers::table    .inner_join(users1.on(users::id).eq(users1.field(users::id))))    .select((users::id, users::name, users1.field(users::name)))    .order_by(users1.field(users::id))\"><div></div></button></div></figure></div>\n<p>Again all of this is checked at compile time. So similar to a normal table, columns from aliases are only allowed to appear if\nthe corresponding query actually uses the alias.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"implied-selection-via-the-new-selectable-trait\">Implied selection via the new <code dir=\"auto\">Selectable</code> trait</h3><a class=\"sl-anchor-link\" href=\"#implied-selection-via-the-new-selectable-trait\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Implied selection via the new Selectable trait</span></a></div>\n<p>Diesel 2.0 features a new <a href=\"https://docs.diesel.rs/2.0.x/diesel/expression/trait.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Selectable</code></a> trait and derive that lets users declare that a type expects a certain kind of select clause.\nThe major use case for this feature is to ensure that columns from a specific query are always requested in the right order\nfor a corresponding type implementing <code dir=\"auto\">Queryable</code>. This also works for complex queries involving joins or other kinds of nesting.</p>\n<p><a href=\"\">Example</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">first_user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">first</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Selectable)]struct User {    id: i32,    name: String,}let first_user = users.select(User::as_select()).first(connection)?;\"><div></div></button></div></figure></div>\n<p>Diesel enforces at type system level that once you provided such a select clause via <code dir=\"auto\">User::as_select()</code> you are only allowed\nto construct this type from the returned result of the corresponding query. This means there is no need to specify the <code dir=\"auto\">User</code> type\ntwice in the query above.</p>\n<div class=\"sl-heading-wrapper level-h3\"><h3 id=\"support-for-unionintersectexcept-queries\">Support for <code dir=\"auto\">UNION</code>/<code dir=\"auto\">INTERSECT</code>/<code dir=\"auto\">EXCEPT</code> queries</h3><a class=\"sl-anchor-link\" href=\"#support-for-unionintersectexcept-queries\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Support for UNION/INTERSECT/EXCEPT queries</span></a></div>\n<p>Diesel 2.0 extents the query builder to support query combinations via <code dir=\"auto\">UNION</code>/<code dir=\"auto\">INTERSECT</code>/<code dir=\"auto\">EXCEPT</code>. This allows you\nto easily chain multiple queries together as long as they return fields of the same type. Queries like the following\none are now supported:</p>\n<p><a href=\"\">Example</a></p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">user_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">nullable</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">union</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">animals</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">animal_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">animal_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">is_not_null</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\" users.select(user_name.nullable())    .union(animals.select(animal_name).filter(animal_name.is_not_null()))\"><div></div></button></div></figure></div>\n<p>As always this is checked at compile time to reject invalid queries, like for example that ones containing select\nclauses with different fields. Checkout the documentation of <a href=\"https://docs.diesel.rs/2.0.x/diesel/prelude/trait.CombineDsl.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">CombineDsl</code></a> for details.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"call-for-participation\">Call for Participation</h2><a class=\"sl-anchor-link\" href=\"#call-for-participation\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Call for Participation</span></a></div>\n<p>The release of Diesel 2.0 does not only include the features listed above, but also marks the\npoint where the following things can be provided by third party crates:</p>\n<ul>\n<li>Custom <code dir=\"auto\">QueryDsl</code> extensions to support previously unsupported SQL features. Checkout\n<a href=\"https://github.com/diesel-rs/diesel_full_text_search\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel_full_text_search</code></a> for an example</li>\n<li>Alternative query dsl implementations reusing the existing <code dir=\"auto\">Connection</code> infrastructure</li>\n<li>Custom <a href=\"https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#provide-a-new-connection-implementation-for-an-existing-backend\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Connection</code></a> implementations for existing backends</li>\n<li>Custom <a href=\"https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#implement-support-for-an-unsupported-database-system\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Connection</code></a>\nand <a href=\"https://docs.diesel.rs/2.0.x/diesel/backend/trait.Backend.html#implementing-a-custom-backend\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Backend</code></a> implementations for previously unsupported backends. Checkout <a href=\"https://github.com/GiGainfosystems/diesel-oci\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">diesel-oci</a> for an example.</li>\n</ul>\n<p>We encourage our community to try out those features. Especially we would like to see experimentation around:</p>\n<ul>\n<li>Previously unsupported database backends</li>\n<li>Pure rust implementations of existing backend implementations. Checkout <a href=\"https://github.com/sfackler/rust-postgres/issues/890\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this</a> and <a href=\"https://github.com/blackbeam/rust-mysql-simple/discussions/320\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this</a> discussion for starting points.</li>\n<li>Alternative query dsl implementations. Checkout <a href=\"https://github.com/SeaQL/sea-query/discussions/168\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this discussion</a> as starting point.</li>\n</ul>\n<p>Please get in touch with us for pointers, help and details.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"input-for-future-roadmap\">Input for Future Roadmap</h2><a class=\"sl-anchor-link\" href=\"#input-for-future-roadmap\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Input for Future Roadmap</span></a></div>\n<p>With the release of Diesel 2.0 the planing for our next releases start. Hopefully they will not take as long as Diesel 2.0. We are looking for input on which features are wanted by our community. Please open a discussion thread with your idea in our <a href=\"https://github.com/diesel-rs/diesel/discussions/categories/ideas\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a>.</p>\n<p>Weiznich will work on improving error messages for trait heavy crates based on a Rust Foundation Project Grant. This work will hopefully improve error messages for Diesel as well. If you are aware of bad error messages please submit a\nminimal example <a href=\"https://github.com/weiznich/rust-foundation-community-grant\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"update-considerations\">Update considerations</h2><a class=\"sl-anchor-link\" href=\"#update-considerations\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Update considerations</span></a></div>\n<p>Diesel 2.0 introduces substantial changes to Diesels inner workings.\nIn some cases this impacts code written using Diesel 1.4.x.\nThis document outlines notable changes and presents potential update strategies.\nWe recommend to start the upgrade by removing the usage of all items that\nare marked as deprecated in Diesel 1.4.x.</p>\n<p>Any code base migrating from Diesel 1.4.x to Diesel 2.0 is expected to be affected at least by\nthe following changes:</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-mutable-connection\">Diesel now requires a mutable reference to the connection</a></li>\n<li><a href=\"/guides/migration-guide#2-0-0-derive-attributes\">Changed derive attributes</a></li>\n</ul>\n<p>Users of <code dir=\"auto\">diesel_migration</code> are additionally affected by the following change:</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-upgrade-migrations\"><code dir=\"auto\">diesel_migration</code> rewrite</a></li>\n</ul>\n<p>Users of <code dir=\"auto\">BoxableExpression</code> might be affected by the following change:</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-nullability-ops\">Changed nullability of operators</a></li>\n</ul>\n<p>Users of tables containing a column of the type <code dir=\"auto\">Array&#x3C;T></code> are affected by the following change:</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-nullability-of-array-elements\">Changed nullability of array elements</a></li>\n</ul>\n<p>Users that implement support for their SQL types or type mappings are affected\nby the following changes:</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-custom-type-implementation\">Changed required traits for custom SQL types</a></li>\n<li><a href=\"/guides/migration-guide#2-0-0-to-sql\">Changed <code dir=\"auto\">ToSql</code> implementations</a></li>\n<li><a href=\"/guides/migration-guide#2-0-0-from-sql\">Changed <code dir=\"auto\">FromSql</code> implementations</a></li>\n</ul>\n<p><code dir=\"auto\">no_arg_sql_function!</code> macro is now pending deprecation.\nUsers of the macro are advised to consider <code dir=\"auto\">sql_function!</code> macro.</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-no_arg_sql_function\">Deprecated usage of <code dir=\"auto\">no_arg_sql_function!</code> macro</a></li>\n</ul>\n<p>Users of <code dir=\"auto\">eq_any</code> on the PostgreSQL backend might hit type rejection error in rare cases.</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-changed_eq_any\">Changed accepted argument to <code dir=\"auto\">eq_any()</code> for the PostgreSQL backend</a></li>\n</ul>\n<p>Users that update generic Diesel code will also be affected by the following changes:</p>\n<ul>\n<li><a href=\"/guides/migration-guide#2-0-0-upgrade-non-aggregate\">Removing <code dir=\"auto\">NonAggregate</code> in favor of <code dir=\"auto\">ValidGrouping</code></a></li>\n<li><a href=\"/guides/migration-guide#2-0-0-generic-changes\">Changed generic bounds</a></li>\n</ul>\n<p>Additionally this release contains many changes for users that implemented a custom backend/connection.\nWe do not provide explicit migration steps but we encourage users to reach out with questions pertaining to these changes.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"thanks\">Thanks</h2><a class=\"sl-anchor-link\" href=\"#thanks\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Thanks</span></a></div>\n<p>As part of this release we would like to welcome @Ten0 as part of the\ndiesel core team.</p>\n<p>Thank you to everyone who helped make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 141 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Alessandro Menezes</li>\n<li>Alexander z33ky Hirsch</li>\n<li>Alexei Pastuchov</li>\n<li>Alice Ryhl</li>\n<li>Amila Welihinda</li>\n<li>Andre Braga Reis</li>\n<li>Andreas Runfalk</li>\n<li>Andrew Safigan</li>\n<li>Andrew Speed</li>\n<li>Andy Russell</li>\n<li>Artem Vorotnikov</li>\n<li>Arve Seljebu</li>\n<li>Billy Chan</li>\n<li>Blas Rodriguez Irizar</li>\n<li>Bryan Henry</li>\n<li>Callym</li>\n<li>Caroline Glassberg-Powell</li>\n<li>Cassie Jones</li>\n<li>Chenxi Yuan</li>\n<li>Chris Eckhardt</li>\n<li>Chris Hanks</li>\n<li>Chris Maddox</li>\n<li>Chris West (Faux)</li>\n<li>Clouds Flowing</li>\n<li>Corentin Henry</li>\n<li>Daniel Buse</li>\n<li>Danilo Bargen</li>\n<li>David Teller</li>\n<li>David Tulig</li>\n<li>DebugSteven</li>\n<li>Diggory Blake</li>\n<li>Dmitriy Pleshevskiy</li>\n<li>Dusty Mabe</li>\n<li>DrVilepis</li>\n<li>EclipsedSolari</li>\n<li>Emile Fugulin</li>\n<li>Emm</li>\n<li>Emmanuel Surleau</li>\n<li>Erlend Langseth</li>\n<li>Felix Watts</li>\n<li>Filip Gospodinov</li>\n<li>Garrett Thornburg</li>\n<li>Giorgio Gambino</li>\n<li>Grgory Obanos</li>\n<li>Hal Gentz</li>\n<li>Han Xu</li>\n<li>Heliozoa</li>\n<li>Henk van der Laan</li>\n<li>Henry Boisdequin</li>\n<li>Hirokazu Hata</li>\n<li>Iban Eguia (Razican)</li>\n<li>Igor Raits</li>\n<li>Ivan Tham</li>\n<li>JR Heard</li>\n<li>Jean SIMARD</li>\n<li>Jeremy Stucki</li>\n<li>Ji Sejkora</li>\n<li>jigaoqiang</li>\n<li>Joel Parker Henderson</li>\n<li>John Brandt</li>\n<li>Jonas Platte</li>\n<li>Jonas Schievink</li>\n<li>Joshua Koudys</li>\n<li>Juhasz Sandor</li>\n<li>Justice4Joffrey</li>\n<li>Katharina Fey</li>\n<li>Kevin King</li>\n<li>Kevin Kirchner</li>\n<li>Khionu Sybiern</li>\n<li>Kitsu</li>\n<li>Koisell</li>\n<li>Kononnable</li>\n<li>Leonardo Yvens</li>\n<li>Lukas Markeffsky</li>\n<li>Maccesch</li>\n<li>Marc-Stefan Cassola</li>\n<li>Martell Malone</li>\n<li>Martijn Groeneveldt</li>\n<li>Martin Nordholts</li>\n<li>Matthew Kuo</li>\n<li>Matthieu Guillemot</li>\n<li>Mcat12</li>\n<li>Meven</li>\n<li>Mike Cronce</li>\n<li>Mr Ceperka</li>\n<li>Nafiul Islam</li>\n<li>Nathan Papapietro</li>\n<li>Nicholas Yang</li>\n<li>Oliver Cooper</li>\n<li>Otto Castle</li>\n<li>Pankaj Jangid</li>\n<li>Paolo Barbolini</li>\n<li>Paul Le Corre</li>\n<li>Paul Martensen</li>\n<li>Pavan Kumar Sunkara</li>\n<li>Pawe Przeniczny</li>\n<li>Philip Trauner</li>\n<li>Raphael Arias</li>\n<li>Roman</li>\n<li>Ryan Leckey</li>\n<li>Sarthak Singh</li>\n<li>Scott Driggers</li>\n<li>Sean Klein</li>\n<li>Simon Ertl</li>\n<li>Spencer Taylor</li>\n<li>Steven Chu</li>\n<li>Storm Timmermans</li>\n<li>Sbastien Santoro</li>\n<li>Takayuki Maeda</li>\n<li>Thomas Constantine Moore</li>\n<li>Thomas Eizinger</li>\n<li>Thomas Etter</li>\n<li>Tom MacWright</li>\n<li>Tuetuopay</li>\n<li>Urhengulas</li>\n<li>Vanio Begic</li>\n<li>WebeWizard</li>\n<li>William Myers</li>\n<li>Yin Jifeng</li>\n<li>Yuki Okushi</li>\n<li>Zane Duffield</li>\n<li>blackghost1987</li>\n<li>czotomo</li>\n<li>dchenk</li>\n<li>ejc Drobni</li>\n<li>gorbit99</li>\n<li>hasezoey</li>\n<li>hi-rustin</li>\n<li>kevinpoitra</li>\n<li>kpcyrd</li>\n<li>matthew-dowdell</li>\n<li>ode79</li>\n<li>ropottnik</li>\n<li>telios</li>\n<li>theredfish</li>\n<li>zoewithabang</li>\n<li>Zhenhui Xie</li>\n<li>mile Fugulin</li>\n<li>een</li>\n<li></li>\n<li>_Binboy</li>\n</ul>",{headings:489,localImagePaths:517,remoteImagePaths:518,frontmatter:519,imagePaths:520},[490,493,496,499,502,505,508,511,514],{depth:65,slug:491,text:492},"features","Features",{depth:246,slug:494,text:495},"support-for-group-by-clauses","Support for GROUP BY clauses",{depth:246,slug:497,text:498},"support-for-table-aliasing","Support for table aliasing",{depth:246,slug:500,text:501},"implied-selection-via-the-new-selectable-trait","Implied selection via the new Selectable trait",{depth:246,slug:503,text:504},"support-for-unionintersectexcept-queries","Support for UNION/INTERSECT/EXCEPT queries",{depth:65,slug:506,text:507},"call-for-participation","Call for Participation",{depth:65,slug:509,text:510},"input-for-future-roadmap","Input for Future Roadmap",{depth:65,slug:512,text:513},"update-considerations","Update considerations",{depth:65,slug:515,text:516},"thanks","Thanks",[],[],{title:479,lang:157},[],"news/2_1_0_release",{id:521,data:523,body:528,filePath:529,digest:530,rendered:531},{title:524,editUrl:16,head:525,template:44,sidebar:526,pagefind:16,draft:32},"Diesel 2.1.0",[],{hidden:32,attrs:527},{},"Diesel 2.1.0 contains the contributions of 42 people. More than 380 commits were submitted\nover a span of 9 months.\n\nThis release contains several new features and improves existing features. It introduces support for generating migrations based on the diff between your `schema.rs` file and your database via Diesel CLI. Diesel derives now provides a `#[derive(MultiConnection)]` derive macro that allows to easily combine different database connections into a single enum, which implements `Connection` on its own. The MySQL backend gets support for `upsert` queries via the `ON DUPLICATE KEYS` syntax. Finally we provide new tooling to improve complex error messages generated for common error cases. Check out our [changelog for a complete list of changes](/changelog.html).\n\nThis release wouldn't be possible without the support of our contributors and sponsors. If you want to support diesels development, consider [joining the reviewer team](https://github.com/diesel-rs/diesel/issues?q=reviewer+is%3Aopen), submitting [PR's](https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+), help writing documentation or [sponsor the maintainers](https://github.com/sponsors/weiznich).\n\n\n## Migration generation\n\nDiesel CLI now includes support for generating migrations based on the difference of your `schema.rs` file and your local database. \nThis works as following:\n\n1. Start editing your `schema.rs` file, for example by adding your first table:\n\n```rust title=\"Rust\"\ndiesel::table! {\n    users {\n        id -> Integer,\n        name -> Text,\n    }\n}\n```\n\n2. Run `diesel migration generate my_first_migration --diff-schema --database-url DATABASE_URL`\n3. Checkout, verify and possible modify the generated migration:\n\n```sql title=\"SQL\"\n-- Your SQL goes here\nCREATE TABLE `users`(\n\t`id` INTEGER NOT NULL PRIMARY KEY,\n\t`name` TEXT NOT NULL\n);\n```\n4. Run the migration via `diesel migration run --database-url DATABASE_URL`\n\nIt's important to note that the generated migrations can only contain information that are part of the `schema.rs` file. This explicitly excludes default value, custom check constraints and similar SQL features. We expect the generated migrations to be a good starting point for writing the actual migration you need, we do not expect them to include all necessary information in all cases or to provide the perfect solution in each scenario.\n\n\n## `MultiConnection` support\n\nDiesel now includes a [`#[derive(MultiConnection)]`](https://docs.diesel.rs/2.1.x/diesel/derive.MultiConnection.html) proc macro derive, which allows to easily support more than one database backend in a single application. It can be applied to an enum of different connections:\n\n```rust title=\"Rust\"\n#[derive(diesel::MultiConnection)]\npub enum AnyConnection {\n    Postgresql(diesel::PgConnection),\n    Mysql(diesel::MysqlConnection),\n    Sqlite(diesel::SqliteConnection),\n}\n```\n\nAfterwards the `AnyConnection` type can be used as ordinary connection:\n\n```rust title=\"Rust\"\nfn use_multi(conn: &mut AnyConnection) -> QueryResult<()> {\n   // Use the connection enum as any other connection type\n   // for inserting/updating/loading/\n   diesel::insert_into(users::table)\n       .values(users::name.eq(\"Sean\"))\n       .execute(conn)?;\n\n   let users = users::table.load::<(i32, String)>(conn)?;\n   Ok(())\n}\n```\n\nBy default this connection type will only support a subset of SQL that's supported by all inner connection types. By being an enum it's easy to fallback to backend specific SQL as soon as required. We provide this feature as derive macro so that it is possible to:\n\n* Select the backends you actually use\n* Allow to use third party connections as well (this requires the third party connection to be based at least on diesel 2.1 and to implement the [`MultiConnectionHelper`](https://docs.diesel.rs/2.1.x/diesel/connection/trait.MultiConnectionHelper.html) trait in addition to the existing `Connection` trait.\n\n## Upsert support for the MySQL backend\n\nDiesel 2.1 adds support for `INSERT INTO  ON DUPLICATE KEYS ` queries for the MySQL backend using the existing [`upsert`] framework. It's now possible to write such queries using the diesel provided DSL:\n\n```rust title=\"Rust\"\ndiesel::insert_into(users)\n    .values(&user2)\n    .on_conflict(diesel::dsl::DuplicatedKeys)\n    .do_update()\n    .set(name.eq(\"I DONT KNOW ANYMORE\"))\n    .execute(conn)?;\n```\n\n[`upsert`]: https://docs.diesel.rs/2.1.x/diesel/query_builder/struct.InsertStatement.html#on-duplicate-key\n\n## Improved error messages\n\nWe spend some effort to improve error messages generated by rustc for common diesel issues further.\n\nConsider the following example:\n\n```rust title=\"Rust\"\ntable! {\n    users {\n        id -> Integer,\n        name -> Text,\n    }\n}\n\n#[derive(Queryable)]\nstruct User {\n    name: String,\n    id: i32,\n}\n\n\nusers::table.load::<User>(&mut conn)\n```\n\nwhich would generate the following error message:\n\n```rust title=\"Rust\"\nerror[E0277]: the trait bound `(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType<User, Mysql>` is not satisfied\n    --> src/main.rs:20:31\n     |\n20   |     users::table.load::<User>(&mut conn);\n     |                  ----         ^^^^^^^^^ the trait `load_dsl::private::CompatibleType<User, Mysql>` is not implemented for `(diesel::sql_types::Integer, diesel::sql_types::Text)`\n     |                  |\n     |                  required by a bound introduced by this call\n     |\n     = help: the following other types implement trait `load_dsl::private::CompatibleType<U, DB>`:\n               (ST0, ST1)\n               (ST0, ST1, ST2)\n               (ST0, ST1, ST2, ST3)\n               (ST0, ST1, ST2, ST3, ST4)\n               (ST0, ST1, ST2, ST3, ST4, ST5)\n               (ST0, ST1, ST2, ST3, ST4, ST5, ST6)\n               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7)\n               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7, ST8)\n             and 24 others\n     = note: required for `users::table` to implement `LoadQuery<'_, _, User>`\nnote: required by a bound in `diesel::RunQueryDsl::load`\n    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15\n     |\n1543 |         Self: LoadQuery<'query, Conn, U>,\n     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `diesel::RunQueryDsl::load`\n```\n\nThis is caused by an field order mismatch between what your query returns and what your struct expects the query to return. \n\nWith diesel 2.0 we introduced the `Selectable` trait and a corresponding derive. That allows to automatically generate a matching select clause to prevent such issues from happening. While this already solved parts of the problem it does not solve the following case:\n\n```rust title=\"Rust\"\n#[derive(Queryable, Selectable)]\nstruct User {\n    name: i32,\n    id: i32,\n}\n\nusers::table.select(User::as_select()).load(&mut conn);\n```\n\nwhich generates the following error message:\n\n```rust title=\"Rust\"\nerror[E0277]: the trait bound `expression::select_by::SelectBy<User, _>: load_dsl::private::CompatibleType<_, _>` is not satisfied\n    --> src/main.rs:20:49\n     |\n20   |     users::table.select(User::as_select()).load(&mut conn);\n     |                                            ---- ^^^^^^^^^ the trait `load_dsl::private::CompatibleType<_, _>` is not implemented for `expression::select_by::SelectBy<User, _>`\n     |                                            |\n     |                                            required by a bound introduced by this call\n     |\n     = help: the trait `load_dsl::private::CompatibleType<U, DB>` is implemented for `expression::select_by::SelectBy<U, DB>`\n     = note: required for `SelectStatement<FromClause<users::table>, query_builder::select_clause::SelectClause<expression::select_by::SelectBy<User, _>>>` to implement `LoadQuery<'_, _, _>`\nnote: required by a bound in `diesel::RunQueryDsl::load`\n    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15\n     |\n1543 |         Self: LoadQuery<'query, Conn, U>,\n     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `diesel::RunQueryDsl::load`\n\n```\n\nThis is caused by a type mismatch in the `name` field. With diesel 2.1 we now introduce an additional [`#[diesel(check_for_backend(diesel::backend::BackendType))]`](https://docs.diesel.rs/2.1.x/diesel/expression/derive.Selectable.html#optional-type-attributes) attribute that greatly improves the error messages generated for these cases. This helps pining down which field exactly causes a type mismatch.\n\nBy applying this attribute to our example:\n\n```rust title=\"Rust\"\n#[derive(Queryable, Selectable)]\n#[diesel(check_for_backend(diesel::mysql::Mysql))]\nstruct User {\n    name: i32,\n    id: i32,\n}\n```\n\nwe get the following error message:\n\n```rust title=\"Rust\"\nerror[E0277]: the trait bound `i32: FromSql<diesel::sql_types::Text, Mysql>` is not satisfied\n  --> src/main.rs:13:11\n   |\n13 |     name: i32,\n   |           ^^^ the trait `FromSql<diesel::sql_types::Text, Mysql>` is not implemented for `i32`\n   |\n   = help: the trait `FromSql<diesel::sql_types::Integer, Mysql>` is implemented for `i32`\n   = note: required for `i32` to implement `diesel::Queryable<diesel::sql_types::Text, Mysql>`\n   = note: required for `i32` to implement `FromSqlRow<diesel::sql_types::Text, Mysql>`\n   = help: see issue #48214\n```\n\nThis error message now points to the exact cause of the issue: You cannot deserialize an `Text` value into a `i32` field. This attribute accepts one or more diesel backend type to check the struct definition against. It requires that the struct is using either both, `#[derive(Queryable)]` and `#[derive(Selectable)]` or `#[derive(QueryableByName)]`.\n\n## Internal changes\n\nChanges listed here are relevant for crates using the `i-implement-a-third-party-backend-and-opt-into-breaking-changes` feature flag.\nWith Diesel 2.1 we have migrated some traits to use GAT. This affects the following traits:\n\n* `RowGatWorkaround`\n* `ConnectionGatWorkaround`\n* `HasRawValue`\n* `HasBindCollector`\n\nThese traits are removed in favour of generic associated types on the corresponding child trait.\n\nAdditionally we slightly relaxed one trait bound on `BindCollector::push_bound_value` to allow unsized values there as well.\n\n## Thanks\n\nThank you to everyone who helped make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\n\nIn addition to the Diesel core team, 42 people contributed code to this release. A huge thank you to:\n\n* 6293\n* Aleksei Orazov\n* Alexx Roche\n* AndrolGenhald\n* AndyJado\n* Artemis Livingstone\n* czotomo\n* Diana\n* Elliott Forde\n* Elrendio\n* Gorg Worgington\n* Heliozoa\n* Ian\n* Jake Goulding\n* Jeff Schwab\n* Jeremy Lardenois\n* johnmai\n* Leonardo Yvens\n* mikemcdermottredjack\n* Moritz Hedtke\n* MOZGIII\n* Neil Svedberg\n* Neo\n* Nishant Joshi\n* Oliver Cooper\n* Omid Rad\n* Pablito Labarta\n* Pavan Kumar Sunkara\n* Peter Todorov\n* Rutvik Patel\n* Sanchith Hegde\n* schlamar\n* sebasv\n* Silas McCroskey\n* imon Lukak\n* Steven Chu\n* stormofice\n* Thomas Sieverding\n* Trevor Gross\n* Yuki Okushi\n* \n* ","src/content/docs/news/2_1_0_release.md","fa20cb419a71dde1",{html:532,metadata:533},"<p>Diesel 2.1.0 contains the contributions of 42 people. More than 380 commits were submitted\nover a span of 9 months.</p>\n<p>This release contains several new features and improves existing features. It introduces support for generating migrations based on the diff between your <code dir=\"auto\">schema.rs</code> file and your database via Diesel CLI. Diesel derives now provides a <code dir=\"auto\">#[derive(MultiConnection)]</code> derive macro that allows to easily combine different database connections into a single enum, which implements <code dir=\"auto\">Connection</code> on its own. The MySQL backend gets support for <code dir=\"auto\">upsert</code> queries via the <code dir=\"auto\">ON DUPLICATE KEYS</code> syntax. Finally we provide new tooling to improve complex error messages generated for common error cases. Check out our <a href=\"/changelog.html\">changelog for a complete list of changes</a>.</p>\n<p>This release wouldnt be possible without the support of our contributors and sponsors. If you want to support diesels development, consider <a href=\"https://github.com/diesel-rs/diesel/issues?q=reviewer+is%3Aopen\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">joining the reviewer team</a>, submitting <a href=\"https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PRs</a>, help writing documentation or <a href=\"https://github.com/sponsors/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">sponsor the maintainers</a>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"migration-generation\">Migration generation</h2><a class=\"sl-anchor-link\" href=\"#migration-generation\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Migration generation</span></a></div>\n<p>Diesel CLI now includes support for generating migrations based on the difference of your <code dir=\"auto\">schema.rs</code> file and your local database.\nThis works as following:</p>\n<ol>\n<li>Start editing your <code dir=\"auto\">schema.rs</code> file, for example by adding your first table:</li>\n</ol>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::table! {    users {        id -> Integer,        name -> Text,    }}\"><div></div></button></div></figure></div>\n<ol start=\"2\">\n<li>Run <code dir=\"auto\">diesel migration generate my_first_migration --diff-schema --database-url DATABASE_URL</code></li>\n<li>Checkout, verify and possible modify the generated migration:</li>\n</ol>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">SQL</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- Your SQL goes here</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">CREATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `</span><span style=\"--0:#82AAFF;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">`(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">INTEGER</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">PRIMARY KEY</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TEXT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"-- Your SQL goes hereCREATE TABLE &#x60;users&#x60;(  &#x60;id&#x60; INTEGER NOT NULL PRIMARY KEY,  &#x60;name&#x60; TEXT NOT NULL);\"><div></div></button></div></figure></div>\n<ol start=\"4\">\n<li>Run the migration via <code dir=\"auto\">diesel migration run --database-url DATABASE_URL</code></li>\n</ol>\n<p>Its important to note that the generated migrations can only contain information that are part of the <code dir=\"auto\">schema.rs</code> file. This explicitly excludes default value, custom check constraints and similar SQL features. We expect the generated migrations to be a good starting point for writing the actual migration you need, we do not expect them to include all necessary information in all cases or to provide the perfect solution in each scenario.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"multiconnection-support\"><code dir=\"auto\">MultiConnection</code> support</h2><a class=\"sl-anchor-link\" href=\"#multiconnection-support\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled MultiConnection support</span></a></div>\n<p>Diesel now includes a <a href=\"https://docs.diesel.rs/2.1.x/diesel/derive.MultiConnection.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(MultiConnection)]</code></a> proc macro derive, which allows to easily support more than one database backend in a single application. It can be applied to an enum of different connections:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">MultiConnection)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">enum</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AnyConnection {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Postgresql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">PgConnection),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Mysql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">MysqlConnection),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Sqlite</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqliteConnection),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(diesel::MultiConnection)]pub enum AnyConnection {    Postgresql(diesel::PgConnection),    Mysql(diesel::MysqlConnection),    Sqlite(diesel::SqliteConnection),}\"><div></div></button></div></figure></div>\n<p>Afterwards the <code dir=\"auto\">AnyConnection</code> type can be used as ordinary connection:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">use_multi</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AnyConnection) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryResult&#x3C;()> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#919F9F;--1:#5D6376\">// Use the connection enum as any other connection type</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#919F9F;--1:#5D6376\">// for inserting/updating/loading/</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(i32, String)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"fn use_multi(conn: &#x26;mut AnyConnection) -> QueryResult<()> {   // Use the connection enum as any other connection type   // for inserting/updating/loading/   diesel::insert_into(users::table)       .values(users::name.eq(&#x22;Sean&#x22;))       .execute(conn)?;   let users = users::table.load::<(i32, String)>(conn)?;   Ok(())}\"><div></div></button></div></figure></div>\n<p>By default this connection type will only support a subset of SQL thats supported by all inner connection types. By being an enum its easy to fallback to backend specific SQL as soon as required. We provide this feature as derive macro so that it is possible to:</p>\n<ul>\n<li>Select the backends you actually use</li>\n<li>Allow to use third party connections as well (this requires the third party connection to be based at least on diesel 2.1 and to implement the <a href=\"https://docs.diesel.rs/2.1.x/diesel/connection/trait.MultiConnectionHelper.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">MultiConnectionHelper</code></a> trait in addition to the existing <code dir=\"auto\">Connection</code> trait.</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"upsert-support-for-the-mysql-backend\">Upsert support for the MySQL backend</h2><a class=\"sl-anchor-link\" href=\"#upsert-support-for-the-mysql-backend\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Upsert support for the MySQL backend</span></a></div>\n<p>Diesel 2.1 adds support for <code dir=\"auto\">INSERT INTO  ON DUPLICATE KEYS </code> queries for the MySQL backend using the existing <a href=\"https://docs.diesel.rs/2.1.x/diesel/query_builder/struct.InsertStatement.html#on-duplicate-key\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">upsert</code></a> framework. Its now possible to write such queries using the diesel provided DSL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">user2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">on_conflict</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">DuplicatedKeys)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">do_update</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">I DONT KNOW ANYMORE</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::insert_into(users)    .values(&#x26;user2)    .on_conflict(diesel::dsl::DuplicatedKeys)    .do_update()    .set(name.eq(&#x22;I DONT KNOW ANYMORE&#x22;))    .execute(conn)?;\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"improved-error-messages\">Improved error messages</h2><a class=\"sl-anchor-link\" href=\"#improved-error-messages\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Improved error messages</span></a></div>\n<p>We spend some effort to improve error messages generated by rustc for common diesel issues further.</p>\n<p>Consider the following example:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;User>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"table! {    users {        id -> Integer,        name -> Text,    }}#[derive(Queryable)]struct User {    name: String,    id: i32,}users::table.load::<User>(&#x26;mut conn)\"><div></div></button></div></figure></div>\n<p>which would generate the following error message:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\">[E0277]</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text)</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;User, Mysql>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">src</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">main</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">20</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">31</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">20</span><span style=\"--0:#D6DEEB;--1:#403F53\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">     users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;User>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                  </span><span style=\"--0:#7FDBCA;--1:#096E72\">----</span><span style=\"--0:#D6DEEB;--1:#403F53\">         </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^^^^^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;User, Mysql>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text)`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                  </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                  </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">introduced</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">this</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">call</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">help</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">following</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">other</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">types</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implement</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;U, DB>`</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST3</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST4</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST4</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST5</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST4</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST5</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST6</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST4</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST5</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST6</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST7</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">               </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST0</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST3</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST4</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST5</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST6</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST7</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST8</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">             </span><span style=\"--0:#C5E478;--1:#3B61B0\">and</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">24</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">others</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">` </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implement</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `LoadQuery&#x3C;'_, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, User>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">RunQueryDsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">home</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">weiznich</span><span style=\"--0:#7FDBCA;--1:#096E72\">/.</span><span style=\"--0:#D6DEEB;--1:#403F53\">cargo</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">git</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">checkouts</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">-</span><span style=\"--0:#C5E478;--1:#3B61B0\">6e3331fb3b9331ec</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">ef6252e</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">src</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">query_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">1543</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">15</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">1543</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">         </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> LoadQuery&#x3C;'query, Conn, U>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">               </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">this</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">RunQueryDsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType<User, Mysql>&#x60; is not satisfied    --> src/main.rs:20:31     |20   |     users::table.load::<User>(&#x26;mut conn);     |                  ----         ^^^^^^^^^ the trait &#x60;load_dsl::private::CompatibleType<User, Mysql>&#x60; is not implemented for &#x60;(diesel::sql_types::Integer, diesel::sql_types::Text)&#x60;     |                  |     |                  required by a bound introduced by this call     |     = help: the following other types implement trait &#x60;load_dsl::private::CompatibleType<U, DB>&#x60;:               (ST0, ST1)               (ST0, ST1, ST2)               (ST0, ST1, ST2, ST3)               (ST0, ST1, ST2, ST3, ST4)               (ST0, ST1, ST2, ST3, ST4, ST5)               (ST0, ST1, ST2, ST3, ST4, ST5, ST6)               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7)               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7, ST8)             and 24 others     = note: required for &#x60;users::table&#x60; to implement &#x60;LoadQuery<&#x27;_, _, User>&#x60;note: required by a bound in &#x60;diesel::RunQueryDsl::load&#x60;    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15     |1543 |         Self: LoadQuery<&#x27;query, Conn, U>,     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in &#x60;diesel::RunQueryDsl::load&#x60;\"><div></div></button></div></figure></div>\n<p>This is caused by an field order mismatch between what your query returns and what your struct expects the query to return.</p>\n<p>With diesel 2.0 we introduced the <code dir=\"auto\">Selectable</code> trait and a corresponding derive. That allows to automatically generate a matching select clause to prevent such issues from happening. While this already solved parts of the problem it does not solve the following case:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Selectable)]struct User {    name: i32,    id: i32,}users::table.select(User::as_select()).load(&#x26;mut conn);\"><div></div></button></div></figure></div>\n<p>which generates the following error message:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\">[E0277]</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">select_by</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SelectBy&#x3C;User, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">></span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">src</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">main</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">20</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">49</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">20</span><span style=\"--0:#D6DEEB;--1:#403F53\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">     users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                                            </span><span style=\"--0:#7FDBCA;--1:#096E72\">----</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^^^^^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">select_by</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SelectBy&#x3C;User, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                                            </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                                            </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">introduced</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">this</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">call</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">help</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;U, DB>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">select_by</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SelectBy&#x3C;U, DB>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `SelectStatement&#x3C;FromClause&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">>, </span><span style=\"--0:#C5E478;--1:#3B61B0\">query_builder</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">select_clause</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SelectClause&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">expression</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">select_by</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SelectBy&#x3C;User, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>>>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implement</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `LoadQuery&#x3C;'_, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">RunQueryDsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">home</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">weiznich</span><span style=\"--0:#7FDBCA;--1:#096E72\">/.</span><span style=\"--0:#D6DEEB;--1:#403F53\">cargo</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">git</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">checkouts</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">-</span><span style=\"--0:#C5E478;--1:#3B61B0\">6e3331fb3b9331ec</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">ef6252e</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">src</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">query_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C792EA;--1:#8844AE\">mod</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">1543</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">15</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">1543</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">         </span><span style=\"--0:#7FDBCA;--1:#096E72\">Self:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> LoadQuery&#x3C;'query, Conn, U>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">               </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">this</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">RunQueryDsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;expression::select_by::SelectBy<User, _>: load_dsl::private::CompatibleType<_, _>&#x60; is not satisfied    --> src/main.rs:20:49     |20   |     users::table.select(User::as_select()).load(&#x26;mut conn);     |                                            ---- ^^^^^^^^^ the trait &#x60;load_dsl::private::CompatibleType<_, _>&#x60; is not implemented for &#x60;expression::select_by::SelectBy<User, _>&#x60;     |                                            |     |                                            required by a bound introduced by this call     |     = help: the trait &#x60;load_dsl::private::CompatibleType<U, DB>&#x60; is implemented for &#x60;expression::select_by::SelectBy<U, DB>&#x60;     = note: required for &#x60;SelectStatement<FromClause<users::table>, query_builder::select_clause::SelectClause<expression::select_by::SelectBy<User, _>>>&#x60; to implement &#x60;LoadQuery<&#x27;_, _, _>&#x60;note: required by a bound in &#x60;diesel::RunQueryDsl::load&#x60;    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15     |1543 |         Self: LoadQuery<&#x27;query, Conn, U>,     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in &#x60;diesel::RunQueryDsl::load&#x60;\"><div></div></button></div></figure></div>\n<p>This is caused by a type mismatch in the <code dir=\"auto\">name</code> field. With diesel 2.1 we now introduce an additional <a href=\"https://docs.diesel.rs/2.1.x/diesel/expression/derive.Selectable.html#optional-type-attributes\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[diesel(check_for_backend(diesel::backend::BackendType))]</code></a> attribute that greatly improves the error messages generated for these cases. This helps pining down which field exactly causes a type mismatch.</p>\n<p>By applying this attribute to our example:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(check_for_backend(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">mysql</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Mysql))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Selectable)]#[diesel(check_for_backend(diesel::mysql::Mysql))]struct User {    name: i32,    id: i32,}\"><div></div></button></div></figure></div>\n<p>we get the following error message:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\">[E0277]</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `i32</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> FromSql&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text, Mysql>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">src</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">main</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">13</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">11</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">13</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">     </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">           </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `FromSql&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text, Mysql>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `i32`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">help</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `FromSql&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, Mysql>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `i32`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `i32` </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implement</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Queryable&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text, Mysql>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `i32` </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implement</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `FromSqlRow&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text, Mysql>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">help</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">see</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">issue</span><span style=\"--0:#D6DEEB;--1:#403F53\"> #</span><span style=\"--0:#F78C6C;--1:#AA0982\">48214</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;i32: FromSql<diesel::sql_types::Text, Mysql>&#x60; is not satisfied  --> src/main.rs:13:11   |13 |     name: i32,   |           ^^^ the trait &#x60;FromSql<diesel::sql_types::Text, Mysql>&#x60; is not implemented for &#x60;i32&#x60;   |   = help: the trait &#x60;FromSql<diesel::sql_types::Integer, Mysql>&#x60; is implemented for &#x60;i32&#x60;   = note: required for &#x60;i32&#x60; to implement &#x60;diesel::Queryable<diesel::sql_types::Text, Mysql>&#x60;   = note: required for &#x60;i32&#x60; to implement &#x60;FromSqlRow<diesel::sql_types::Text, Mysql>&#x60;   = help: see issue #48214\"><div></div></button></div></figure></div>\n<p>This error message now points to the exact cause of the issue: You cannot deserialize an <code dir=\"auto\">Text</code> value into a <code dir=\"auto\">i32</code> field. This attribute accepts one or more diesel backend type to check the struct definition against. It requires that the struct is using either both, <code dir=\"auto\">#[derive(Queryable)]</code> and <code dir=\"auto\">#[derive(Selectable)]</code> or <code dir=\"auto\">#[derive(QueryableByName)]</code>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"internal-changes\">Internal changes</h2><a class=\"sl-anchor-link\" href=\"#internal-changes\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Internal changes</span></a></div>\n<p>Changes listed here are relevant for crates using the <code dir=\"auto\">i-implement-a-third-party-backend-and-opt-into-breaking-changes</code> feature flag.\nWith Diesel 2.1 we have migrated some traits to use GAT. This affects the following traits:</p>\n<ul>\n<li><code dir=\"auto\">RowGatWorkaround</code></li>\n<li><code dir=\"auto\">ConnectionGatWorkaround</code></li>\n<li><code dir=\"auto\">HasRawValue</code></li>\n<li><code dir=\"auto\">HasBindCollector</code></li>\n</ul>\n<p>These traits are removed in favour of generic associated types on the corresponding child trait.</p>\n<p>Additionally we slightly relaxed one trait bound on <code dir=\"auto\">BindCollector::push_bound_value</code> to allow unsized values there as well.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"thanks\">Thanks</h2><a class=\"sl-anchor-link\" href=\"#thanks\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Thanks</span></a></div>\n<p>Thank you to everyone who helped make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 42 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>6293</li>\n<li>Aleksei Orazov</li>\n<li>Alexx Roche</li>\n<li>AndrolGenhald</li>\n<li>AndyJado</li>\n<li>Artemis Livingstone</li>\n<li>czotomo</li>\n<li>Diana</li>\n<li>Elliott Forde</li>\n<li>Elrendio</li>\n<li>Gorg Worgington</li>\n<li>Heliozoa</li>\n<li>Ian</li>\n<li>Jake Goulding</li>\n<li>Jeff Schwab</li>\n<li>Jeremy Lardenois</li>\n<li>johnmai</li>\n<li>Leonardo Yvens</li>\n<li>mikemcdermottredjack</li>\n<li>Moritz Hedtke</li>\n<li>MOZGIII</li>\n<li>Neil Svedberg</li>\n<li>Neo</li>\n<li>Nishant Joshi</li>\n<li>Oliver Cooper</li>\n<li>Omid Rad</li>\n<li>Pablito Labarta</li>\n<li>Pavan Kumar Sunkara</li>\n<li>Peter Todorov</li>\n<li>Rutvik Patel</li>\n<li>Sanchith Hegde</li>\n<li>schlamar</li>\n<li>sebasv</li>\n<li>Silas McCroskey</li>\n<li>imon Lukak</li>\n<li>Steven Chu</li>\n<li>stormofice</li>\n<li>Thomas Sieverding</li>\n<li>Trevor Gross</li>\n<li>Yuki Okushi</li>\n<li></li>\n<li></li>\n</ul>",{headings:534,localImagePaths:551,remoteImagePaths:552,frontmatter:553,imagePaths:554},[535,538,541,544,547,550],{depth:65,slug:536,text:537},"migration-generation","Migration generation",{depth:65,slug:539,text:540},"multiconnection-support","MultiConnection support",{depth:65,slug:542,text:543},"upsert-support-for-the-mysql-backend","Upsert support for the MySQL backend",{depth:65,slug:545,text:546},"improved-error-messages","Improved error messages",{depth:65,slug:548,text:549},"internal-changes","Internal changes",{depth:65,slug:515,text:516},[],[],{title:524,lang:157},[],"news/2_3_0_release",{id:555,data:557,body:562,filePath:563,digest:564,rendered:565},{title:558,editUrl:16,head:559,template:44,sidebar:560,pagefind:16,draft:32},"Diesel 2.3.0",[],{hidden:32,attrs:561},{},"Diesel 2.3.0 contains the contributions of 95 people. More than 1142 commits were submitted\nover a span of 16 months.\n\nThis release includes a several large extensions to the query DSL provided by Diesel and also helps increases the number of platforms you can use Diesel on out of the box. Notable changes include:\n\n* [Improved query construction via `#[derive(HasQuery)]`](#hasquery-derive-for-easier-query-construction)\n* [Added support for window functions](#support-for-window-functions)\n* [Using SQLite with WASM in your browser](#using-sqlite-with-wasm)\n* [Extended support for various types, functions and operators in the PostgreSQL backend](#extended-support-for-various-types-functions-and-operators-in-the-postgresql-backend)\n* [Support for `JSON` and `JSONB` in the SQLite backend](#support-for-jsonjsonb-types-and-functions-for-sqlite)\n\nCheckout [the full change log](../changelog.html) for a complete list of changes.\n\nThis release wouldn't be possible without the support of our contributors and sponsors. We would like to especially call out NLNet Foundation which funded the development of the newly added support for window functions via their [NGI Zero Core](https://nlnet.nl/project/Diesel/) initiative. We would also like to call out GitHub for providing additional training security and resources for the Diesel project as part of their [GitHub Secure Open Source Fund](https://github.blog/open-source/maintainers/securing-the-supply-chain-at-scale-starting-with-71-important-open-source-projects/) initiative.\n\nNevertheless is the Diesel project always looking for support. You can help by:\n\n* Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\n* Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\n* Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\n* Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\n* Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\n* [Sponsoring](https://github.com/weiznich) the maintainers.\n\n## HasQuery derive for easier query construction\n\nDiesel 2.3 provides a new [`#[derive(HasQuery)]`](https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html) attribute to construct query more directly from a Rust struct. This new derives extends the existing abilities of [`#[derive(Selectable)]`](https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html) by associating a specific `FROM` clause and possible other clauses with the given struct. This derive also ensures that the query result can actually be loaded into this specific Rust type.\n\nFor the most simple case you can use this derive as follows:\n\n```rust title=\"Rust\"\nuse crate::schema::users;\n\n#[derive(HasQuery)]\nstruct User {\n    id: i32,\n    name: String,\n}\n\nlet users = User::query().load(connection)?\n```\n\nwhich would be equivalent to deriving [`#[derive(Queryable)]`](https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html) + [`#[derive(Selectable)]`](https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html) and constructing the query via `users::table.select(User::as_select())` in older Diesel versions.\n\nFor more advanced usages you can also specify custom select expressions and `FROM` clauses as part of the derive like this:\n\n```rust title=\"Rust\"\nuse crate::schema::{employees, departments};\n\n#[derive(HasQuery)]\n#[diesel(base_query = employees::table.inner_join(departments::table))]\nstruct Employe {\n    name: String,\n    #[diesel(select_expression = departments::name)]\n    department: String,\n    salary: f64,\n    #[diesel(select_expression = dsl::avg(employees::salary).partition_by(department::name))]\n    avg_salary_per_department: f64,\n}\n\nlet employees_with_salary = Employe::query()\n    .filter(departments::name.eq_any([\"Developers\", \"Maintainers\"]))\n    .load(connection)?;\n```\n\nwhich would be equivalent to the following query:\n\n```rust title=\"Rust\"\nemployees::table\n    .inner_join(departments::table)\n    .filter(departments::name.eq_any([\"Developers\", \"Maintainers\"]))\n    .select(Employe::as_select())\n```\n\nThe idea behind this feature is to provide an easier query entry point and also make it easier to share the same base query between different query construction sides all returning the same data structure.\n\n\n## Support for Window Functions \n\nDiesel 2.3 introduces support for constructing [Window function expressions](https://www.postgresql.org/docs/current/tutorial-window.html) via the built-in DSL. This feature is supported on all built-in backends and allows to construct complex analytical queries using the provided DSL.\n\nDiesel provides a set of [built-in Window](https://docs.diesel.rs/2.3.x/diesel/dsl/index.html) functions and also allows to use most of the built-in aggregate functions as window functions. To construct a Window function call it is required to chain at least one [`WindowExpressionMethods`](https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.WindowExpressionMethods.html) method after the actual function call. For example \n\n```rust title=\"Rust\"\nemployees::table\n    .select(\n        dsl::rank()\n            .partition_by(employees::department)\n            .window_order(employees::salary.desc())\n            .frame_by(dsl::frame::Rows.frame_starts_with(dsl::frame::UnboundedPreceding))\n    )\n```\n\ncorresponds to the following SQL query:\n\n```sql title=\"SQL\"\nSELECT\n   RANK() OVER(PARTITION BY department ORDER BY salary DESC ROWS UNBOUNDED PRECEDING\nFROM \n   employees\n```\n\nDiesel ensures at compile time that the formed query is valid by restricting that window only function are used with an actual WINDOW clause, by restricting locations where you can use window functions and by restricting which constructs are supported by which backends.\n\nFinally you can also define your own window functions via the [`#[declare_sql_function]`](https://docs.diesel.rs/2.3.x/diesel/expression/functions/attr.declare_sql_function.html) procedural macro like this:\n\n```rust title=\"Rust\"\n#[declare_sql_function]\nextern \"SQL\" {\n    #[window]\n    fn row_number() -> BigInt;\n}\n```\n\nWe would like to thank the NLNet Foundation again for funding the development of this feature as part of their [NGI Zero Core](https://nlnet.nl/project/Diesel) initiative.\n\n## Using SQLite with WASM\n\nDiesel 2.3 adds support for using the SQLite target with a `wasm32-unknown-unknown` compilation target. This enables using Diesel in a web browser or in any other WASM-runtime. \n\nThis functionality works out of the box by just switching the compilation target to `wasm32-unknown-unknown`, although you might want to consider using a special VFS for actually store data in your web browser.\n\nSee [the complete example for more details](https://github.com/diesel-rs/diesel/tree/main/examples/sqlite/wasm)\n\n## Extended support for various types, functions and operators in the PostgreSQL backend\n\nWe extended Diesel to provide support for the PostgreSQL specific [`MULTIRANGE`](https://www.postgresql.org/docs/current/rangetypes.html) type and also to provide support for a large number of `RANGE` and `MULTIRANGE` specific operators and functions. This feature allows you to construct queries like these:\n\n```rust title=\"Rust\"\ndiesel::select(dsl::int4range(1, 5, RangeBound::LowerBoundInclusiveUpperBoundExclusive).contains(4))\n```\n\nwhich would be equivalent to the following SQL:\n\n```sql title=\"SQL\"\nSELECT int4range(1,5) @> 4;\n```\n\nYou can find a list of all supported functions in the documentation of the [`PgRangeExpressionMethods`](https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.PgRangeExpressionMethods.html) and a list of supported type mappings for the `MULTIRANGE` types in the documentation of the corresponding [SQL type](https://docs.diesel.rs/2.3.x/diesel/pg/sql_types/struct.Multirange.html)\n\nIn addition to the extended support for `RANGE` and `MULTIRANGE` types we also worked on adding a lot new functions for working with `ARRAY`, `JSON` and `JSONB` types. This now covers the majority of functions provided by default by PostgreSQL for these types. See the [documentation](https://docs.diesel.rs/2.3.x/diesel/pg/expression/dsl/index.html) for a complete list.\n\n\n## Support for `JSON`/`JSONB` types and functions for SQLite\n\nFinally we worked on extending the SQLite backend to support [their built-in JSON types and functions](https://sqlite.org/json1.html). As a result both the `Json` and `Jsonb` SQL types provided by Diesel are now supported in the SQLite backend. The SQLite backend does not support these types as *column* types, but requires you to use either the [`json`](https://docs.diesel.rs/2.3.x/diesel/sqlite/expression/functions/fn.json.html) or [`jsonb`](https://docs.diesel.rs/2.3.x/diesel/sqlite/expression/functions/fn.jsonb.html) function to turn a `TEXT` or `BINARY` value into a JSON value. The later value then can be used for manipulating the content of the JSON value, constructing filters or loading values from the database.\n\nYou can use this functionality like this:\n\n```rust title=\"Rust\"\nlet value = diesel::select(jsonb::<Binary, _>(br#\"{\"this\":\"is\",\"a\":[\"test\"]}\"#))\n    .get_result::<serde_json::Value>(connection)?;\n```\n\nto load JSON values from the database.\n\nSee the [documentation](https://docs.diesel.rs/2.3.x/diesel/sqlite/expression/functions/index.html) for a list of supported functions and detailed examples.\n\n## Thanks\n\nThank you to everyone who helped to make this release happen through sponsoring, bug reports, and discussion on GitHub. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated. \n\nIn addition to the Diesel core team, 95 people contributed code to this release. A huge thank you to:\n\n* Abhishek Chanda\n* accestfromim\n* Albert Oudompheng\n* Alex Steele\n* Ali Tariq\n* Ananth Prathap\n* Andr\n* Andrew Plaza\n* Anna Ahmed\n* Anton Vella\n* Arpad Mller\n* Azan Ali\n* BlackDex\n* bwqr\n* Caio\n* Caleb Bourg\n* Carlos Carral C.\n* Cole\n* Daniele\n* danila-b\n* Delfi Sehidic\n* Dhiren Serai\n* Diana Alazzam\n* Ed Cradock\n* edwinlzs\n* Elrendio\n* Everett Pompeii\n* Gary Coady\n* Geoffroy Jaffa Planquart\n* Guilherme Salustiano\n* Hamir Mahal\n* insky7\n* Jakob K\n* Jason White\n* Jean-Marc Le Roux\n* Jonas Schfer\n* Jonathan Alter\n* Joona Brckner\n* Julien Rouhaud\n* Kevin GRONDIN\n* Konrad Pagacz\n* Kristof Mattei\n* Kristopher Wuollett\n* liamw1\n* Logan Grosz\n* LucaCappelletti94\n* Lucas Sunsi Abreu\n* Ludea\n* Marvin Hansen\n* meeshal\n* mertwole\n* Milo Moisson\n* Mindaugas Vinkelis\n* Moritz Pflanzer\n* Nur\n* Oleg Gushul\n* Oliver Cooper\n* Paolo Barbolini\n* Pavan K Sunkara\n* Pavan Kumar Sunkara\n* philippuryas\n* Pierre Fenoll\n* Pratik Fandade\n* Ramzi Sabra\n* Randolf J.\n* Renato Lochetti\n* Saber Haj Rabiee\n* Samuel Batissou\n* schitcrafter\n* Sebastian Goll\n* Sebastian Thiel\n* shray sharma\n* Sindbad-Walter\n* Sofa Aritz\n* Spxg\n* Stephen Thomas-Dorin\n* Sugar\n* Tanguille\n* Tatounee\n* Teoh Han Hui\n* Thomas ARCHAMBEAU\n* Thomas B\n* Thomas Koch\n* Tobias Bieniek\n* VicVerevita\n* vijair\n* Vitaly Miniakhmetov\n* Vladislav Dyachenko\n* Vo Van Nghia\n* Willow \"Wolveric\" Catkin\n* Wolveric\n* wowinter13\n* xanonid\n* Xue Haonan\n* Zaira Bibi","src/content/docs/news/2_3_0_release.md","f724057ee79c51a6",{html:566,metadata:567},"<p>Diesel 2.3.0 contains the contributions of 95 people. More than 1142 commits were submitted\nover a span of 16 months.</p>\n<p>This release includes a several large extensions to the query DSL provided by Diesel and also helps increases the number of platforms you can use Diesel on out of the box. Notable changes include:</p>\n<ul>\n<li><a href=\"#hasquery-derive-for-easier-query-construction\">Improved query construction via <code dir=\"auto\">#[derive(HasQuery)]</code></a></li>\n<li><a href=\"#support-for-window-functions\">Added support for window functions</a></li>\n<li><a href=\"#using-sqlite-with-wasm\">Using SQLite with WASM in your browser</a></li>\n<li><a href=\"#extended-support-for-various-types-functions-and-operators-in-the-postgresql-backend\">Extended support for various types, functions and operators in the PostgreSQL backend</a></li>\n<li><a href=\"#support-for-jsonjsonb-types-and-functions-for-sqlite\">Support for <code dir=\"auto\">JSON</code> and <code dir=\"auto\">JSONB</code> in the SQLite backend</a></li>\n</ul>\n<p>Checkout <a href=\"../changelog.html\">the full change log</a> for a complete list of changes.</p>\n<p>This release wouldnt be possible without the support of our contributors and sponsors. We would like to especially call out NLNet Foundation which funded the development of the newly added support for window functions via their <a href=\"https://nlnet.nl/project/Diesel/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">NGI Zero Core</a> initiative. We would also like to call out GitHub for providing additional training security and resources for the Diesel project as part of their <a href=\"https://github.blog/open-source/maintainers/securing-the-supply-chain-at-scale-starting-with-71-important-open-source-projects/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">GitHub Secure Open Source Fund</a> initiative.</p>\n<p>Nevertheless is the Diesel project always looking for support. You can help by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"hasquery-derive-for-easier-query-construction\">HasQuery derive for easier query construction</h2><a class=\"sl-anchor-link\" href=\"#hasquery-derive-for-easier-query-construction\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled HasQuery derive for easier query construction</span></a></div>\n<p>Diesel 2.3 provides a new <a href=\"https://docs.diesel.rs/2.3.x/diesel/prelude/derive.HasQuery.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(HasQuery)]</code></a> attribute to construct query more directly from a Rust struct. This new derives extends the existing abilities of <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Selectable)]</code></a> by associating a specific <code dir=\"auto\">FROM</code> clause and possible other clauses with the given struct. This derive also ensures that the query result can actually be loaded into this specific Rust type.</p>\n<p>For the most simple case you can use this derive as follows:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">users;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(HasQuery)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use crate::schema::users;#[derive(HasQuery)]struct User {    id: i32,    name: String,}let users = User::query().load(connection)?\"><div></div></button></div></figure></div>\n<p>which would be equivalent to deriving <a href=\"https://docs.diesel.rs/2.3.x/diesel/deserialize/derive.Queryable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Queryable)]</code></a> + <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/derive.Selectable.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[derive(Selectable)]</code></a> and constructing the query via <code dir=\"auto\">users::table.select(User::as_select())</code> in older Diesel versions.</p>\n<p>For more advanced usages you can also specify custom select expressions and <code dir=\"auto\">FROM</code> clauses as part of the derive like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">crate</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">{employees, departments};</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(HasQuery)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(base_query </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> employees</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">inner_join(departments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">table))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Employe {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(select_expression </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> departments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">name)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">department</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">salary</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> f64,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(select_expression </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">avg(employees</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">salary)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">partition_by(department</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">name))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">avg_salary_per_department</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> f64,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">employees_with_salary</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Employe</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(departments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq_any</span><span style=\"--0:#D6DEEB;--1:#403F53\">([</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Developers</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Maintainers</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use crate::schema::{employees, departments};#[derive(HasQuery)]#[diesel(base_query = employees::table.inner_join(departments::table))]struct Employe {    name: String,    #[diesel(select_expression = departments::name)]    department: String,    salary: f64,    #[diesel(select_expression = dsl::avg(employees::salary).partition_by(department::name))]    avg_salary_per_department: f64,}let employees_with_salary = Employe::query()    .filter(departments::name.eq_any([&#x22;Developers&#x22;, &#x22;Maintainers&#x22;]))    .load(connection)?;\"><div></div></button></div></figure></div>\n<p>which would be equivalent to the following query:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">employees</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(departments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(departments</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq_any</span><span style=\"--0:#D6DEEB;--1:#403F53\">([</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Developers</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Maintainers</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Employe</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"employees::table    .inner_join(departments::table)    .filter(departments::name.eq_any([&#x22;Developers&#x22;, &#x22;Maintainers&#x22;]))    .select(Employe::as_select())\"><div></div></button></div></figure></div>\n<p>The idea behind this feature is to provide an easier query entry point and also make it easier to share the same base query between different query construction sides all returning the same data structure.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"support-for-window-functions\">Support for Window Functions</h2><a class=\"sl-anchor-link\" href=\"#support-for-window-functions\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Support for Window Functions</span></a></div>\n<p>Diesel 2.3 introduces support for constructing <a href=\"https://www.postgresql.org/docs/current/tutorial-window.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Window function expressions</a> via the built-in DSL. This feature is supported on all built-in backends and allows to construct complex analytical queries using the provided DSL.</p>\n<p>Diesel provides a set of <a href=\"https://docs.diesel.rs/2.3.x/diesel/dsl/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">built-in Window</a> functions and also allows to use most of the built-in aggregate functions as window functions. To construct a Window function call it is required to chain at least one <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.WindowExpressionMethods.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">WindowExpressionMethods</code></a> method after the actual function call. For example</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">employees</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">rank</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">partition_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(employees</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">department</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">window_order</span><span style=\"--0:#D6DEEB;--1:#403F53\">(employees</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">salary</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">desc</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">frame_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">frame</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Rows</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">frame_starts_with</span><span style=\"--0:#D6DEEB;--1:#403F53\">(dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">frame</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">UnboundedPreceding))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"employees::table    .select(        dsl::rank()            .partition_by(employees::department)            .window_order(employees::salary.desc())            .frame_by(dsl::frame::Rows.frame_starts_with(dsl::frame::UnboundedPreceding))    )\"><div></div></button></div></figure></div>\n<p>corresponds to the following SQL query:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">SQL</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C5E478;--1:#3B61B0\">RANK</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#C792EA;--1:#8844AE\">OVER</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">PARTITION</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">BY</span><span style=\"--0:#D6DEEB;--1:#403F53\"> department </span><span style=\"--0:#C792EA;--1:#8844AE\">ORDER BY</span><span style=\"--0:#D6DEEB;--1:#403F53\"> salary </span><span style=\"--0:#C792EA;--1:#8844AE\">DESC</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">ROWS</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">UNBOUNDED</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">PRECEDING</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">FROM</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">employees</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT   RANK() OVER(PARTITION BY department ORDER BY salary DESC ROWS UNBOUNDED PRECEDINGFROM   employees\"><div></div></button></div></figure></div>\n<p>Diesel ensures at compile time that the formed query is valid by restricting that window only function are used with an actual WINDOW clause, by restricting locations where you can use window functions and by restricting which constructs are supported by which backends.</p>\n<p>Finally you can also define your own window functions via the <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression/functions/attr.declare_sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[declare_sql_function]</code></a> procedural macro like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[declare_sql_function]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">extern</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">SQL</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[window]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">row_number</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> BigInt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[declare_sql_function]extern &#x22;SQL&#x22; {    #[window]    fn row_number() -> BigInt;}\"><div></div></button></div></figure></div>\n<p>We would like to thank the NLNet Foundation again for funding the development of this feature as part of their <a href=\"https://nlnet.nl/project/Diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">NGI Zero Core</a> initiative.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"using-sqlite-with-wasm\">Using SQLite with WASM</h2><a class=\"sl-anchor-link\" href=\"#using-sqlite-with-wasm\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Using SQLite with WASM</span></a></div>\n<p>Diesel 2.3 adds support for using the SQLite target with a <code dir=\"auto\">wasm32-unknown-unknown</code> compilation target. This enables using Diesel in a web browser or in any other WASM-runtime.</p>\n<p>This functionality works out of the box by just switching the compilation target to <code dir=\"auto\">wasm32-unknown-unknown</code>, although you might want to consider using a special VFS for actually store data in your web browser.</p>\n<p>See <a href=\"https://github.com/diesel-rs/diesel/tree/main/examples/sqlite/wasm\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the complete example for more details</a></p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"extended-support-for-various-types-functions-and-operators-in-the-postgresql-backend\">Extended support for various types, functions and operators in the PostgreSQL backend</h2><a class=\"sl-anchor-link\" href=\"#extended-support-for-various-types-functions-and-operators-in-the-postgresql-backend\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Extended support for various types, functions and operators in the PostgreSQL backend</span></a></div>\n<p>We extended Diesel to provide support for the PostgreSQL specific <a href=\"https://www.postgresql.org/docs/current/rangetypes.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">MULTIRANGE</code></a> type and also to provide support for a large number of <code dir=\"auto\">RANGE</code> and <code dir=\"auto\">MULTIRANGE</code> specific operators and functions. This feature allows you to construct queries like these:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">int4range</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#F78C6C;--1:#AA0982\">5</span><span style=\"--0:#D6DEEB;--1:#403F53\">, RangeBound</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">LowerBoundInclusiveUpperBoundExclusive)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">contains</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">4</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::select(dsl::int4range(1, 5, RangeBound::LowerBoundInclusiveUpperBoundExclusive).contains(4))\"><div></div></button></div></figure></div>\n<p>which would be equivalent to the following SQL:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">SQL</span></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">SELECT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> int4range(</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span><span style=\"--0:#F78C6C;--1:#AA0982\">5</span><span style=\"--0:#D6DEEB;--1:#403F53\">) @</span><span style=\"--0:#C792EA;--1:#8844AE\">></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">4</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"SELECT int4range(1,5) @> 4;\"><div></div></button></div></figure></div>\n<p>You can find a list of all supported functions in the documentation of the <a href=\"https://docs.diesel.rs/2.3.x/diesel/expression_methods/trait.PgRangeExpressionMethods.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">PgRangeExpressionMethods</code></a> and a list of supported type mappings for the <code dir=\"auto\">MULTIRANGE</code> types in the documentation of the corresponding <a href=\"https://docs.diesel.rs/2.3.x/diesel/pg/sql_types/struct.Multirange.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">SQL type</a></p>\n<p>In addition to the extended support for <code dir=\"auto\">RANGE</code> and <code dir=\"auto\">MULTIRANGE</code> types we also worked on adding a lot new functions for working with <code dir=\"auto\">ARRAY</code>, <code dir=\"auto\">JSON</code> and <code dir=\"auto\">JSONB</code> types. This now covers the majority of functions provided by default by PostgreSQL for these types. See the <a href=\"https://docs.diesel.rs/2.3.x/diesel/pg/expression/dsl/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">documentation</a> for a complete list.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"support-for-jsonjsonb-types-and-functions-for-sqlite\">Support for <code dir=\"auto\">JSON</code>/<code dir=\"auto\">JSONB</code> types and functions for SQLite</h2><a class=\"sl-anchor-link\" href=\"#support-for-jsonjsonb-types-and-functions-for-sqlite\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Support for JSON/JSONB types and functions for SQLite</span></a></div>\n<p>Finally we worked on extending the SQLite backend to support <a href=\"https://sqlite.org/json1.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">their built-in JSON types and functions</a>. As a result both the <code dir=\"auto\">Json</code> and <code dir=\"auto\">Jsonb</code> SQL types provided by Diesel are now supported in the SQLite backend. The SQLite backend does not support these types as <em>column</em> types, but requires you to use either the <a href=\"https://docs.diesel.rs/2.3.x/diesel/sqlite/expression/functions/fn.json.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">json</code></a> or <a href=\"https://docs.diesel.rs/2.3.x/diesel/sqlite/expression/functions/fn.jsonb.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">jsonb</code></a> function to turn a <code dir=\"auto\">TEXT</code> or <code dir=\"auto\">BINARY</code> value into a JSON value. The later value then can be used for manipulating the content of the JSON value, constructing filters or loading values from the database.</p>\n<p>You can use this functionality like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">value</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3B61B0\">jsonb</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;Binary, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>(</span><span style=\"--0:#ECC48D;--1:#984E4D\">br</span><span style=\"--0:#D9F5DD;--1:#111111\">#\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">{\"this\":\"is\",\"a\":[\"test\"]}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"#</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">get_result</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;serde_json</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Value>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let value = diesel::select(jsonb::<Binary, _>(br#&#x22;{&#x22;this&#x22;:&#x22;is&#x22;,&#x22;a&#x22;:[&#x22;test&#x22;]}&#x22;#))    .get_result::<serde_json::Value>(connection)?;\"><div></div></button></div></figure></div>\n<p>to load JSON values from the database.</p>\n<p>See the <a href=\"https://docs.diesel.rs/2.3.x/diesel/sqlite/expression/functions/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">documentation</a> for a list of supported functions and detailed examples.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"thanks\">Thanks</h2><a class=\"sl-anchor-link\" href=\"#thanks\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Thanks</span></a></div>\n<p>Thank you to everyone who helped to make this release happen through sponsoring, bug reports, and discussion on GitHub. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 95 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Abhishek Chanda</li>\n<li>accestfromim</li>\n<li>Albert Oudompheng</li>\n<li>Alex Steele</li>\n<li>Ali Tariq</li>\n<li>Ananth Prathap</li>\n<li>Andr</li>\n<li>Andrew Plaza</li>\n<li>Anna Ahmed</li>\n<li>Anton Vella</li>\n<li>Arpad Mller</li>\n<li>Azan Ali</li>\n<li>BlackDex</li>\n<li>bwqr</li>\n<li>Caio</li>\n<li>Caleb Bourg</li>\n<li>Carlos Carral C.</li>\n<li>Cole</li>\n<li>Daniele</li>\n<li>danila-b</li>\n<li>Delfi Sehidic</li>\n<li>Dhiren Serai</li>\n<li>Diana Alazzam</li>\n<li>Ed Cradock</li>\n<li>edwinlzs</li>\n<li>Elrendio</li>\n<li>Everett Pompeii</li>\n<li>Gary Coady</li>\n<li>Geoffroy Jaffa Planquart</li>\n<li>Guilherme Salustiano</li>\n<li>Hamir Mahal</li>\n<li>insky7</li>\n<li>Jakob K</li>\n<li>Jason White</li>\n<li>Jean-Marc Le Roux</li>\n<li>Jonas Schfer</li>\n<li>Jonathan Alter</li>\n<li>Joona Brckner</li>\n<li>Julien Rouhaud</li>\n<li>Kevin GRONDIN</li>\n<li>Konrad Pagacz</li>\n<li>Kristof Mattei</li>\n<li>Kristopher Wuollett</li>\n<li>liamw1</li>\n<li>Logan Grosz</li>\n<li>LucaCappelletti94</li>\n<li>Lucas Sunsi Abreu</li>\n<li>Ludea</li>\n<li>Marvin Hansen</li>\n<li>meeshal</li>\n<li>mertwole</li>\n<li>Milo Moisson</li>\n<li>Mindaugas Vinkelis</li>\n<li>Moritz Pflanzer</li>\n<li>Nur</li>\n<li>Oleg Gushul</li>\n<li>Oliver Cooper</li>\n<li>Paolo Barbolini</li>\n<li>Pavan K Sunkara</li>\n<li>Pavan Kumar Sunkara</li>\n<li>philippuryas</li>\n<li>Pierre Fenoll</li>\n<li>Pratik Fandade</li>\n<li>Ramzi Sabra</li>\n<li>Randolf J.</li>\n<li>Renato Lochetti</li>\n<li>Saber Haj Rabiee</li>\n<li>Samuel Batissou</li>\n<li>schitcrafter</li>\n<li>Sebastian Goll</li>\n<li>Sebastian Thiel</li>\n<li>shray sharma</li>\n<li>Sindbad-Walter</li>\n<li>Sofa Aritz</li>\n<li>Spxg</li>\n<li>Stephen Thomas-Dorin</li>\n<li>Sugar</li>\n<li>Tanguille</li>\n<li>Tatounee</li>\n<li>Teoh Han Hui</li>\n<li>Thomas ARCHAMBEAU</li>\n<li>Thomas B</li>\n<li>Thomas Koch</li>\n<li>Tobias Bieniek</li>\n<li>VicVerevita</li>\n<li>vijair</li>\n<li>Vitaly Miniakhmetov</li>\n<li>Vladislav Dyachenko</li>\n<li>Vo Van Nghia</li>\n<li>Willow Wolveric Catkin</li>\n<li>Wolveric</li>\n<li>wowinter13</li>\n<li>xanonid</li>\n<li>Xue Haonan</li>\n<li>Zaira Bibi</li>\n</ul>",{headings:568,localImagePaths:585,remoteImagePaths:586,frontmatter:587,imagePaths:588},[569,572,575,578,581,584],{depth:65,slug:570,text:571},"hasquery-derive-for-easier-query-construction","HasQuery derive for easier query construction",{depth:65,slug:573,text:574},"support-for-window-functions","Support for Window Functions",{depth:65,slug:576,text:577},"using-sqlite-with-wasm","Using SQLite with WASM",{depth:65,slug:579,text:580},"extended-support-for-various-types-functions-and-operators-in-the-postgresql-backend","Extended support for various types, functions and operators in the PostgreSQL backend",{depth:65,slug:582,text:583},"support-for-jsonjsonb-types-and-functions-for-sqlite","Support for JSON/JSONB types and functions for SQLite",{depth:65,slug:515,text:516},[],[],{title:558,lang:157},[],"news",{id:589,data:591,body:596,filePath:597,digest:598,rendered:599},{title:592,editUrl:16,head:593,template:44,sidebar:594,pagefind:16,draft:32},"News",[],{hidden:32,attrs:595},{},"#### [Diesel 2.3.0](/news/2_3_0_release)\n<br />\n\nDiesel 2.3 introduces a new `#[derive(HasQuery)]` derive, support for WINDOW functions and the ability to use the SQLite backend with the `wasm32-unknown-unknown` target.\n\n#### [Diesel 2.2.0](/news/2_2_0_release)\n<br />\n\nDiesel 2.2 introduces a new `#[diesel::dsl::auto_type]` macro to automatically infer query dsl types. Additionally it provides support for connection instrumentation and PostgreSQL's `COPY` syntax.\n\n#### [Diesel 2.1.0](/news/2_1_0_release)\n<br />\n\nDiesel 2.1 introduces support for generating migrations based on differences between your rust code and your database schema. Additionally it provides a `#[derive(MultiConnection)]` derive for a simplified usage of several different connections at once and a improved compile time error message generation.\n\n#### [Diesel 2.0.0](/news/2_0_0_release)\n<br />\n\nDiesel 2.0 introduces support for `GROUP BY` and `UNION`/`INTERSECT` queries. Additionally it features table aliases and a improved field mapping mechanism.","src/content/docs/news/index.md","f2d626d8df38c90d",{html:600,metadata:601},"<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"diesel-230\"><a href=\"/news/2_3_0_release\">Diesel 2.3.0</a></h4><a class=\"sl-anchor-link\" href=\"#diesel-230\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Diesel 2.3.0</span></a></div>\n<br>\n<p>Diesel 2.3 introduces a new <code dir=\"auto\">#[derive(HasQuery)]</code> derive, support for WINDOW functions and the ability to use the SQLite backend with the <code dir=\"auto\">wasm32-unknown-unknown</code> target.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"diesel-220\"><a href=\"/news/2_2_0_release\">Diesel 2.2.0</a></h4><a class=\"sl-anchor-link\" href=\"#diesel-220\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Diesel 2.2.0</span></a></div>\n<br>\n<p>Diesel 2.2 introduces a new <code dir=\"auto\">#[diesel::dsl::auto_type]</code> macro to automatically infer query dsl types. Additionally it provides support for connection instrumentation and PostgreSQLs <code dir=\"auto\">COPY</code> syntax.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"diesel-210\"><a href=\"/news/2_1_0_release\">Diesel 2.1.0</a></h4><a class=\"sl-anchor-link\" href=\"#diesel-210\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Diesel 2.1.0</span></a></div>\n<br>\n<p>Diesel 2.1 introduces support for generating migrations based on differences between your rust code and your database schema. Additionally it provides a <code dir=\"auto\">#[derive(MultiConnection)]</code> derive for a simplified usage of several different connections at once and a improved compile time error message generation.</p>\n<div class=\"sl-heading-wrapper level-h4\"><h4 id=\"diesel-200\"><a href=\"/news/2_0_0_release\">Diesel 2.0.0</a></h4><a class=\"sl-anchor-link\" href=\"#diesel-200\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Diesel 2.0.0</span></a></div>\n<br>\n<p>Diesel 2.0 introduces support for <code dir=\"auto\">GROUP BY</code> and <code dir=\"auto\">UNION</code>/<code dir=\"auto\">INTERSECT</code> queries. Additionally it features table aliases and a improved field mapping mechanism.</p>",{headings:602,localImagePaths:612,remoteImagePaths:613,frontmatter:614,imagePaths:615},[603,605,608,610],{depth:313,slug:604,text:558},"diesel-230",{depth:313,slug:606,text:607},"diesel-220","Diesel 2.2.0",{depth:313,slug:609,text:524},"diesel-210",{depth:313,slug:611,text:479},"diesel-200",[],[],{title:592,lang:157},[],"news/2_2_0_release",{id:616,data:618,body:622,filePath:623,digest:624,rendered:625},{title:607,editUrl:16,head:619,template:44,sidebar:620,pagefind:16,draft:32},[],{hidden:32,attrs:621},{},"Diesel 2.2.0 contains the contributions of 42 people. More than 560 commits were submitted\nover a span of 12 months.\n\nThis release contains several new features and improves existing features. Diesel now provides a procedural macro attribute that infers the correct return type for your query. It's now possible to instrument connection implementations provided by diesel to perform logging and performance measurements. We added support for PostgreSQL's `COPY FROM` and `COPY TO` syntax which can be used to send and receive large amounts of data efficiently. Our dependencies wrapping the native database drivers support now all building the database driver as part of your `cargo build`. This enables us to distribute static precompiled versions of diesel-cli easily. Finally we worked with the [Rust team to stabilize](https://blog.weiznich.de/blog/diagnostic-namespace-10-23/) attributes to customize error messages emitted by the compiler. This is now used by diesel to improve the quality of certain otherwise hard to understand error messages. Check out our [changelog for a complete list of changes](/changelog.html).\n\nThis release wouldn't be possible without the support of our contributors and sponsors. If you want to support diesels development, consider [joining the reviewer team](https://github.com/diesel-rs/diesel/issues/1186), submitting [PR's](https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+), help writing documentation or [sponsor the maintainers](https://github.com/sponsors/weiznich).\n\n## Automatic return type inference for QueryDSL types\n\nDiesel's QueryDSL is designed to be composable through several functions since even before diesel 1.0. This enables you to move common parts of your query into a function and reuse that function from several places. \n\nIn practice that requires specifying the return type of your query part, which is a complex composed highly nested type for anything that's not a trivial query. That made it hard for users to refactor their code to move common query parts into shared functions. Diesel 2.2 introduces the [`#[diesel::dsl::auto_type]`](https://docs.diesel.rs/2.2.x/diesel/dsl/attr.auto_type.html) procedural macro attribute, which infers the correct return type for you.\n\nWithout this attribute you would need to write code like this:\n\n```rust title=\"Rust\"\nfn users_filtered_by_name(name: &str) -> dsl::Filter<users::table, dsl::Eq<users::name, &str>> {\n    users::table.filter(users::name.eq(name))\n}\n```\n\nThe new attribute enables you to write just:\n\n```rust title=\"Rust\"\n#[dsl::auto_type]\nfn users_filtered_by_name(name: &str) -> _ {\n    users::table.filter(users::name.eq(name))\n}\n```\n\nThe `#[dsl::auto_type]` attribute macro replace the `_` placeholder with the correct return type. See the [documentation](https://docs.diesel.rs/2.2.x/diesel/dsl/attr.auto_type.html) for more advanced examples and limitations.\n\n## Instrumentation Support\n\nDiesel now provides support for instrumenting the built-in connections. This enables users to customize logging for these connection types. Diesel provides the [`Connection::set_instrumentation`](https://docs.diesel.rs/2.2.x/diesel/connection/trait.Connection.html#tymethod.set_instrumentation) method that allows to set connection specific instrumentations. It also provides a global [`diesel::connection::set_global_instrumentation`](https://docs.diesel.rs/2.2.x/diesel/connection/fn.set_default_instrumentation.html) that allows to set an instrumentation constructor that is used by all supported connection types.\n\nAn [`Instrumentation`](https://docs.diesel.rs/2.2.x/diesel/connection/trait.Instrumentation.html) is a user defined hook that allows to get notified for certain [`InstrumentationEvent`](https://docs.diesel.rs/2.2.x/diesel/connection/enum.InstrumentationEvent.html). By default the `Instrumentation` trait is implemented for closures with a single `InstrumentationEvent` argument, but it is possible to provide custom implementations for this trait. This enables our users to customize logging based on their preferences in terms of used logging crate, log levels and similar preferences.\n\nExample of a simple `println!` based instrumentation that just logs everything to the standard output:\n\n```rust title=\"Rust\"\nlet mut connection = PgConnection::establish(\"postgres://localhost/diesel\")?;\nconnection.set_instrumentation(|event: InstrumentationEvent<'_>| println!(\"{event:?}\"));\n```\n\n## PostgreSQL COPY FROM/TO Support\n\nDiesel now supports [PostgreSQL's `COPY FROM STDIN` and `COPY TO STDOUT`](https://www.postgresql.org/docs/current/sql-copy.html) syntax. This allows to efficiently transfer large amounts of data between the database and your application. Diesel supports two ways to use these commands, one for using the Diesel model structs as source or target for an optimised binary transfer and one that allows you to configure the low level statement in detail and provide your own input/output stream.\n\nExample `COPY FROM` statement using an `Insertable` struct:\n\n```rust title=\"Rust\"\n#[derive(Insertable)]\n#[diesel(table_name = users)]\n#[diesel(treat_none_as_default_value = false)]\nstruct NewUser {\n    name: &'static str,\n}\n\n\nlet data = vec![\n    NewUser { name: \"Diva Plavalaguna\" },\n    NewUser { name: \"Father Vito Cornelius\" },\n];\n\nlet count = diesel::copy_from(users::table)\n    .from_insertable(&data)\n    .execute(connection)?;\n\nassert_eq!(count, 2);\n```\n\nExample `COPY FROM` statement using the low level interface to provide a CSV stream:\n\n```rust title=\"Rust\"\nuse diesel::pg::CopyFormat;\nlet count = diesel::copy_from(users::table)\n    .from_raw_data(users::table, |copy| {\n        writeln!(copy, \"3,Diva Plavalaguna\").unwrap();\n        writeln!(copy, \"4,Father Vito Cornelius\").unwrap();\n        diesel::QueryResult::Ok(())\n    })\n    .with_format(CopyFormat::Csv)\n    .execute(connection)?;\n```\n\nSee the documentation of [`diesel::copy_to`](https://docs.diesel.rs/2.2.x/diesel/fn.copy_to.html) and [`diesel::copy_from`](https://docs.diesel.rs/2.2.x/diesel/fn.copy_from.html) for more details.\n\n## Bundling support for all native drives and perbuild binaries for diesel-cli\n\nWe updated the [pq-sys](https://blog.weiznich.de/blog/pq-sys-05/) and [mysqlclient-sys](https://blog.weiznich.de/blog/mysqlclient-sys-03/) crates to provide a feature that allows to build both libraries as part of your local `cargo build` command. This simplifies the setup of diesel in new environments and also makes it easier to cross compile applications using diesel. As with the existing bundling support for the SQLite backend you need to add the relevant crate to your `Cargo.toml` and enable the `bundled` feature for this crate. For `diesel-cli` we now provide a `postgres-bundled` and a `mysql-bundled` feature flag as well.\n\nAs a result of this work we are now able to build fully static binaries for `diesel-cli`. Such builds are now provided as part of each release as prebuild binaries. This hopefully streamlines the setup process for new users, although you can continue to use `cargo install diesel_cli` to locally build your version of diesel-cli.\n\n## Improved Error Messages\n\nWe worked with the [Rust team to stabilize](https://blog.weiznich.de/blog/diagnostic-namespace-10-23/) attributes to customize error messages emitted by the compiler. This allows us to include custom messages directly in the compiler error message to hint possible solutions.\n\nThe following two examples demonstrate the new error messages:\n\nFor type mismatches between your query and the result type we now include explicit hints to use `#[derive(Selectable)]` + `#[diesel(check_for_backend())]`:\n\n```rust title=\"Rust\"\nerror[E0277]: the trait bound `(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType<User, _>` is not satisfied\n  --> tests/fail/queryable_with_typemismatch.rs:21:31\n   |\n21 |     users::table.load::<User>(&mut conn).unwrap();\n   |                  ----         ^^^^^^^^^ the trait `load_dsl::private::CompatibleType<User, _>` is not implemented for `(diesel::sql_types::Integer, diesel::sql_types::Text)`, which is required by `users::table: LoadQuery<'_, _, User>`\n   |                  |\n   |                  required by a bound introduced by this call\n   |\n   = note: this is a mismatch between what your query returns and what your type expects the query to return\n   = note: the fields in your struct need to match the fields returned by your query in count, order and type\n   = note: consider using `#[derive(Selectable)]` + `#[diesel(check_for_backend(_))]` on your struct `User` and\n           in your query `.select(UserWithToManyFields::as_select())` to get a better error message\n```\n\nFor field type mismatches rustc now explicitly tells you that this mapping is not supported:\n\n\n```rust title=\"Rust\"\nerror[E0277]: cannot deserialize a value of the database type `diesel::sql_types::Integer` as `*const str`\n  --> tests/fail/broken_queryable_by_name.rs:16:5\n   |\n16 |     id: String,\n   |     ^^^^^^^^^^ the trait `FromSql<diesel::sql_types::Integer, Pg>` is not implemented for `*const str`, which is required by `std::string::String: FromSqlRow<diesel::sql_types::Integer, Pg>`\n   |\n   = note: double check your type mappings via the documentation of `diesel::sql_types::Integer`\n```\n\nDiesel 2.2 includes similar improvements for many more error messages. Improving hard to understand error messages is still an ongoing project so please reach out with examples if you hit a particular bad error message. This enables us to further improve the messages by either adding the new attribute there as well or by working with the Rust team to introduce additional attributes to cover more cases.\n\n## Thanks\n\nThank you to everyone who helped to make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\n\nIn addition to the Diesel core team, 60 people contributed code to this release. A huge thank you to:\n\n* Alexander 'z33ky' Hirsch\n* aumetra\n* BlackDex\n* Caio\n* Daniel Sousa\n* Danilo Bargen\n* Danny Goldberg\n* David Soria Parra\n* Davis Muro\n* Denny Biasiolli\n* Dessalines\n* Drew Vogel\n* dullbananas\n* Elrendio\n* Emile Fugulin\n* Ernest Rudnicki\n* Everett Pompeii\n* forest1102\n* George Manning\n* hasezoey\n* Henry Zimmerman\n* ISibboI\n* Jonathan Boyle\n* Junghyun Nam\n* Kevin GRONDIN\n* kirk\n* Kornel\n* Kristopher Wuollett\n* Marc Coleman\n* Maxi Barmetler\n* Michael Bachmann\n* Minsung Kim\n* Mohamed Belaouad\n* Moulins\n* obsoleszenz\n* Omid Rad\n* Orne Brocaar\n* Paolo Barbolini\n* Pavan Kumar Sunkara\n* Peter C. S. Scholtens\n* retro\n* sabati\n* Saber Haj Rabiee\n* Samuel Batissou\n* Sean Klein\n* Sebastian Fritsch\n* Sebastian N. Fernandez\n* Sebastian Schmidt\n* Sebastian Urban\n* Serhii Potapov\n* Simon Eisenmann\n* snf\n* Tal Pressman\n* Tanguille\n* Thomas Constantine Moore\n* Tommy McCallig\n* Viktor Szpe\n* yagince\n* Zhai Xiang\n* ","src/content/docs/news/2_2_0_release.md","11d08ab2cb2a67d2",{html:626,metadata:627},"<p>Diesel 2.2.0 contains the contributions of 42 people. More than 560 commits were submitted\nover a span of 12 months.</p>\n<p>This release contains several new features and improves existing features. Diesel now provides a procedural macro attribute that infers the correct return type for your query. Its now possible to instrument connection implementations provided by diesel to perform logging and performance measurements. We added support for PostgreSQLs <code dir=\"auto\">COPY FROM</code> and <code dir=\"auto\">COPY TO</code> syntax which can be used to send and receive large amounts of data efficiently. Our dependencies wrapping the native database drivers support now all building the database driver as part of your <code dir=\"auto\">cargo build</code>. This enables us to distribute static precompiled versions of diesel-cli easily. Finally we worked with the <a href=\"https://blog.weiznich.de/blog/diagnostic-namespace-10-23/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Rust team to stabilize</a> attributes to customize error messages emitted by the compiler. This is now used by diesel to improve the quality of certain otherwise hard to understand error messages. Check out our <a href=\"/changelog.html\">changelog for a complete list of changes</a>.</p>\n<p>This release wouldnt be possible without the support of our contributors and sponsors. If you want to support diesels development, consider <a href=\"https://github.com/diesel-rs/diesel/issues/1186\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">joining the reviewer team</a>, submitting <a href=\"https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PRs</a>, help writing documentation or <a href=\"https://github.com/sponsors/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">sponsor the maintainers</a>.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"automatic-return-type-inference-for-querydsl-types\">Automatic return type inference for QueryDSL types</h2><a class=\"sl-anchor-link\" href=\"#automatic-return-type-inference-for-querydsl-types\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Automatic return type inference for QueryDSL types</span></a></div>\n<p>Diesels QueryDSL is designed to be composable through several functions since even before diesel 1.0. This enables you to move common parts of your query into a function and reuse that function from several places.</p>\n<p>In practice that requires specifying the return type of your query part, which is a complex composed highly nested type for anything thats not a trivial query. That made it hard for users to refactor their code to move common query parts into shared functions. Diesel 2.2 introduces the <a href=\"https://docs.diesel.rs/2.2.x/diesel/dsl/attr.auto_type.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">#[diesel::dsl::auto_type]</code></a> procedural macro attribute, which infers the correct return type for you.</p>\n<p>Without this attribute you would need to write code like this:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">users_filtered_by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Filter&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Eq&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str>> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"fn users_filtered_by_name(name: &#x26;str) -> dsl::Filter<users::table, dsl::Eq<users::name, &#x26;str>> {    users::table.filter(users::name.eq(name))}\"><div></div></button></div></figure></div>\n<p>The new attribute enables you to write just:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">auto_type]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">users_filtered_by_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">str) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[dsl::auto_type]fn users_filtered_by_name(name: &#x26;str) -> _ {    users::table.filter(users::name.eq(name))}\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">#[dsl::auto_type]</code> attribute macro replace the <code dir=\"auto\">_</code> placeholder with the correct return type. See the <a href=\"https://docs.diesel.rs/2.2.x/diesel/dsl/attr.auto_type.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">documentation</a> for more advanced examples and limitations.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"instrumentation-support\">Instrumentation Support</h2><a class=\"sl-anchor-link\" href=\"#instrumentation-support\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Instrumentation Support</span></a></div>\n<p>Diesel now provides support for instrumenting the built-in connections. This enables users to customize logging for these connection types. Diesel provides the <a href=\"https://docs.diesel.rs/2.2.x/diesel/connection/trait.Connection.html#tymethod.set_instrumentation\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Connection::set_instrumentation</code></a> method that allows to set connection specific instrumentations. It also provides a global <a href=\"https://docs.diesel.rs/2.2.x/diesel/connection/fn.set_default_instrumentation.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::connection::set_global_instrumentation</code></a> that allows to set an instrumentation constructor that is used by all supported connection types.</p>\n<p>An <a href=\"https://docs.diesel.rs/2.2.x/diesel/connection/trait.Instrumentation.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">Instrumentation</code></a> is a user defined hook that allows to get notified for certain <a href=\"https://docs.diesel.rs/2.2.x/diesel/connection/enum.InstrumentationEvent.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">InstrumentationEvent</code></a>. By default the <code dir=\"auto\">Instrumentation</code> trait is implemented for closures with a single <code dir=\"auto\">InstrumentationEvent</code> argument, but it is possible to provide custom implementations for this trait. This enables our users to customize logging based on their preferences in terms of used logging crate, log levels and similar preferences.</p>\n<p>Example of a simple <code dir=\"auto\">println!</code> based instrumentation that just logs everything to the standard output:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> PgConnection</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">establish</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">postgres://localhost/diesel</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set_instrumentation</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#C5E478;--1:#3B61B0\">event</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> InstrumentationEvent&#x3C;'_></span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">println!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">{event:?}</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">));</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"let mut connection = PgConnection::establish(&#x22;postgres://localhost/diesel&#x22;)?;connection.set_instrumentation(|event: InstrumentationEvent<&#x27;_>| println!(&#x22;{event:?}&#x22;));\"><div></div></button></div></figure></div>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"postgresql-copy-fromto-support\">PostgreSQL COPY FROM/TO Support</h2><a class=\"sl-anchor-link\" href=\"#postgresql-copy-fromto-support\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled PostgreSQL COPY FROM/TO Support</span></a></div>\n<p>Diesel now supports <a href=\"https://www.postgresql.org/docs/current/sql-copy.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PostgreSQLs <code dir=\"auto\">COPY FROM STDIN</code> and <code dir=\"auto\">COPY TO STDOUT</code></a> syntax. This allows to efficiently transfer large amounts of data between the database and your application. Diesel supports two ways to use these commands, one for using the Diesel model structs as source or target for an optimised binary transfer and one that allows you to configure the low level statement in detail and provide your own input/output stream.</p>\n<p>Example <code dir=\"auto\">COPY FROM</code> statement using an <code dir=\"auto\">Insertable</code> struct:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Insertable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(table_name </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(treat_none_as_default_value </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> false)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> NewUser {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#D6DEEB;--1:#403F53\">'static str,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">data</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">vec!</span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">NewUser { </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Diva Plavalaguna</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">NewUser { </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Father Vito Cornelius</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">];</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">count</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">copy_from</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">from_insertable</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">data</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">assert_eq!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">count</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Insertable)]#[diesel(table_name = users)]#[diesel(treat_none_as_default_value = false)]struct NewUser {    name: &#x26;&#x27;static str,}let data = vec![    NewUser { name: &#x22;Diva Plavalaguna&#x22; },    NewUser { name: &#x22;Father Vito Cornelius&#x22; },];let count = diesel::copy_from(users::table)    .from_insertable(&#x26;data)    .execute(connection)?;assert_eq!(count, 2);\"><div></div></button></div></figure></div>\n<p>Example <code dir=\"auto\">COPY FROM</code> statement using the low level interface to provide a CSV stream:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">use</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">pg</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CopyFormat;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">count</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">copy_from</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">from_raw_data</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#C5E478;--1:#3B61B0\">copy</span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">writeln!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">copy</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">3,Diva Plavalaguna</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">unwrap</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3B61B0\">writeln!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">copy</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">4,Father Vito Cornelius</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">unwrap</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">QueryResult</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">with_format</span><span style=\"--0:#D6DEEB;--1:#403F53\">(CopyFormat</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Csv)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"use diesel::pg::CopyFormat;let count = diesel::copy_from(users::table)    .from_raw_data(users::table, |copy| {        writeln!(copy, &#x22;3,Diva Plavalaguna&#x22;).unwrap();        writeln!(copy, &#x22;4,Father Vito Cornelius&#x22;).unwrap();        diesel::QueryResult::Ok(())    })    .with_format(CopyFormat::Csv)    .execute(connection)?;\"><div></div></button></div></figure></div>\n<p>See the documentation of <a href=\"https://docs.diesel.rs/2.2.x/diesel/fn.copy_to.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::copy_to</code></a> and <a href=\"https://docs.diesel.rs/2.2.x/diesel/fn.copy_from.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code dir=\"auto\">diesel::copy_from</code></a> for more details.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"bundling-support-for-all-native-drives-and-perbuild-binaries-for-diesel-cli\">Bundling support for all native drives and perbuild binaries for diesel-cli</h2><a class=\"sl-anchor-link\" href=\"#bundling-support-for-all-native-drives-and-perbuild-binaries-for-diesel-cli\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Bundling support for all native drives and perbuild binaries for diesel-cli</span></a></div>\n<p>We updated the <a href=\"https://blog.weiznich.de/blog/pq-sys-05/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">pq-sys</a> and <a href=\"https://blog.weiznich.de/blog/mysqlclient-sys-03/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">mysqlclient-sys</a> crates to provide a feature that allows to build both libraries as part of your local <code dir=\"auto\">cargo build</code> command. This simplifies the setup of diesel in new environments and also makes it easier to cross compile applications using diesel. As with the existing bundling support for the SQLite backend you need to add the relevant crate to your <code dir=\"auto\">Cargo.toml</code> and enable the <code dir=\"auto\">bundled</code> feature for this crate. For <code dir=\"auto\">diesel-cli</code> we now provide a <code dir=\"auto\">postgres-bundled</code> and a <code dir=\"auto\">mysql-bundled</code> feature flag as well.</p>\n<p>As a result of this work we are now able to build fully static binaries for <code dir=\"auto\">diesel-cli</code>. Such builds are now provided as part of each release as prebuild binaries. This hopefully streamlines the setup process for new users, although you can continue to use <code dir=\"auto\">cargo install diesel_cli</code> to locally build your version of diesel-cli.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"improved-error-messages\">Improved Error Messages</h2><a class=\"sl-anchor-link\" href=\"#improved-error-messages\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Improved Error Messages</span></a></div>\n<p>We worked with the <a href=\"https://blog.weiznich.de/blog/diagnostic-namespace-10-23/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Rust team to stabilize</a> attributes to customize error messages emitted by the compiler. This allows us to include custom messages directly in the compiler error message to hint possible solutions.</p>\n<p>The following two examples demonstrate the new error messages:</p>\n<p>For type mismatches between your query and the result type we now include explicit hints to use <code dir=\"auto\">#[derive(Selectable)]</code> + <code dir=\"auto\">#[diesel(check_for_backend())]</code>:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\">[E0277]</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text)</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;User, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">tests</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">fail</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">queryable_with_typemismatch</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">21</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">31</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">21</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">     users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;User>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">unwrap</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                  </span><span style=\"--0:#7FDBCA;--1:#096E72\">----</span><span style=\"--0:#D6DEEB;--1:#403F53\">         </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^^^^^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `load_dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">private</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">CompatibleType&#x3C;User, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Text)`, </span><span style=\"--0:#C5E478;--1:#3B61B0\">which</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> LoadQuery&#x3C;'_, </span><span style=\"--0:#C5E478;--1:#3B61B0\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, User>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                  </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">                  </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">bound</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">introduced</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">this</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">call</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">this</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">mismatch</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">between</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">what</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">returns</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">and</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">what</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">expects</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">return</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">fields</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">need</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">match</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">fields</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">returned</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">count</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">order</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">and</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">consider</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">using</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `#[derive(Selectable)]` </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `#[diesel(check_for_backend(_))]` </span><span style=\"--0:#C5E478;--1:#3B61B0\">on</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `User` </span><span style=\"--0:#C5E478;--1:#3B61B0\">and</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">           </span><span style=\"--0:#C792EA;--1:#8844AE\">in</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">query</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(UserWithToManyFields</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())` </span><span style=\"--0:#C5E478;--1:#3B61B0\">to</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">get</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">better</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">message</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType<User, _>&#x60; is not satisfied  --> tests/fail/queryable_with_typemismatch.rs:21:31   |21 |     users::table.load::<User>(&#x26;mut conn).unwrap();   |                  ----         ^^^^^^^^^ the trait &#x60;load_dsl::private::CompatibleType<User, _>&#x60; is not implemented for &#x60;(diesel::sql_types::Integer, diesel::sql_types::Text)&#x60;, which is required by &#x60;users::table: LoadQuery<&#x27;_, _, User>&#x60;   |                  |   |                  required by a bound introduced by this call   |   = note: this is a mismatch between what your query returns and what your type expects the query to return   = note: the fields in your struct need to match the fields returned by your query in count, order and type   = note: consider using &#x60;#[derive(Selectable)]&#x60; + &#x60;#[diesel(check_for_backend(_))]&#x60; on your struct &#x60;User&#x60; and           in your query &#x60;.select(UserWithToManyFields::as_select())&#x60; to get a better error message\"><div></div></button></div></figure></div>\n<p>For field type mismatches rustc now explicitly tells you that this mapping is not supported:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">Rust</span></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3B61B0\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\">[E0277]</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">cannot</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">deserialize</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">a</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">value</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">of</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">database</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer` </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `</span><span style=\"--0:#7FDBCA;--1:#096E72\">*</span><span style=\"--0:#C792EA;--1:#8844AE\">const</span><span style=\"--0:#D6DEEB;--1:#403F53\"> str`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#096E72\">--></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">tests</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">fail</span><span style=\"--0:#7FDBCA;--1:#096E72\">/</span><span style=\"--0:#C5E478;--1:#3B61B0\">broken_queryable_by_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">rs</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">16</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#F78C6C;--1:#AA0982\">5</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#F78C6C;--1:#AA0982\">16</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">     </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\">     </span><span style=\"--0:#C792EA;--1:#8844AE\">^^^^^^^^^^</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">trait</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `FromSql&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, Pg>` </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">not</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">implemented</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">for</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `</span><span style=\"--0:#7FDBCA;--1:#096E72\">*</span><span style=\"--0:#C792EA;--1:#8844AE\">const</span><span style=\"--0:#D6DEEB;--1:#403F53\"> str`, </span><span style=\"--0:#C5E478;--1:#3B61B0\">which</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">is</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">required</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">by</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `std</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">string</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">String</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> FromSqlRow&#x3C;</span><span style=\"--0:#C5E478;--1:#3B61B0\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer, Pg>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">note</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">double</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">check</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">your</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">mappings</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">via</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">the</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">documentation</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">of</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">sql_types</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Integer`</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: cannot deserialize a value of the database type &#x60;diesel::sql_types::Integer&#x60; as &#x60;*const str&#x60;  --> tests/fail/broken_queryable_by_name.rs:16:5   |16 |     id: String,   |     ^^^^^^^^^^ the trait &#x60;FromSql<diesel::sql_types::Integer, Pg>&#x60; is not implemented for &#x60;*const str&#x60;, which is required by &#x60;std::string::String: FromSqlRow<diesel::sql_types::Integer, Pg>&#x60;   |   = note: double check your type mappings via the documentation of &#x60;diesel::sql_types::Integer&#x60;\"><div></div></button></div></figure></div>\n<p>Diesel 2.2 includes similar improvements for many more error messages. Improving hard to understand error messages is still an ongoing project so please reach out with examples if you hit a particular bad error message. This enables us to further improve the messages by either adding the new attribute there as well or by working with the Rust team to introduce additional attributes to cover more cases.</p>\n<div class=\"sl-heading-wrapper level-h2\"><h2 id=\"thanks\">Thanks</h2><a class=\"sl-anchor-link\" href=\"#thanks\"><span aria-hidden=\"true\" class=\"sl-anchor-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg></span><span class=\"sr-only\">Section titled Thanks</span></a></div>\n<p>Thank you to everyone who helped to make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 60 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Alexander z33ky Hirsch</li>\n<li>aumetra</li>\n<li>BlackDex</li>\n<li>Caio</li>\n<li>Daniel Sousa</li>\n<li>Danilo Bargen</li>\n<li>Danny Goldberg</li>\n<li>David Soria Parra</li>\n<li>Davis Muro</li>\n<li>Denny Biasiolli</li>\n<li>Dessalines</li>\n<li>Drew Vogel</li>\n<li>dullbananas</li>\n<li>Elrendio</li>\n<li>Emile Fugulin</li>\n<li>Ernest Rudnicki</li>\n<li>Everett Pompeii</li>\n<li>forest1102</li>\n<li>George Manning</li>\n<li>hasezoey</li>\n<li>Henry Zimmerman</li>\n<li>ISibboI</li>\n<li>Jonathan Boyle</li>\n<li>Junghyun Nam</li>\n<li>Kevin GRONDIN</li>\n<li>kirk</li>\n<li>Kornel</li>\n<li>Kristopher Wuollett</li>\n<li>Marc Coleman</li>\n<li>Maxi Barmetler</li>\n<li>Michael Bachmann</li>\n<li>Minsung Kim</li>\n<li>Mohamed Belaouad</li>\n<li>Moulins</li>\n<li>obsoleszenz</li>\n<li>Omid Rad</li>\n<li>Orne Brocaar</li>\n<li>Paolo Barbolini</li>\n<li>Pavan Kumar Sunkara</li>\n<li>Peter C. S. Scholtens</li>\n<li>retro</li>\n<li>sabati</li>\n<li>Saber Haj Rabiee</li>\n<li>Samuel Batissou</li>\n<li>Sean Klein</li>\n<li>Sebastian Fritsch</li>\n<li>Sebastian N. Fernandez</li>\n<li>Sebastian Schmidt</li>\n<li>Sebastian Urban</li>\n<li>Serhii Potapov</li>\n<li>Simon Eisenmann</li>\n<li>snf</li>\n<li>Tal Pressman</li>\n<li>Tanguille</li>\n<li>Thomas Constantine Moore</li>\n<li>Tommy McCallig</li>\n<li>Viktor Szpe</li>\n<li>yagince</li>\n<li>Zhai Xiang</li>\n<li></li>\n</ul>",{headings:628,localImagePaths:644,remoteImagePaths:645,frontmatter:646,imagePaths:647},[629,632,635,638,641,643],{depth:65,slug:630,text:631},"automatic-return-type-inference-for-querydsl-types","Automatic return type inference for QueryDSL types",{depth:65,slug:633,text:634},"instrumentation-support","Instrumentation Support",{depth:65,slug:636,text:637},"postgresql-copy-fromto-support","PostgreSQL COPY FROM/TO Support",{depth:65,slug:639,text:640},"bundling-support-for-all-native-drives-and-perbuild-binaries-for-diesel-cli","Bundling support for all native drives and perbuild binaries for diesel-cli",{depth:65,slug:545,text:642},"Improved Error Messages",{depth:65,slug:515,text:516},[],[],{title:607,lang:157},[],"compare_diesel",{id:648,data:650,body:57,filePath:654,digest:59,rendered:655},{title:53,editUrl:16,head:651,template:44,sidebar:652,pagefind:16,draft:32},[],{hidden:32,attrs:653},{},"src/content/docs/compare_diesel.md",{html:61,metadata:656},{headings:657,localImagePaths:664,remoteImagePaths:665,frontmatter:666,imagePaths:667},[658,659,660,661,662,663],{depth:65,slug:66,text:67},{depth:65,slug:69,text:70},{depth:65,slug:72,text:73},{depth:65,slug:75,text:76},{depth:65,slug:78,text:79},{depth:65,slug:81,text:82},[],[],{title:53},[],"meta:changelogs",["Map",670,671],"etag","W/\"41096412bc1a5726ff0534e62ebd23fc8c285d77530a043dc7d1d37827c290d1\"","changelogs",["Map",674,675,697,698,716,717,733,734,750,751,767,768,789,790,809,810,828,829,845,846,862,863,879,880,896,897,913,914,929,930,946,947,962,963,978,979,994,995,1014,1015,1030,1031,1046,1047,1062,1063,1078,1079,1094,1095,1112,1113,1133,1134,1151,1152,1167,1168,1184,1185,1201,1202,1217,1218,1240,1241,1256,1257,1272,1273,1289,1290,1306,1307,1323,1324,1340,1341,1360,1361,1376,1377,1392,1393,1410,1411,1427,1428,1443,1444,1466,1467,1482,1483,1498,1499,1518,1519,1546,1547,1562,1563,1578,1579,1594,1595,1610,1611,1624,1625,1649,1650,1665,1666,1681,1682,1697,1698,1713,1714,1729,1730,1745,1746,1761,1762,1777,1778,1793,1794,1806,1807,1822,1823,1838,1839,1854,1855,1870,1871],"changelog/version/diesel-2-3-6",{id:674,data:676,body:685,rendered:686},{base:677,date:678,link:679,provider:680,slug:683,title:684},"changelog",["Date","2026-01-23T07:57:29.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.3.6",{name:681,label:682},"github","GitHub","diesel-2-3-6","Diesel 2.3.6","# Fixed\r\n\r\n* Added support for mysqlclient-sys 0.5.0\r\n* Fix generating valid schema if a column is named `table`\r\n* Fixed a regression with `#[derive(Insertable)]` if the same field type is used with different lifetime values\r\n\r\nYou can support the development of Diesel by:\r\n\r\n-   Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\r\n-   Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\r\n-   Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\r\n-   Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   [Sponsoring](https://github.com/weiznich) the maintainers.\r\n\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.3.5...v2.3.6",{html:687,metadata:688},"<h1 id=\"fixed\">Fixed</h1>\n<ul>\n<li>Added support for mysqlclient-sys 0.5.0</li>\n<li>Fix generating valid schema if a column is named <code>table</code></li>\n<li>Fixed a regression with <code>#[derive(Insertable)]</code> if the same field type is used with different lifetime values</li>\n</ul>\n<p>You can support the development of Diesel by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.3.5...v2.3.6\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.3.5v2.3.6</a></p>",{headings:689,localImagePaths:694,remoteImagePaths:695,frontmatter:696},[690],{depth:691,slug:692,text:693},1,"fixed","Fixed",[],[],{},"changelog/version/diesel-2-3-5",{id:697,data:699,body:705,rendered:706},{base:677,date:700,link:701,provider:702,slug:703,title:704},["Date","2025-12-19T07:31:24.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.3.5",{name:681,label:682},"diesel-2-3-5","Diesel 2.3.5","# Fixes\r\n\r\n* Fix another libmariadb related issue with time types\r\n* Improve compile time error messages for `#[derive(Insertable)]`\r\n* Bump supported version of sqlite-wasm-rs to 0.5.0\r\n* Minor documentation fixes\r\n* Make the `returning_clauses_for_sqlite_3_35` feature enable the `sqlite` feature by default\r\n* Include a fix for a nightly rust name resolution ambiguity\r\n\r\n\r\nYou can support the development of Diesel by:\r\n\r\n-   Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\r\n-   Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\r\n-   Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\r\n-   Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   [Sponsoring](https://github.com/weiznich) the maintainers.\r\n\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.3.4...v2.3.5",{html:707,metadata:708},"<h1 id=\"fixes\">Fixes</h1>\n<ul>\n<li>Fix another libmariadb related issue with time types</li>\n<li>Improve compile time error messages for <code>#[derive(Insertable)]</code></li>\n<li>Bump supported version of sqlite-wasm-rs to 0.5.0</li>\n<li>Minor documentation fixes</li>\n<li>Make the <code>returning_clauses_for_sqlite_3_35</code> feature enable the <code>sqlite</code> feature by default</li>\n<li>Include a fix for a nightly rust name resolution ambiguity</li>\n</ul>\n<p>You can support the development of Diesel by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.3.4...v2.3.5\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.3.4v2.3.5</a></p>",{headings:709,localImagePaths:713,remoteImagePaths:714,frontmatter:715},[710],{depth:691,slug:711,text:712},"fixes","Fixes",[],[],{},"changelog/version/diesel-2-3-4",{id:716,data:718,body:724,rendered:725},{base:677,date:719,link:720,provider:721,slug:722,title:723},["Date","2025-11-26T16:29:31.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.3.4",{name:681,label:682},"diesel-2-3-4","Diesel 2.3.4","## Fixed \r\n\r\n* Fix an issue with breaking changes in libmariadb\r\n* Fix documentation links for helper types\r\n* Fix using `#[diesel(embed)]` with `Option<Inner>` types\r\n* Fix documentation for concurrent migration runs\r\n\r\nYou can support the development of Diesel by:\r\n\r\n-   Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\r\n-   Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\r\n-   Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\r\n-   Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   [Sponsoring](https://github.com/weiznich) the maintainers.\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.3.3...v2.3.4",{html:726,metadata:727},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Fix an issue with breaking changes in libmariadb</li>\n<li>Fix documentation links for helper types</li>\n<li>Fix using <code>#[diesel(embed)]</code> with <code>Option&#x3C;Inner></code> types</li>\n<li>Fix documentation for concurrent migration runs</li>\n</ul>\n<p>You can support the development of Diesel by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.3.3...v2.3.4\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.3.3v2.3.4</a></p>",{headings:728,localImagePaths:730,remoteImagePaths:731,frontmatter:732},[729],{depth:65,slug:692,text:693},[],[],{},"changelog/version/diesel-2-3-3",{id:733,data:735,body:741,rendered:742},{base:677,date:736,link:737,provider:738,slug:739,title:740},["Date","2025-10-24T13:57:15.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.3.3",{name:681,label:682},"diesel-2-3-3","Diesel 2.3.3","### Fixed \r\n\r\n* Fix displaying binds in instrumentations for `#[derive(MultiConnection)]`\r\n* Support artifact attestation for binaries build for releases\r\n* Stop using absolute paths in generated diesel.toml\r\n* Explicitly qualify `Ok` in code generated by derives to avoid naming conflicts\r\n\r\n\r\nStarting with Diesel-CLI 2.3.3 you can verify that you downloaded the correct binaries via [GitHub's artifact attestation](https://docs.github.com/en/actions/how-tos/secure-your-work/use-artifact-attestations/use-artifact-attestations#verifying-artifact-attestations-with-the-github-cli)\r\n\r\n```\r\ngh attestation verify diesel_cli-x86_64-unknown-linux-gnu.tar.xz -R diesel-rs/diesel\r\n```\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.3.2...v2.3.3\r\n\r\n\r\nYou can support the development of Diesel by:\r\n\r\n-   Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\r\n-   Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\r\n-   Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\r\n-   Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n-   [Sponsoring](https://github.com/weiznich) the maintainers.",{html:743,metadata:744},"<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Fix displaying binds in instrumentations for <code>#[derive(MultiConnection)]</code></li>\n<li>Support artifact attestation for binaries build for releases</li>\n<li>Stop using absolute paths in generated diesel.toml</li>\n<li>Explicitly qualify <code>Ok</code> in code generated by derives to avoid naming conflicts</li>\n</ul>\n<p>Starting with Diesel-CLI 2.3.3 you can verify that you downloaded the correct binaries via <a href=\"https://docs.github.com/en/actions/how-tos/secure-your-work/use-artifact-attestations/use-artifact-attestations#verifying-artifact-attestations-with-the-github-cli\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">GitHubs artifact attestation</a></p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">gh attestation verify diesel_cli-x86_64-unknown-linux-gnu.tar.xz -R diesel-rs/diesel</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"gh attestation verify diesel_cli-x86_64-unknown-linux-gnu.tar.xz -R diesel-rs/diesel\"><div></div></button></div></figure></div>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.3.2...v2.3.3\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.3.2v2.3.3</a></p>\n<p>You can support the development of Diesel by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>",{headings:745,localImagePaths:747,remoteImagePaths:748,frontmatter:749},[746],{depth:246,slug:692,text:693},[],[],{},"changelog/version/diesel-2-3-2",{id:750,data:752,body:758,rendered:759},{base:677,date:753,link:754,provider:755,slug:756,title:757},["Date","2025-09-19T09:18:32.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.3.2",{name:681,label:682},"diesel-2-3-2","Diesel 2.3.2","### Fixed\r\n\r\n* Fixed an incompatibility with libmariadb versions shipped by debian\r\n* Fixed docs.rs builds\r\n* Fixed applying patch file schema.rs file with formatting\r\n* Allow to compare DatabaseErrorKind values\r\n\r\n(Diesel 2.3.1 did not contain any changes beside the version bump to retrigger the docs.rs build)\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.3.0...v2.3.2\r\n\r\nYou can support the development of Diesel by:\r\n\r\n* Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\r\n* Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\r\n* Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\r\n* Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n* Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n* [Sponsoring](https://github.com/weiznich) the maintainers.",{html:760,metadata:761},"<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Fixed an incompatibility with libmariadb versions shipped by debian</li>\n<li>Fixed docs.rs builds</li>\n<li>Fixed applying patch file schema.rs file with formatting</li>\n<li>Allow to compare DatabaseErrorKind values</li>\n</ul>\n<p>(Diesel 2.3.1 did not contain any changes beside the version bump to retrigger the docs.rs build)</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.3.0...v2.3.2\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.3.0v2.3.2</a></p>\n<p>You can support the development of Diesel by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>",{headings:762,localImagePaths:764,remoteImagePaths:765,frontmatter:766},[763],{depth:246,slug:692,text:693},[],[],{},"changelog/version/diesel-2-3-0",{id:767,data:769,body:774,rendered:775},{base:677,date:770,link:771,provider:772,slug:773,title:558},["Date","2025-09-12T12:42:57.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.3.0",{name:681,label:682},"diesel-2-3-0","This release includes a several large extensions to the query DSL provided by Diesel and also helps increases the number of platforms you can use Diesel on out of the box. Notable changes include:\r\n\r\n* Improved query construction via `#[derive(HasQuery)]`\r\n* Added support for window functions\r\n* Using SQLite with WASM in your browser\r\n* Extended support for various types, functions and operators in the PostgreSQL backend\r\n* Support for `JSON` and `JSONB` in the SQLite backend\r\n\r\nSee the [release blog for the full announcement](https://diesel.rs/news/2_3_0_release.html)\r\n\r\nYou can support the development of Diesel by:\r\n\r\n* Contributing Code, Documentation or Guides. Checkout the planing for [Diesel 2.4](https://github.com/orgs/diesel-rs/projects/1) for open tasks.\r\n* Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.\r\n* Answering questions in our [discussion forum](https://github.com/diesel-rs/diesel/discussions)\r\n* Reporting bugs in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n* Helping triaging issues in our [issue tracker](https://github.com/diesel-rs/diesel/issues)\r\n* [Sponsoring](https://github.com/weiznich) the maintainers.\r\n\r\n\r\n### Added\r\n\r\n* Added `limit()` and `offset()` DSL to combination clauses such as `UNION`\r\n* Fixed `#[derive(Identifiable)]` ignoring attribute `#[diesel(serialize_as)]` on primary keys\r\n* Added embedded struct support for `AsChangeset` via `#[diesel(embed)]`\r\n* Added a `#[diesel(skip_update)]` attribute for the `AsChangeset` derive to skip updating a field present in the struct\r\n* Support for libsqlite3-sys 0.35.0\r\n* Add support for built-in PostgreSQL range operators and functions\r\n* Support for postgres multirange type\r\n* Added `diesel::r2d2::TestCustomizer`, which allows users to customize their `diesel::r2d2::Pool`s\r\nin a way that makes the pools suitable for use in parallel tests.\r\n* Added support for built-in PostgreSQL range operators and functions\r\n* Added support for various built-in PostgreSQL array functions\r\n* Added `Json` and `Jsonb` support for the SQLite backend.\r\n* Added a `#[diesel::declare_sql_function]` attribute macro to easily define support for\r\n  multiple sql functions at once via an `extern \"SQL\"` block\r\n* Support `[print_schema] allow_tables_to_appear_in_same_query_config = \"fk_related_tables\"` to generate separate `allow_tables_to_appear_in_same_query!` calls containing only tables that are related through foreign keys. (Default: `\"all_tables\"`.) It is not possible to build queries using two tables that don't appear in the same `allow_tables_to_appear_in_same_query!` call, but that macro generates O(n) rust code, so this option may be useful to reduce compilation time. ([#4333](https://github.com/diesel-rs/diesel/issues/4333))\r\n* Added `wasm32-unknown-unknown` target support for sqlite backend.\r\n* Add support for the `CAST` operator\r\n* Support `[print_schema] allow_tables_to_appear_in_same_query_config = \"none\"` to generate no `allow_tables_to_appear_in_same_query!` calls. (Default: `\"all_tables\"`.). ([#4333](https://github.com/diesel-rs/diesel/issues/4333))\r\n* Add `[print_schema] pg_domains_as_custom_types` parameter to generate custom types for [PostgreSQL domains](https://www.postgresql.org/docs/current/domains.html) that matches any of the regexes in the given list. (Default: `[]`.) This option allows an application to selectively give special meaning for the serialization/deserialization of these types, avoiding the default behavior of treating the domain as the underlying type. ([#4592](https://github.com/diesel-rs/diesel/discussions/4592))\r\n* Add support for batch insert and upsert statements with returning for SQLite\r\n* Add support for window functions and aggregate expressions.\r\n\r\n### Fixed\r\n\r\n* Fixed diesel thinking `a.eq_any(b)` was non-nullable even if `a` and `b` were nullable.\r\n* Generate `InstrumentationEvent::BeginTransaction` for immediate and exclusive transactions in SQLite\r\n* Use a single space instead of two spaces between `DELETE FROM`.\r\n* Diesel CLI now ensures that migration versions are always unique. If it fails to generate a unique version, it will return an error. The new version format remains compatible with older Diesel versions.\r\n* Updated `ipnetwork` to allow version 0.21.\r\n\r\n### Changed\r\n\r\n* Use distinct `DIESEL_LOG` logging filter env variable instead of the default `RUST_LOG` one (#4575)\r\n* The minimal supported Rust version is now 1.86.0\r\n\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.0...v2.3.0",{html:776,metadata:777},"<p>This release includes a several large extensions to the query DSL provided by Diesel and also helps increases the number of platforms you can use Diesel on out of the box. Notable changes include:</p>\n<ul>\n<li>Improved query construction via <code>#[derive(HasQuery)]</code></li>\n<li>Added support for window functions</li>\n<li>Using SQLite with WASM in your browser</li>\n<li>Extended support for various types, functions and operators in the PostgreSQL backend</li>\n<li>Support for <code>JSON</code> and <code>JSONB</code> in the SQLite backend</li>\n</ul>\n<p>See the <a href=\"https://diesel.rs/news/2_3_0_release.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">release blog for the full announcement</a></p>\n<p>You can support the development of Diesel by:</p>\n<ul>\n<li>Contributing Code, Documentation or Guides. Checkout the planing for <a href=\"https://github.com/orgs/diesel-rs/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Diesel 2.4</a> for open tasks.</li>\n<li>Providing knowledge and help to maintain the MySQL/MariaDB backend. This is currently the only in-tree backend that is not used by any maintainers, so having someone around that actually uses this backend would be very helpful for the Diesel project.</li>\n<li>Answering questions in our <a href=\"https://github.com/diesel-rs/diesel/discussions\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a></li>\n<li>Reporting bugs in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li>Helping triaging issues in our <a href=\"https://github.com/diesel-rs/diesel/issues\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">issue tracker</a></li>\n<li><a href=\"https://github.com/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">Sponsoring</a> the maintainers.</li>\n</ul>\n<h3 id=\"added\">Added</h3>\n<ul>\n<li>Added <code>limit()</code> and <code>offset()</code> DSL to combination clauses such as <code>UNION</code></li>\n<li>Fixed <code>#[derive(Identifiable)]</code> ignoring attribute <code>#[diesel(serialize_as)]</code> on primary keys</li>\n<li>Added embedded struct support for <code>AsChangeset</code> via <code>#[diesel(embed)]</code></li>\n<li>Added a <code>#[diesel(skip_update)]</code> attribute for the <code>AsChangeset</code> derive to skip updating a field present in the struct</li>\n<li>Support for libsqlite3-sys 0.35.0</li>\n<li>Add support for built-in PostgreSQL range operators and functions</li>\n<li>Support for postgres multirange type</li>\n<li>Added <code>diesel::r2d2::TestCustomizer</code>, which allows users to customize their <code>diesel::r2d2::Pool</code>s\r\nin a way that makes the pools suitable for use in parallel tests.</li>\n<li>Added support for built-in PostgreSQL range operators and functions</li>\n<li>Added support for various built-in PostgreSQL array functions</li>\n<li>Added <code>Json</code> and <code>Jsonb</code> support for the SQLite backend.</li>\n<li>Added a <code>#[diesel::declare_sql_function]</code> attribute macro to easily define support for\r\nmultiple sql functions at once via an <code>extern \"SQL\"</code> block</li>\n<li>Support <code>[print_schema] allow_tables_to_appear_in_same_query_config = \"fk_related_tables\"</code> to generate separate <code>allow_tables_to_appear_in_same_query!</code> calls containing only tables that are related through foreign keys. (Default: <code>\"all_tables\"</code>.) It is not possible to build queries using two tables that dont appear in the same <code>allow_tables_to_appear_in_same_query!</code> call, but that macro generates O(n) rust code, so this option may be useful to reduce compilation time. (<a href=\"https://github.com/diesel-rs/diesel/issues/4333\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">#4333</a>)</li>\n<li>Added <code>wasm32-unknown-unknown</code> target support for sqlite backend.</li>\n<li>Add support for the <code>CAST</code> operator</li>\n<li>Support <code>[print_schema] allow_tables_to_appear_in_same_query_config = \"none\"</code> to generate no <code>allow_tables_to_appear_in_same_query!</code> calls. (Default: <code>\"all_tables\"</code>.). (<a href=\"https://github.com/diesel-rs/diesel/issues/4333\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">#4333</a>)</li>\n<li>Add <code>[print_schema] pg_domains_as_custom_types</code> parameter to generate custom types for <a href=\"https://www.postgresql.org/docs/current/domains.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PostgreSQL domains</a> that matches any of the regexes in the given list. (Default: <code>[]</code>.) This option allows an application to selectively give special meaning for the serialization/deserialization of these types, avoiding the default behavior of treating the domain as the underlying type. (<a href=\"https://github.com/diesel-rs/diesel/discussions/4592\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">#4592</a>)</li>\n<li>Add support for batch insert and upsert statements with returning for SQLite</li>\n<li>Add support for window functions and aggregate expressions.</li>\n</ul>\n<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Fixed diesel thinking <code>a.eq_any(b)</code> was non-nullable even if <code>a</code> and <code>b</code> were nullable.</li>\n<li>Generate <code>InstrumentationEvent::BeginTransaction</code> for immediate and exclusive transactions in SQLite</li>\n<li>Use a single space instead of two spaces between <code>DELETE FROM</code>.</li>\n<li>Diesel CLI now ensures that migration versions are always unique. If it fails to generate a unique version, it will return an error. The new version format remains compatible with older Diesel versions.</li>\n<li>Updated <code>ipnetwork</code> to allow version 0.21.</li>\n</ul>\n<h3 id=\"changed\">Changed</h3>\n<ul>\n<li>Use distinct <code>DIESEL_LOG</code> logging filter env variable instead of the default <code>RUST_LOG</code> one (#4575)</li>\n<li>The minimal supported Rust version is now 1.86.0</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.0...v2.3.0\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.0v2.3.0</a></p>",{headings:778,localImagePaths:786,remoteImagePaths:787,frontmatter:788},[779,782,783],{depth:246,slug:780,text:781},"added","Added",{depth:246,slug:692,text:693},{depth:246,slug:784,text:785},"changed","Changed",[],[],{},"changelog/version/diesel-2-2-12",{id:789,data:791,body:797,rendered:798},{base:677,date:792,link:793,provider:794,slug:795,title:796},["Date","2025-07-11T12:28:38.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.12",{name:681,label:682},"diesel-2-2-12","Diesel 2.2.12","## Fixed\r\n\r\n* Added support for libsqlite3-sys 0.35.0\r\n* Fixed a wrong oid for the `oid[]` type in the PostgreSQL backend\r\n* Worked around an issue with broken nullable detection with certain versions of libmysqlclient shipped by ubuntu\r\n* Improved compiler errors in many more cases\r\n\r\nYou can support the development of Diesel by contributions or by sponsoring the project on GitHub\r\n\r\n## Call for Input\r\n\r\nWe are looking for input on a newly designed derive to make constructing queries easier. See [here](https://github.com/diesel-rs/diesel/pull/4600) for details.\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.11...v2.2.12",{html:799,metadata:800},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Added support for libsqlite3-sys 0.35.0</li>\n<li>Fixed a wrong oid for the <code>oid[]</code> type in the PostgreSQL backend</li>\n<li>Worked around an issue with broken nullable detection with certain versions of libmysqlclient shipped by ubuntu</li>\n<li>Improved compiler errors in many more cases</li>\n</ul>\n<p>You can support the development of Diesel by contributions or by sponsoring the project on GitHub</p>\n<h2 id=\"call-for-input\">Call for Input</h2>\n<p>We are looking for input on a newly designed derive to make constructing queries easier. See <a href=\"https://github.com/diesel-rs/diesel/pull/4600\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a> for details.</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.11...v2.2.12\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.11v2.2.12</a></p>",{headings:801,localImagePaths:806,remoteImagePaths:807,frontmatter:808},[802,803],{depth:65,slug:692,text:693},{depth:65,slug:804,text:805},"call-for-input","Call for Input",[],[],{},"changelog/version/diesel-2-2-11",{id:809,data:811,body:817,rendered:818},{base:677,date:812,link:813,provider:814,slug:815,title:816},["Date","2025-06-18T15:18:26.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.11",{name:681,label:682},"diesel-2-2-11","Diesel 2.2.11","## What's Changed\r\n* Disallow mixing aggregate and non-aggregate expressions in `DISTINCT ON` clauses\r\n* Fixed an item referenced by a non-absolute path in `#[derive(MultiConnection)]`\r\n* Improved compiler errors in some cases\r\n* Improved the documentation for creating SqliteConnections for concurrent applications\r\n\r\nYou can support the development of Diesel by contributions or by sponsoring the project on Github\r\n\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.10...v2.2.11",{html:819,metadata:820},"<h2 id=\"whats-changed\">Whats Changed</h2>\n<ul>\n<li>Disallow mixing aggregate and non-aggregate expressions in <code>DISTINCT ON</code> clauses</li>\n<li>Fixed an item referenced by a non-absolute path in <code>#[derive(MultiConnection)]</code></li>\n<li>Improved compiler errors in some cases</li>\n<li>Improved the documentation for creating SqliteConnections for concurrent applications</li>\n</ul>\n<p>You can support the development of Diesel by contributions or by sponsoring the project on Github</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.10...v2.2.11\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.10v2.2.11</a></p>",{headings:821,localImagePaths:825,remoteImagePaths:826,frontmatter:827},[822],{depth:65,slug:823,text:824},"whats-changed","Whats Changed",[],[],{},"changelog/version/diesel-2-2-10",{id:828,data:830,body:836,rendered:837},{base:677,date:831,link:832,provider:833,slug:834,title:835},["Date","2025-04-25T06:43:32.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.10",{name:681,label:682},"diesel-2-2-10","Diesel 2.2.10","## Fixed\r\n\r\n* Support for libsqlite3-sys 0.33.0\r\n* Fixed potential ambiguities in code generated by various derives\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.9...v2.2.10",{html:838,metadata:839},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Support for libsqlite3-sys 0.33.0</li>\n<li>Fixed potential ambiguities in code generated by various derives</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.9...v2.2.10\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.9v2.2.10</a></p>",{headings:840,localImagePaths:842,remoteImagePaths:843,frontmatter:844},[841],{depth:65,slug:692,text:693},[],[],{},"changelog/version/diesel-2-2-9",{id:845,data:847,body:853,rendered:854},{base:677,date:848,link:849,provider:850,slug:851,title:852},["Date","2025-04-04T11:29:52.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.9",{name:681,label:682},"diesel-2-2-9","Diesel 2.2.9","# Fixed \r\n\r\n* Fix an issue where `diesel migration generate --diff-schema` incorrectly uses the primary key of table B as the referenced column rather than the primary key of table A when B has a foreign key pointing to table A.\r\n* Bump maximal supported libsqlite3-sys version to 0.32.0 and add explicit feature entries for the `uuid` and `serde_json` feature.\r\n* Fixed an issue where diesel generated unnamed prepared statements would fail with an `unanmed prepared statement not found` error with pgbouncer.\r\n* Fix an issue with converting `ipnet::Ipnet` values with an subnet to SQL values\r\n\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.8...v2.2.9",{html:855,metadata:856},"<h1 id=\"fixed\">Fixed</h1>\n<ul>\n<li>Fix an issue where <code>diesel migration generate --diff-schema</code> incorrectly uses the primary key of table B as the referenced column rather than the primary key of table A when B has a foreign key pointing to table A.</li>\n<li>Bump maximal supported libsqlite3-sys version to 0.32.0 and add explicit feature entries for the <code>uuid</code> and <code>serde_json</code> feature.</li>\n<li>Fixed an issue where diesel generated unnamed prepared statements would fail with an <code>unanmed prepared statement not found</code> error with pgbouncer.</li>\n<li>Fix an issue with converting <code>ipnet::Ipnet</code> values with an subnet to SQL values</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.8...v2.2.9\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.8v2.2.9</a></p>",{headings:857,localImagePaths:859,remoteImagePaths:860,frontmatter:861},[858],{depth:691,slug:692,text:693},[],[],{},"changelog/version/diesel-2-2-8",{id:862,data:864,body:870,rendered:871},{base:677,date:865,link:866,provider:867,slug:868,title:869},["Date","2025-03-03T17:47:32.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.8",{name:681,label:682},"diesel-2-2-8","Diesel 2.2.8","### Fixed\r\n\r\n* Allow `#[diesel(check_for_backend(_))]` to check fields with `#[diesel(embed)]` annotations\r\n* Improve custom compile error message around `CompatibleType`\r\n* Fix a bug that restricted the number of allowed columns in `COPY FROM` statements to 12\r\n* Expose some SqliteValue helper functions\r\n* Use consistent whitespace in `ASC`/`DESC`, `DISTINCT ON`, and `DELETE FROM` clauses\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.7...v2.2.8",{html:872,metadata:873},"<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Allow <code>#[diesel(check_for_backend(_))]</code> to check fields with <code>#[diesel(embed)]</code> annotations</li>\n<li>Improve custom compile error message around <code>CompatibleType</code></li>\n<li>Fix a bug that restricted the number of allowed columns in <code>COPY FROM</code> statements to 12</li>\n<li>Expose some SqliteValue helper functions</li>\n<li>Use consistent whitespace in <code>ASC</code>/<code>DESC</code>, <code>DISTINCT ON</code>, and <code>DELETE FROM</code> clauses</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.7...v2.2.8\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.7v2.2.8</a></p>",{headings:874,localImagePaths:876,remoteImagePaths:877,frontmatter:878},[875],{depth:246,slug:692,text:693},[],[],{},"changelog/version/diesel-2-2-7",{id:879,data:881,body:887,rendered:888},{base:677,date:882,link:883,provider:884,slug:885,title:886},["Date","2025-01-31T10:19:17.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.7",{name:681,label:682},"diesel-2-2-7","Diesel 2.2.7","### Fixed\r\n\r\n* Fixed diesel thinking `a.eq_any(b)` was non-nullable even if `a` and `b` were nullable.\r\n* Generate `InstrumentationEvent::BeginTransaction` for immediate and exclusive transactions in SQLite\r\n* Minimize the amount of duplicated code generated for `diesel::debug_query`\r\n* Updated `ipnetwork` to allow version 0.21.\r\n* Updated `libsqlite3-sys` to allow version 0.31.0\r\n* Updated `pq-sys` to allow version 0.7.0\r\n* Add support for numeric operators (+-*/) in `#[diesel::auto_type]`\r\n* Add support for joins to sub-jons to aliases\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.6...v2.2.7",{html:889,metadata:890},"<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Fixed diesel thinking <code>a.eq_any(b)</code> was non-nullable even if <code>a</code> and <code>b</code> were nullable.</li>\n<li>Generate <code>InstrumentationEvent::BeginTransaction</code> for immediate and exclusive transactions in SQLite</li>\n<li>Minimize the amount of duplicated code generated for <code>diesel::debug_query</code></li>\n<li>Updated <code>ipnetwork</code> to allow version 0.21.</li>\n<li>Updated <code>libsqlite3-sys</code> to allow version 0.31.0</li>\n<li>Updated <code>pq-sys</code> to allow version 0.7.0</li>\n<li>Add support for numeric operators (+-*/) in <code>#[diesel::auto_type]</code></li>\n<li>Add support for joins to sub-jons to aliases</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.6...v2.2.7\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.6v2.2.7</a></p>",{headings:891,localImagePaths:893,remoteImagePaths:894,frontmatter:895},[892],{depth:246,slug:692,text:693},[],[],{},"changelog/version/diesel-2-2-6",{id:896,data:898,body:904,rendered:905},{base:677,date:899,link:900,provider:901,slug:902,title:903},["Date","2024-12-03T18:15:25.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.6",{name:681,label:682},"diesel-2-2-6","Diesel 2.2.6","## What's Changed\r\n\r\n* Remove more mentions of gitter from the documentation\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.5...v2.2.6",{html:906,metadata:907},"<h2 id=\"whats-changed\">Whats Changed</h2>\n<ul>\n<li>Remove more mentions of gitter from the documentation</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.5...v2.2.6\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.5v2.2.6</a></p>",{headings:908,localImagePaths:910,remoteImagePaths:911,frontmatter:912},[909],{depth:65,slug:823,text:824},[],[],{},"changelog/version/diesel-2-2-5",{id:913,data:915,body:921,rendered:922},{base:677,date:916,link:917,provider:918,slug:919,title:920},["Date","2024-11-21T10:33:55.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.5",{name:681,label:682},"diesel-2-2-5","Diesel 2.2.5","* Add a typedef for `Returning` and `Count` so that `#[auto_type]` works with such queries\r\n* Fixed an issue that allowed to pass non-boolean expressions to `.and()` and `.or()` which would\r\n  result in queries failing at runtime\r\n* Officially deprecating the gitter room\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github.\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.4...v2.2.5",{html:923,metadata:924},"<ul>\n<li>Add a typedef for <code>Returning</code> and <code>Count</code> so that <code>#[auto_type]</code> works with such queries</li>\n<li>Fixed an issue that allowed to pass non-boolean expressions to <code>.and()</code> and <code>.or()</code> which would\r\nresult in queries failing at runtime</li>\n<li>Officially deprecating the gitter room</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.4...v2.2.5\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.4v2.2.5</a></p>",{headings:925,localImagePaths:926,remoteImagePaths:927,frontmatter:928},[],[],[],{},"changelog/version/diesel-2-2-4",{id:929,data:931,body:937,rendered:938},{base:677,date:932,link:933,provider:934,slug:935,title:936},["Date","2024-09-03T14:30:51.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.4",{name:681,label:682},"diesel-2-2-4","Diesel 2.2.4","### Fixed\r\n\r\n* Fix an issue where empty queries could trigger undefined behaviour in the sqlite backend",{html:939,metadata:940},"<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Fix an issue where empty queries could trigger undefined behaviour in the sqlite backend</li>\n</ul>",{headings:941,localImagePaths:943,remoteImagePaths:944,frontmatter:945},[942],{depth:246,slug:692,text:693},[],[],{},"changelog/version/diesel-2-2-3",{id:946,data:948,body:954,rendered:955},{base:677,date:949,link:950,provider:951,slug:952,title:953},["Date","2024-08-23T08:25:27.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.3",{name:681,label:682},"diesel-2-2-3","Diesel 2.2.3","* Support for libsqlite3-sys 0.30.0\r\n* Fixed a possible vulnerability in how Diesel handled protocol level bind parameters. \r\n  See the [SQL Injection isn't Dead: Smuggling Queries at Protocol Level](http://web.archive.org/web/20240812130923/https://media.defcon.org/DEF%20CON%2032/DEF%20CON%2032%20presentations/DEF%20CON%2032%20-%20Paul%20Gerste%20-%20SQL%20Injection%20Isn't%20Dead%20Smuggling%20Queries%20at%20the%20Protocol%20Level.pdf>) presentation from DEF CON for details\r\n* Fixed an issue with a possibly ambiguous trait resolution in `#[derive(QueryableByName)]`\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github.\r\n\r\nFull Changelog: https://github.com/diesel-rs/diesel/compare/v2.2.2...v2.2.3",{html:956,metadata:957},"<ul>\n<li>Support for libsqlite3-sys 0.30.0</li>\n<li>Fixed a possible vulnerability in how Diesel handled protocol level bind parameters.\r\nSee the <a href=\"http://web.archive.org/web/20240812130923/https://media.defcon.org/DEF%20CON%2032/DEF%20CON%2032%20presentations/DEF%20CON%2032%20-%20Paul%20Gerste%20-%20SQL%20Injection%20Isn&#x27;t%20Dead%20Smuggling%20Queries%20at%20the%20Protocol%20Level.pdf%3E\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">SQL Injection isnt Dead: Smuggling Queries at Protocol Level</a> presentation from DEF CON for details</li>\n<li>Fixed an issue with a possibly ambiguous trait resolution in <code>#[derive(QueryableByName)]</code></li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>\n<p>Full Changelog: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.2...v2.2.3\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.2v2.2.3</a></p>",{headings:958,localImagePaths:959,remoteImagePaths:960,frontmatter:961},[],[],[],{},"changelog/version/diesel-2-2-2",{id:962,data:964,body:970,rendered:971},{base:677,date:965,link:966,provider:967,slug:968,title:969},["Date","2024-07-19T11:27:38.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.2",{name:681,label:682},"diesel-2-2-2","Diesel 2.2.2","\r\n\r\n* Support for libsqlite3-sys 0.29.0\r\n* Fixed a potential panic in the sqlite cursor implementation\r\n* Fixed support for rust numeric operators with columns of the type `Numeric`\r\n* Removed the `SerializedDatabase::new` function due to unsoundness\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github.\r\n\r\nFull Changelog: https://github.com/diesel-rs/diesel/compare/v2.2.1...v2.2.2",{html:972,metadata:973},"<ul>\n<li>Support for libsqlite3-sys 0.29.0</li>\n<li>Fixed a potential panic in the sqlite cursor implementation</li>\n<li>Fixed support for rust numeric operators with columns of the type <code>Numeric</code></li>\n<li>Removed the <code>SerializedDatabase::new</code> function due to unsoundness</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>\n<p>Full Changelog: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.1...v2.2.2\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.1v2.2.2</a></p>",{headings:974,localImagePaths:975,remoteImagePaths:976,frontmatter:977},[],[],[],{},"changelog/version/diesel-2-2-1",{id:978,data:980,body:986,rendered:987},{base:677,date:981,link:982,provider:983,slug:984,title:985},["Date","2024-06-13T11:54:01.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.1",{name:681,label:682},"diesel-2-2-1","Diesel 2.2.1","You can support the development of diesel by contributions or by sponsoring the project on Github.\r\n\r\n* Fixed using `#[dsl::auto_type]` with functions that accept reference arguments\r\n* Fixed using `#[derive(Queryable)]` with structs that use a type named `Row` as field type\r\n* Fixed a regression that prevented using `mysqlclient-sys` 0.2.x with diesel 2.2\r\n* Fixed connecting to postgres database using the scram-sha-256 authentication method on windows while using the bundled postgres builds\r\n* Improved the error messages in diesel-cli for cases where a file/folder was not found\r\n* Fixed several version detection bugs in mysqlclient-sys to use pre-generated bindings in more situations\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.2.0...v2.2.1",{html:988,metadata:989},"<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>\n<ul>\n<li>Fixed using <code>#[dsl::auto_type]</code> with functions that accept reference arguments</li>\n<li>Fixed using <code>#[derive(Queryable)]</code> with structs that use a type named <code>Row</code> as field type</li>\n<li>Fixed a regression that prevented using <code>mysqlclient-sys</code> 0.2.x with diesel 2.2</li>\n<li>Fixed connecting to postgres database using the scram-sha-256 authentication method on windows while using the bundled postgres builds</li>\n<li>Improved the error messages in diesel-cli for cases where a file/folder was not found</li>\n<li>Fixed several version detection bugs in mysqlclient-sys to use pre-generated bindings in more situations</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.2.0...v2.2.1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.2.0v2.2.1</a></p>",{headings:990,localImagePaths:991,remoteImagePaths:992,frontmatter:993},[],[],[],{},"changelog/version/diesel-2-2-0",{id:994,data:996,body:1001,rendered:1002},{base:677,date:997,link:998,provider:999,slug:1000,title:607},["Date","2024-05-31T07:41:51.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.2.0",{name:681,label:682},"diesel-2-2-0","This release wouldn't be possible without the support of our contributors and sponsors. If you want to support diesels development, consider [joining the reviewer team](https://github.com/diesel-rs/diesel/issues/1186), submitting [PR's](https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+), help writing documentation or [sponsor the maintainers](https://github.com/sponsors/weiznich).\r\n\r\n### Added\r\n\r\n* Support `[print_schema] exclude_custom_type_definitions = [\"Vector\"]`. If a `custom type` matches one element on the list it's skipped.\r\n* Added automatic usage of all sqlite `rowid` aliases when no explicit primary key is defined for `print-schema`\r\n* Added a `#[dsl::auto_type]` attribute macro, allowing to infer type of query fragment functions\r\n* Added the same type inference on `Selectable` derives, which allows skipping specifying `select_expression_type` most of the time, in turn enabling most queries to be written using just a `Selectable` derive.\r\n* Added an optional `#[diesel(skip_insertion)]` field attribute to the `Insertable` derive macro, allowing fields which map to generated columns to be skipped during insertion.\r\n* Support for connection instrumentation. This allows to inspect any query run by your application\r\n* Logging in diesel-cli\r\n* Support for libsqlite3-sys 0.28\r\n* Add `sqlite-integer-primary-key-is-bigint` configuration option, usable with SQLite 3.37 or above, allowing to use `BigInt` for `INTEGER PRIMARY KEY` columns in SQLite for tables without the `WITHOUT ROWID` attribute ([SQLite doc](https://www.sqlite.org/lang_createtable.html#rowid)).\r\n* Support for multiple `print_schema` entry in `diesel.toml` (e.g. `[print_schema.user1]`), which allows generating multiple schema.rs files\r\n* Add support for `COPY TO` and `COPY FROM` statements\r\n* Add support for mapping `chrono::Duration` to postgresql's `INTERVAL` sql type\r\n* Added `serialize_database_to_buffer` and `deserialize_readonly_database_from_buffer` methods in `SqliteConnection` to support serialization/deserialization of SQLite databases to and from byte buffers.\r\n* Added `SerializedDatabase` wrapper type for a serialized database that is dynamically allocated by calling `serialize_database_to_buffer`. This RAII wrapper deallocates the memory when it goes out of scope with `sqlite3_free`.\r\n\r\n### Changed\r\n\r\n* The minimal officially supported rustc version is now 1.78.0\r\n* Deprecated `sql_function!` in favour of `define_sql_function!` which provides compatibility with `#[dsl::auto_type]`\r\n* Deserialization error messages now contain information about the field that failed to deserialize\r\n\r\n## New Contributors\r\n* @tp-woven made their first contribution in https://github.com/diesel-rs/diesel/pull/3650\r\n* @aumetra made their first contribution in https://github.com/diesel-rs/diesel/pull/3657\r\n* @sintemal made their first contribution in https://github.com/diesel-rs/diesel/pull/3660\r\n* @DannyGoldberg made their first contribution in https://github.com/diesel-rs/diesel/pull/3681\r\n* @ernest-rudnicki made their first contribution in https://github.com/diesel-rs/diesel/pull/3690\r\n* @cr0sh made their first contribution in https://github.com/diesel-rs/diesel/pull/3699\r\n* @dsp made their first contribution in https://github.com/diesel-rs/diesel/pull/3713\r\n* @snf made their first contribution in https://github.com/diesel-rs/diesel/pull/3714\r\n* @moulins made their first contribution in https://github.com/diesel-rs/diesel/pull/3724\r\n* @surban made their first contribution in https://github.com/diesel-rs/diesel/pull/3734\r\n* @gmanninglive made their first contribution in https://github.com/diesel-rs/diesel/pull/3725\r\n* @BlackDex made their first contribution in https://github.com/diesel-rs/diesel/pull/3747\r\n* @retro-git made their first contribution in https://github.com/diesel-rs/diesel/pull/3792\r\n* @moyeah made their first contribution in https://github.com/diesel-rs/diesel/pull/3805\r\n* @kriswuollett made their first contribution in https://github.com/diesel-rs/diesel/pull/3777\r\n* @szepeviktor made their first contribution in https://github.com/diesel-rs/diesel/pull/3821\r\n* @hgzimmerman made their first contribution in https://github.com/diesel-rs/diesel/pull/3841\r\n* @brocaar made their first contribution in https://github.com/diesel-rs/diesel/pull/3854\r\n* @peter-scholtens made their first contribution in https://github.com/diesel-rs/diesel/pull/3855\r\n* @formlogic-kirk made their first contribution in https://github.com/diesel-rs/diesel/pull/3862\r\n* @yagince made their first contribution in https://github.com/diesel-rs/diesel/pull/3888\r\n* @c410-f3r made their first contribution in https://github.com/diesel-rs/diesel/pull/3879\r\n* @dullbananas made their first contribution in https://github.com/diesel-rs/diesel/pull/3904\r\n* @colem213 made their first contribution in https://github.com/diesel-rs/diesel/pull/3908\r\n* @greyblake made their first contribution in https://github.com/diesel-rs/diesel/pull/3917\r\n* @longsleep made their first contribution in https://github.com/diesel-rs/diesel/pull/3926\r\n* @dennybiasiolli made their first contribution in https://github.com/diesel-rs/diesel/pull/3939\r\n* @epompeii made their first contribution in https://github.com/diesel-rs/diesel/pull/3849\r\n* @stormshield-kg made their first contribution in https://github.com/diesel-rs/diesel/pull/3940\r\n* @sabify made their first contribution in https://github.com/diesel-rs/diesel/pull/3943\r\n* @forest1102 made their first contribution in https://github.com/diesel-rs/diesel/pull/3796\r\n* @dvogel made their first contribution in https://github.com/diesel-rs/diesel/pull/3921\r\n* @Tanguille made their first contribution in https://github.com/diesel-rs/diesel/pull/3956\r\n* @ISibboI made their first contribution in https://github.com/diesel-rs/diesel/pull/3751\r\n* @DavisRayM made their first contribution in https://github.com/diesel-rs/diesel/pull/3982\r\n* @kornelski made their first contribution in https://github.com/diesel-rs/diesel/pull/3980\r\n* @momobel made their first contribution in https://github.com/diesel-rs/diesel/pull/3977\r\n* @Sagebati made their first contribution in https://github.com/diesel-rs/diesel/pull/4002\r\n* @MixusMinimax made their first contribution in https://github.com/diesel-rs/diesel/pull/4026\r\n* @tommymcc made their first contribution in https://github.com/diesel-rs/diesel/pull/4021\r\n* @dessalines made their first contribution in https://github.com/diesel-rs/diesel/pull/4019\r\n* @bachmannscode made their first contribution in https://github.com/diesel-rs/diesel/pull/4015\r\n* @McDic made their first contribution in https://github.com/diesel-rs/diesel/pull/4037\r\n* @z33ky made their first contribution in https://github.com/diesel-rs/diesel/pull/4030\r\n* @JonBoyleCoding made their first contribution in https://github.com/diesel-rs/diesel/pull/3944\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.1.0...v2.2.0",{html:1003,metadata:1004},"<p>This release wouldnt be possible without the support of our contributors and sponsors. If you want to support diesels development, consider <a href=\"https://github.com/diesel-rs/diesel/issues/1186\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">joining the reviewer team</a>, submitting <a href=\"https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PRs</a>, help writing documentation or <a href=\"https://github.com/sponsors/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">sponsor the maintainers</a>.</p>\n<h3 id=\"added\">Added</h3>\n<ul>\n<li>Support <code>[print_schema] exclude_custom_type_definitions = [\"Vector\"]</code>. If a <code>custom type</code> matches one element on the list its skipped.</li>\n<li>Added automatic usage of all sqlite <code>rowid</code> aliases when no explicit primary key is defined for <code>print-schema</code></li>\n<li>Added a <code>#[dsl::auto_type]</code> attribute macro, allowing to infer type of query fragment functions</li>\n<li>Added the same type inference on <code>Selectable</code> derives, which allows skipping specifying <code>select_expression_type</code> most of the time, in turn enabling most queries to be written using just a <code>Selectable</code> derive.</li>\n<li>Added an optional <code>#[diesel(skip_insertion)]</code> field attribute to the <code>Insertable</code> derive macro, allowing fields which map to generated columns to be skipped during insertion.</li>\n<li>Support for connection instrumentation. This allows to inspect any query run by your application</li>\n<li>Logging in diesel-cli</li>\n<li>Support for libsqlite3-sys 0.28</li>\n<li>Add <code>sqlite-integer-primary-key-is-bigint</code> configuration option, usable with SQLite 3.37 or above, allowing to use <code>BigInt</code> for <code>INTEGER PRIMARY KEY</code> columns in SQLite for tables without the <code>WITHOUT ROWID</code> attribute (<a href=\"https://www.sqlite.org/lang_createtable.html#rowid\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">SQLite doc</a>).</li>\n<li>Support for multiple <code>print_schema</code> entry in <code>diesel.toml</code> (e.g. <code>[print_schema.user1]</code>), which allows generating multiple schema.rs files</li>\n<li>Add support for <code>COPY TO</code> and <code>COPY FROM</code> statements</li>\n<li>Add support for mapping <code>chrono::Duration</code> to postgresqls <code>INTERVAL</code> sql type</li>\n<li>Added <code>serialize_database_to_buffer</code> and <code>deserialize_readonly_database_from_buffer</code> methods in <code>SqliteConnection</code> to support serialization/deserialization of SQLite databases to and from byte buffers.</li>\n<li>Added <code>SerializedDatabase</code> wrapper type for a serialized database that is dynamically allocated by calling <code>serialize_database_to_buffer</code>. This RAII wrapper deallocates the memory when it goes out of scope with <code>sqlite3_free</code>.</li>\n</ul>\n<h3 id=\"changed\">Changed</h3>\n<ul>\n<li>The minimal officially supported rustc version is now 1.78.0</li>\n<li>Deprecated <code>sql_function!</code> in favour of <code>define_sql_function!</code> which provides compatibility with <code>#[dsl::auto_type]</code></li>\n<li>Deserialization error messages now contain information about the field that failed to deserialize</li>\n</ul>\n<h2 id=\"new-contributors\">New Contributors</h2>\n<ul>\n<li>@tp-woven made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3650\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3650</a></li>\n<li>@aumetra made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3657\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3657</a></li>\n<li>@sintemal made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3660\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3660</a></li>\n<li>@DannyGoldberg made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3681\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3681</a></li>\n<li>@ernest-rudnicki made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3690\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3690</a></li>\n<li>@cr0sh made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3699\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3699</a></li>\n<li>@dsp made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3713\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3713</a></li>\n<li>@snf made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3714\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3714</a></li>\n<li>@moulins made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3724\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3724</a></li>\n<li>@surban made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3734\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3734</a></li>\n<li>@gmanninglive made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3725\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3725</a></li>\n<li>@BlackDex made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3747\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3747</a></li>\n<li>@retro-git made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3792\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3792</a></li>\n<li>@moyeah made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3805\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3805</a></li>\n<li>@kriswuollett made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3777\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3777</a></li>\n<li>@szepeviktor made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3821\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3821</a></li>\n<li>@hgzimmerman made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3841\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3841</a></li>\n<li>@brocaar made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3854\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3854</a></li>\n<li>@peter-scholtens made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3855\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3855</a></li>\n<li>@formlogic-kirk made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3862\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3862</a></li>\n<li>@yagince made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3888\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3888</a></li>\n<li>@c410-f3r made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3879\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3879</a></li>\n<li>@dullbananas made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3904\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3904</a></li>\n<li>@colem213 made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3908\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3908</a></li>\n<li>@greyblake made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3917\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3917</a></li>\n<li>@longsleep made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3926\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3926</a></li>\n<li>@dennybiasiolli made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3939\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3939</a></li>\n<li>@epompeii made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3849\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3849</a></li>\n<li>@stormshield-kg made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3940\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3940</a></li>\n<li>@sabify made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3943\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3943</a></li>\n<li>@forest1102 made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3796\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3796</a></li>\n<li>@dvogel made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3921\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3921</a></li>\n<li>@Tanguille made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3956\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3956</a></li>\n<li>@ISibboI made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3751\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3751</a></li>\n<li>@DavisRayM made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3982\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3982</a></li>\n<li>@kornelski made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3980\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3980</a></li>\n<li>@momobel made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3977\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3977</a></li>\n<li>@Sagebati made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4002\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4002</a></li>\n<li>@MixusMinimax made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4026\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4026</a></li>\n<li>@tommymcc made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4021\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4021</a></li>\n<li>@dessalines made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4019\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4019</a></li>\n<li>@bachmannscode made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4015\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4015</a></li>\n<li>@McDic made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4037\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4037</a></li>\n<li>@z33ky made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/4030\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/4030</a></li>\n<li>@JonBoyleCoding made their first contribution in <a href=\"https://github.com/diesel-rs/diesel/pull/3944\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/pull/3944</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.1.0...v2.2.0\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.1.0v2.2.0</a></p>",{headings:1005,localImagePaths:1011,remoteImagePaths:1012,frontmatter:1013},[1006,1007,1008],{depth:246,slug:780,text:781},{depth:246,slug:784,text:785},{depth:65,slug:1009,text:1010},"new-contributors","New Contributors",[],[],{},"changelog/version/diesel-2-1-6",{id:1014,data:1016,body:1022,rendered:1023},{base:677,date:1017,link:1018,provider:1019,slug:1020,title:1021},["Date","2024-04-19T06:02:53.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.6",{name:681,label:682},"diesel-2-1-6","Diesel 2.1.6","* Fix using `BoxableExpression` with having clauses\r\n* Fix using numeric expressions with aliased fields\r\n* Minor documentation fixes\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github.\r\n\r\nFull Changelog: https://github.com/diesel-rs/diesel/compare/v2.1.5...v2.1.6",{html:1024,metadata:1025},"<ul>\n<li>Fix using <code>BoxableExpression</code> with having clauses</li>\n<li>Fix using numeric expressions with aliased fields</li>\n<li>Minor documentation fixes</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>\n<p>Full Changelog: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.1.5...v2.1.6\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.1.5v2.1.6</a></p>",{headings:1026,localImagePaths:1027,remoteImagePaths:1028,frontmatter:1029},[],[],[],{},"changelog/version/diesel-2-1-5",{id:1030,data:1032,body:1038,rendered:1039},{base:677,date:1033,link:1034,provider:1035,slug:1036,title:1037},["Date","2024-03-15T09:37:34.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.5",{name:681,label:682},"diesel-2-1-5","Diesel 2.1.5","* Fix `impl SqlOrd` postgres > postgres_backend feature flag.\r\n* Allow `Queryable` to be used with multiple table names.\r\n* Update `libsqlite3-sys` to allow version 0.28 as well\r\n\r\n**Full Changelog**: https://github.com/diesel-rs/diesel/compare/v2.1.4...v2.1.5",{html:1040,metadata:1041},"<ul>\n<li>Fix <code>impl SqlOrd</code> postgres > postgres_backend feature flag.</li>\n<li>Allow <code>Queryable</code> to be used with multiple table names.</li>\n<li>Update <code>libsqlite3-sys</code> to allow version 0.28 as well</li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/diesel-rs/diesel/compare/v2.1.4...v2.1.5\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/compare/v2.1.4v2.1.5</a></p>",{headings:1042,localImagePaths:1043,remoteImagePaths:1044,frontmatter:1045},[],[],[],{},"changelog/version/diesel-2-1-4",{id:1046,data:1048,body:1054,rendered:1055},{base:677,date:1049,link:1050,provider:1051,slug:1052,title:1053},["Date","2023-11-14T15:04:43.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.4",{name:681,label:682},"diesel-2-1-4","Diesel 2.1.4","* Update `libsqlite3-sys` to allow version 0.27 as well\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github.",{html:1056,metadata:1057},"<ul>\n<li>Update <code>libsqlite3-sys</code> to allow version 0.27 as well</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>",{headings:1058,localImagePaths:1059,remoteImagePaths:1060,frontmatter:1061},[],[],[],{},"changelog/version/diesel-2-1-3",{id:1062,data:1064,body:1070,rendered:1071},{base:677,date:1065,link:1066,provider:1067,slug:1068,title:1069},["Date","2023-10-05T15:13:09.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.3",{name:681,label:682},"diesel-2-1-3","Diesel 2.1.3","* Increased accidentally decreased limit around element count in  `DISTINCT ON` and `ORDER BY` clauses again as that broke existing code\r\n",{html:1072,metadata:1073},"<ul>\n<li>Increased accidentally decreased limit around element count in  <code>DISTINCT ON</code> and <code>ORDER BY</code> clauses again as that broke existing code</li>\n</ul>",{headings:1074,localImagePaths:1075,remoteImagePaths:1076,frontmatter:1077},[],[],[],{},"changelog/version/diesel-2-1-2",{id:1078,data:1080,body:1086,rendered:1087},{base:677,date:1081,link:1082,provider:1083,slug:1084,title:1085},["Date","2023-09-25T17:53:30.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.2",{name:681,label:682},"diesel-2-1-2","Diesel 2.1.2","* Fixed another potential breaking chaneg around queries containing `DISTINCT ON` and `ORDER BY` clauses consisting of custom sql expressions (e.g. `.nullable()`)\r\n* Fixed an issue where `#[derive(Selectable)]` and `#[diesel(check_for_backend)]` generates invalid rust code if the struct contains lifetimes/generic types\r\n\r\nYou can support the development of diesel by contributions or by sponsoring the project on Github.",{html:1088,metadata:1089},"<ul>\n<li>Fixed another potential breaking chaneg around queries containing <code>DISTINCT ON</code> and <code>ORDER BY</code> clauses consisting of custom sql expressions (e.g. <code>.nullable()</code>)</li>\n<li>Fixed an issue where <code>#[derive(Selectable)]</code> and <code>#[diesel(check_for_backend)]</code> generates invalid rust code if the struct contains lifetimes/generic types</li>\n</ul>\n<p>You can support the development of diesel by contributions or by sponsoring the project on Github.</p>",{headings:1090,localImagePaths:1091,remoteImagePaths:1092,frontmatter:1093},[],[],[],{},"changelog/version/diesel-2-1-1",{id:1094,data:1096,body:1102,rendered:1103},{base:677,date:1097,link:1098,provider:1099,slug:1100,title:1101},["Date","2023-08-25T07:19:43.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.1",{name:681,label:682},"diesel-2-1-1","Diesel 2.1.1","## Fixed\r\n\r\n* Fixed an issue in diesel-cli that lead to using unquoted table names in one of the internal queries\r\n* Fixed a bug in `diesel print-schema` that lead to generating invalid `table!` macros if both the `#[sql_name]` and the `#[max_lenght]` attribute are present\r\n* Fixed an issue in diesel-cli that lead to ignoring certain foreign key constraints for postgresql\r\n* Fixed an crash while using `diesel print-schema` with really old sqlite versions\r\n* Fixed an issue where `#[diesel(check_for_backend)]` ignored `#[diesel(deserialize_as)]` attributes\r\n* Fixed several issues with the new `#[derive(MultiConnection)]` feature\r\n* Fixed some edge cases in our sqlite timestamp parsing behaviour\r\n* `diesel migration generate --diff-schema` now respects table filters as setup for `print-schema` via `diesel.toml` \r\n* Fixed a potential breaking change around queries containing `DISTINCT ON` and `ORDER BY` clauses consisting of custom sql expressions (e.g. `diesel::dsl::sql`)\r\n\r\n## Added \r\n\r\n* Support for bigdecimal 0.4\r\n\r\nYou can support the development of diesel by [sponsoring the project on github](https://github.com/diesel-rs/diesel)\r\n",{html:1104,metadata:1105},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Fixed an issue in diesel-cli that lead to using unquoted table names in one of the internal queries</li>\n<li>Fixed a bug in <code>diesel print-schema</code> that lead to generating invalid <code>table!</code> macros if both the <code>#[sql_name]</code> and the <code>#[max_lenght]</code> attribute are present</li>\n<li>Fixed an issue in diesel-cli that lead to ignoring certain foreign key constraints for postgresql</li>\n<li>Fixed an crash while using <code>diesel print-schema</code> with really old sqlite versions</li>\n<li>Fixed an issue where <code>#[diesel(check_for_backend)]</code> ignored <code>#[diesel(deserialize_as)]</code> attributes</li>\n<li>Fixed several issues with the new <code>#[derive(MultiConnection)]</code> feature</li>\n<li>Fixed some edge cases in our sqlite timestamp parsing behaviour</li>\n<li><code>diesel migration generate --diff-schema</code> now respects table filters as setup for <code>print-schema</code> via <code>diesel.toml</code></li>\n<li>Fixed a potential breaking change around queries containing <code>DISTINCT ON</code> and <code>ORDER BY</code> clauses consisting of custom sql expressions (e.g. <code>diesel::dsl::sql</code>)</li>\n</ul>\n<h2 id=\"added\">Added</h2>\n<ul>\n<li>Support for bigdecimal 0.4</li>\n</ul>\n<p>You can support the development of diesel by <a href=\"https://github.com/diesel-rs/diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">sponsoring the project on github</a></p>",{headings:1106,localImagePaths:1109,remoteImagePaths:1110,frontmatter:1111},[1107,1108],{depth:65,slug:692,text:693},{depth:65,slug:780,text:781},[],[],{},"changelog/version/diesel-2-1-0",{id:1112,data:1114,body:1119,rendered:1120},{base:677,date:1115,link:1116,provider:1117,slug:1118,title:524},["Date","2023-05-26T08:46:08.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.1.0",{name:681,label:682},"diesel-2-1-0","Diesel 2.1.0 contains the contributions of 42 people. More than 380 commits were submitted\r\nover a span of 9 months.\r\n\r\nThis release contains several new features and improves existing features. It introduces support for generating migrations based on the diff between your `schema.rs` file and your database via Diesel CLI. Diesel derives now provides a `#[derive(MultiConnection)]` derive macro that allows to easily combine different database connections into a single enum, which implements `Connection` on its own. The MySQL backend gets support for `upsert` queries via the `ON DUPLICATE KEYS` syntax. Finally we provide new tooling to improve complex error messages generated for common error cases. Check out our [changelog for a complete list of changes](/changelog.html).\r\n\r\nThis release wouldn't be possible without the support of our contributors and sponsors. If you want to support diesels development, consider [joining the reviewer team](https://github.com/diesel-rs/diesel/issues?q=reviewer+is%3Aopen), submitting [PR's](https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+), help writing documentation or [sponsor the maintainers](https://github.com/sponsors/weiznich).\r\n\r\n\r\n## Migration generation\r\n\r\nDiesel CLI now includes support for generating migrations based on the difference of your `schema.rs` file and your local database. \r\nThis works as following:\r\n\r\n1. Start editing your `schema.rs` file, for example by adding your first table:\r\n\r\n```rust\r\ndiesel::table! {\r\n    users {\r\n        id -> Integer,\r\n        name -> Text,\r\n    }\r\n}\r\n```\r\n\r\n2. Run `diesel migration generate my_first_migration --diff-schema --database-url DATABASE_URL`\r\n3. Checkout, verify and possible modify the generated migration:\r\n\r\n```sql\r\n-- Your SQL goes here\r\nCREATE TABLE `users`(\r\n\t`id` INTEGER NOT NULL PRIMARY KEY,\r\n\t`name` TEXT NOT NULL\r\n);\r\n```\r\n4. Run the migration via `diesel migration run --database-url DATABASE_URL`\r\n\r\nIt's important to note that the generated migrations can only contain information that are part of the `schema.rs` file. This explicitly excludes default value, custom check constraints and similar SQL features. We expect the generated migrations to be a good starting point for writing the actual migration you need, we do not expect them to include all necessary information in all cases or to provide the perfect solution in each scenario.\r\n\r\n\r\n## `MultiConnection` support\r\n\r\nDiesel now includes a [`#[derive(MultiConnection)]`](https://docs.diesel.rs/2.1.x/diesel/derive.MultiConnection.html) proc macro derive, which allows to easily support more than one database backend in a single application. It can be applied to an enum of different connections:\r\n\r\n```rust\r\n#[derive(diesel::MultiConnection)]\r\npub enum AnyConnection {\r\n    Postgresql(diesel::PgConnection),\r\n    Mysql(diesel::MysqlConnection),\r\n    Sqlite(diesel::SqliteConnection),\r\n}\r\n```\r\n\r\nAfterwards the `AnyConnection` type can be used as ordinary connection:\r\n\r\n```rust\r\n\r\nfn use_multi(conn: &mut AnyConnection) -> QueryResult<()> {\r\n   // Use the connection enum as any other connection type\r\n   // for inserting/updating/loading/\r\n   diesel::insert_into(users::table)\r\n       .values(users::name.eq(\"Sean\"))\r\n       .execute(conn)?;\r\n\r\n   let users = users::table.load::<(i32, String)>(conn)?;\r\n   Ok(())\r\n}\r\n```\r\n\r\nBy default this connection type will only support a subset of SQL that's supported by all inner connection types. By being an enum it's easy to fallback to backend specific SQL as soon as required. We provide this feature as derive macro so that it is possible to:\r\n\r\n* Select the backends you actually use\r\n* Allow to use third party connections as well (this requires the third party connection to be based at least on diesel 2.1 and to implement the [`MultiConnectionHelper`](https://docs.diesel.rs/2.1.x/diesel/connection/trait.MultiConnectionHelper.html) trait in addition to the existing `Connection` trait.\r\n\r\n## Upsert support for the MySQL backend\r\n\r\nDiesel 2.1 adds support for `INSERT INTO  ON DUPLICATE KEYS ` queries for the MySQL backend using the existing [`upsert`] framework. It's now possible to write such queries using the diesel provided DSL:\r\n\r\n```rust\r\ndiesel::insert_into(users)\r\n    .values(&user2)\r\n    .on_conflict(diesel::dsl::DuplicatedKeys)\r\n    .do_update()\r\n    .set(name.eq(\"I DONT KNOW ANYMORE\"))\r\n    .execute(conn)?;\r\n```\r\n\r\n[`upsert`]: https://docs.diesel.rs/2.1.x/diesel/query_builder/struct.InsertStatement.html#on-duplicate-key\r\n\r\n## Improved error messages\r\n\r\nWe spend some effort to improve error messages generated by rustc for common diesel issues further.\r\n\r\nConsider the following example:\r\n\r\n```rust\r\ntable! {\r\n    users {\r\n        id -> Integer,\r\n        name -> Text,\r\n    }\r\n}\r\n\r\n#[derive(Queryable)]\r\nstruct User {\r\n    name: String,\r\n    id: i32,\r\n}\r\n\r\n\r\nusers::table.load::<User>(&mut conn)\r\n```\r\n\r\nwhich would generate the following error message:\r\n\r\n```\r\nerror[E0277]: the trait bound `(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType<User, Mysql>` is not satisfied\r\n    --> src/main.rs:20:31\r\n     |\r\n20   |     users::table.load::<User>(&mut conn);\r\n     |                  ----         ^^^^^^^^^ the trait `load_dsl::private::CompatibleType<User, Mysql>` is not implemented for `(diesel::sql_types::Integer, diesel::sql_types::Text)`\r\n     |                  |\r\n     |                  required by a bound introduced by this call\r\n     |\r\n     = help: the following other types implement trait `load_dsl::private::CompatibleType<U, DB>`:\r\n               (ST0, ST1)\r\n               (ST0, ST1, ST2)\r\n               (ST0, ST1, ST2, ST3)\r\n               (ST0, ST1, ST2, ST3, ST4)\r\n               (ST0, ST1, ST2, ST3, ST4, ST5)\r\n               (ST0, ST1, ST2, ST3, ST4, ST5, ST6)\r\n               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7)\r\n               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7, ST8)\r\n             and 24 others\r\n     = note: required for `users::table` to implement `LoadQuery<'_, _, User>`\r\nnote: required by a bound in `diesel::RunQueryDsl::load`\r\n    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15\r\n     |\r\n1543 |         Self: LoadQuery<'query, Conn, U>,\r\n     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `diesel::RunQueryDsl::load`\r\n```\r\n\r\nThis is caused by an field order mismatch between what your query returns and what your struct expects the query to return. \r\n\r\nWith diesel 2.0 we introduced the `Selectable` trait and a corresponding derive. That allows to automatically generate a matching select clause to prevent such issues from happening. While this already solved parts of the problem it does not solve the following case:\r\n\r\n```rust\r\n#[derive(Queryable, Selectable)]\r\nstruct User {\r\n    name: i32,\r\n    id: i32,\r\n}\r\n\r\nusers::table.select(User::as_select()).load(&mut conn);\r\n```\r\n\r\nwhich generates the following error message:\r\n\r\n```\r\nerror[E0277]: the trait bound `expression::select_by::SelectBy<User, _>: load_dsl::private::CompatibleType<_, _>` is not satisfied\r\n    --> src/main.rs:20:49\r\n     |\r\n20   |     users::table.select(User::as_select()).load(&mut conn);\r\n     |                                            ---- ^^^^^^^^^ the trait `load_dsl::private::CompatibleType<_, _>` is not implemented for `expression::select_by::SelectBy<User, _>`\r\n     |                                            |\r\n     |                                            required by a bound introduced by this call\r\n     |\r\n     = help: the trait `load_dsl::private::CompatibleType<U, DB>` is implemented for `expression::select_by::SelectBy<U, DB>`\r\n     = note: required for `SelectStatement<FromClause<users::table>, query_builder::select_clause::SelectClause<expression::select_by::SelectBy<User, _>>>` to implement `LoadQuery<'_, _, _>`\r\nnote: required by a bound in `diesel::RunQueryDsl::load`\r\n    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15\r\n     |\r\n1543 |         Self: LoadQuery<'query, Conn, U>,\r\n     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `diesel::RunQueryDsl::load`\r\n\r\n```\r\n\r\nThis is caused by a type mismatch in the `name` field. With diesel 2.1 we now introduce an additional [`#[diesel(check_for_backend(diesel::backend::BackendType))]`](https://docs.diesel.rs/2.1.x/diesel/expression/derive.Selectable.html#optional-type-attributes) attribute that greatly improves the error messages generated for these cases. This helps pining down which field exactly causes a type mismatch.\r\n\r\nBy applying this attribute to our example:\r\n\r\n```rust\r\n\r\n#[derive(Queryable, Selectable)]\r\n#[diesel(check_for_backend(diesel::mysql::Mysql))]\r\nstruct User {\r\n    name: i32,\r\n    id: i32,\r\n}\r\n```\r\n\r\nwe get the following error message:\r\n\r\n```\r\nerror[E0277]: the trait bound `i32: FromSql<diesel::sql_types::Text, Mysql>` is not satisfied\r\n  --> src/main.rs:13:11\r\n   |\r\n13 |     name: i32,\r\n   |           ^^^ the trait `FromSql<diesel::sql_types::Text, Mysql>` is not implemented for `i32`\r\n   |\r\n   = help: the trait `FromSql<diesel::sql_types::Integer, Mysql>` is implemented for `i32`\r\n   = note: required for `i32` to implement `diesel::Queryable<diesel::sql_types::Text, Mysql>`\r\n   = note: required for `i32` to implement `FromSqlRow<diesel::sql_types::Text, Mysql>`\r\n   = help: see issue #48214\r\n```\r\n\r\nThis error message now points to the exact cause of the issue: You cannot deserialize an `Text` value into a `i32` field. This attribute accepts one or more diesel backend type to check the struct definition against. It requires that the struct is using either both, `#[derive(Queryable)]` and `#[derive(Selectable)]` or `#[derive(QueryableByName)]`.\r\n\r\n## Internal changes\r\n\r\nChanges listed here are relevant for crates using the `i-implement-a-third-party-backend-and-opt-into-breaking-changes` feature flag.\r\nWith Diesel 2.1 we have migrated some traits to use GAT. This affects the following traits:\r\n\r\n* `RowGatWorkaround`\r\n* `ConnectionGatWorkaround`\r\n* `HasRawValue`\r\n* `HasBindCollector`\r\n\r\nThese traits are removed in favour of generic associated types on the corresponding child trait.\r\n\r\nAdditionally we slightly relaxed one trait bound on `BindCollector::push_bound_value` to allow unsized values there as well.\r\n\r\n## Thanks\r\n\r\nThank you to everyone who helped make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\r\n\r\nIn addition to the Diesel core team, 42 people contributed code to this release. A huge thank you to:\r\n\r\n* 6293\r\n* Aleksei Orazov\r\n* Alexx Roche\r\n* AndrolGenhald\r\n* AndyJado\r\n* Artemis Livingstone\r\n* czotomo\r\n* Diana\r\n* Elliott Forde\r\n* Elrendio\r\n* Gorg Worgington\r\n* Heliozoa\r\n* Ian\r\n* Jake Goulding\r\n* Jeff Schwab\r\n* Jeremy Lardenois\r\n* johnmai\r\n* Leonardo Yvens\r\n* mikemcdermottredjack\r\n* Moritz Hedtke\r\n* MOZGIII\r\n* Neil Svedberg\r\n* Neo\r\n* Nishant Joshi\r\n* Oliver Cooper\r\n* Omid Rad\r\n* Pablito Labarta\r\n* Pavan Kumar Sunkara\r\n* Peter Todorov\r\n* Rutvik Patel\r\n* Sanchith Hegde\r\n* schlamar\r\n* sebasv\r\n* Silas McCroskey\r\n* imon Lukak\r\n* Steven Chu\r\n* stormofice\r\n* Thomas Sieverding\r\n* Trevor Gross\r\n* Yuki Okushi\r\n* \r\n* \r\n",{html:1121,metadata:1122},"<p>Diesel 2.1.0 contains the contributions of 42 people. More than 380 commits were submitted\r\nover a span of 9 months.</p>\n<p>This release contains several new features and improves existing features. It introduces support for generating migrations based on the diff between your <code>schema.rs</code> file and your database via Diesel CLI. Diesel derives now provides a <code>#[derive(MultiConnection)]</code> derive macro that allows to easily combine different database connections into a single enum, which implements <code>Connection</code> on its own. The MySQL backend gets support for <code>upsert</code> queries via the <code>ON DUPLICATE KEYS</code> syntax. Finally we provide new tooling to improve complex error messages generated for common error cases. Check out our <a href=\"/changelog.html\">changelog for a complete list of changes</a>.</p>\n<p>This release wouldnt be possible without the support of our contributors and sponsors. If you want to support diesels development, consider <a href=\"https://github.com/diesel-rs/diesel/issues?q=reviewer+is%3Aopen\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">joining the reviewer team</a>, submitting <a href=\"https://github.com/diesel-rs/diesel/issues?q=is%3Aissue+is%3Aopen++label%3A%22help+wanted%22+\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">PRs</a>, help writing documentation or <a href=\"https://github.com/sponsors/weiznich\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">sponsor the maintainers</a>.</p>\n<h2 id=\"migration-generation\">Migration generation</h2>\n<p>Diesel CLI now includes support for generating migrations based on the difference of your <code>schema.rs</code> file and your local database.\r\nThis works as following:</p>\n<ol>\n<li>Start editing your <code>schema.rs</code> file, for example by adding your first table:</li>\n</ol>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::table! {    users {        id -> Integer,        name -> Text,    }}\"><div></div></button></div></figure></div>\n<ol start=\"2\">\n<li>Run <code>diesel migration generate my_first_migration --diff-schema --database-url DATABASE_URL</code></li>\n<li>Checkout, verify and possible modify the generated migration:</li>\n</ol>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"sql\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5F636F\">-- Your SQL goes here</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">CREATE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TABLE</span><span style=\"--0:#D6DEEB;--1:#403F53\"> `</span><span style=\"--0:#82AAFF;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">`(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#ECC48D;--1:#984E4D\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">INTEGER</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">PRIMARY KEY</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#ECC48D;--1:#984E4D\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">TEXT</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">NOT NULL</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"-- Your SQL goes hereCREATE TABLE &#x60;users&#x60;(  &#x60;id&#x60; INTEGER NOT NULL PRIMARY KEY,  &#x60;name&#x60; TEXT NOT NULL);\"><div></div></button></div></figure></div>\n<ol start=\"4\">\n<li>Run the migration via <code>diesel migration run --database-url DATABASE_URL</code></li>\n</ol>\n<p>Its important to note that the generated migrations can only contain information that are part of the <code>schema.rs</code> file. This explicitly excludes default value, custom check constraints and similar SQL features. We expect the generated migrations to be a good starting point for writing the actual migration you need, we do not expect them to include all necessary information in all cases or to provide the perfect solution in each scenario.</p>\n<h2 id=\"multiconnection-support\"><code>MultiConnection</code> support</h2>\n<p>Diesel now includes a <a href=\"https://docs.diesel.rs/2.1.x/diesel/derive.MultiConnection.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>#[derive(MultiConnection)]</code></a> proc macro derive, which allows to easily support more than one database backend in a single application. It can be applied to an enum of different connections:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">MultiConnection)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">pub</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">enum</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AnyConnection {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Postgresql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">PgConnection),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Mysql</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">MysqlConnection),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3B61B0\">Sqlite</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">SqliteConnection),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(diesel::MultiConnection)]pub enum AnyConnection {    Postgresql(diesel::PgConnection),    Mysql(diesel::MysqlConnection),    Sqlite(diesel::SqliteConnection),}\"><div></div></button></div></figure></div>\n<p>Afterwards the <code>AnyConnection</code> type can be used as ordinary connection:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">use_multi</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> AnyConnection) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> QueryResult&#x3C;()> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#919F9F;--1:#5D6376\">// Use the connection enum as any other connection type</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#919F9F;--1:#5D6376\">// for inserting/updating/loading/</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Sean</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;(i32, String)>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Ok(())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"fn use_multi(conn: &#x26;mut AnyConnection) -> QueryResult<()> {   // Use the connection enum as any other connection type   // for inserting/updating/loading/   diesel::insert_into(users::table)       .values(users::name.eq(&#x22;Sean&#x22;))       .execute(conn)?;   let users = users::table.load::<(i32, String)>(conn)?;   Ok(())}\"><div></div></button></div></figure></div>\n<p>By default this connection type will only support a subset of SQL thats supported by all inner connection types. By being an enum its easy to fallback to backend specific SQL as soon as required. We provide this feature as derive macro so that it is possible to:</p>\n<ul>\n<li>Select the backends you actually use</li>\n<li>Allow to use third party connections as well (this requires the third party connection to be based at least on diesel 2.1 and to implement the <a href=\"https://docs.diesel.rs/2.1.x/diesel/connection/trait.MultiConnectionHelper.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>MultiConnectionHelper</code></a> trait in addition to the existing <code>Connection</code> trait.</li>\n</ul>\n<h2 id=\"upsert-support-for-the-mysql-backend\">Upsert support for the MySQL backend</h2>\n<p>Diesel 2.1 adds support for <code>INSERT INTO  ON DUPLICATE KEYS </code> queries for the MySQL backend using the existing <a href=\"https://docs.diesel.rs/2.1.x/diesel/query_builder/struct.InsertStatement.html#on-duplicate-key\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>upsert</code></a> framework. Its now possible to write such queries using the diesel provided DSL:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">insert_into</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C5E478;--1:#3B61B0\">user2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">on_conflict</span><span style=\"--0:#D6DEEB;--1:#403F53\">(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">dsl</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">DuplicatedKeys)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">do_update</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">I DONT KNOW ANYMORE</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">execute</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"diesel::insert_into(users)    .values(&#x26;user2)    .on_conflict(diesel::dsl::DuplicatedKeys)    .do_update()    .set(name.eq(&#x22;I DONT KNOW ANYMORE&#x22;))    .execute(conn)?;\"><div></div></button></div></figure></div>\n<h2 id=\"improved-error-messages\">Improved error messages</h2>\n<p>We spend some effort to improve error messages generated by rustc for common diesel issues further.</p>\n<p>Consider the following example:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">table!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Integer,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;User>(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"table! {    users {        id -> Integer,        name -> Text,    }}#[derive(Queryable)]struct User {    name: String,    id: i32,}users::table.load::<User>(&#x26;mut conn)\"><div></div></button></div></figure></div>\n<p>which would generate the following error message:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">error[E0277]: the trait bound `(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType&#x3C;User, Mysql>` is not satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">    </span></span><span style=\"--0:#d6deeb;--1:#403f53\">--> src/main.rs:20:31</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">20   |     users::table.load::&#x3C;User>(&#x26;mut conn);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|                  ----         ^^^^^^^^^ the trait `load_dsl::private::CompatibleType&#x3C;User, Mysql>` is not implemented for `(diesel::sql_types::Integer, diesel::sql_types::Text)`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|                  |</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|                  required by a bound introduced by this call</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= help: the following other types implement trait `load_dsl::private::CompatibleType&#x3C;U, DB>`:</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2, ST3)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2, ST3, ST4)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2, ST3, ST4, ST5)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2, ST3, ST4, ST5, ST6)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">               </span></span><span style=\"--0:#d6deeb;--1:#403f53\">(ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7, ST8)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">             </span></span><span style=\"--0:#d6deeb;--1:#403f53\">and 24 others</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= note: required for `users::table` to implement `LoadQuery&#x3C;'_, _, User>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">note: required by a bound in `diesel::RunQueryDsl::load`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">    </span></span><span style=\"--0:#d6deeb;--1:#403f53\">--> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">1543 |         Self: LoadQuery&#x3C;'query, Conn, U>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `diesel::RunQueryDsl::load`</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;(diesel::sql_types::Integer, diesel::sql_types::Text): load_dsl::private::CompatibleType<User, Mysql>&#x60; is not satisfied    --> src/main.rs:20:31     |20   |     users::table.load::<User>(&#x26;mut conn);     |                  ----         ^^^^^^^^^ the trait &#x60;load_dsl::private::CompatibleType<User, Mysql>&#x60; is not implemented for &#x60;(diesel::sql_types::Integer, diesel::sql_types::Text)&#x60;     |                  |     |                  required by a bound introduced by this call     |     = help: the following other types implement trait &#x60;load_dsl::private::CompatibleType<U, DB>&#x60;:               (ST0, ST1)               (ST0, ST1, ST2)               (ST0, ST1, ST2, ST3)               (ST0, ST1, ST2, ST3, ST4)               (ST0, ST1, ST2, ST3, ST4, ST5)               (ST0, ST1, ST2, ST3, ST4, ST5, ST6)               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7)               (ST0, ST1, ST2, ST3, ST4, ST5, ST6, ST7, ST8)             and 24 others     = note: required for &#x60;users::table&#x60; to implement &#x60;LoadQuery<&#x27;_, _, User>&#x60;note: required by a bound in &#x60;diesel::RunQueryDsl::load&#x60;    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15     |1543 |         Self: LoadQuery<&#x27;query, Conn, U>,     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in &#x60;diesel::RunQueryDsl::load&#x60;\"><div></div></button></div></figure></div>\n<p>This is caused by an field order mismatch between what your query returns and what your struct expects the query to return.</p>\n<p>With diesel 2.0 we introduced the <code>Selectable</code> trait and a corresponding derive. That allows to automatically generate a matching select clause to prevent such issues from happening. While this already solved parts of the problem it does not solve the following case:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">load</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#7FDBCA;--1:#096E72\">&#x26;</span><span style=\"--0:#C792EA;--1:#8844AE\">mut</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">conn</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Selectable)]struct User {    name: i32,    id: i32,}users::table.select(User::as_select()).load(&#x26;mut conn);\"><div></div></button></div></figure></div>\n<p>which generates the following error message:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">error[E0277]: the trait bound `expression::select_by::SelectBy&#x3C;User, _>: load_dsl::private::CompatibleType&#x3C;_, _>` is not satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">    </span></span><span style=\"--0:#d6deeb;--1:#403f53\">--> src/main.rs:20:49</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">20   |     users::table.select(User::as_select()).load(&#x26;mut conn);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|                                            ---- ^^^^^^^^^ the trait `load_dsl::private::CompatibleType&#x3C;_, _>` is not implemented for `expression::select_by::SelectBy&#x3C;User, _>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|                                            |</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|                                            required by a bound introduced by this call</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= help: the trait `load_dsl::private::CompatibleType&#x3C;U, DB>` is implemented for `expression::select_by::SelectBy&#x3C;U, DB>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= note: required for `SelectStatement&#x3C;FromClause&#x3C;users::table>, query_builder::select_clause::SelectClause&#x3C;expression::select_by::SelectBy&#x3C;User, _>>>` to implement `LoadQuery&#x3C;'_, _, _>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">note: required by a bound in `diesel::RunQueryDsl::load`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">    </span></span><span style=\"--0:#d6deeb;--1:#403f53\">--> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">1543 |         Self: LoadQuery&#x3C;'query, Conn, U>,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">     </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `diesel::RunQueryDsl::load`</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;expression::select_by::SelectBy<User, _>: load_dsl::private::CompatibleType<_, _>&#x60; is not satisfied    --> src/main.rs:20:49     |20   |     users::table.select(User::as_select()).load(&#x26;mut conn);     |                                            ---- ^^^^^^^^^ the trait &#x60;load_dsl::private::CompatibleType<_, _>&#x60; is not implemented for &#x60;expression::select_by::SelectBy<User, _>&#x60;     |                                            |     |                                            required by a bound introduced by this call     |     = help: the trait &#x60;load_dsl::private::CompatibleType<U, DB>&#x60; is implemented for &#x60;expression::select_by::SelectBy<U, DB>&#x60;     = note: required for &#x60;SelectStatement<FromClause<users::table>, query_builder::select_clause::SelectClause<expression::select_by::SelectBy<User, _>>>&#x60; to implement &#x60;LoadQuery<&#x27;_, _, _>&#x60;note: required by a bound in &#x60;diesel::RunQueryDsl::load&#x60;    --> /home/weiznich/.cargo/git/checkouts/diesel-6e3331fb3b9331ec/ef6252e/diesel/src/query_dsl/mod.rs:1543:15     |1543 |         Self: LoadQuery<&#x27;query, Conn, U>,     |               ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in &#x60;diesel::RunQueryDsl::load&#x60;\"><div></div></button></div></figure></div>\n<p>This is caused by a type mismatch in the <code>name</code> field. With diesel 2.1 we now introduce an additional <a href=\"https://docs.diesel.rs/2.1.x/diesel/expression/derive.Selectable.html#optional-type-attributes\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>#[diesel(check_for_backend(diesel::backend::BackendType))]</code></a> attribute that greatly improves the error messages generated for these cases. This helps pining down which field exactly causes a type mismatch.</p>\n<p>By applying this attribute to our example:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[diesel(check_for_backend(diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">mysql</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Mysql))]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Selectable)]#[diesel(check_for_backend(diesel::mysql::Mysql))]struct User {    name: i32,    id: i32,}\"><div></div></button></div></figure></div>\n<p>we get the following error message:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">error[E0277]: the trait bound `i32: FromSql&#x3C;diesel::sql_types::Text, Mysql>` is not satisfied</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">  </span></span><span style=\"--0:#d6deeb;--1:#403f53\">--> src/main.rs:13:11</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">13 |     name: i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|           ^^^ the trait `FromSql&#x3C;diesel::sql_types::Text, Mysql>` is not implemented for `i32`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">|</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= help: the trait `FromSql&#x3C;diesel::sql_types::Integer, Mysql>` is implemented for `i32`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= note: required for `i32` to implement `diesel::Queryable&#x3C;diesel::sql_types::Text, Mysql>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= note: required for `i32` to implement `FromSqlRow&#x3C;diesel::sql_types::Text, Mysql>`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#d6deeb;--1:#403f53\">   </span></span><span style=\"--0:#d6deeb;--1:#403f53\">= help: see issue #48214</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"error[E0277]: the trait bound &#x60;i32: FromSql<diesel::sql_types::Text, Mysql>&#x60; is not satisfied  --> src/main.rs:13:11   |13 |     name: i32,   |           ^^^ the trait &#x60;FromSql<diesel::sql_types::Text, Mysql>&#x60; is not implemented for &#x60;i32&#x60;   |   = help: the trait &#x60;FromSql<diesel::sql_types::Integer, Mysql>&#x60; is implemented for &#x60;i32&#x60;   = note: required for &#x60;i32&#x60; to implement &#x60;diesel::Queryable<diesel::sql_types::Text, Mysql>&#x60;   = note: required for &#x60;i32&#x60; to implement &#x60;FromSqlRow<diesel::sql_types::Text, Mysql>&#x60;   = help: see issue #48214\"><div></div></button></div></figure></div>\n<p>This error message now points to the exact cause of the issue: You cannot deserialize an <code>Text</code> value into a <code>i32</code> field. This attribute accepts one or more diesel backend type to check the struct definition against. It requires that the struct is using either both, <code>#[derive(Queryable)]</code> and <code>#[derive(Selectable)]</code> or <code>#[derive(QueryableByName)]</code>.</p>\n<h2 id=\"internal-changes\">Internal changes</h2>\n<p>Changes listed here are relevant for crates using the <code>i-implement-a-third-party-backend-and-opt-into-breaking-changes</code> feature flag.\r\nWith Diesel 2.1 we have migrated some traits to use GAT. This affects the following traits:</p>\n<ul>\n<li><code>RowGatWorkaround</code></li>\n<li><code>ConnectionGatWorkaround</code></li>\n<li><code>HasRawValue</code></li>\n<li><code>HasBindCollector</code></li>\n</ul>\n<p>These traits are removed in favour of generic associated types on the corresponding child trait.</p>\n<p>Additionally we slightly relaxed one trait bound on <code>BindCollector::push_bound_value</code> to allow unsized values there as well.</p>\n<h2 id=\"thanks\">Thanks</h2>\n<p>Thank you to everyone who helped make this release happen through sponsoring, bug reports, and discussion on GitHub and Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 42 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>6293</li>\n<li>Aleksei Orazov</li>\n<li>Alexx Roche</li>\n<li>AndrolGenhald</li>\n<li>AndyJado</li>\n<li>Artemis Livingstone</li>\n<li>czotomo</li>\n<li>Diana</li>\n<li>Elliott Forde</li>\n<li>Elrendio</li>\n<li>Gorg Worgington</li>\n<li>Heliozoa</li>\n<li>Ian</li>\n<li>Jake Goulding</li>\n<li>Jeff Schwab</li>\n<li>Jeremy Lardenois</li>\n<li>johnmai</li>\n<li>Leonardo Yvens</li>\n<li>mikemcdermottredjack</li>\n<li>Moritz Hedtke</li>\n<li>MOZGIII</li>\n<li>Neil Svedberg</li>\n<li>Neo</li>\n<li>Nishant Joshi</li>\n<li>Oliver Cooper</li>\n<li>Omid Rad</li>\n<li>Pablito Labarta</li>\n<li>Pavan Kumar Sunkara</li>\n<li>Peter Todorov</li>\n<li>Rutvik Patel</li>\n<li>Sanchith Hegde</li>\n<li>schlamar</li>\n<li>sebasv</li>\n<li>Silas McCroskey</li>\n<li>imon Lukak</li>\n<li>Steven Chu</li>\n<li>stormofice</li>\n<li>Thomas Sieverding</li>\n<li>Trevor Gross</li>\n<li>Yuki Okushi</li>\n<li></li>\n<li></li>\n</ul>",{headings:1123,localImagePaths:1130,remoteImagePaths:1131,frontmatter:1132},[1124,1125,1126,1127,1128,1129],{depth:65,slug:536,text:537},{depth:65,slug:539,text:540},{depth:65,slug:542,text:543},{depth:65,slug:545,text:546},{depth:65,slug:548,text:549},{depth:65,slug:515,text:516},[],[],{},"changelog/version/diesel-2-0-4",{id:1133,data:1135,body:1141,rendered:1142},{base:677,date:1136,link:1137,provider:1138,slug:1139,title:1140},["Date","2023-04-18T15:01:04.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.0.4",{name:681,label:682},"diesel-2-0-4","Diesel 2.0.4","## Fixed \r\n\r\n* Workaround the missing name resolution in rust-analyzer. This should fix type inference for some diesel queries. (It remains broken for queries containing `.filter()`/`.inner_join()`/`.left_join()`. These require fixes in rust-analyzer itself)\r\n* Fixed a bug that could lead to inserting null values instead of empty values for custom sqlite types\r\n* Fixed a bug that could lead to an unexpected panic while providing an out of bounds bind for `sql_query` in the sqlite backend\r\n* Fixed some mysql backend specific impl being behind the `mysql` instead of the `mysql_backend` feature flag\r\n\r\n## Added\r\n\r\n* Support for `libsqlite3-sys` 0.26",{html:1143,metadata:1144},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Workaround the missing name resolution in rust-analyzer. This should fix type inference for some diesel queries. (It remains broken for queries containing <code>.filter()</code>/<code>.inner_join()</code>/<code>.left_join()</code>. These require fixes in rust-analyzer itself)</li>\n<li>Fixed a bug that could lead to inserting null values instead of empty values for custom sqlite types</li>\n<li>Fixed a bug that could lead to an unexpected panic while providing an out of bounds bind for <code>sql_query</code> in the sqlite backend</li>\n<li>Fixed some mysql backend specific impl being behind the <code>mysql</code> instead of the <code>mysql_backend</code> feature flag</li>\n</ul>\n<h2 id=\"added\">Added</h2>\n<ul>\n<li>Support for <code>libsqlite3-sys</code> 0.26</li>\n</ul>",{headings:1145,localImagePaths:1148,remoteImagePaths:1149,frontmatter:1150},[1146,1147],{depth:65,slug:692,text:693},{depth:65,slug:780,text:781},[],[],{},"changelog/version/diesel-derives-2-0-2",{id:1151,data:1153,body:1159,rendered:1160},{base:677,date:1154,link:1155,provider:1156,slug:1157,title:1158},["Date","2023-03-13T09:11:11.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/diesel_derives_v2.0.2",{name:681,label:682},"diesel-derives-2-0-2","Diesel-derives 2.0.2","* Fixing the fallout of a breaking change from `quote` by not using their internal API\r\n",{html:1161,metadata:1162},"<ul>\n<li>Fixing the fallout of a breaking change from <code>quote</code> by not using their internal API</li>\n</ul>",{headings:1163,localImagePaths:1164,remoteImagePaths:1165,frontmatter:1166},[],[],[],{},"changelog/version/diesel-2-0-3",{id:1167,data:1169,body:1175,rendered:1176},{base:677,date:1170,link:1171,provider:1172,slug:1173,title:1174},["Date","2023-01-24T16:45:50.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.0.3",{name:681,label:682},"diesel-2-0-3","Diesel 2.0.3","## Fixed\r\n\r\n* Fixed a bug with our transaction manager implementation that caused by marking transactions as broken which could be recovered.\r\n* Fixed an issue with the combination of `BoxableExpression` and order clauses\r\n",{html:1177,metadata:1178},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Fixed a bug with our transaction manager implementation that caused by marking transactions as broken which could be recovered.</li>\n<li>Fixed an issue with the combination of <code>BoxableExpression</code> and order clauses</li>\n</ul>",{headings:1179,localImagePaths:1181,remoteImagePaths:1182,frontmatter:1183},[1180],{depth:65,slug:692,text:693},[],[],{},"changelog/version/diesel-2-0-2",{id:1184,data:1186,body:1192,rendered:1193},{base:677,date:1187,link:1188,provider:1189,slug:1190,title:1191},["Date","2022-10-11T11:47:10.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.0.2",{name:681,label:682},"diesel-2-0-2","Diesel 2.0.2","# Fixed\r\n\r\n* Reverted a fix from the 2.0.1 release that breaks valid `INSERT  ON CONFLICT` queries",{html:1194,metadata:1195},"<h1 id=\"fixed\">Fixed</h1>\n<ul>\n<li>Reverted a fix from the 2.0.1 release that breaks valid <code>INSERT  ON CONFLICT</code> queries</li>\n</ul>",{headings:1196,localImagePaths:1198,remoteImagePaths:1199,frontmatter:1200},[1197],{depth:691,slug:692,text:693},[],[],{},"changelog/version/diesel-2-0-1",{id:1201,data:1203,body:1209,rendered:1210},{base:677,date:1204,link:1205,provider:1206,slug:1207,title:1208},["Date","2022-10-07T06:46:47.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.0.1",{name:681,label:682},"diesel-2-0-1","Diesel 2.0.1","This is a bugfix release containing the following fixes:\r\n\r\n* Fixed an issue with `diesel_cli` generating incompatible type names for the `generate_missing_sql_type_definitions` feature on PostgreSQL\r\n* Fixed an issue how `diesel_cli` handles sqlite urls while checking if a given database exists\r\n* Fixed an issue with `PgConnection` becoming unusable after hitting a database error in certain situations\r\n* Fixed an issue with diesel generating invalid SQL for certain `INSERT  ON CONFLICT` queries\r\n* Fixed `diesel_derives` generating code that triggers the disabled by default `unused_qualifications` lint\r\n\r\nThis release includes updated versions of `diesel`, `diesel_cli` and `diesel_derives`",{html:1211,metadata:1212},"<p>This is a bugfix release containing the following fixes:</p>\n<ul>\n<li>Fixed an issue with <code>diesel_cli</code> generating incompatible type names for the <code>generate_missing_sql_type_definitions</code> feature on PostgreSQL</li>\n<li>Fixed an issue how <code>diesel_cli</code> handles sqlite urls while checking if a given database exists</li>\n<li>Fixed an issue with <code>PgConnection</code> becoming unusable after hitting a database error in certain situations</li>\n<li>Fixed an issue with diesel generating invalid SQL for certain <code>INSERT  ON CONFLICT</code> queries</li>\n<li>Fixed <code>diesel_derives</code> generating code that triggers the disabled by default <code>unused_qualifications</code> lint</li>\n</ul>\n<p>This release includes updated versions of <code>diesel</code>, <code>diesel_cli</code> and <code>diesel_derives</code></p>",{headings:1213,localImagePaths:1214,remoteImagePaths:1215,frontmatter:1216},[],[],[],{},"changelog/version/diesel-2-0-0",{id:1217,data:1219,body:1224,rendered:1225},{base:677,date:1220,link:1221,provider:1222,slug:1223,title:479},["Date","2022-08-29T14:42:07.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v2.0.0",{name:681,label:682},"diesel-2-0-0","\r\nDiesel 2.0.0 contains the contributions of more than 130 people. More than 1700 commits were submitted\r\nover a span of 3 years.\r\n\r\nAs part of this release we introduced numerous new features and rewrote large parts of the internal structure.\r\nCheck out our [changelog for a complete list of changes](https://diesel.rs/changelog.html). As this is a new major Diesel release it contains a number of breaking changes. Checkout our [migration guide](https://diesel.rs/guides/migration_guide.html) for details about how to handle those breaking changes.\r\n\r\nThis release contains the following parts:\r\n\r\n* diesel 2.0.0-rc.0\r\n* diesel_derives 2.0.0-rc.0\r\n* diesel_migrations 2.0.0-rc.0\r\n* diesel_cli 2.0.0-rc.0\r\n* diesel_dynamic_schema 0.2.0-rc.0\r\n\r\nThis release marks a first prerelease of the upcoming Diesel 2.0 release. We ask you for your help to finalise the release.\r\nCheckout the \"Timeline for a Diesel 2.0 release\" section for details about how you can help us finishing the release.\r\n\r\n## Features\r\n\r\nAs a highlight Diesel 2.0.0 adds support for the following features:\r\n\r\n* Fully type checked `GROUP BY` support\r\n* Support for table aliasing\r\n* Support for defining select clauses via a corresponding type\r\n* Support for `UNION`/`INTERSECT` queries\r\n\r\n### Support for `GROUP BY` clauses\r\n\r\nDiesel 2.0 adds support for `GROUP BY` clauses for select queries.\r\n\r\nThis means queries like the following one will just work.\r\n\r\n```rust\r\n users::table.inner_join(posts::table)\r\n    .group_by(users::id)\r\n    .select((users::name, count(posts::id)))\r\n```\r\n\r\nAs this is the case for all other Diesel built-in query dsl, this construct is fully checked at compile time. This means Diesel\r\nwill ensure that the `GROUP BY` clause is valid for the current query and it will also ensure that expressions appearing inside\r\nof your `SELECT` clause will match the aggregation rules provided by the current `GROUP BY` clause.\r\n\r\n### Support for table aliasing\r\n\r\nDiesel 2.0 adds support for table aliasing. This enables users to write queries, where a table appears more than once in the corresponding\r\n`FROM` clause. For this Diesel provides a `Diesel::alias!` macro that allows to define new alias for existing tables.\r\n\r\nThe following query demonstrates the support for this feature:\r\n\r\n```rust\r\n// Define new table alias for the existing `users` table\r\nlet users1 = diesel::alias!(schema::users as user1);\r\n\r\n// Use the corresponding alias inside any existing query\r\nusers::table\r\n    .inner_join(users1.on(users::id).eq(users1.field(users::id))))\r\n    .select((users::id, users::name, users1.field(users::name)))\r\n    .order_by(users1.field(users::id))\r\n```\r\n\r\nAgain all of this is checked at compile time. So similar to a normal table, columns from aliases are only allowed to appear if\r\nthe corresponding query actually uses the alias.\r\n\r\n### Implied selection via the new `Selectable` trait\r\n\r\nDiesel 2.0 features a new `Selectable` trait and derive that lets users declare that a type expects a certain kind of select clause.\r\nThe major use case for this feature is to ensure that columns from a specific query are always requested in the right order\r\nfor a corresponding type implementing `Queryable`. This also works for complex queries involving joins or other kinds of nesting.\r\n\r\n```rust\r\n#[derive(Queryable, Selectable)]\r\nstruct User {\r\n    id: i32,\r\n    name: String,\r\n}\r\n\r\nlet first_user = users.select(User::as_select()).first(connection)?;\r\n```\r\n\r\nDiesel enforces at type system level that once you provided such a select clause via `User::as_select()` you are only allowed\r\nto construct this type from the returned result of the corresponding query. This means there is no need to specify the `User` type\r\ntwice in the query above.\r\n\r\n### Support for `UNION`/`INTERSECT`/`EXCEPT` queries\r\n\r\nDiesel 2.0 extents the query builder to support query combinations via `UNION`/`INTERSECT`/`EXCEPT`. This allows you\r\nto easily chain multiple queries together as long as they return fields of the same type. Queries like the following\r\none are now supported:\r\n\r\n```rust\r\n users.select(user_name.nullable())\r\n    .union(animals.select(animal_name).filter(animal_name.is_not_null()))\r\n```\r\n\r\nAs always this is checked at compile time to reject invalid queries, like for example that ones containing select\r\nclauses with different fields.\r\n\r\n## Call for Participation\r\n\r\nThe release of Diesel 2.0 does not only include the features listed above, but also marks the\r\npoint where the following things can be provided by third party crates:\r\n\r\n* Custom `QueryDsl` extensions to support previously unsupported SQL features. Checkout \r\n[`diesel_full_text_search`](https://github.com/diesel-rs/diesel_full_text_search) for an example\r\n* Alternative query dsl implementations reusing the existing `Connection` infrastructure\r\n* Custom [`Connection`](https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#provide-a-new-connection-implementation-for-an-existing-backend) implementations for existing backends\r\n* Custom [`Connection`](https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#implement-support-for-an-unsupported-database-system) \r\nand [`Backend`](https://docs.diesel.rs/2.0.x/diesel/backend/trait.Backend.html#implementing-a-custom-backend) implementations for previously unsupported backends. Checkout [diesel-oci](https://github.com/GiGainfosystems/diesel-oci) for an example.\r\n\r\nWe encourage our community to try out those features. Especially we would like to see experimentation around:\r\n\r\n* Previously unsupported database backends\r\n* Pure rust implementations of existing backend implementations. Checkout [this](https://github.com/sfackler/rust-postgres/issues/890) and [this](https://github.com/blackbeam/rust-mysql-simple/discussions/320) discussion for starting points.\r\n* Alternative query dsl implementations. Checkout [this discussion](https://github.com/SeaQL/sea-query/discussions/168) as starting point.\r\n\r\nPlease get in touch with us for pointers, help and details.\r\n\r\n\r\n## Input for Future Roadmap\r\n\r\nWith the release of Diesel 2.0 the planing for our next releases start. Hopefully they will not take as long as Diesel 2.0. We are looking for input on which features are wanted by our community. Please open a discussion thread with your idea in our [discussion forum](https://github.com/diesel-rs/diesel/discussions/categories/ideas).\r\n\r\nWeiznich will work on improving error messages for trait heavy crates based on a Rust Foundation Project Grant. This work will hopefully improve error messages for Diesel as well. If you are aware of bad error messages please submit a\r\nminimal example [here](https://github.com/weiznich/rust-foundation-community-grant).\r\n\r\n\r\n\r\n## Thanks\r\n\r\nAs part of this release we would like to welcome @Ten0 as part of the\r\ndiesel core team.\r\n\r\nThank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\r\n\r\nIn addition to the Diesel core team, 141 people contributed code to this release. A huge thank you to:\r\n\r\n* Alessandro Menezes\r\n* Alexander 'z33ky' Hirsch\r\n* Alexei Pastuchov\r\n* Alice Ryhl\r\n* Amila Welihinda\r\n* Andre Braga Reis\r\n* Andreas Runfalk\r\n* Andrew Safigan\r\n* Andrew Speed\r\n* Andy Russell\r\n* Artem Vorotnikov\r\n* Arve Seljebu\r\n* Billy Chan\r\n* Blas Rodriguez Irizar\r\n* Bryan Henry\r\n* Callym\r\n* Caroline Glassberg-Powell\r\n* Cassie Jones\r\n* Chenxi Yuan\r\n* Chris Eckhardt\r\n* Chris Hanks\r\n* Chris Maddox\r\n* Chris West (Faux)\r\n* Clouds Flowing\r\n* Corentin Henry\r\n* Daniel Buse\r\n* Danilo Bargen\r\n* David Teller\r\n* David Tulig\r\n* DebugSteven\r\n* Diggory Blake\r\n* Dmitriy Pleshevskiy\r\n* Dusty Mabe\r\n* DrVilepis\r\n* EclipsedSolari\r\n* Emile Fugulin\r\n* Emm\r\n* Emmanuel Surleau\r\n* Erlend Langseth\r\n* Felix Watts\r\n* Filip Gospodinov\r\n* Garrett Thornburg\r\n* Giorgio Gambino\r\n* Grgory Obanos\r\n* Hal Gentz\r\n* Han Xu\r\n* Heliozoa\r\n* Henk van der Laan\r\n* Henry Boisdequin\r\n* Hirokazu Hata\r\n* Iban Eguia (Razican)\r\n* Igor Raits\r\n* Ivan Tham\r\n* JR Heard\r\n* Jean SIMARD\r\n* Jeremy Stucki\r\n* Ji Sejkora\r\n* jigaoqiang\r\n* Joel Parker Henderson\r\n* John Brandt\r\n* Jonas Platte\r\n* Jonas Schievink\r\n* Joshua Koudys\r\n* Juhasz Sandor\r\n* Justice4Joffrey\r\n* Katharina Fey\r\n* Kevin King\r\n* Kevin Kirchner\r\n* Khionu Sybiern\r\n* Kitsu\r\n* Koisell\r\n* Kononnable\r\n* Leonardo Yvens\r\n* Lukas Markeffsky\r\n* Maccesch\r\n* Marc-Stefan Cassola\r\n* Martell Malone\r\n* Martijn Groeneveldt\r\n* Martin Nordholts\r\n* Matthew Kuo\r\n* Matthieu Guillemot\r\n* Mcat12\r\n* Meven\r\n* Mike Cronce\r\n* Mr Ceperka\r\n* Nafiul Islam\r\n* Nathan Papapietro\r\n* Nicholas Yang\r\n* Oliver Cooper\r\n* Otto Castle\r\n* Pankaj Jangid\r\n* Paolo Barbolini\r\n* Paul Le Corre\r\n* Paul Martensen\r\n* Pavan Kumar Sunkara\r\n* Pawe Przeniczny\r\n* Philip Trauner\r\n* Raphael Arias\r\n* Roman\r\n* Ryan Leckey\r\n* Sarthak Singh\r\n* Scott Driggers\r\n* Sean Klein\r\n* Simon Ertl\r\n* Spencer Taylor\r\n* Steven Chu\r\n* Storm Timmermans\r\n* Sbastien Santoro\r\n* Takayuki Maeda\r\n* Thomas Constantine Moore\r\n* Thomas Eizinger\r\n* Thomas Etter\r\n* Tom MacWright\r\n* Tuetuopay\r\n* Urhengulas\r\n* Vanio Begic\r\n* WebeWizard\r\n* William Myers\r\n* Yin Jifeng\r\n* Yuki Okushi\r\n* Zane Duffield\r\n* blackghost1987\r\n* czotomo\r\n* dchenk\r\n* ejc Drobni\r\n* gorbit99\r\n* hasezoey\r\n* hi-rustin\r\n* kevinpoitra\r\n* kpcyrd\r\n* matthew-dowdell\r\n* ode79\r\n* ropottnik\r\n* telios\r\n* theredfish\r\n* zoewithabang\r\n* Zhenhui Xie\r\n* mile Fugulin\r\n* een\r\n* \r\n* _Binboy\r\n\r\n",{html:1226,metadata:1227},"<p>Diesel 2.0.0 contains the contributions of more than 130 people. More than 1700 commits were submitted\r\nover a span of 3 years.</p>\n<p>As part of this release we introduced numerous new features and rewrote large parts of the internal structure.\r\nCheck out our <a href=\"https://diesel.rs/changelog.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">changelog for a complete list of changes</a>. As this is a new major Diesel release it contains a number of breaking changes. Checkout our <a href=\"https://diesel.rs/guides/migration_guide.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">migration guide</a> for details about how to handle those breaking changes.</p>\n<p>This release contains the following parts:</p>\n<ul>\n<li>diesel 2.0.0-rc.0</li>\n<li>diesel_derives 2.0.0-rc.0</li>\n<li>diesel_migrations 2.0.0-rc.0</li>\n<li>diesel_cli 2.0.0-rc.0</li>\n<li>diesel_dynamic_schema 0.2.0-rc.0</li>\n</ul>\n<p>This release marks a first prerelease of the upcoming Diesel 2.0 release. We ask you for your help to finalise the release.\r\nCheckout the Timeline for a Diesel 2.0 release section for details about how you can help us finishing the release.</p>\n<h2 id=\"features\">Features</h2>\n<p>As a highlight Diesel 2.0.0 adds support for the following features:</p>\n<ul>\n<li>Fully type checked <code>GROUP BY</code> support</li>\n<li>Support for table aliasing</li>\n<li>Support for defining select clauses via a corresponding type</li>\n<li>Support for <code>UNION</code>/<code>INTERSECT</code> queries</li>\n</ul>\n<h3 id=\"support-for-group-by-clauses\">Support for <code>GROUP BY</code> clauses</h3>\n<p>Diesel 2.0 adds support for <code>GROUP BY</code> clauses for select queries.</p>\n<p>This means queries like the following one will just work.</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\"> </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">group_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#82AAFF;--1:#3B61B0\">count</span><span style=\"--0:#D6DEEB;--1:#403F53\">(posts</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\" users::table.inner_join(posts::table)    .group_by(users::id)    .select((users::name, count(posts::id)))\"><div></div></button></div></figure></div>\n<p>As this is the case for all other Diesel built-in query dsl, this construct is fully checked at compile time. This means Diesel\r\nwill ensure that the <code>GROUP BY</code> clause is valid for the current query and it will also ensure that expressions appearing inside\r\nof your <code>SELECT</code> clause will match the aggregation rules provided by the current <code>GROUP BY</code> clause.</p>\n<h3 id=\"support-for-table-aliasing\">Support for table aliasing</h3>\n<p>Diesel 2.0 adds support for table aliasing. This enables users to write queries, where a table appears more than once in the corresponding\r\n<code>FROM</code> clause. For this Diesel provides a <code>Diesel::alias!</code> macro that allows to define new alias for existing tables.</p>\n<p>The following query demonstrates the support for this feature:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Define new table alias for the existing `users` table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> diesel</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">alias!</span><span style=\"--0:#D6DEEB;--1:#403F53\">(schema</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">as</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">user1</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#919F9F;--1:#5D6376\">// Use the corresponding alias inside any existing query</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">table</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">inner_join</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">on</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">eq</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">field</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">))))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">((users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">, users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">field</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">order_by</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">users1</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">field</span><span style=\"--0:#D6DEEB;--1:#403F53\">(users</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// Define new table alias for the existing &#x60;users&#x60; tablelet users1 = diesel::alias!(schema::users as user1);// Use the corresponding alias inside any existing queryusers::table    .inner_join(users1.on(users::id).eq(users1.field(users::id))))    .select((users::id, users::name, users1.field(users::name)))    .order_by(users1.field(users::id))\"><div></div></button></div></figure></div>\n<p>Again all of this is checked at compile time. So similar to a normal table, columns from aliases are only allowed to appear if\r\nthe corresponding query actually uses the alias.</p>\n<h3 id=\"implied-selection-via-the-new-selectable-trait\">Implied selection via the new <code>Selectable</code> trait</h3>\n<p>Diesel 2.0 features a new <code>Selectable</code> trait and derive that lets users declare that a type expects a certain kind of select clause.\r\nThe major use case for this feature is to ensure that columns from a specific query are always requested in the right order\r\nfor a corresponding type implementing <code>Queryable</code>. This also works for complex queries involving joins or other kinds of nesting.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">#[derive(Queryable, Selectable)]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">struct</span><span style=\"--0:#D6DEEB;--1:#403F53\"> User {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">id</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> i32,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">name</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> String,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8844AE\">let</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">first_user</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8844AE\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(User</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#82AAFF;--1:#3B61B0\">as_select</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">first</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">connection</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#[derive(Queryable, Selectable)]struct User {    id: i32,    name: String,}let first_user = users.select(User::as_select()).first(connection)?;\"><div></div></button></div></figure></div>\n<p>Diesel enforces at type system level that once you provided such a select clause via <code>User::as_select()</code> you are only allowed\r\nto construct this type from the returned result of the corresponding query. This means there is no need to specify the <code>User</code> type\r\ntwice in the query above.</p>\n<h3 id=\"support-for-unionintersectexcept-queries\">Support for <code>UNION</code>/<code>INTERSECT</code>/<code>EXCEPT</code> queries</h3>\n<p>Diesel 2.0 extents the query builder to support query combinations via <code>UNION</code>/<code>INTERSECT</code>/<code>EXCEPT</code>. This allows you\r\nto easily chain multiple queries together as long as they return fields of the same type. Queries like the following\r\none are now supported:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C5E478;--1:#3B61B0\">users</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">user_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">nullable</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">union</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">animals</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">select</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">animal_name</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">filter</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">animal_name</span><span style=\"--0:#7FDBCA;--1:#096E72\">.</span><span style=\"--0:#82AAFF;--1:#3B61B0\">is_not_null</span><span style=\"--0:#D6DEEB;--1:#403F53\">()))</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\" users.select(user_name.nullable())    .union(animals.select(animal_name).filter(animal_name.is_not_null()))\"><div></div></button></div></figure></div>\n<p>As always this is checked at compile time to reject invalid queries, like for example that ones containing select\r\nclauses with different fields.</p>\n<h2 id=\"call-for-participation\">Call for Participation</h2>\n<p>The release of Diesel 2.0 does not only include the features listed above, but also marks the\r\npoint where the following things can be provided by third party crates:</p>\n<ul>\n<li>Custom <code>QueryDsl</code> extensions to support previously unsupported SQL features. Checkout\r\n<a href=\"https://github.com/diesel-rs/diesel_full_text_search\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>diesel_full_text_search</code></a> for an example</li>\n<li>Alternative query dsl implementations reusing the existing <code>Connection</code> infrastructure</li>\n<li>Custom <a href=\"https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#provide-a-new-connection-implementation-for-an-existing-backend\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>Connection</code></a> implementations for existing backends</li>\n<li>Custom <a href=\"https://docs.diesel.rs/2.0.x/diesel/connection/trait.Connection.html#implement-support-for-an-unsupported-database-system\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>Connection</code></a>\r\nand <a href=\"https://docs.diesel.rs/2.0.x/diesel/backend/trait.Backend.html#implementing-a-custom-backend\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>Backend</code></a> implementations for previously unsupported backends. Checkout <a href=\"https://github.com/GiGainfosystems/diesel-oci\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">diesel-oci</a> for an example.</li>\n</ul>\n<p>We encourage our community to try out those features. Especially we would like to see experimentation around:</p>\n<ul>\n<li>Previously unsupported database backends</li>\n<li>Pure rust implementations of existing backend implementations. Checkout <a href=\"https://github.com/sfackler/rust-postgres/issues/890\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this</a> and <a href=\"https://github.com/blackbeam/rust-mysql-simple/discussions/320\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this</a> discussion for starting points.</li>\n<li>Alternative query dsl implementations. Checkout <a href=\"https://github.com/SeaQL/sea-query/discussions/168\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this discussion</a> as starting point.</li>\n</ul>\n<p>Please get in touch with us for pointers, help and details.</p>\n<h2 id=\"input-for-future-roadmap\">Input for Future Roadmap</h2>\n<p>With the release of Diesel 2.0 the planing for our next releases start. Hopefully they will not take as long as Diesel 2.0. We are looking for input on which features are wanted by our community. Please open a discussion thread with your idea in our <a href=\"https://github.com/diesel-rs/diesel/discussions/categories/ideas\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">discussion forum</a>.</p>\n<p>Weiznich will work on improving error messages for trait heavy crates based on a Rust Foundation Project Grant. This work will hopefully improve error messages for Diesel as well. If you are aware of bad error messages please submit a\r\nminimal example <a href=\"https://github.com/weiznich/rust-foundation-community-grant\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a>.</p>\n<h2 id=\"thanks\">Thanks</h2>\n<p>As part of this release we would like to welcome @Ten0 as part of the\r\ndiesel core team.</p>\n<p>Thank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 141 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Alessandro Menezes</li>\n<li>Alexander z33ky Hirsch</li>\n<li>Alexei Pastuchov</li>\n<li>Alice Ryhl</li>\n<li>Amila Welihinda</li>\n<li>Andre Braga Reis</li>\n<li>Andreas Runfalk</li>\n<li>Andrew Safigan</li>\n<li>Andrew Speed</li>\n<li>Andy Russell</li>\n<li>Artem Vorotnikov</li>\n<li>Arve Seljebu</li>\n<li>Billy Chan</li>\n<li>Blas Rodriguez Irizar</li>\n<li>Bryan Henry</li>\n<li>Callym</li>\n<li>Caroline Glassberg-Powell</li>\n<li>Cassie Jones</li>\n<li>Chenxi Yuan</li>\n<li>Chris Eckhardt</li>\n<li>Chris Hanks</li>\n<li>Chris Maddox</li>\n<li>Chris West (Faux)</li>\n<li>Clouds Flowing</li>\n<li>Corentin Henry</li>\n<li>Daniel Buse</li>\n<li>Danilo Bargen</li>\n<li>David Teller</li>\n<li>David Tulig</li>\n<li>DebugSteven</li>\n<li>Diggory Blake</li>\n<li>Dmitriy Pleshevskiy</li>\n<li>Dusty Mabe</li>\n<li>DrVilepis</li>\n<li>EclipsedSolari</li>\n<li>Emile Fugulin</li>\n<li>Emm</li>\n<li>Emmanuel Surleau</li>\n<li>Erlend Langseth</li>\n<li>Felix Watts</li>\n<li>Filip Gospodinov</li>\n<li>Garrett Thornburg</li>\n<li>Giorgio Gambino</li>\n<li>Grgory Obanos</li>\n<li>Hal Gentz</li>\n<li>Han Xu</li>\n<li>Heliozoa</li>\n<li>Henk van der Laan</li>\n<li>Henry Boisdequin</li>\n<li>Hirokazu Hata</li>\n<li>Iban Eguia (Razican)</li>\n<li>Igor Raits</li>\n<li>Ivan Tham</li>\n<li>JR Heard</li>\n<li>Jean SIMARD</li>\n<li>Jeremy Stucki</li>\n<li>Ji Sejkora</li>\n<li>jigaoqiang</li>\n<li>Joel Parker Henderson</li>\n<li>John Brandt</li>\n<li>Jonas Platte</li>\n<li>Jonas Schievink</li>\n<li>Joshua Koudys</li>\n<li>Juhasz Sandor</li>\n<li>Justice4Joffrey</li>\n<li>Katharina Fey</li>\n<li>Kevin King</li>\n<li>Kevin Kirchner</li>\n<li>Khionu Sybiern</li>\n<li>Kitsu</li>\n<li>Koisell</li>\n<li>Kononnable</li>\n<li>Leonardo Yvens</li>\n<li>Lukas Markeffsky</li>\n<li>Maccesch</li>\n<li>Marc-Stefan Cassola</li>\n<li>Martell Malone</li>\n<li>Martijn Groeneveldt</li>\n<li>Martin Nordholts</li>\n<li>Matthew Kuo</li>\n<li>Matthieu Guillemot</li>\n<li>Mcat12</li>\n<li>Meven</li>\n<li>Mike Cronce</li>\n<li>Mr Ceperka</li>\n<li>Nafiul Islam</li>\n<li>Nathan Papapietro</li>\n<li>Nicholas Yang</li>\n<li>Oliver Cooper</li>\n<li>Otto Castle</li>\n<li>Pankaj Jangid</li>\n<li>Paolo Barbolini</li>\n<li>Paul Le Corre</li>\n<li>Paul Martensen</li>\n<li>Pavan Kumar Sunkara</li>\n<li>Pawe Przeniczny</li>\n<li>Philip Trauner</li>\n<li>Raphael Arias</li>\n<li>Roman</li>\n<li>Ryan Leckey</li>\n<li>Sarthak Singh</li>\n<li>Scott Driggers</li>\n<li>Sean Klein</li>\n<li>Simon Ertl</li>\n<li>Spencer Taylor</li>\n<li>Steven Chu</li>\n<li>Storm Timmermans</li>\n<li>Sbastien Santoro</li>\n<li>Takayuki Maeda</li>\n<li>Thomas Constantine Moore</li>\n<li>Thomas Eizinger</li>\n<li>Thomas Etter</li>\n<li>Tom MacWright</li>\n<li>Tuetuopay</li>\n<li>Urhengulas</li>\n<li>Vanio Begic</li>\n<li>WebeWizard</li>\n<li>William Myers</li>\n<li>Yin Jifeng</li>\n<li>Yuki Okushi</li>\n<li>Zane Duffield</li>\n<li>blackghost1987</li>\n<li>czotomo</li>\n<li>dchenk</li>\n<li>ejc Drobni</li>\n<li>gorbit99</li>\n<li>hasezoey</li>\n<li>hi-rustin</li>\n<li>kevinpoitra</li>\n<li>kpcyrd</li>\n<li>matthew-dowdell</li>\n<li>ode79</li>\n<li>ropottnik</li>\n<li>telios</li>\n<li>theredfish</li>\n<li>zoewithabang</li>\n<li>Zhenhui Xie</li>\n<li>mile Fugulin</li>\n<li>een</li>\n<li></li>\n<li>_Binboy</li>\n</ul>",{headings:1228,localImagePaths:1237,remoteImagePaths:1238,frontmatter:1239},[1229,1230,1231,1232,1233,1234,1235,1236],{depth:65,slug:491,text:492},{depth:246,slug:494,text:495},{depth:246,slug:497,text:498},{depth:246,slug:500,text:501},{depth:246,slug:503,text:504},{depth:65,slug:506,text:507},{depth:65,slug:509,text:510},{depth:65,slug:515,text:516},[],[],{},"changelog/version/1-4-8",{id:1240,data:1242,body:1248,rendered:1249},{base:677,date:1243,link:1244,provider:1245,slug:1246,title:1247},["Date","2021-09-20T07:45:17.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.8",{name:681,label:682},"1-4-8","1.4.8","This release fixes an incompatibility between features passed to `diesel` and `diesel_migrations` while using cargos new resolver feature (`resolver = \"2\"`) which will become the new default with the upcoming Rust 2021 edition",{html:1250,metadata:1251},"<p>This release fixes an incompatibility between features passed to <code>diesel</code> and <code>diesel_migrations</code> while using cargos new resolver feature (<code>resolver = \"2\"</code>) which will become the new default with the upcoming Rust 2021 edition</p>",{headings:1252,localImagePaths:1253,remoteImagePaths:1254,frontmatter:1255},[],[],[],{},"changelog/version/1-4-7",{id:1256,data:1258,body:1264,rendered:1265},{base:677,date:1259,link:1260,provider:1261,slug:1262,title:1263},["Date","2021-06-08T07:45:56.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.7",{name:681,label:682},"1-4-7","1.4.7","* Updated `libsqlite3-sys` to allow version 0.22\r\n* Updated `ipnetwork` to allow version 0.18",{html:1266,metadata:1267},"<ul>\n<li>Updated <code>libsqlite3-sys</code> to allow version 0.22</li>\n<li>Updated <code>ipnetwork</code> to allow version 0.18</li>\n</ul>",{headings:1268,localImagePaths:1269,remoteImagePaths:1270,frontmatter:1271},[],[],[],{},"changelog/version/1-4-6",{id:1272,data:1274,body:1280,rendered:1281},{base:677,date:1275,link:1276,provider:1277,slug:1278,title:1279},["Date","2021-03-05T11:12:15.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.6",{name:681,label:682},"1-4-6","1.4.6","### Fixed\r\n\r\n* Fixed a use-after-free issue in the `QueryableByName` implementation\r\n  of our `Sqlite` backend\r\n* Updated several dependencies",{html:1282,metadata:1283},"<h3 id=\"fixed\">Fixed</h3>\n<ul>\n<li>Fixed a use-after-free issue in the <code>QueryableByName</code> implementation\r\nof our <code>Sqlite</code> backend</li>\n<li>Updated several dependencies</li>\n</ul>",{headings:1284,localImagePaths:1286,remoteImagePaths:1287,frontmatter:1288},[1285],{depth:246,slug:692,text:693},[],[],{},"changelog/version/1-4-5",{id:1289,data:1291,body:1297,rendered:1298},{base:677,date:1292,link:1293,provider:1294,slug:1295,title:1296},["Date","2020-06-09T11:28:48.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.5",{name:681,label:682},"1-4-5","1.4.5","   ## Fixed\r\n  \r\n   * Update several dependencies\r\n   * Fixed an issue where transactions that would fail to commit would leave the connection\r\n     in a broken non-committed non-rolled-back state.\r\n   * Fix a bug that result in leaking sockets/file descriptors on failed connection attempts\r\n     for postgresql\r\n   * Fix an incompatibility with newer `libmysqlclient` versions\r\n   * Remove some potential harmful usages of `mem::uninitialized`",{html:1299,metadata:1300},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Update several dependencies</li>\n<li>Fixed an issue where transactions that would fail to commit would leave the connection\r\nin a broken non-committed non-rolled-back state.</li>\n<li>Fix a bug that result in leaking sockets/file descriptors on failed connection attempts\r\nfor postgresql</li>\n<li>Fix an incompatibility with newer <code>libmysqlclient</code> versions</li>\n<li>Remove some potential harmful usages of <code>mem::uninitialized</code></li>\n</ul>",{headings:1301,localImagePaths:1303,remoteImagePaths:1304,frontmatter:1305},[1302],{depth:65,slug:692,text:693},[],[],{},"changelog/version/1-4-4",{id:1306,data:1308,body:1314,rendered:1315},{base:677,date:1309,link:1310,provider:1311,slug:1312,title:1313},["Date","2020-03-23T10:06:46.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.4",{name:681,label:682},"1-4-4","1.4.4"," ## Fixed\r\n \r\n * Update several dependencies\r\n * Fixed a bug with printing embedded migrations\r\n\r\nAs part of this release also updated versions of `migration_internals` and `migration_macros` are published.",{html:1316,metadata:1317},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Update several dependencies</li>\n<li>Fixed a bug with printing embedded migrations</li>\n</ul>\n<p>As part of this release also updated versions of <code>migration_internals</code> and <code>migration_macros</code> are published.</p>",{headings:1318,localImagePaths:1320,remoteImagePaths:1321,frontmatter:1322},[1319],{depth:65,slug:692,text:693},[],[],{},"changelog/version/1-4-3",{id:1323,data:1325,body:1331,rendered:1332},{base:677,date:1326,link:1327,provider:1328,slug:1329,title:1330},["Date","2019-10-11T20:30:33.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.3",{name:681,label:682},"1-4-3","1.4.3","## Fixed\r\n\r\n* Updated several dependencies \r\n* Fixed an issue where the postgresql backend exploits implementation defined behaviour\r\n* Fixed issue where rustdoc failed to build the documentation\r\n* `diesel_derives` and `diesel_migrations` are updated to syn 1.0\r\n",{html:1333,metadata:1334},"<h2 id=\"fixed\">Fixed</h2>\n<ul>\n<li>Updated several dependencies</li>\n<li>Fixed an issue where the postgresql backend exploits implementation defined behaviour</li>\n<li>Fixed issue where rustdoc failed to build the documentation</li>\n<li><code>diesel_derives</code> and <code>diesel_migrations</code> are updated to syn 1.0</li>\n</ul>",{headings:1335,localImagePaths:1337,remoteImagePaths:1338,frontmatter:1339},[1336],{depth:65,slug:692,text:693},[],[],{},"changelog/version/v1-4-0",{id:1340,data:1342,body:1348,rendered:1349},{base:677,date:1343,link:1344,provider:1345,slug:1346,title:1347},["Date","2019-01-21T09:52:59.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.4.0",{name:681,label:682},"v1-4-0","v1.4.0","# New Features\r\n\r\nIn contrast to the last release most changes in this release are minor or internal. We've added support for newer versions of some dependency crates (libsqlite-sys, uuid, ipnetwork).\r\n\r\nDiesel CLI got a command line flag to check if a generated schema matches  the already existing one. This is useful for CI setups to check there if the committed generated schema file matches the committed migrations.\r\n\r\nWe've added support for the `diesel_mange_updated_at('table_name')` SQL function on SQLite. This function handles the setup of an trigger that automatically updates the `updated_at` column on update operations.\r\n\r\nAdditionally several helpers were added to support the deserialisation of tuples and composite types on PostgreSQL.\r\n\r\nAs always, a full list of changes can be found it in [the changelog](https://github.com/diesel-rs/diesel/blob/dce9f01e8c53fc05c1388edd2d76adbb06caa372/CHANGELOG.md#140---2019-01-20)\r\n\r\n# Thanks\r\n\r\nThank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\r\n\r\nIn addition to the Diesel core team, 29 people contributed code to this release. A huge thank you to:\r\n\r\n* Aleksey Ivanov\r\n* Andrew Speed\r\n* Carlos Diaz-Padron\r\n* Daniel Silverstone\r\n* Dirkjan Ochtman\r\n* Dominik Sander\r\n* Eyal Kalderon\r\n* Galuh Sahid\r\n* Hirokazu Hata\r\n* Jake Goulding\r\n* Jo Liss\r\n* Josh Leeb-du Toit\r\n* Kevin Stenerson\r\n* kpcyrd\r\n* Marcus Stollsteimer\r\n* Matej Stuchlik\r\n* Nikita Sivakov\r\n* notryanb\r\n* Rasmus Kaj\r\n* Richard Petrie\r\n* Rotem Yaari\r\n* Ryan Leckey\r\n* Sergio Benitez\r\n* Simon Heath\r\n* Stephen Muss\r\n* Trinh Hoang Anh\r\n\r\n",{html:1350,metadata:1351},"<h1 id=\"new-features\">New Features</h1>\n<p>In contrast to the last release most changes in this release are minor or internal. Weve added support for newer versions of some dependency crates (libsqlite-sys, uuid, ipnetwork).</p>\n<p>Diesel CLI got a command line flag to check if a generated schema matches  the already existing one. This is useful for CI setups to check there if the committed generated schema file matches the committed migrations.</p>\n<p>Weve added support for the <code>diesel_mange_updated_at('table_name')</code> SQL function on SQLite. This function handles the setup of an trigger that automatically updates the <code>updated_at</code> column on update operations.</p>\n<p>Additionally several helpers were added to support the deserialisation of tuples and composite types on PostgreSQL.</p>\n<p>As always, a full list of changes can be found it in <a href=\"https://github.com/diesel-rs/diesel/blob/dce9f01e8c53fc05c1388edd2d76adbb06caa372/CHANGELOG.md#140---2019-01-20\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the changelog</a></p>\n<h1 id=\"thanks\">Thanks</h1>\n<p>Thank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 29 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Aleksey Ivanov</li>\n<li>Andrew Speed</li>\n<li>Carlos Diaz-Padron</li>\n<li>Daniel Silverstone</li>\n<li>Dirkjan Ochtman</li>\n<li>Dominik Sander</li>\n<li>Eyal Kalderon</li>\n<li>Galuh Sahid</li>\n<li>Hirokazu Hata</li>\n<li>Jake Goulding</li>\n<li>Jo Liss</li>\n<li>Josh Leeb-du Toit</li>\n<li>Kevin Stenerson</li>\n<li>kpcyrd</li>\n<li>Marcus Stollsteimer</li>\n<li>Matej Stuchlik</li>\n<li>Nikita Sivakov</li>\n<li>notryanb</li>\n<li>Rasmus Kaj</li>\n<li>Richard Petrie</li>\n<li>Rotem Yaari</li>\n<li>Ryan Leckey</li>\n<li>Sergio Benitez</li>\n<li>Simon Heath</li>\n<li>Stephen Muss</li>\n<li>Trinh Hoang Anh</li>\n</ul>",{headings:1352,localImagePaths:1357,remoteImagePaths:1358,frontmatter:1359},[1353,1356],{depth:691,slug:1354,text:1355},"new-features","New Features",{depth:691,slug:515,text:516},[],[],{},"changelog/version/1-3-3",{id:1360,data:1362,body:1368,rendered:1369},{base:677,date:1363,link:1364,provider:1365,slug:1366,title:1367},["Date","2018-09-12T15:51:32.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.3.3",{name:681,label:682},"1-3-3","1.3.3","This is a small bugfix release, addressing an issue with MySQL 8.0. The\r\nbehavior of the C API in libmysqlclient changed in this version of\r\nMySQL, causing problems when a connection pool was used with Diesel.\r\n\r\nIf you are not using MySQL, or are on a version older than 8.0, this\r\nrelease does not affect you.",{html:1370,metadata:1371},"<p>This is a small bugfix release, addressing an issue with MySQL 8.0. The\r\nbehavior of the C API in libmysqlclient changed in this version of\r\nMySQL, causing problems when a connection pool was used with Diesel.</p>\n<p>If you are not using MySQL, or are on a version older than 8.0, this\r\nrelease does not affect you.</p>",{headings:1372,localImagePaths:1373,remoteImagePaths:1374,frontmatter:1375},[],[],[],{},"changelog/version/1-3-2",{id:1376,data:1378,body:1384,rendered:1385},{base:677,date:1379,link:1380,provider:1381,slug:1382,title:1383},["Date","2018-06-14T21:03:45.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.3.2",{name:681,label:682},"1-3-2","1.3.2","This release contains two major bugfixes. This release fixes the behavior of unsigned types on MySQL, and a compile time issue caused by the use of `#[sql_name]` in `sql_function!` with no return type. This release only affects users who are using unsigned types on MySQL, or who had code which failed to compile with 1.3.1.",{html:1386,metadata:1387},"<p>This release contains two major bugfixes. This release fixes the behavior of unsigned types on MySQL, and a compile time issue caused by the use of <code>#[sql_name]</code> in <code>sql_function!</code> with no return type. This release only affects users who are using unsigned types on MySQL, or who had code which failed to compile with 1.3.1.</p>",{headings:1388,localImagePaths:1389,remoteImagePaths:1390,frontmatter:1391},[],[],[],{},"changelog/version/v1-3-0",{id:1392,data:1394,body:1400,rendered:1401},{base:677,date:1395,link:1396,provider:1397,slug:1398,title:1399},["Date","2018-05-22T20:43:26.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.3.0",{name:681,label:682},"v1-3-0","v1.3.0","New Features\r\n==\r\n\r\nThis release includes a couple of major changes to how Diesel projects are developed. In the past, we've had 2 ways to generate `schema.rs`. A procedural macro called `infer_schema!`, and a CLI command `diesel print-schema`. We've recommended using the CLI command for a long time, but `infer_schema!` was still useful for early prototypes.\r\n\r\nAt the beginning of a project, your database schema changes much more frequently. It's extremely annoying to have to remember to run a second command after running your migrations.\r\n\r\nDiesel CLI 1.3 now supports a configuration file to customize its behavior. One of the new capabilities this provides is the ability to automatically regenerate `schema.rs` whenever you run or revert a migration. This means you no longer have to remember to run `diesel print-schema` when things change.\r\n\r\nBecause of this, we are deprecating `diesel_infer_schema`. 1.3 will be the final release of that crate. However, `diesel_infer_schema` 1.3 will continue to work with `diesel` until at least Diesel 2.0. You can see all of the capabilities of the new configuration file at http://diesel.rs/guides/configuring-diesel-cli.\r\n\r\nThis release also includes a complete redesign of the [`sql_function!`] macro. The new syntax is significantly closer to normal Rust. For example, what used to be written as:\r\n\r\n```rust\r\nsql_function! {\r\n    lower, lower_t, (x: Text) -> Text,\r\n    \"Here are the docs for `lower`\r\nIt's awkward to make multiline\"\r\n}\r\n```\r\n\r\nCan now be written as:\r\n\r\n```rust\r\nsql_function! {\r\n    /// Here are the docs for `lower`\r\n    /// It's just a normal doc comment.\r\n    fn lower(x: Text) -> Text;\r\n}\r\n```\r\n\r\nThe new form also supports much more than the old one, including aggregate functions, function renaming, and generic functions. Things like `MAX` could previously not be expressed with `sql_function!`.  However, now the definition looks like this:\r\n\r\n```rust\r\nsql_function! {\r\n    #[aggregate]\r\n    fn max<ST: SqlOrd + IntoNullable>(expr: ST) -> ST::Nullable;\r\n}\r\n```\r\n\r\nFinally, the redesigned `sql_function!` supports user defined functions on SQLite. SQLite differs from other databases, in that custom functions aren't defined in SQL. Instead you give it a C function pointer to use for the body. With Diesel, you can just give us any Rust closure that takes appropriate argument types, and we'll handle gluing that to SQLite for you.\r\n\r\nYou can find examples for all of this in [the docs for `sql_function!`][`sql_function!`].\r\n\r\n[`sql_function!`]: http://docs.diesel.rs/diesel/macro.sql_function.html\r\n\r\nIn addition to the headline features, this release includes a ton of quality of life changes including expanded support for locking clauses, more global support for mathematic operators, and more. As always, for a full list of changes you can find it in [the changelog].  \r\n[the changelog]: https://github.com/diesel-rs/diesel/blob/v1.3.0/CHANGELOG.md\r\n\r\nThanks\r\n==\r\n\r\nThank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we don't have a way to collect stats on that form of contribution, it's greatly appreciated.\r\n\r\nIn addition to the Diesel core team, 12 people contributed code to this release. A huge thank you to:\r\n\r\n- Aleksey Ivanov\r\n- Christopher Brickley\r\n- David Reid\r\n- Diggory Blake\r\n- Graham Turner\r\n- Katharina\r\n- Matt Kraai\r\n- Nick Babcock\r\n- Richard Petrie\r\n- Simon Dickson\r\n- Sunrin SHIMURA\r\n- Thierry Berger",{html:1402,metadata:1403},"<h1 id=\"new-features\">New Features</h1>\n<p>This release includes a couple of major changes to how Diesel projects are developed. In the past, weve had 2 ways to generate <code>schema.rs</code>. A procedural macro called <code>infer_schema!</code>, and a CLI command <code>diesel print-schema</code>. Weve recommended using the CLI command for a long time, but <code>infer_schema!</code> was still useful for early prototypes.</p>\n<p>At the beginning of a project, your database schema changes much more frequently. Its extremely annoying to have to remember to run a second command after running your migrations.</p>\n<p>Diesel CLI 1.3 now supports a configuration file to customize its behavior. One of the new capabilities this provides is the ability to automatically regenerate <code>schema.rs</code> whenever you run or revert a migration. This means you no longer have to remember to run <code>diesel print-schema</code> when things change.</p>\n<p>Because of this, we are deprecating <code>diesel_infer_schema</code>. 1.3 will be the final release of that crate. However, <code>diesel_infer_schema</code> 1.3 will continue to work with <code>diesel</code> until at least Diesel 2.0. You can see all of the capabilities of the new configuration file at <a href=\"http://diesel.rs/guides/configuring-diesel-cli\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">http://diesel.rs/guides/configuring-diesel-cli</a>.</p>\n<p>This release also includes a complete redesign of the <a href=\"http://docs.diesel.rs/diesel/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>sql_function!</code></a> macro. The new syntax is significantly closer to normal Rust. For example, what used to be written as:</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/static/ec.v4551.css\"><script type=\"module\" src=\"/static/ec.0vx5m.js\"></script><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3B61B0\">lower</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3B61B0\">lower_t</span><span style=\"--0:#D6DEEB;--1:#403F53\">, (</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#984E4D\">Here are the docs for `lower`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#ECC48D;--1:#984E4D\">It's awkward to make multiline</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sql_function! {    lower, lower_t, (x: Text) -> Text,    &#x22;Here are the docs for &#x60;lower&#x60;It&#x27;s awkward to make multiline&#x22;}\"><div></div></button></div></figure></div>\n<p>Can now be written as:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#919F9F;--1:#5F636F\">/// Here are the docs for `lower`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#919F9F;--1:#5F636F\">/// It's just a normal doc comment.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">lower</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3B61B0\">x</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> Text;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sql_function! {    /// Here are the docs for &#x60;lower&#x60;    /// It&#x27;s just a normal doc comment.    fn lower(x: Text) -> Text;}\"><div></div></button></div></figure></div>\n<p>The new form also supports much more than the old one, including aggregate functions, function renaming, and generic functions. Things like <code>MAX</code> could previously not be expressed with <code>sql_function!</code>.  However, now the definition looks like this:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"rust\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3B61B0\">sql_function!</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">#[aggregate]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8844AE\">fn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">max</span><span style=\"--0:#D6DEEB;--1:#403F53\">&#x3C;</span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> SqlOrd </span><span style=\"--0:#7FDBCA;--1:#096E72\">+</span><span style=\"--0:#D6DEEB;--1:#403F53\"> IntoNullable>(</span><span style=\"--0:#C5E478;--1:#3B61B0\">expr</span><span style=\"--0:#7FDBCA;--1:#096E72\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#7FDBCA;--1:#096E72\">-></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3B61B0\">ST</span><span style=\"--0:#7FDBCA;--1:#096E72\">::</span><span style=\"--0:#D6DEEB;--1:#403F53\">Nullable;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><div aria-live=\"polite\"></div><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sql_function! {    #[aggregate]    fn max<ST: SqlOrd + IntoNullable>(expr: ST) -> ST::Nullable;}\"><div></div></button></div></figure></div>\n<p>Finally, the redesigned <code>sql_function!</code> supports user defined functions on SQLite. SQLite differs from other databases, in that custom functions arent defined in SQL. Instead you give it a C function pointer to use for the body. With Diesel, you can just give us any Rust closure that takes appropriate argument types, and well handle gluing that to SQLite for you.</p>\n<p>You can find examples for all of this in <a href=\"http://docs.diesel.rs/diesel/macro.sql_function.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the docs for <code>sql_function!</code></a>.</p>\n<p>In addition to the headline features, this release includes a ton of quality of life changes including expanded support for locking clauses, more global support for mathematic operators, and more. As always, for a full list of changes you can find it in [the changelog].<br>\n[the changelog]: <a href=\"https://github.com/diesel-rs/diesel/blob/v1.3.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/blob/v1.3.0/CHANGELOG.md</a></p>\n<h1 id=\"thanks\">Thanks</h1>\n<p>Thank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we dont have a way to collect stats on that form of contribution, its greatly appreciated.</p>\n<p>In addition to the Diesel core team, 12 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Aleksey Ivanov</li>\n<li>Christopher Brickley</li>\n<li>David Reid</li>\n<li>Diggory Blake</li>\n<li>Graham Turner</li>\n<li>Katharina</li>\n<li>Matt Kraai</li>\n<li>Nick Babcock</li>\n<li>Richard Petrie</li>\n<li>Simon Dickson</li>\n<li>Sunrin SHIMURA</li>\n<li>Thierry Berger</li>\n</ul>",{headings:1404,localImagePaths:1407,remoteImagePaths:1408,frontmatter:1409},[1405,1406],{depth:691,slug:1354,text:1355},{depth:691,slug:515,text:516},[],[],{},"changelog/version/1-2-0",{id:1410,data:1412,body:1418,rendered:1419},{base:677,date:1413,link:1414,provider:1415,slug:1416,title:1417},["Date","2018-04-07T00:12:30.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.2.0",{name:681,label:682},"1-2-0","1.2.0","This release contains several long awaited features.\r\n\r\nWe've re-introduced the ability to use bind params with the `sql` function, in a way which is harder to mis-use. This functionality was present prior to 1.0, but was removed when `sql_function` was added over concerns about its use with the rest of the query builder. Recent developments have proved those concerns to be valid, but this new API fills that niche. Thanks to @notryanb for taking the lead on this feature.\r\n\r\nWe've also added the ability to insert from a select statement (e.g.  queries in the form of `INSERT INTO table (...) SELECT ...`. This is a feature request that has come up repeatedly since release, and we're happy to finally bring it to you. We've also added alternate forms of our insert API which feel better when used with select statements. You can find the full details in [the CHANGELOG].\r\n\r\nFinally, we've rewritten our custom dervies from scratch to take advantage of new diagnostic tools in recent versions of nightly Rust. If you turn on the `unstable` feature of Diesel on a nightly compiler, you'll find that you get dramatically improved error messages from our derives. For the best error messages, you should also set `RUSTFLAGS=\"--cfg procmacro2_semver_exempt\"`.\r\n\r\nAdditionally, as of this release, Diesel is now powered by the blockchain. Because it's 2018 and that's how it works now I guess. See [the CHANGELOG][its a joke] for full details.\r\n\r\n[its a joke]: https://github.com/diesel-rs/diesel/blob/v1.2.0/CHANGELOG.md#jokes\r\n\r\nIn addition to the headline features, there were a ton of features that we don't have time to mention here. As always, for a full list of changes you can find a full list in [the CHANGELOG].\r\n\r\n[the CHANGELOG]: https://github.com/diesel-rs/diesel/blob/v1.2.0/CHANGELOG.md\r\n\r\nThanks\r\n==\r\n\r\nThank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we don't have a way to collect stats on that form of contribution...\r\n\r\nIn addition to the Diesel core team, 14 people contributed code to this release. A huge thank you to:\r\n\r\n- Alex Kitchens\r\n- Andrew Weiss\r\n- Arun Kulshreshtha\r\n- Brandur\r\n- EloD10\r\n- Jacob Chae\r\n- Jordan Petridis\r\n- Josh Leeb-du Toit\r\n- Kerollmops\r\n- Mathias Svensson\r\n- Ryan Blecher\r\n- Sander Maijers\r\n- Seth Larson\r\n- YetAnotherMinion\r\n",{html:1420,metadata:1421},"<p>This release contains several long awaited features.</p>\n<p>Weve re-introduced the ability to use bind params with the <code>sql</code> function, in a way which is harder to mis-use. This functionality was present prior to 1.0, but was removed when <code>sql_function</code> was added over concerns about its use with the rest of the query builder. Recent developments have proved those concerns to be valid, but this new API fills that niche. Thanks to @notryanb for taking the lead on this feature.</p>\n<p>Weve also added the ability to insert from a select statement (e.g.  queries in the form of <code>INSERT INTO table (...) SELECT ...</code>. This is a feature request that has come up repeatedly since release, and were happy to finally bring it to you. Weve also added alternate forms of our insert API which feel better when used with select statements. You can find the full details in <a href=\"https://github.com/diesel-rs/diesel/blob/v1.2.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a>.</p>\n<p>Finally, weve rewritten our custom dervies from scratch to take advantage of new diagnostic tools in recent versions of nightly Rust. If you turn on the <code>unstable</code> feature of Diesel on a nightly compiler, youll find that you get dramatically improved error messages from our derives. For the best error messages, you should also set <code>RUSTFLAGS=\"--cfg procmacro2_semver_exempt\"</code>.</p>\n<p>Additionally, as of this release, Diesel is now powered by the blockchain. Because its 2018 and thats how it works now I guess. See <a href=\"https://github.com/diesel-rs/diesel/blob/v1.2.0/CHANGELOG.md#jokes\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a> for full details.</p>\n<p>In addition to the headline features, there were a ton of features that we dont have time to mention here. As always, for a full list of changes you can find a full list in <a href=\"https://github.com/diesel-rs/diesel/blob/v1.2.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a>.</p>\n<h1 id=\"thanks\">Thanks</h1>\n<p>Thank you to everyone who helped make this release happen through bug reports, and discussion on Gitter. While we dont have a way to collect stats on that form of contribution</p>\n<p>In addition to the Diesel core team, 14 people contributed code to this release. A huge thank you to:</p>\n<ul>\n<li>Alex Kitchens</li>\n<li>Andrew Weiss</li>\n<li>Arun Kulshreshtha</li>\n<li>Brandur</li>\n<li>EloD10</li>\n<li>Jacob Chae</li>\n<li>Jordan Petridis</li>\n<li>Josh Leeb-du Toit</li>\n<li>Kerollmops</li>\n<li>Mathias Svensson</li>\n<li>Ryan Blecher</li>\n<li>Sander Maijers</li>\n<li>Seth Larson</li>\n<li>YetAnotherMinion</li>\n</ul>",{headings:1422,localImagePaths:1424,remoteImagePaths:1425,frontmatter:1426},[1423],{depth:691,slug:515,text:516},[],[],{},"changelog/version/1-1-1",{id:1427,data:1429,body:1435,rendered:1436},{base:677,date:1430,link:1431,provider:1432,slug:1433,title:1434},["Date","2018-01-16T15:53:00.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.1.1",{name:681,label:682},"1-1-1","1.1.1","This release fixes a minor issue with our r2d2 support. In 1.1 we recommend that people access `r2d2` via `diesel::r2d2`. However, `r2d2` has a type called `Error`, which was shadowed by our own type called `Error` in that same module, making it inaccessible. This release adds an alias `PoolError` to point at `r2d2::Error`.\r\n\r\nThanks to YetAnotherMinion for working on this release.\r\n",{html:1437,metadata:1438},"<p>This release fixes a minor issue with our r2d2 support. In 1.1 we recommend that people access <code>r2d2</code> via <code>diesel::r2d2</code>. However, <code>r2d2</code> has a type called <code>Error</code>, which was shadowed by our own type called <code>Error</code> in that same module, making it inaccessible. This release adds an alias <code>PoolError</code> to point at <code>r2d2::Error</code>.</p>\n<p>Thanks to YetAnotherMinion for working on this release.</p>",{headings:1439,localImagePaths:1440,remoteImagePaths:1441,frontmatter:1442},[],[],[],{},"changelog/version/1-1-0",{id:1443,data:1445,body:1451,rendered:1452},{base:677,date:1446,link:1447,provider:1448,slug:1449,title:1450},["Date","2018-01-15T15:58:56.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.1.0",{name:681,label:682},"1-1-0","1.1.0","Improved Support for Adding New Types\r\n-------------------------------------\r\n\r\nThe primary focus of this release was improving the ergonomics of adding support for new types in Diesel.\r\n\r\nFor implementing new SQL types, we've added `#[derive(SqlType)]` which implements many traits that you need to implement for every SQL type.  See the documentation for `HasSqlType` for details on this derive.\r\n\r\nFor implementing new mappings, we've added `#[derive(FromSqlRow)]` and `#[derive(AsExpression)]`. These derives will replace the majority of the boilerplate that was previously required when supporting new types.  Adding support for new types in Diesel 1.1 should only require implementing `FromSql` and `ToSql`. The derives will handle the rest.\r\n\r\nWe've also provided `FromSql` impls for `*const str` and `*const [u8]`.  Due to the design of `FromSql`, we can't provide impls for `&str` and `&[u8]` without a breaking change. However many impls just need to parse a string or some bytes, and don't need the allocation that would come from `String` or `Vec<u8>`. This will require unsafe code to use, but should make certain implementations more efficient.\r\n\r\nFinally, we've restructured how our serialize/deserialize modules are structured, and provided type aliases to make implementations of `FromSql` and `ToSql` more consise.\r\n\r\n`r2d2_diesel` is Now Part of Diesel\r\n-----------------------------------\r\n\r\nFinally, this release merges `r2d2_diesel` into Diesel itself. The main benefit of doing this is that we can implement `Connection` for `PooledConnection`, removing the need for explicit `&*` when using r2d2.  This should also help to prevent version mismatches when changing Diesel versions.\r\n\r\nTo use the new r2d2 support, remove `r2d2` and `r2d2_diesel` from your Cargo.toml. Add the `r2d2` to your enabled features on `diesel`. Replace `extern crate r2d2` with `pub use diesel::r2d2`. Replace any `r2d2_diesel::` with `diesel::r2d2::`.\r\n\r\nThanks\r\n------\r\n\r\nIn addition to the headline features, there were dozens of smaller additions which should make using Diesel even better! As always, you can check the CHANGELOG for a full list of changes in this release.\r\n\r\nIn addition to the Diesel core team, 8 people contributed to this release. A huge thank you to:\r\n\r\n- Ashe Connor\r\n- Chris Pick\r\n- Evan\r\n- Georg Semmler\r\n- MarcManiez\r\n- Martin Lindhe\r\n- Oliver Schneider\r\n- Ryan Blecher\r\n",{html:1453,metadata:1454},"<h2 id=\"improved-support-for-adding-new-types\">Improved Support for Adding New Types</h2>\n<p>The primary focus of this release was improving the ergonomics of adding support for new types in Diesel.</p>\n<p>For implementing new SQL types, weve added <code>#[derive(SqlType)]</code> which implements many traits that you need to implement for every SQL type.  See the documentation for <code>HasSqlType</code> for details on this derive.</p>\n<p>For implementing new mappings, weve added <code>#[derive(FromSqlRow)]</code> and <code>#[derive(AsExpression)]</code>. These derives will replace the majority of the boilerplate that was previously required when supporting new types.  Adding support for new types in Diesel 1.1 should only require implementing <code>FromSql</code> and <code>ToSql</code>. The derives will handle the rest.</p>\n<p>Weve also provided <code>FromSql</code> impls for <code>*const str</code> and <code>*const [u8]</code>.  Due to the design of <code>FromSql</code>, we cant provide impls for <code>&#x26;str</code> and <code>&#x26;[u8]</code> without a breaking change. However many impls just need to parse a string or some bytes, and dont need the allocation that would come from <code>String</code> or <code>Vec&#x3C;u8></code>. This will require unsafe code to use, but should make certain implementations more efficient.</p>\n<p>Finally, weve restructured how our serialize/deserialize modules are structured, and provided type aliases to make implementations of <code>FromSql</code> and <code>ToSql</code> more consise.</p>\n<h2 id=\"r2d2_diesel-is-now-part-of-diesel\"><code>r2d2_diesel</code> is Now Part of Diesel</h2>\n<p>Finally, this release merges <code>r2d2_diesel</code> into Diesel itself. The main benefit of doing this is that we can implement <code>Connection</code> for <code>PooledConnection</code>, removing the need for explicit <code>&#x26;*</code> when using r2d2.  This should also help to prevent version mismatches when changing Diesel versions.</p>\n<p>To use the new r2d2 support, remove <code>r2d2</code> and <code>r2d2_diesel</code> from your Cargo.toml. Add the <code>r2d2</code> to your enabled features on <code>diesel</code>. Replace <code>extern crate r2d2</code> with <code>pub use diesel::r2d2</code>. Replace any <code>r2d2_diesel::</code> with <code>diesel::r2d2::</code>.</p>\n<h2 id=\"thanks\">Thanks</h2>\n<p>In addition to the headline features, there were dozens of smaller additions which should make using Diesel even better! As always, you can check the CHANGELOG for a full list of changes in this release.</p>\n<p>In addition to the Diesel core team, 8 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Ashe Connor</li>\n<li>Chris Pick</li>\n<li>Evan</li>\n<li>Georg Semmler</li>\n<li>MarcManiez</li>\n<li>Martin Lindhe</li>\n<li>Oliver Schneider</li>\n<li>Ryan Blecher</li>\n</ul>",{headings:1455,localImagePaths:1463,remoteImagePaths:1464,frontmatter:1465},[1456,1459,1462],{depth:65,slug:1457,text:1458},"improved-support-for-adding-new-types","Improved Support for Adding New Types",{depth:65,slug:1460,text:1461},"r2d2_diesel-is-now-part-of-diesel","r2d2_diesel is Now Part of Diesel",{depth:65,slug:515,text:516},[],[],{},"changelog/version/1-0-0",{id:1466,data:1468,body:1474,rendered:1475},{base:677,date:1469,link:1470,provider:1471,slug:1472,title:1473},["Date","2018-01-02T23:19:33.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.0.0",{name:681,label:682},"1-0-0","1.0.0","We didn't quite make it for 2017, but Diesel 1.0 is finally here!\r\nThere are no changes between Diesel 1.0 and 1.0.0-rc1.\r\n\r\n1.0.0 marks stability for Diesel. While there are many more features\r\nthat will be added in the future, there will be no breaking changes from\r\nthis point forward without a major version bump (which we do not\r\nanticipate happening for many years).\r\n\r\nA lot has happened since Diesel 0.1 was released over 2 years ago. While\r\nit would be impossible to list every major change that has happened\r\nsince then, here are a few highlights:\r\n\r\n- Expanded from a PostgreSQL specific library to supporting SQLite and MySQL\r\n- Went from nightly-only to nightly-optional to working purely on stable\r\n  Rust\r\n- `diesel print-schema` replaced `infer_schema!` as the go-to way to\r\n  infer your database schema.\r\n- Added support for a significant portion of SQL queries which could not\r\n  be represented in 0.1\r\n\r\nIt's been a great honor to watch this community grow and thrive as this\r\nlibrary has developed. I look forward to continuing to evolve Diesel,\r\nand seeing how far it can go.\r\n\r\nIn addition to the Diesel core team, 98 people have contributed to\r\nDiesel. A huge thank you to everyone who made this and every prior\r\nrelease possible:\r\n\r\n- Adam Perry\r\n- Adrian Perez de Castro\r\n- Alex Alvarez\r\n- Alex Kitchens\r\n- Alexey Zabelin\r\n- Andrew Lazarus\r\n- Andrew Ryan Lazarus\r\n- Arnar Mar Sig\r\n- Barosl Lee\r\n- Blake Pettersson\r\n- Bob\r\n- Boris-Chengbiao Zhou\r\n- Brandon W Maister\r\n- Cameron Alexander\r\n- Cengiz Can\r\n- Christopher Brickley\r\n- Cyryl Potnicki\r\n- Daniel Durante\r\n- Danilo Bargen\r\n- David Szotten\r\n- Derek Prior\r\n- Dimiter Petrov\r\n- Dorian Scheidt\r\n- Enether\r\n- Eric Kidd\r\n- Erich Cordoba\r\n- FliegendeWurst\r\n- Flux Xu\r\n- Garrett Squire\r\n- Georg Semmler\r\n- Graham Grochowski\r\n- JD Gonzales\r\n- Jake Goulding\r\n- Jakob Gillich\r\n- James Kominick\r\n- Jethro Beekman\r\n- Jim McGrath\r\n- Jimmy Cuadra\r\n- John Gallagher\r\n- Jordan\r\n- Josh Holmer\r\n- Jovansonlee Cesar\r\n- Katrina Brock\r\n- Kieran\r\n- Konstantinos Sideris\r\n- Lance Carlson\r\n- Lauri Apple\r\n- Maciej\r\n- Maciej Dziardziel\r\n- Mark Catley\r\n- Martijn de Haan\r\n- Mathieu Rochette\r\n- Matt Casper\r\n- Maxime pep Buquet\r\n- Michael Macias\r\n- Michael Stock\r\n- Mike Piccolo\r\n- Mrmaxmeier\r\n- Patrick Fernie\r\n- Paul Lange\r\n- Peter Marheine\r\n- Pyry Kontio\r\n- Rasmus Kaj\r\n- Richard Dodd\r\n- Robert Balicki\r\n- Robert Maloney\r\n- Ruben De Smet\r\n- Ryan Blecher\r\n- Sam Phippen\r\n- Sebastian Blei\r\n- Sergio Benitez\r\n- Severen Redwood\r\n- Sharad Chand\r\n- Sid Ngeth\r\n- Stu Black\r\n- Sunrin SHIMURA (keen)\r\n- Tamir Duberstein\r\n- Taryn Hill\r\n- Tess Griffin\r\n- Tim Brooks\r\n- Tobias Schottdorf\r\n- Tom Houl\r\n- Tshepang Lekhonkhobe\r\n- Will Murphy\r\n- William Murphy\r\n- benaryorg\r\n- bippityboppity\r\n- debris\r\n- derekdreery\r\n- jacob\r\n- jethrogb\r\n- kardeiz\r\n- king6cong\r\n- klieth\r\n- pfernie\r\n- theduke\r\n- wangcong",{html:1476,metadata:1477},"<p>We didnt quite make it for 2017, but Diesel 1.0 is finally here!\r\nThere are no changes between Diesel 1.0 and 1.0.0-rc1.</p>\n<p>1.0.0 marks stability for Diesel. While there are many more features\r\nthat will be added in the future, there will be no breaking changes from\r\nthis point forward without a major version bump (which we do not\r\nanticipate happening for many years).</p>\n<p>A lot has happened since Diesel 0.1 was released over 2 years ago. While\r\nit would be impossible to list every major change that has happened\r\nsince then, here are a few highlights:</p>\n<ul>\n<li>Expanded from a PostgreSQL specific library to supporting SQLite and MySQL</li>\n<li>Went from nightly-only to nightly-optional to working purely on stable\r\nRust</li>\n<li><code>diesel print-schema</code> replaced <code>infer_schema!</code> as the go-to way to\r\ninfer your database schema.</li>\n<li>Added support for a significant portion of SQL queries which could not\r\nbe represented in 0.1</li>\n</ul>\n<p>Its been a great honor to watch this community grow and thrive as this\r\nlibrary has developed. I look forward to continuing to evolve Diesel,\r\nand seeing how far it can go.</p>\n<p>In addition to the Diesel core team, 98 people have contributed to\r\nDiesel. A huge thank you to everyone who made this and every prior\r\nrelease possible:</p>\n<ul>\n<li>Adam Perry</li>\n<li>Adrian Perez de Castro</li>\n<li>Alex Alvarez</li>\n<li>Alex Kitchens</li>\n<li>Alexey Zabelin</li>\n<li>Andrew Lazarus</li>\n<li>Andrew Ryan Lazarus</li>\n<li>Arnar Mar Sig</li>\n<li>Barosl Lee</li>\n<li>Blake Pettersson</li>\n<li>Bob</li>\n<li>Boris-Chengbiao Zhou</li>\n<li>Brandon W Maister</li>\n<li>Cameron Alexander</li>\n<li>Cengiz Can</li>\n<li>Christopher Brickley</li>\n<li>Cyryl Potnicki</li>\n<li>Daniel Durante</li>\n<li>Danilo Bargen</li>\n<li>David Szotten</li>\n<li>Derek Prior</li>\n<li>Dimiter Petrov</li>\n<li>Dorian Scheidt</li>\n<li>Enether</li>\n<li>Eric Kidd</li>\n<li>Erich Cordoba</li>\n<li>FliegendeWurst</li>\n<li>Flux Xu</li>\n<li>Garrett Squire</li>\n<li>Georg Semmler</li>\n<li>Graham Grochowski</li>\n<li>JD Gonzales</li>\n<li>Jake Goulding</li>\n<li>Jakob Gillich</li>\n<li>James Kominick</li>\n<li>Jethro Beekman</li>\n<li>Jim McGrath</li>\n<li>Jimmy Cuadra</li>\n<li>John Gallagher</li>\n<li>Jordan</li>\n<li>Josh Holmer</li>\n<li>Jovansonlee Cesar</li>\n<li>Katrina Brock</li>\n<li>Kieran</li>\n<li>Konstantinos Sideris</li>\n<li>Lance Carlson</li>\n<li>Lauri Apple</li>\n<li>Maciej</li>\n<li>Maciej Dziardziel</li>\n<li>Mark Catley</li>\n<li>Martijn de Haan</li>\n<li>Mathieu Rochette</li>\n<li>Matt Casper</li>\n<li>Maxime pep Buquet</li>\n<li>Michael Macias</li>\n<li>Michael Stock</li>\n<li>Mike Piccolo</li>\n<li>Mrmaxmeier</li>\n<li>Patrick Fernie</li>\n<li>Paul Lange</li>\n<li>Peter Marheine</li>\n<li>Pyry Kontio</li>\n<li>Rasmus Kaj</li>\n<li>Richard Dodd</li>\n<li>Robert Balicki</li>\n<li>Robert Maloney</li>\n<li>Ruben De Smet</li>\n<li>Ryan Blecher</li>\n<li>Sam Phippen</li>\n<li>Sebastian Blei</li>\n<li>Sergio Benitez</li>\n<li>Severen Redwood</li>\n<li>Sharad Chand</li>\n<li>Sid Ngeth</li>\n<li>Stu Black</li>\n<li>Sunrin SHIMURA (keen)</li>\n<li>Tamir Duberstein</li>\n<li>Taryn Hill</li>\n<li>Tess Griffin</li>\n<li>Tim Brooks</li>\n<li>Tobias Schottdorf</li>\n<li>Tom Houl</li>\n<li>Tshepang Lekhonkhobe</li>\n<li>Will Murphy</li>\n<li>William Murphy</li>\n<li>benaryorg</li>\n<li>bippityboppity</li>\n<li>debris</li>\n<li>derekdreery</li>\n<li>jacob</li>\n<li>jethrogb</li>\n<li>kardeiz</li>\n<li>king6cong</li>\n<li>klieth</li>\n<li>pfernie</li>\n<li>theduke</li>\n<li>wangcong</li>\n</ul>",{headings:1478,localImagePaths:1479,remoteImagePaths:1480,frontmatter:1481},[],[],[],{},"changelog/version/1-0-0-rc1",{id:1482,data:1484,body:1490,rendered:1491},{base:677,date:1485,link:1486,provider:1487,slug:1488,title:1489},["Date","2017-12-23T21:41:25.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.0.0-rc1",{name:681,label:682},"1-0-0-rc1","1.0.0-rc1","Happy holidays!\r\n\r\nThis release contains no major code changes. There are a handful of minor bug fixes (the most notable being that SQLite no longer panics when we receive `SQLITE_BUSY`), but most changes are related to ensuring that our API documentation renders better.\r\n\r\nWe do not expect any further changes to the codebase of any kind (other than the version number) between this release and 1.0.0. Assuming no critical issues are found with this release candidate, the code as it exists at this point will be released as 1.0.0 on 2017-12-30.\r\n",{html:1492,metadata:1493},"<p>Happy holidays!</p>\n<p>This release contains no major code changes. There are a handful of minor bug fixes (the most notable being that SQLite no longer panics when we receive <code>SQLITE_BUSY</code>), but most changes are related to ensuring that our API documentation renders better.</p>\n<p>We do not expect any further changes to the codebase of any kind (other than the version number) between this release and 1.0.0. Assuming no critical issues are found with this release candidate, the code as it exists at this point will be released as 1.0.0 on 2017-12-30.</p>",{headings:1494,localImagePaths:1495,remoteImagePaths:1496,frontmatter:1497},[],[],[],{},"changelog/version/1-0-0-beta-1",{id:1498,data:1500,body:1506,rendered:1507},{base:677,date:1501,link:1502,provider:1503,slug:1504,title:1505},["Date","2017-12-04T22:13:19.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v1.0.0-beta1",{name:681,label:682},"1-0-0-beta-1","1.0.0 Beta 1","This release contains 2 major changes from 0.99.0. The first is not news, we have removed all deprecated code from the codebase. However, this release also contains some major restructuring of the `query_dsl` module.\r\n\r\nTraits related to the construction of queries, such as `SelectDsl`, `FilterDsl`, etc. Have been merged into a single `QueryDsl` trait.  Traits related to the execution of queries, such as `ExecuteDsl` and `LoadDsl` have been merged into a single `RunQueryDsl` trait. The individual method traits still exist under the `query_dsl::methods` module, but they are no longer exported from prelude.\r\n\r\nThough we promised there would be no significant changes other than documentation, during our process of documenting this module, it became clear that making this change would make discovering how to use Diesel's query builder dramatically easier. It also gives us a much more centralized place to document these logically grouped methods. While we do not expect this change to break many apps, it is significant enough to warrant an early release.\r\n\r\nMost applications should not need to care about this change. Code which is just doing `use diesel::prelude::*` and calling these methods will continue to work with no changes (though error messages will be improved if you make a mistake).\r\n\r\nHowever, if you had code that was implementing `QueryFragment` or `Query`, and expected to be able to call `.execute`, `.load`, or similar on it (such as [the `Pagination` helper in crates.io](https://github.com/rust-lang/crates.io/blob/82ac341240d02892b2f865b2f5a075d36471ee24/src/pagination.rs)), you will need to add `impl<Conn> RunQueryDsl<Conn> for YourType`.\r\n\r\nIf you have code that is calling query builder methods generically (e.g.  if you have `where T: FilterDsl<Something>`, you will likely need to explicitly import things from `query_dsl::methods`\r\n\r\nIn addition to those changes, there are some minor improvements to `#[derive(QueryableByName)]` which we had planned on releasing as 0.99.2.\r\n\r\nStability\r\n---------\r\n\r\nWith this release, 0.99.x will only receive bug fixes and security patches. No new features will be backported to that branch. However, 0.99 can be considered our first \"LTS\" release. While we have not yet determined what exactly that means for Diesel, you can be assured that release line will continue to be supported for as long as there is demand.\r\n\r\nWe do not plan on having a 1.0.0.beta2, but there may be additional minor breaking changes in that release if it is needed. If there are any code changes between now and 1.0.0, even non-breaking ones, we will have a release candidate before the final release.\r\n\r\nLooking Ahead\r\n-------------\r\n\r\nAs with 0.99.0, we expect that the only significant change between this release and 1.0.0 will be documentation. We expect that the final release of 1.0.0 will be before the end of the year.\r\n\r\nOur only blocker for a final 1.0 release continues to be documentation.  There is a lot of work to do before the end of the year. We need help from the community to reach our goal of releasing this year. If you're interested in helping out, join [the impl period working group channel](https://gitter.im/rust-impl-period/WG-libs-diesel).\r\n",{html:1508,metadata:1509},"<p>This release contains 2 major changes from 0.99.0. The first is not news, we have removed all deprecated code from the codebase. However, this release also contains some major restructuring of the <code>query_dsl</code> module.</p>\n<p>Traits related to the construction of queries, such as <code>SelectDsl</code>, <code>FilterDsl</code>, etc. Have been merged into a single <code>QueryDsl</code> trait.  Traits related to the execution of queries, such as <code>ExecuteDsl</code> and <code>LoadDsl</code> have been merged into a single <code>RunQueryDsl</code> trait. The individual method traits still exist under the <code>query_dsl::methods</code> module, but they are no longer exported from prelude.</p>\n<p>Though we promised there would be no significant changes other than documentation, during our process of documenting this module, it became clear that making this change would make discovering how to use Diesels query builder dramatically easier. It also gives us a much more centralized place to document these logically grouped methods. While we do not expect this change to break many apps, it is significant enough to warrant an early release.</p>\n<p>Most applications should not need to care about this change. Code which is just doing <code>use diesel::prelude::*</code> and calling these methods will continue to work with no changes (though error messages will be improved if you make a mistake).</p>\n<p>However, if you had code that was implementing <code>QueryFragment</code> or <code>Query</code>, and expected to be able to call <code>.execute</code>, <code>.load</code>, or similar on it (such as <a href=\"https://github.com/rust-lang/crates.io/blob/82ac341240d02892b2f865b2f5a075d36471ee24/src/pagination.rs\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the <code>Pagination</code> helper in crates.io</a>), you will need to add <code>impl&#x3C;Conn> RunQueryDsl&#x3C;Conn> for YourType</code>.</p>\n<p>If you have code that is calling query builder methods generically (e.g.  if you have <code>where T: FilterDsl&#x3C;Something></code>, you will likely need to explicitly import things from <code>query_dsl::methods</code></p>\n<p>In addition to those changes, there are some minor improvements to <code>#[derive(QueryableByName)]</code> which we had planned on releasing as 0.99.2.</p>\n<h2 id=\"stability\">Stability</h2>\n<p>With this release, 0.99.x will only receive bug fixes and security patches. No new features will be backported to that branch. However, 0.99 can be considered our first LTS release. While we have not yet determined what exactly that means for Diesel, you can be assured that release line will continue to be supported for as long as there is demand.</p>\n<p>We do not plan on having a 1.0.0.beta2, but there may be additional minor breaking changes in that release if it is needed. If there are any code changes between now and 1.0.0, even non-breaking ones, we will have a release candidate before the final release.</p>\n<h2 id=\"looking-ahead\">Looking Ahead</h2>\n<p>As with 0.99.0, we expect that the only significant change between this release and 1.0.0 will be documentation. We expect that the final release of 1.0.0 will be before the end of the year.</p>\n<p>Our only blocker for a final 1.0 release continues to be documentation.  There is a lot of work to do before the end of the year. We need help from the community to reach our goal of releasing this year. If youre interested in helping out, join <a href=\"https://gitter.im/rust-impl-period/WG-libs-diesel\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the impl period working group channel</a>.</p>",{headings:1510,localImagePaths:1515,remoteImagePaths:1516,frontmatter:1517},[1511,1512],{depth:65,slug:66,text:67},{depth:65,slug:1513,text:1514},"looking-ahead","Looking Ahead",[],[],{},"changelog/version/v0-99-0-its-basically-1-0-except-its-not",{id:1518,data:1520,body:1526,rendered:1527},{base:677,date:1521,link:1522,provider:1523,slug:1524,title:1525},["Date","2017-11-29T00:16:25.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.99.0",{name:681,label:682},"v0-99-0-its-basically-1-0-except-its-not","v0.99.0 (It's basically 1.0 except it's not)","This release is by far the largest Diesel has ever had. It serves 2 purposes. You can consider this release to be a beta for 1.0. However, 1.0 will have an important significant difference. Anything that is deprecated as of this release will not be present in the 1.0 release.  This includes functions which were newly deprecated in 0.99. We know this may introduce a migration burden for some people, so we will continue to support the 0.99 line with bug fixes as long as there is demand and it is reasonable to do so.\r\n\r\nHeadline Features\r\n----\r\n\r\nThis release is mainly focused on ergonomics. Our main new feature is the [`sql_query`][] function. This is a new API which behaves similarly to [`sql`][], but it is entirely focused on cases where you want to write the *entire* query yourself. The main difference from `sql` is that you do not need to specify the return type of the query, and values are fetched by name rather than by index. This feature is still early, and there's a lot of features still to come (specifically evolving `#[derive(QueryableByName)]`, but we think this feature will ease a lot of pains for cases where Diesel doesn't quite do what you need.\r\n\r\n[`sql_query`]: http://docs.diesel.rs/diesel/fn.sql_query.html\r\n[`sql`]: http://docs.diesel.rs/diesel/sql/fn.sql.html\r\n\r\nAdditionally, you can now use tuples for inserts the same as you can for updates. If you've ever wanted to insert a row with just 1 or 2 values, and been annoyed that you needed a struct that you're only using in this one place, this feature will make you happy. We'll have new guides highlighting this feature soon.\r\n\r\nAdditionally, this release comes with a ton of quality of life features.  Many of these changes are focused around making it easier to introduce line breaks naturally in your code. For example, `.filter` is now implemented on `UpdateStatement`, meaning you can write `update(foo).filter(bar)` instead of `update(foo.filter(bar))`. We've also introduced new APIs for `insert` and PG upsert which will have similar readability improvements.\r\n\r\nBreaking Changes\r\n----\r\n\r\nThis release includes more deprecations than any release prior. In particular, `insert` has been deprecated, along with our entire PG upsert API. All deprecations in this release have direct replacements, which will lead to code which formats much more nicely. It should be a mostly mechanical replacement for most apps. See [the CHANGELOG file][] for details.\r\n\r\n[the CHANGELOG file]: https://github.com/diesel-rs/diesel/blob/v0.99.0/CHANGELOG.md\r\n\r\nGrowing the Team\r\n----\r\n\r\nWith this release, we'd like to welcome several new members to the Diesel committer team. @weiznich, @notryanb, and @katrinabrock you've all done excellent work and we're very excited to officially welcome you to the team!\r\n\r\nAdditional Thanks\r\n----\r\n\r\nIn addition to the Diesel core and committer teams, 10 people contributed to this release. A huge thank you to:\r\n\r\n- Adam Perry\r\n- Alex Kitchens\r\n- Alexey Zabelin\r\n- Arnar Mar Sig\r\n- Bob\r\n- Jordan\r\n- Lauri Apple\r\n- Maxime pep Buquet\r\n- William Murphy\r\n- bippityboppity\r\n\r\nOur only remaining blockers from this release and 1.0 are documentation changes, and having this tested in the wild. Thank you to every one of our users for your support, and we look forward to Diesel 1.0 by the end of the year!\r\n",{html:1528,metadata:1529},"<p>This release is by far the largest Diesel has ever had. It serves 2 purposes. You can consider this release to be a beta for 1.0. However, 1.0 will have an important significant difference. Anything that is deprecated as of this release will not be present in the 1.0 release.  This includes functions which were newly deprecated in 0.99. We know this may introduce a migration burden for some people, so we will continue to support the 0.99 line with bug fixes as long as there is demand and it is reasonable to do so.</p>\n<h2 id=\"headline-features\">Headline Features</h2>\n<p>This release is mainly focused on ergonomics. Our main new feature is the <a href=\"http://docs.diesel.rs/diesel/fn.sql_query.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>sql_query</code></a> function. This is a new API which behaves similarly to <a href=\"http://docs.diesel.rs/diesel/sql/fn.sql.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\"><code>sql</code></a>, but it is entirely focused on cases where you want to write the <em>entire</em> query yourself. The main difference from <code>sql</code> is that you do not need to specify the return type of the query, and values are fetched by name rather than by index. This feature is still early, and theres a lot of features still to come (specifically evolving <code>#[derive(QueryableByName)]</code>, but we think this feature will ease a lot of pains for cases where Diesel doesnt quite do what you need.</p>\n<p>Additionally, you can now use tuples for inserts the same as you can for updates. If youve ever wanted to insert a row with just 1 or 2 values, and been annoyed that you needed a struct that youre only using in this one place, this feature will make you happy. Well have new guides highlighting this feature soon.</p>\n<p>Additionally, this release comes with a ton of quality of life features.  Many of these changes are focused around making it easier to introduce line breaks naturally in your code. For example, <code>.filter</code> is now implemented on <code>UpdateStatement</code>, meaning you can write <code>update(foo).filter(bar)</code> instead of <code>update(foo.filter(bar))</code>. Weve also introduced new APIs for <code>insert</code> and PG upsert which will have similar readability improvements.</p>\n<h2 id=\"breaking-changes\">Breaking Changes</h2>\n<p>This release includes more deprecations than any release prior. In particular, <code>insert</code> has been deprecated, along with our entire PG upsert API. All deprecations in this release have direct replacements, which will lead to code which formats much more nicely. It should be a mostly mechanical replacement for most apps. See <a href=\"https://github.com/diesel-rs/diesel/blob/v0.99.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG file</a> for details.</p>\n<h2 id=\"growing-the-team\">Growing the Team</h2>\n<p>With this release, wed like to welcome several new members to the Diesel committer team. @weiznich, @notryanb, and @katrinabrock youve all done excellent work and were very excited to officially welcome you to the team!</p>\n<h2 id=\"additional-thanks\">Additional Thanks</h2>\n<p>In addition to the Diesel core and committer teams, 10 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Adam Perry</li>\n<li>Alex Kitchens</li>\n<li>Alexey Zabelin</li>\n<li>Arnar Mar Sig</li>\n<li>Bob</li>\n<li>Jordan</li>\n<li>Lauri Apple</li>\n<li>Maxime pep Buquet</li>\n<li>William Murphy</li>\n<li>bippityboppity</li>\n</ul>\n<p>Our only remaining blockers from this release and 1.0 are documentation changes, and having this tested in the wild. Thank you to every one of our users for your support, and we look forward to Diesel 1.0 by the end of the year!</p>",{headings:1530,localImagePaths:1543,remoteImagePaths:1544,frontmatter:1545},[1531,1534,1537,1540],{depth:65,slug:1532,text:1533},"headline-features","Headline Features",{depth:65,slug:1535,text:1536},"breaking-changes","Breaking Changes",{depth:65,slug:1538,text:1539},"growing-the-team","Growing the Team",{depth:65,slug:1541,text:1542},"additional-thanks","Additional Thanks",[],[],{},"changelog/version/v0-16-0",{id:1546,data:1548,body:1554,rendered:1555},{base:677,date:1549,link:1550,provider:1551,slug:1552,title:1553},["Date","2017-08-24T18:35:34.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.16.0",{name:681,label:682},"v0-16-0","v0.16.0","This release contains some changes to how joins work with Diesel, which we wanted to release as far in advance of 1.0 as possible. With this release, `#[belongs_to]` no longer generates the code required to join between two tables. The macro `joinable!` must be invoked instead.  However, if you are using `infer_schema!` or `diesel print-schema`, these invocations will be generated based on the foreign keys in your database.\r\n\r\nAlso included in this release is the ability to rename columns. This is most useful when your columns conflict with Rust keywords. See the changelog for details.\r\n\r\nIn addition to the Diesel core team, 11 people contributed to this release. A huge thank you to:\r\n\r\n- Alex Alvarez\r\n- Georg Semmler\r\n- Graham Grochowski\r\n- JD Gonzales\r\n- Lance Carlson\r\n- Maciej\r\n- Robert Balicki\r\n- Sharad Chand\r\n- Taryn Hill\r\n- debris\r\n- klieth",{html:1556,metadata:1557},"<p>This release contains some changes to how joins work with Diesel, which we wanted to release as far in advance of 1.0 as possible. With this release, <code>#[belongs_to]</code> no longer generates the code required to join between two tables. The macro <code>joinable!</code> must be invoked instead.  However, if you are using <code>infer_schema!</code> or <code>diesel print-schema</code>, these invocations will be generated based on the foreign keys in your database.</p>\n<p>Also included in this release is the ability to rename columns. This is most useful when your columns conflict with Rust keywords. See the changelog for details.</p>\n<p>In addition to the Diesel core team, 11 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Alex Alvarez</li>\n<li>Georg Semmler</li>\n<li>Graham Grochowski</li>\n<li>JD Gonzales</li>\n<li>Lance Carlson</li>\n<li>Maciej</li>\n<li>Robert Balicki</li>\n<li>Sharad Chand</li>\n<li>Taryn Hill</li>\n<li>debris</li>\n<li>klieth</li>\n</ul>",{headings:1558,localImagePaths:1559,remoteImagePaths:1560,frontmatter:1561},[],[],[],{},"changelog/version/v0-15-2",{id:1562,data:1564,body:1570,rendered:1571},{base:677,date:1565,link:1566,provider:1567,slug:1568,title:1569},["Date","2017-07-28T16:05:10.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.15.2",{name:681,label:682},"v0-15-2","v0.15.2","This is a minor bugfix release which addresses an issue with encoding of `BigDecimal` objects with PostgreSQL. Diesel would previously incorrectly encode certain numbers resulting in a runtime error.\r\n",{html:1572,metadata:1573},"<p>This is a minor bugfix release which addresses an issue with encoding of <code>BigDecimal</code> objects with PostgreSQL. Diesel would previously incorrectly encode certain numbers resulting in a runtime error.</p>",{headings:1574,localImagePaths:1575,remoteImagePaths:1576,frontmatter:1577},[],[],[],{},"changelog/version/v0-15-0",{id:1578,data:1580,body:1586,rendered:1587},{base:677,date:1581,link:1582,provider:1583,slug:1584,title:1585},["Date","2017-07-23T09:41:03.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.15.0",{name:681,label:682},"v0-15-0","v0.15.0","This is a minor release containing a few quality of life features. We were originally planning to ship these with 1.0, but they're specifically needed by some production users.\r\n\r\nThe biggest feature here is the ability to manually specify the `ON` clause of a join, which is separate from the associations API. You can also use this to join to tables which otherwise have no association between them (but this will also require you to invoke `enable_multi_table_joins!`).\r\n\r\nIn addition to the Diesel core team, 6 people contributed to this release. A huge thank you to:\r\n\r\n- Alex Kitchens\r\n- Maciej Dziardziel\r\n- Pyry Kontio\r\n- Sunrin SHIMURA (keen)\r\n- king6cong\r\n- wangcong\r\n",{html:1588,metadata:1589},"<p>This is a minor release containing a few quality of life features. We were originally planning to ship these with 1.0, but theyre specifically needed by some production users.</p>\n<p>The biggest feature here is the ability to manually specify the <code>ON</code> clause of a join, which is separate from the associations API. You can also use this to join to tables which otherwise have no association between them (but this will also require you to invoke <code>enable_multi_table_joins!</code>).</p>\n<p>In addition to the Diesel core team, 6 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Alex Kitchens</li>\n<li>Maciej Dziardziel</li>\n<li>Pyry Kontio</li>\n<li>Sunrin SHIMURA (keen)</li>\n<li>king6cong</li>\n<li>wangcong</li>\n</ul>",{headings:1590,localImagePaths:1591,remoteImagePaths:1592,frontmatter:1593},[],[],[],{},"changelog/version/v0-14-1",{id:1594,data:1596,body:1602,rendered:1603},{base:677,date:1597,link:1598,provider:1599,slug:1600,title:1601},["Date","2017-07-10T15:51:42.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.14.1",{name:681,label:682},"v0-14-1","v0.14.1","This is a bugfix release addressing an issue with `sum` and `avg`. These were mistakenly treated as returning the same type as their argument.  However, these functions return NULL when run against an empty database, which could result in errors.\r\n",{html:1604,metadata:1605},"<p>This is a bugfix release addressing an issue with <code>sum</code> and <code>avg</code>. These were mistakenly treated as returning the same type as their argument.  However, these functions return NULL when run against an empty database, which could result in errors.</p>",{headings:1606,localImagePaths:1607,remoteImagePaths:1608,frontmatter:1609},[],[],[],{},"changelog/version/v0-13-1",{id:1610,data:1612,body:1602,rendered:1618},{base:677,date:1613,link:1614,provider:1615,slug:1616,title:1617},["Date","2017-07-10T15:51:56.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.13.1",{name:681,label:682},"v0-13-1","v0.13.1",{html:1604,metadata:1619},{headings:1620,localImagePaths:1621,remoteImagePaths:1622,frontmatter:1623},[],[],[],{},"changelog/version/v0-14-0-the-one-with-all-the-joins",{id:1624,data:1626,body:1632,rendered:1633},{base:677,date:1627,link:1628,provider:1629,slug:1630,title:1631},["Date","2017-07-04T15:30:15.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.14.0",{name:681,label:682},"v0-14-0-the-one-with-all-the-joins","v0.14.0 (The one with all the joins)","One of the oldest issues in Diesel was that we limited the number of tables that could appear in a single query to 2. The problem was never about having more than 2 tables, but safely and correctly proving in the type system what would and could not be selected from that join.\r\n\r\nWith 0.14, that restriction has been removed. The query builder now supports joins containing an arbitrary number of tables. You may find that you need to call `enable_multi_table_joins!` for a few tables, but that need should go away in the future as specialization matures.\r\n\r\nIn addition to the headline feature, this release includes support for several new datatypes (including `NUMERIC`/`DECIMAL` which has been widely requested), and other small quality of life improvements. As always, you can see [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/v0.14.0/CHANGELOG.md) for the full release notes.\r\n\r\nThe Road to 1.0\r\n------\r\n\r\nA recent point of discussion among the core team has been what remaining blockers we have for releasing a version 1.0. The roadmap doesn't necessarily include everything that would make us \"feature complete\". It focuses on the set of changes that we think are likely to require breaking changes.\r\n\r\nWe expect that this will be the last 0.x release. You can follow the milestone [here](https://github.com/diesel-rs/diesel/issues?q=is%3Aopen+is%3Aissue+milestone%3A1.0).  Additionally, we all agreed that the biggest blocker to a 1.0 release is improvements to our documentation. We're going to be doing a big push in the coming months to clean things up, and are looking for help from the community.  You can follow that project [here](https://github.com/diesel-rs/diesel/projects/1), or just come join us in [our gitter room](https://gitter.im/diesel-rs/diesel?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge) to talk about how you can help.\r\n\r\nThere will be a blog post with more details about this in the coming weeks.\r\n\r\nContributors\r\n-----\r\n\r\nIn addition to the core team, 10 people contributed to this release. A huge thank you to:\r\n\r\n* Dorian Scheidt\r\n* FliegendeWurst\r\n* Georg Semmler\r\n* JD Gonzales\r\n* Jim McGrath\r\n* Kieran\r\n* Ruben De Smet\r\n* Sunrin SHIMURA (keen)\r\n* Tshepang Lekhonkhobe\r\n* theduke\r\n\r\nCore Team Changes\r\n------\r\n\r\nWith this release, we are also making some changes to the core team to better reflect the current active maintainers. In recognition of his fantastic work, we're pleased to welcome @Eijebong to the core team.  Many early members of the team have also since moved onto other projects. To reflect that, Mike Piccolo, Matt Casper, and Sam Phippen are all being moved to the core team alumni.\r\n",{html:1634,metadata:1635},"<p>One of the oldest issues in Diesel was that we limited the number of tables that could appear in a single query to 2. The problem was never about having more than 2 tables, but safely and correctly proving in the type system what would and could not be selected from that join.</p>\n<p>With 0.14, that restriction has been removed. The query builder now supports joins containing an arbitrary number of tables. You may find that you need to call <code>enable_multi_table_joins!</code> for a few tables, but that need should go away in the future as specialization matures.</p>\n<p>In addition to the headline feature, this release includes support for several new datatypes (including <code>NUMERIC</code>/<code>DECIMAL</code> which has been widely requested), and other small quality of life improvements. As always, you can see <a href=\"https://github.com/diesel-rs/diesel/blob/v0.14.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a> for the full release notes.</p>\n<h2 id=\"the-road-to-10\">The Road to 1.0</h2>\n<p>A recent point of discussion among the core team has been what remaining blockers we have for releasing a version 1.0. The roadmap doesnt necessarily include everything that would make us feature complete. It focuses on the set of changes that we think are likely to require breaking changes.</p>\n<p>We expect that this will be the last 0.x release. You can follow the milestone <a href=\"https://github.com/diesel-rs/diesel/issues?q=is%3Aopen+is%3Aissue+milestone%3A1.0\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a>.  Additionally, we all agreed that the biggest blocker to a 1.0 release is improvements to our documentation. Were going to be doing a big push in the coming months to clean things up, and are looking for help from the community.  You can follow that project <a href=\"https://github.com/diesel-rs/diesel/projects/1\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">here</a>, or just come join us in <a href=\"https://gitter.im/diesel-rs/diesel?utm_source=badge&#x26;utm_medium=badge&#x26;utm_campaign=pr-badge\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">our gitter room</a> to talk about how you can help.</p>\n<p>There will be a blog post with more details about this in the coming weeks.</p>\n<h2 id=\"contributors\">Contributors</h2>\n<p>In addition to the core team, 10 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Dorian Scheidt</li>\n<li>FliegendeWurst</li>\n<li>Georg Semmler</li>\n<li>JD Gonzales</li>\n<li>Jim McGrath</li>\n<li>Kieran</li>\n<li>Ruben De Smet</li>\n<li>Sunrin SHIMURA (keen)</li>\n<li>Tshepang Lekhonkhobe</li>\n<li>theduke</li>\n</ul>\n<h2 id=\"core-team-changes\">Core Team Changes</h2>\n<p>With this release, we are also making some changes to the core team to better reflect the current active maintainers. In recognition of his fantastic work, were pleased to welcome @Eijebong to the core team.  Many early members of the team have also since moved onto other projects. To reflect that, Mike Piccolo, Matt Casper, and Sam Phippen are all being moved to the core team alumni.</p>",{headings:1636,localImagePaths:1646,remoteImagePaths:1647,frontmatter:1648},[1637,1640,1643],{depth:65,slug:1638,text:1639},"the-road-to-10","The Road to 1.0",{depth:65,slug:1641,text:1642},"contributors","Contributors",{depth:65,slug:1644,text:1645},"core-team-changes","Core Team Changes",[],[],{},"changelog/version/0-13-0",{id:1649,data:1651,body:1657,rendered:1658},{base:677,date:1652,link:1653,provider:1654,slug:1655,title:1656},["Date","2017-05-15T17:08:19.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.13.0",{name:681,label:682},"0-13-0","0.13.0","This release adds support for date and time types with SQLite, allows for raw SQL to use bind parameters, and updates our dependencies (notably allowing serde 1.0).\r\n\r\nAs always, you can find the full release notes in [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/v0.13.0/CHANGELOG.md)\r\n\r\nIn addition to the core team, 11 people contributed to this release. A huge thank you to:\r\n\r\n- Tobias Schottdorf\r\n- Dorian Scheidt\r\n- Danilo Bargen\r\n- Enether\r\n- John Gallagher\r\n- James Kominick\r\n- pfernie\r\n- Blake Pettersson\r\n- Mark Catley\r\n- Bastien Orivel\r\n- Sunrin SHIMURA (keen)\r\n- kardeiz\r\n",{html:1659,metadata:1660},"<p>This release adds support for date and time types with SQLite, allows for raw SQL to use bind parameters, and updates our dependencies (notably allowing serde 1.0).</p>\n<p>As always, you can find the full release notes in <a href=\"https://github.com/diesel-rs/diesel/blob/v0.13.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a></p>\n<p>In addition to the core team, 11 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Tobias Schottdorf</li>\n<li>Dorian Scheidt</li>\n<li>Danilo Bargen</li>\n<li>Enether</li>\n<li>John Gallagher</li>\n<li>James Kominick</li>\n<li>pfernie</li>\n<li>Blake Pettersson</li>\n<li>Mark Catley</li>\n<li>Bastien Orivel</li>\n<li>Sunrin SHIMURA (keen)</li>\n<li>kardeiz</li>\n</ul>",{headings:1661,localImagePaths:1662,remoteImagePaths:1663,frontmatter:1664},[],[],[],{},"changelog/version/v0-12-0",{id:1665,data:1667,body:1673,rendered:1674},{base:677,date:1668,link:1669,provider:1670,slug:1671,title:1672},["Date","2017-03-16T16:53:05.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.12.0",{name:681,label:682},"v0-12-0","v0.12.0","The main feature of this release is support for PG's `ON CONFLICT DO UPDATE`, which brings our support for upsert on PG to nearly the entire range of possible syntax. Additionally, this release contains support for some new data types and operators, and several bug fixes.\r\n\r\nFinally, the way that we handle joins has been going through a huge overhaul internally. For the most part this doesn't affect public API yet, but you may notice an increase in compile times, and more things \"just working\" the way you'd expect when working with joins. This work will hopefully lead to 3+ table joins in the next release.\r\n\r\nAs always, you can find the full release notes in [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/v0.12.0/CHANGELOG.md)\r\n\r\nIn addition to the core team, 11 people contributed to this release. A huge thank you to:\r\n\r\n- Taryn Hill\r\n- Eijebong\r\n- Martijn de Haan\r\n- Mrmaxmeier\r\n- Daniel Durante\r\n- Patrick Fernie\r\n- Erich Cordoba\r\n- Sid Ngeth\r\n- pfernie\r\n- John Gallagher\r\n- theduke\r\n\r\n",{html:1675,metadata:1676},"<p>The main feature of this release is support for PGs <code>ON CONFLICT DO UPDATE</code>, which brings our support for upsert on PG to nearly the entire range of possible syntax. Additionally, this release contains support for some new data types and operators, and several bug fixes.</p>\n<p>Finally, the way that we handle joins has been going through a huge overhaul internally. For the most part this doesnt affect public API yet, but you may notice an increase in compile times, and more things just working the way youd expect when working with joins. This work will hopefully lead to 3+ table joins in the next release.</p>\n<p>As always, you can find the full release notes in <a href=\"https://github.com/diesel-rs/diesel/blob/v0.12.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a></p>\n<p>In addition to the core team, 11 people contributed to this release. A huge thank you to:</p>\n<ul>\n<li>Taryn Hill</li>\n<li>Eijebong</li>\n<li>Martijn de Haan</li>\n<li>Mrmaxmeier</li>\n<li>Daniel Durante</li>\n<li>Patrick Fernie</li>\n<li>Erich Cordoba</li>\n<li>Sid Ngeth</li>\n<li>pfernie</li>\n<li>John Gallagher</li>\n<li>theduke</li>\n</ul>",{headings:1677,localImagePaths:1678,remoteImagePaths:1679,frontmatter:1680},[],[],[],{},"changelog/version/v0-11-4",{id:1681,data:1683,body:1689,rendered:1690},{base:677,date:1684,link:1685,provider:1686,slug:1687,title:1688},["Date","2017-02-21T10:08:44.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.11.4",{name:681,label:682},"v0-11-4","v0.11.4","This release addresses a memory safety issue in our interaction with libmysqlclient. There was an undocumented assumption made by that library which we were not taking into consideration, resulting in a use-after-free bug. This was resulting in a segmentation fault on some systems.\n\nWhile this issue is quite serious, we are not issuing a CVE or a security advisory. The bug resulted in 4 bytes being written to a handful of values. It could not be exploited to cause a security issue.\n",{html:1691,metadata:1692},"<p>This release addresses a memory safety issue in our interaction with libmysqlclient. There was an undocumented assumption made by that library which we were not taking into consideration, resulting in a use-after-free bug. This was resulting in a segmentation fault on some systems.</p>\n<p>While this issue is quite serious, we are not issuing a CVE or a security advisory. The bug resulted in 4 bytes being written to a handful of values. It could not be exploited to cause a security issue.</p>",{headings:1693,localImagePaths:1694,remoteImagePaths:1695,frontmatter:1696},[],[],[],{},"changelog/version/v0-11-3",{id:1697,data:1699,body:1705,rendered:1706},{base:677,date:1700,link:1701,provider:1702,slug:1703,title:1704},["Date","2017-02-21T10:02:47.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.11.3",{name:681,label:682},"v0-11-3","v0.11.3","No changes. @sgrif is bad at releasing things.\n",{html:1707,metadata:1708},"<p>No changes. @sgrif is bad at releasing things.</p>",{headings:1709,localImagePaths:1710,remoteImagePaths:1711,frontmatter:1712},[],[],[],{},"changelog/version/v0-11-2",{id:1713,data:1715,body:1721,rendered:1722},{base:677,date:1716,link:1717,provider:1718,slug:1719,title:1720},["Date","2017-02-19T15:32:59.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.11.2",{name:681,label:682},"v0-11-2","v0.11.2","This release has no code changes other than bumping the allowed version\nfor pq-sys and mysqlclient-sys. The versions released alongside 0.11\nattempted to generate the bindings at compile time. This required a\nbleeding edge version of clang, and caused too many issues for too many\npeople. The latest versions of those two libraries include pre-generated\nbindings.\n\nIf you need to use bindings generated by the old version, you can\nexplicitly depend on that version with `cargo update --precise`\n",{html:1723,metadata:1724},"<p>This release has no code changes other than bumping the allowed version\nfor pq-sys and mysqlclient-sys. The versions released alongside 0.11\nattempted to generate the bindings at compile time. This required a\nbleeding edge version of clang, and caused too many issues for too many\npeople. The latest versions of those two libraries include pre-generated\nbindings.</p>\n<p>If you need to use bindings generated by the old version, you can\nexplicitly depend on that version with <code>cargo update --precise</code></p>",{headings:1725,localImagePaths:1726,remoteImagePaths:1727,frontmatter:1728},[],[],[],{},"changelog/version/v0-11-1",{id:1729,data:1731,body:1737,rendered:1738},{base:677,date:1732,link:1733,provider:1734,slug:1735,title:1736},["Date","2017-02-17T20:21:04.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.11.1",{name:681,label:682},"v0-11-1","v0.11.1","This release is a minor bug fix release that handles two edge cases in 0.11's new behavior.\n",{html:1739,metadata:1740},"<p>This release is a minor bug fix release that handles two edge cases in 0.11s new behavior.</p>",{headings:1741,localImagePaths:1742,remoteImagePaths:1743,frontmatter:1744},[],[],[],{},"changelog/version/v0-11-0-the-one-where-we-support-mysql",{id:1745,data:1747,body:1753,rendered:1754},{base:677,date:1748,link:1749,provider:1750,slug:1751,title:1752},["Date","2017-02-16T21:19:59.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.11.0",{name:681,label:682},"v0-11-0-the-one-where-we-support-mysql","v0.11.0 (The one where we support MySQL)","The headline features for this release are MySQL support and limited PG upsert support. MySQL support works exactly as you'd expect. Just add `features = [\"mysql\"]` to your Cargo.toml, pass a connection URL (where the scheme is `mysql://` and the path is the name of the database) to `MysqlConnection::establish` and you're off. Keep in mind that if you're following the getting started guide, MySQL does not support the `RETURNING` clause, so methods like `get_result` and `get_results` won't work.\n\nPostgreSQL upsert was a feature added in PG 9.5 and has been one of our most requested features. The full upsert API is quite complex, but we've added support for `ON CONFLICT DO NOTHING`, as this covered the highest percentage of use cases with the lowest amount of work. You can see examples in [the docs](http://docs.diesel.rs/diesel/pg/upsert/trait.OnConflictExtension.html#method.on_conflict_do_nothing). Support for the full upsert syntax will be coming in 0.12\n\nIn addition to the headline features, there were plenty of quality of life improvements and bug fixes. As always, you can see a full list of changes by reading [the changelog](https://github.com/diesel-rs/diesel/blob/v0.11.0/CHANGELOG.md).\n\nIn addition to the Diesel core team, 6 additional contributors worked on this release. A huge thank you to:\n- Brandon W Maister\n- Eijebong\n- Georg Semmler\n- Jimmy Cuadra\n- Jovansonlee Cesar\n- jacob\n\nI'd also like to thank everybody who helped this release by opening issues, finding bugs, and asking/answering questions in our gitter room.\n",{html:1755,metadata:1756},"<p>The headline features for this release are MySQL support and limited PG upsert support. MySQL support works exactly as youd expect. Just add <code>features = [\"mysql\"]</code> to your Cargo.toml, pass a connection URL (where the scheme is <code>mysql://</code> and the path is the name of the database) to <code>MysqlConnection::establish</code> and youre off. Keep in mind that if youre following the getting started guide, MySQL does not support the <code>RETURNING</code> clause, so methods like <code>get_result</code> and <code>get_results</code> wont work.</p>\n<p>PostgreSQL upsert was a feature added in PG 9.5 and has been one of our most requested features. The full upsert API is quite complex, but weve added support for <code>ON CONFLICT DO NOTHING</code>, as this covered the highest percentage of use cases with the lowest amount of work. You can see examples in <a href=\"http://docs.diesel.rs/diesel/pg/upsert/trait.OnConflictExtension.html#method.on_conflict_do_nothing\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the docs</a>. Support for the full upsert syntax will be coming in 0.12</p>\n<p>In addition to the headline features, there were plenty of quality of life improvements and bug fixes. As always, you can see a full list of changes by reading <a href=\"https://github.com/diesel-rs/diesel/blob/v0.11.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the changelog</a>.</p>\n<p>In addition to the Diesel core team, 6 additional contributors worked on this release. A huge thank you to:</p>\n<ul>\n<li>Brandon W Maister</li>\n<li>Eijebong</li>\n<li>Georg Semmler</li>\n<li>Jimmy Cuadra</li>\n<li>Jovansonlee Cesar</li>\n<li>jacob</li>\n</ul>\n<p>Id also like to thank everybody who helped this release by opening issues, finding bugs, and asking/answering questions in our gitter room.</p>",{headings:1757,localImagePaths:1758,remoteImagePaths:1759,frontmatter:1760},[],[],[],{},"changelog/version/v0-10-1",{id:1761,data:1763,body:1769,rendered:1770},{base:677,date:1764,link:1765,provider:1766,slug:1767,title:1768},["Date","2017-02-08T16:20:48.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.10.1",{name:681,label:682},"v0-10-1","v0.10.1","This is a minor bugfix release to address a bug in 0.10.0 involving `infer_table_from_schema!` specifying a table from a schema other than public. Two version bumps which were backwards compatible have also been included.\n",{html:1771,metadata:1772},"<p>This is a minor bugfix release to address a bug in 0.10.0 involving <code>infer_table_from_schema!</code> specifying a table from a schema other than public. Two version bumps which were backwards compatible have also been included.</p>",{headings:1773,localImagePaths:1774,remoteImagePaths:1775,frontmatter:1776},[],[],[],{},"changelog/version/the-one-where-we-work-on-stable",{id:1777,data:1779,body:1785,rendered:1786},{base:677,date:1780,link:1781,provider:1782,slug:1783,title:1784},["Date","2017-02-02T18:42:25.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.10.0",{name:681,label:682},"the-one-where-we-work-on-stable","The one where we work on stable","![It's happening](http://i.imgur.com/7drHiqr.gif)\n\nv0.10.0 drops support for Rust 1.14 and earlier, and adds support for Rust 1.15 (ON STABLE). `diesel_codegen_syntex` has been removed, and is no longer supported.\n\nAdditionally, this release adds initial support for the JSON data type in PostgreSQL. There is also a new `print-schema` subcommand in Diesel CLI which will show you the code generated by `infer_schema!()`. As always, you can find a full list of what has changed in [the changelog](https://github.com/diesel-rs/diesel/blob/v0.10.0/CHANGELOG.md).\n\nIn addition to the Diesel core team, 7 contributors worked on this release. A huge thank you to\n- Adrian Perez de Castro\n- Eric Kidd\n- Georg Semmler\n- Jake Goulding\n- Sergio Benitez\n- Severen Redwood\n- Stu Black\n\nI'd also like to thank everybody who helped this release by opening issues, finding bugs, and asking/answering questions in our gitter room.\n\nThere were several big features that I had hoped to get done in time for this release, but my daughter inherited my troll gene and decided to come early. If you were hoping for MySQL support, blame Ruby. In the mean time, here is a picture of Ruby.\n\n![baby ruby](https://lh3.googleusercontent.com/7vUZONdvrati-NQXriSqzKQ0CHNz6KRulOSos9kJjzMNV-JI2UT6d4Kxex9fZGO-0GTlLrKHKRwiPaf2v6hCJlCU0IgK5kWd_JWz9nG61FrZfgVARZEqXOmjoXPb5CYrbTg7XlG2VEYlcm6_Lk9oviVPh7mx3gaXgVG6g-OJRHqY_gipU-Y2REPFDoJyPWZ9QoifZH1WDGSPdyYUQ1KWeTfFkxk1Z3VP1bKAyRhsDmnXvSLaWkBQ6r5CpRS2pfVMC0lPVAfPGmrjwmNw7JmFNfscQM5IY0FOqbbwJhPJvLtNb-jOgOQhz07S8HA9BBI_cWzzXXMxbGXzaPpKBYSrioMja3MkXcb1PGB8cG7ERtG_CWwpGriRlFbrj2B0OygkAu4Q6pRiQe6BojpHYp03uyRsmsVxTbQjlH3axed6tNV_IDYSd2vz15gB7yFKUF_Je3spUUdexLmybdPDR29DfD-hBBJfezy0gdzrf7dJMMXWgQ7CW6jH18uydl-iiK3_8Ha8FUuvrjcA-Dvv0nQEXqajcb_NFCpobr92fNQvDCg6UNj3o7E7bv55Oj6sOk7N7xARchy-MmAV8Tzzc1Sx-4GKHhikH5WGMb5AzYSnoNcvWr7mD4vqAF1Wn_60Huz1KCNC5m2aBbPz9G6hBcM3pMe8J5pIM4epvKFvKUKtK98=w792-h1056-no)\n",{html:1787,metadata:1788},"<p><img src=\"http://i.imgur.com/7drHiqr.gif\" alt=\"It&#x27;s happening\"></p>\n<p>v0.10.0 drops support for Rust 1.14 and earlier, and adds support for Rust 1.15 (ON STABLE). <code>diesel_codegen_syntex</code> has been removed, and is no longer supported.</p>\n<p>Additionally, this release adds initial support for the JSON data type in PostgreSQL. There is also a new <code>print-schema</code> subcommand in Diesel CLI which will show you the code generated by <code>infer_schema!()</code>. As always, you can find a full list of what has changed in <a href=\"https://github.com/diesel-rs/diesel/blob/v0.10.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the changelog</a>.</p>\n<p>In addition to the Diesel core team, 7 contributors worked on this release. A huge thank you to</p>\n<ul>\n<li>Adrian Perez de Castro</li>\n<li>Eric Kidd</li>\n<li>Georg Semmler</li>\n<li>Jake Goulding</li>\n<li>Sergio Benitez</li>\n<li>Severen Redwood</li>\n<li>Stu Black</li>\n</ul>\n<p>Id also like to thank everybody who helped this release by opening issues, finding bugs, and asking/answering questions in our gitter room.</p>\n<p>There were several big features that I had hoped to get done in time for this release, but my daughter inherited my troll gene and decided to come early. If you were hoping for MySQL support, blame Ruby. In the mean time, here is a picture of Ruby.</p>\n<p><img src=\"https://lh3.googleusercontent.com/7vUZONdvrati-NQXriSqzKQ0CHNz6KRulOSos9kJjzMNV-JI2UT6d4Kxex9fZGO-0GTlLrKHKRwiPaf2v6hCJlCU0IgK5kWd_JWz9nG61FrZfgVARZEqXOmjoXPb5CYrbTg7XlG2VEYlcm6_Lk9oviVPh7mx3gaXgVG6g-OJRHqY_gipU-Y2REPFDoJyPWZ9QoifZH1WDGSPdyYUQ1KWeTfFkxk1Z3VP1bKAyRhsDmnXvSLaWkBQ6r5CpRS2pfVMC0lPVAfPGmrjwmNw7JmFNfscQM5IY0FOqbbwJhPJvLtNb-jOgOQhz07S8HA9BBI_cWzzXXMxbGXzaPpKBYSrioMja3MkXcb1PGB8cG7ERtG_CWwpGriRlFbrj2B0OygkAu4Q6pRiQe6BojpHYp03uyRsmsVxTbQjlH3axed6tNV_IDYSd2vz15gB7yFKUF_Je3spUUdexLmybdPDR29DfD-hBBJfezy0gdzrf7dJMMXWgQ7CW6jH18uydl-iiK3_8Ha8FUuvrjcA-Dvv0nQEXqajcb_NFCpobr92fNQvDCg6UNj3o7E7bv55Oj6sOk7N7xARchy-MmAV8Tzzc1Sx-4GKHhikH5WGMb5AzYSnoNcvWr7mD4vqAF1Wn_60Huz1KCNC5m2aBbPz9G6hBcM3pMe8J5pIM4epvKFvKUKtK98=w792-h1056-no\" alt=\"baby ruby\"></p>",{headings:1789,localImagePaths:1790,remoteImagePaths:1791,frontmatter:1792},[],[],[],{},"changelog/version/",{id:1793,data:1795,rendered:1800},{base:677,date:1796,link:1797,provider:1798,slug:1799,title:1799},["Date","2016-12-11T10:41:04.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.9.1",{name:681,label:682},"",{html:1799,metadata:1801},{headings:1802,localImagePaths:1803,remoteImagePaths:1804,frontmatter:1805},[],[],[],{},"changelog/version/v0-9-0",{id:1806,data:1808,body:1814,rendered:1815},{base:677,date:1809,link:1810,provider:1811,slug:1812,title:1813},["Date","2016-12-08T21:31:04.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.9.0",{name:681,label:682},"v0-9-0","v0.9.0","0.9.0 is a fairly large release, bringing several important quality of life features. The main features of this release are:\n- Support for composite primary keys\n- Support for PG schemas other than public\n- Batch insert support for SQLite\n\nThis release also includes numerous bug fixes. In particular several bugs which occurred from using empty arrays have all been fixed. For full release notes, see [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/master/CHANGELOG.md#090---2016-12-08)\n",{html:1816,metadata:1817},"<p>0.9.0 is a fairly large release, bringing several important quality of life features. The main features of this release are:</p>\n<ul>\n<li>Support for composite primary keys</li>\n<li>Support for PG schemas other than public</li>\n<li>Batch insert support for SQLite</li>\n</ul>\n<p>This release also includes numerous bug fixes. In particular several bugs which occurred from using empty arrays have all been fixed. For full release notes, see <a href=\"https://github.com/diesel-rs/diesel/blob/master/CHANGELOG.md#090---2016-12-08\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a></p>",{headings:1818,localImagePaths:1819,remoteImagePaths:1820,frontmatter:1821},[],[],[],{},"changelog/version/v0-8-0",{id:1822,data:1824,body:1830,rendered:1831},{base:677,date:1825,link:1826,provider:1827,slug:1828,title:1829},["Date","2016-10-10T19:31:59.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.8.0",{name:681,label:682},"v0-8-0","v0.8.0","This release is primarily focused around diesel_codegen, which has been entirely rewritten to use the new Macros 1.1 framework. This means that Diesel should continue to work on all future nightlies, and will be much\nmore compatible with other crates which use codegen such as serde. This did reqiure some breaking changes to their API, but it should be a straightforward migration. [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/v0.8.0/CHANGELOG.md) has migration instructions.\n\nThe macros 1.1 rewrite took the majority of our time, so this release is fairly light on features, but we do have a few great quality of life additions. See [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/v0.8.0/CHANGELOG.md) for details.\n\nA huge thank you to all the contributors who worked on this release:\n- Cengiz Can\n- Christopher Brickley\n- David Szotten\n- Georg Semmler\n- Jimmy Cuadra\n- Josh Holmer\n- Rasmus Kaj\n- Robert Maloney\n- Sebastian Blei\n",{html:1832,metadata:1833},"<p>This release is primarily focused around diesel_codegen, which has been entirely rewritten to use the new Macros 1.1 framework. This means that Diesel should continue to work on all future nightlies, and will be much\nmore compatible with other crates which use codegen such as serde. This did reqiure some breaking changes to their API, but it should be a straightforward migration. <a href=\"https://github.com/diesel-rs/diesel/blob/v0.8.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a> has migration instructions.</p>\n<p>The macros 1.1 rewrite took the majority of our time, so this release is fairly light on features, but we do have a few great quality of life additions. See <a href=\"https://github.com/diesel-rs/diesel/blob/v0.8.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a> for details.</p>\n<p>A huge thank you to all the contributors who worked on this release:</p>\n<ul>\n<li>Cengiz Can</li>\n<li>Christopher Brickley</li>\n<li>David Szotten</li>\n<li>Georg Semmler</li>\n<li>Jimmy Cuadra</li>\n<li>Josh Holmer</li>\n<li>Rasmus Kaj</li>\n<li>Robert Maloney</li>\n<li>Sebastian Blei</li>\n</ul>",{headings:1834,localImagePaths:1835,remoteImagePaths:1836,frontmatter:1837},[],[],[],{},"changelog/version/v0-7-2",{id:1838,data:1840,body:1846,rendered:1847},{base:677,date:1841,link:1842,provider:1843,slug:1844,title:1845},["Date","2016-08-20T13:13:50.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.7.2",{name:681,label:682},"v0-7-2","v0.7.2","This is an extremely minor update. It has no changes other than increasing the maximum allowed syntex version, and changing the nightly that we test against in `.travis.yml`\n",{html:1848,metadata:1849},"<p>This is an extremely minor update. It has no changes other than increasing the maximum allowed syntex version, and changing the nightly that we test against in <code>.travis.yml</code></p>",{headings:1850,localImagePaths:1851,remoteImagePaths:1852,frontmatter:1853},[],[],[],{},"changelog/version/v0-7-1",{id:1854,data:1856,body:1862,rendered:1863},{base:677,date:1857,link:1858,provider:1859,slug:1860,title:1861},["Date","2016-08-11T11:40:00.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.7.1",{name:681,label:682},"v0-7-1","v0.7.1","This is a bugfix release containing two major fixes. Most importantly, the `Copy` constraint has been removed from `Identifiable::Id`. This was an oversight which ended up making it impossible to use `#[changeset_for]` with string IDs. This fix does technically constitute a breaking change to public API, but I'm doing this in a patch release as it affects a recently introduced trait and I consider it more of a bugfix. We're still 0.x, so semver doesn't strictly hold yet. Additionally, the macro form of `#[belongs_to]` supported specifying custom foriegn keys, while the procedural form did not. This has been remedied.\n",{html:1864,metadata:1865},"<p>This is a bugfix release containing two major fixes. Most importantly, the <code>Copy</code> constraint has been removed from <code>Identifiable::Id</code>. This was an oversight which ended up making it impossible to use <code>#[changeset_for]</code> with string IDs. This fix does technically constitute a breaking change to public API, but Im doing this in a patch release as it affects a recently introduced trait and I consider it more of a bugfix. Were still 0.x, so semver doesnt strictly hold yet. Additionally, the macro form of <code>#[belongs_to]</code> supported specifying custom foriegn keys, while the procedural form did not. This has been remedied.</p>",{headings:1866,localImagePaths:1867,remoteImagePaths:1868,frontmatter:1869},[],[],[],{},"changelog/version/v0-7-0",{id:1870,data:1872,body:1878,rendered:1879},{base:677,date:1873,link:1874,provider:1875,slug:1876,title:1877},["Date","2016-08-02T08:30:31.000Z"],"https://github.com/diesel-rs/diesel/releases/tag/v0.7.0",{name:681,label:682},"v0-7-0","v0.7.0","The headline feature of this version is associations. Just add `#[belongs_to(User)]` above your struct, and it becomes incredibly easy to manipulate larger batches of data. See http://docs.diesel.rs/diesel/associations/index.html for a full guide.\n\nDiesel is taking a slightly different approach to what you may have seen in the past, which I'm calling \"non-invasive associations\". In contrast to something like Active Record or Ecto, where the association lives on the parent, the data is completely independent. The type of a user and all its posts is `(User, Vec<Post>)`.\n\nThis release also marks the elimination of Diesel's reliance on procedural macros. They're still available as an option, and their usage is recommended. However, a lot of people have had a desire to shy away from them. For all of our code generation that does not perform IO, there is now a completely stable non-procedural macro, which has been designed to work with the [custom_derive](https://github.com/DanielKeep/rust-custom-derive) crate. See [the CHANGELOG](https://github.com/diesel-rs/diesel/blob/v0.7.0/CHANGELOG.md) for a full list.\n\n`diesel_codegen` has been split into two crates. This is a breaking change which will affect 100% of our users. Please see https://github.com/diesel-rs/diesel/commit/36b8801bf5e9594443743e6a7c62e29d3dce36b7 for more information on how to migrate.\n\nThis release has also had a contributor who has gone above and beyond to help out. I'd like to take this opportunity to announce the 4th addition to the Diesel core team, @killercup! Your contributions have been much appreciated, and your code review has been invaluable.\n\nThank you to everybody who contributed to this release.\n- derekdreery\n- kardeiz\n- Michael Macias\n- Mike Piccolo\n- Pascal Hertleif\n- Richard Dodd\n- Tim Brooks\n\nOn to 0.8! With this release, we are approaching the benchmarks I had set for 1.0. We will still have at least 2 more releases before the 1.0 release, but it's quickly becoming the next target. We will be publishing a roadmap soon.\n",{html:1880,metadata:1881},"<p>The headline feature of this version is associations. Just add <code>#[belongs_to(User)]</code> above your struct, and it becomes incredibly easy to manipulate larger batches of data. See <a href=\"http://docs.diesel.rs/diesel/associations/index.html\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">http://docs.diesel.rs/diesel/associations/index.html</a> for a full guide.</p>\n<p>Diesel is taking a slightly different approach to what you may have seen in the past, which Im calling non-invasive associations. In contrast to something like Active Record or Ecto, where the association lives on the parent, the data is completely independent. The type of a user and all its posts is <code>(User, Vec&#x3C;Post>)</code>.</p>\n<p>This release also marks the elimination of Diesels reliance on procedural macros. Theyre still available as an option, and their usage is recommended. However, a lot of people have had a desire to shy away from them. For all of our code generation that does not perform IO, there is now a completely stable non-procedural macro, which has been designed to work with the <a href=\"https://github.com/DanielKeep/rust-custom-derive\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">custom_derive</a> crate. See <a href=\"https://github.com/diesel-rs/diesel/blob/v0.7.0/CHANGELOG.md\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the CHANGELOG</a> for a full list.</p>\n<p><code>diesel_codegen</code> has been split into two crates. This is a breaking change which will affect 100% of our users. Please see <a href=\"https://github.com/diesel-rs/diesel/commit/36b8801bf5e9594443743e6a7c62e29d3dce36b7\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">https://github.com/diesel-rs/diesel/commit/36b8801bf5e9594443743e6a7c62e29d3dce36b7</a> for more information on how to migrate.</p>\n<p>This release has also had a contributor who has gone above and beyond to help out. Id like to take this opportunity to announce the 4th addition to the Diesel core team, @killercup! Your contributions have been much appreciated, and your code review has been invaluable.</p>\n<p>Thank you to everybody who contributed to this release.</p>\n<ul>\n<li>derekdreery</li>\n<li>kardeiz</li>\n<li>Michael Macias</li>\n<li>Mike Piccolo</li>\n<li>Pascal Hertleif</li>\n<li>Richard Dodd</li>\n<li>Tim Brooks</li>\n</ul>\n<p>On to 0.8! With this release, we are approaching the benchmarks I had set for 1.0. We will still have at least 2 more releases before the 1.0 release, but its quickly becoming the next target. We will be publishing a roadmap soon.</p>",{headings:1882,localImagePaths:1883,remoteImagePaths:1884,frontmatter:1885},[],[],[],{}];

export { _astro_dataLayerContent as default };
